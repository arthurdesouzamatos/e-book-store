/*! For license information please see litbDesktop.3a91cc67f62c439daa94.min.js.LICENSE.txt */
(function(){var __webpack_modules__={74860:function(e,t){"use strict";t.default={"ar-AE":"assets/i18n/ed393ad8b79e290300faba990aee51c3.ar-AE.json","bn-IN":"assets/i18n/a26da181ba9ee2b0f73483d5c38794ee.bn-IN.json","cs-CZ":"assets/i18n/579104f934a08960ecbd91113b6c844f.cs-CZ.json","da-DK":"assets/i18n/60b844a66749ac7027cf175028407a6e.da-DK.json","de-DE":"assets/i18n/2c118b1f13e1ac5abac754e98fb4a783.de-DE.json","el-GR":"assets/i18n/85c7ba96ced3ac1b32bb61e5af183812.el-GR.json","en-AE":"assets/i18n/80e25e167eecd2830f59a5e3cb4916b1.en-AE.json","en-AU":"assets/i18n/f87bfcb66b7aaa316e20998c9ce48772.en-AU.json","en-CA":"assets/i18n/77ec74df09d8a0915570f1a6cf961813.en-CA.json","en-GB":"assets/i18n/7527df94295da2c0a22afc70fc8fe56f.en-GB.json","en-IN":"assets/i18n/1aecd32b822d9169abd223a0b0eedad7.en-IN.json","en-NG":"assets/i18n/7277917c24d2f73c9b4db47fe66f4133.en-NG.json","en-SG":"assets/i18n/623022d34fabbdf3412d03602d463062.en-SG.json","en-US":"assets/i18n/91c270ef3d1b01e3deb10eeb98abf882.en-US.json","en-ZA":"assets/i18n/08f52d5319110d65b4340d6f4198749d.en-ZA.json","es-CL":"assets/i18n/95e5eb5e4f8ab668ec00e698c6b7a0f0.es-CL.json","es-CO":"assets/i18n/2bcfb3e43f586273e59d967c8efb7bc0.es-CO.json","es-ES":"assets/i18n/b3e7ed4878bbd2860716c560e0670520.es-ES.json","es-MX":"assets/i18n/d3541521bc59ad6ad5d7db1fe5f371f1.es-MX.json","es-US":"assets/i18n/d034b0174d6c3a83a5255ba653edeedf.es-US.json","fr-BE":"assets/i18n/c37891a5ff5f2682ffaac0a36dccdf5c.fr-BE.json","fr-CA":"assets/i18n/86ef91da526b564776003e8627fbd962.fr-CA.json","fr-FR":"assets/i18n/3b885d9ce355fe8a8269cbbf3cdc8f5b.fr-FR.json","he-IL":"assets/i18n/227d06c7974b01c0e36af6e1bc34a3b2.he-IL.json","hi-IN":"assets/i18n/b51ff75629ed0c095c63f2cac7daa3d2.hi-IN.json","it-IT":"assets/i18n/0e23ffe19b3aea7c824a2008aad438ec.it-IT.json","ja-JP":"assets/i18n/41cb5c71da32f58a75b7d6c6d13c59b3.ja-JP.json","kn-IN":"assets/i18n/e4eb6697ed197818105840a41c47c96c.kn-IN.json","ko-KR":"assets/i18n/165fcf8d8f05ab49e7fe5aa30a03aac8.ko-KR.json","ml-IN":"assets/i18n/00a93322684f406777d99be0df812a31.ml-IN.json","mr-IN":"assets/i18n/7691ccc88222256f4d44c4373520a0c9.mr-IN.json","ms-MY":"assets/i18n/596d970447933c749da9b00ca33f7a22.ms-MY.json","nl-BE":"assets/i18n/e910a3e2119dd34887420e042f97165a.nl-BE.json","nl-NL":"assets/i18n/b8ae29981bfcf887e39b251f68ef5b7a.nl-NL.json","pl-PL":"assets/i18n/323a4758cc5731bb85c041cb1079f85c.pl-PL.json","pt-BR":"assets/i18n/63fcfeabef4f368cb8b2a27382d04d75.pt-BR.json","pt-PT":"assets/i18n/1ba75d4e278987bb8c83129f6d174584.pt-PT.json","sv-SE":"assets/i18n/5795cc0066c15ce0cf3bdfc40c79e818.sv-SE.json","ta-IN":"assets/i18n/9a439c1d4625f1c8bfe1d1be09dd6e98.ta-IN.json","te-IN":"assets/i18n/b51e36d446cfcc03f986fb6292cc4867.te-IN.json","tr-TR":"assets/i18n/098462f61ea513d258e4fd5bd062f9f1.tr-TR.json","zh-CN":"assets/i18n/101cee688bdda4df083d01031e92c7b9.zh-CN.json","zh-TW":"assets/i18n/50b6d1019d67db9f91e427729e009ea5.zh-TW.json"}},97609:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.KatalMetricsDriverSushi=void 0;var i=r(n(60693)),o=r(n(34575)),a=r(n(93913)),s=r(n(78585)),c=r(n(29754)),u=r(n(81506)),l=r(n(2205)),d=r(n(59713)),h=r(n(44864)),f=r(n(22952)),p=r(n(14873)),g={test:"com.amazon.eel.katal.metrics.core.nexus.gamma",prod:"com.amazon.eel.katal.metrics.core.nexus"},m=function(e){function t(e){var n;(0,o.default)(this,t),n=(0,s.default)(this,(0,c.default)(t).call(this)),(0,d.default)((0,u.default)(n),"sushi",void 0),(0,d.default)((0,u.default)(n),"producerId",void 0),(0,d.default)((0,u.default)(n),"sourceGroupId",void 0),(0,d.default)((0,u.default)(n),"errorHandler",void 0),(0,d.default)((0,u.default)(n),"combinedErrorHandler",(function(e){if(n.errorHandler)try{return void n.errorHandler(e)}catch(e){console.error("Error handling error publishing metrics:"),console.error(e)}n.defaultErrorHandler(e)}));var r=e.domain,i=e.realm,a=e.errorHandler,l=e.sushiClient,h=e.sushiProducer,f=void 0===h?"katal":h,p=e.sushiClientOptions,m=e.sushiClientTransportOverride,v=e.sourceGroupId||g[r]||g.test;return n.sushi=l||n.buildSushiClient(r,i,v,p,m),n.errorHandler=a,n.producerId=f,n.sourceGroupId=v,n}return(0,l.default)(t,e),(0,a.default)(t,[{key:"beforeUnload",value:function(e){this.sushi.onSushiUnload(e)}},{key:"defaultErrorHandler",value:function(e){console.error("Error publishing metrics:"),console.error(e)}},{key:"withErrorHandling",value:function(e){try{return e()}catch(e){this.combinedErrorHandler(e)}}},{key:"buildSushiClient",value:function(e,n,r,i,o){if(!e||!n)throw new Error("KatalMetricsDriverSushi requires a domain and realm to build a sushi client.");return new p.default(t.getRealmName(n),r,this.combinedErrorHandler,i,o)}},{key:"publish",value:function(e,t,n){var r=this,o=arguments.length<3?arguments[1]:arguments[2];this.withErrorHandling((function(){if(f.default.List!==e.type){var t=r.mapObjectTypeToNexusSchema(e.type),n=(0,i.default)({},o.context,{metricKey:e.name,value:e.value});e.isMonitor&&(n.isMonitor=!0),r.sushi.reset(),r.sushi.event(n,r.producerId,t,{ssd:1})}else e.metricList.forEach((function(e){r.publish(e,o)}))}))}},{key:"mapObjectTypeToNexusSchema",value:function(e){switch(e){case f.default.String:return"katal.client.metrics.String.2";case f.default.Counter:return"katal.client.metrics.Counter.3";case f.default.Timer:return"katal.client.metrics.Timer.2";default:throw new Error("Unknown type ".concat(e," when publishing metric object."))}}}],[{key:"getRealmName",value:function(e){switch(e){case"NAAmazon":case"USAmazon":return p.default.REGIONS.NA;case"EUAmazon":return p.default.REGIONS.EU;case"FEAmazon":case"JPAmazon":return p.default.REGIONS.FE;case"CNAmazon":return p.default.REGIONS.CN;default:return e}}}]),t}(h.default);t.KatalMetricsDriverSushi=m,(0,d.default)(m,"Builder",function(){function e(){(0,o.default)(this,e),(0,d.default)(this,"context",{})}return(0,a.default)(e,[{key:"withSushiClient",value:function(e){return this.context.sushiClient=e,this}},{key:"withDomainRealm",value:function(e,t){return this.context.domain=e,this.context.realm=t,this}},{key:"withCustomProducer",value:function(e){return this.context.sushiProducer=e,this}},{key:"withCustomSourceGroup",value:function(e){return this.context.sourceGroupId=e,this}},{key:"withErrorHandler",value:function(e){return this.context.errorHandler=e,this}},{key:"withSushiClientOptions",value:function(e){return this.context.sushiClientOptions=e,this}},{key:"withSushiClientTransportOverride",value:function(e){return this.context.sushiClientTransportOverride=e,this}},{key:"build",value:function(){return new m(this.context)}}]),e}())},28277:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(66470);var r=n(97609).KatalMetricsDriverSushi;t.default=r},37700:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=r(n(60693)),a=r(n(34575)),s=r(n(93913)),c=r(n(59713)),u=r(n(11051)),l=r(n(42721)),d=n(28184),h=n(1582),f=["site","serviceName","methodName"],p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(this,e),this.context=(0,o.default)({},t)}return(0,s.default)(e,[{key:"merge",value:function(t){if(!t)return this;if(t instanceof e.Builder)throw new Error("KatalMetricsContext.Builder object passed instead of KatalMetricsContext.  Try calling .build() method.");var n=t instanceof e?t.context:t;return new e((0,o.default)({},this.context,n,{relatedMetrics:(0,d.mergeLists)(this.context.relatedMetrics,n.relatedMetrics),relatedMetricsSingleAction:(0,d.mergeLists)(this.context.relatedMetricsSingleAction,n.relatedMetricsSingleAction)}))}},{key:"withoutRelatedMetricsSingleAction",value:function(){return new e((0,o.default)({},this.context,{relatedMetricsSingleAction:void 0}))}},{key:"driverContext",value:function(){var t=(0,o.default)({},this.context);return delete t.relatedMetrics,delete t.relatedMetricsSingleAction,delete t.requestId,this.context.requestId&&(t.actionId=(0,h.embedRequestId)(t.actionId,this.context.requestId)),new e(t)}},{key:"getFields",value:function(){return(0,o.default)({},this.context)}},{key:"validationError",value:function(){var e=this;return(0,l.default)(f,(function(t){if(null==e.context[t])return new Error("Field ".concat(t," is required, but it is ").concat(e.context[t]))}))||(0,l.default)(Object.keys(this.context),(function(t){return e.validateField(t)}))}},{key:"validateField",value:function(e){var t=this.context[e],n="field ".concat(e);switch(e){case"site":case"serviceName":if(t.indexOf("/")>-1)return new Error("Expected ".concat(n," to contain only valid characters, but it was ").concat(t,".  It cannot contain a slash."));case"methodName":case"actionId":return(0,u.default)(t,n)}}}]),e}();t.default=p,(0,c.default)(p,"Builder",(i=function(){function e(){(0,a.default)(this,e),(0,c.default)(this,"context",{})}return(0,s.default)(e,[{key:"withSite",value:function(e){return this.context.site=e,this}},{key:"withServiceName",value:function(e){return this.context.serviceName=e,this}},{key:"withMethodName",value:function(e){return this.context.methodName=e,this}},{key:"withActionId",value:function(e){return this.context.actionId=e,this}},{key:"withRequestId",value:function(e){return this.context.requestId=e,this}},{key:"withRelatedMetrics",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetrics=t,this}},{key:"addRelatedMetrics",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetrics=(0,d.mergeLists)(this.context.relatedMetrics,t),this}},{key:"withRelatedMetricsSingleAction",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetricsSingleAction=t,this}},{key:"addRelatedMetricsSingleAction",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetricsSingleAction=(0,d.mergeLists)(this.context.relatedMetricsSingleAction,t),this}},{key:"build",value:function(){return new p(this.context)}}]),e}(),i))},8142:function(e,t,n){"use strict";var r=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(34575)),a=i(n(93913)),s=i(n(59713)),c=i(n(71171)),u=i(n(37700)),l=i(n(78116)),d=r(n(95989)),h=i(n(92545)),f=n(28184),p=n(45742),g=n(1582),m=function(e){console.error("Error publishing metrics:"),console.error(e)},v=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new u.default;if((0,o.default)(this,e),(0,s.default)(this,"combinedErrorHandler",(function(e){try{n.errorHandler(e)}catch(t){console.error("Error handling error publishing metrics:"),console.error(t),m(e)}})),i instanceof u.default.Builder)throw new Error("KatalMetricsContext.Builder object passed instead of KatalMetricsContext.  Try calling .build() method.");this.driver=t,this.errorHandler=r,this.context=i instanceof u.default?i:new u.default(i)}return(0,a.default)(e,[{key:"withErrorHandling",value:function(e){try{return e()}catch(e){this.combinedErrorHandler(e)}}},{key:"getAdditionalRelatedMetrics",value:function(e){var t=e instanceof u.default?e.context:e,n=this.getBaseRelatedMetrics();return(0,f.mergeLists)(n,t.relatedMetrics)}},{key:"getBaseRelatedMetrics",value:function(){return(0,f.mergeLists)(this.context.context.relatedMetrics,this.context.context.relatedMetricsSingleAction)}},{key:"publish",value:function(e){var t=this;this.withErrorHandling((function(){if(!e)throw new Error("Cannot publish undefined/null metric object");if(l.default.Types.List===e.type)e.metricList.forEach((function(e){t.publish(e)}));else{var n=t.context.driverContext(),r=n.validationError();if(r)throw r;var i=e.validationError();if(i)throw i;(0,p.dispatchMetricEvent)(e,n),t.driver.publish(e,t.combinedErrorHandler,n)}}))}},{key:"newChildPublisher",value:function(t){return new e(this.driver,this.errorHandler,this.context.merge(t))}},{key:"newChildActionPublisher",value:function(t){var n=this._generateActionid(t),r=this.context.withoutRelatedMetricsSingleAction().merge({actionId:n}).merge(t),i=new e(this.driver,this.errorHandler,r),o=!t||t instanceof u.default.Builder?this.getBaseRelatedMetrics():this.getAdditionalRelatedMetrics(t);return o&&o.forEach((function(e){i.publish(e)})),i}},{key:"newChildActionPublisherChained",value:function(e){var t=this._generateActionid(e),n=(0,g.embedRequestId)(t,this.context.context.requestId),r=[new h.default("parentActionId",n)],i=new u.default({actionId:t,relatedMetricsSingleAction:r}).merge(e);return this.newChildActionPublisher(i)}},{key:"newChildActionPublisherChainedForMethod",value:function(e,t){return this.newChildActionPublisherChained(new u.default({methodName:e}).merge(t))}},{key:"newChildActionPublisherForMethod",value:function(e,t){return this.newChildActionPublisher(new u.default({methodName:e}).merge(t))}},{key:"newChildActionPublisherForInitialization",value:function(e){return this.newChildActionPublisherForMethod("Initialization",e)}},{key:"publishString",value:function(e,t){this.publish(new d.Metric.String(e,t))}},{key:"publishStringTruncate",value:function(e,t){var n=new d.Metric.String(e,t);n.truncate=!0,this.publish(n)}},{key:"publishCounter",value:function(e,t){this.publish(new d.Metric.Counter(e,t))}},{key:"publishTimer",value:function(e,t){this.publish(new d.Metric.Timer(e,t))}},{key:"publishCounterMonitor",value:function(e,t){this.publish(new d.Metric.Counter(e,t).withMonitor())}},{key:"publishTimerMonitor",value:function(e,t){this.publish(new d.Metric.Timer(e,t).withMonitor())}},{key:"_generateActionid",value:function(e){if(e){var t=function(e){return e.context?e.context:e}(e);if(t.actionId)return t.actionId}return(0,c.default)()}}]),e}();t.default=v},25274:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ERROR_HANDLER=void 0,t.DEFAULT_ERROR_HANDLER=function(e){throw e}},44864:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(34575)),o=r(n(93913)),a=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"publish",value:function(e,t,n){throw new Error("KatalMetricsDriver is an abstract class, please choose a driver and use that instead")}}]),e}();t.default=a},42721:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=void 0;return e.some((function(e){return null!=(n=t(e))})),n}},90469:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=Object.values?Object.values:function(e){return Object.keys(e).map((function(t){return e[t]}))};t.default=n},18059:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return"number"!=typeof e?new Error("Expected ".concat(t," to have type 'number', but it was type '").concat((0,i.default)(e),"'")):e<0?new Error("Expected ".concat(t," to be positive, but it was ").concat(e)):function(e){return isFinite(e)&&Math.floor(e)===e}(e)?void 0:new Error("Expected ".concat(t," to be an integer, but it was ").concat(e))};var i=r(n(50008))},11051:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return"string"!=typeof e?new Error("Expected ".concat(t," to be a string, but it was a ").concat((0,i.default)(e))):e.length>127?new Error("Expected ".concat(t," to be less than ").concat(127," characters, but it was ").concat(e.length," characters")):e.length<1?new Error("Expected ".concat(t," to be non-blank")):o.test(e)?void 0:new Error("Expected ".concat(t," to contain only valid characters, but it was ").concat(e,".  It can only contain letters, numbers, and these symbols: .:@_/-"))};var i=r(n(50008)),o=/^[A-Za-z0-9.:@_/-]+$/},1582:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.embedRequestId=function(e,t){return t?[t,e].join("::"):e}},28184:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.mergeLists=function(e,t){return e||t?[].concat((0,i.default)(e||[]),(0,i.default)(t||[])):void 0};var i=r(n(319))},45742:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispatchMetricEvent=function(e,t){"undefined"!=typeof window&&(function(e,t){if("function"==typeof CustomEvent){var n=new CustomEvent("katal.metrics.publish",{detail:{metric:e,context:t.getFields()}});window.dispatchEvent(n)}}(e,t),function(e,t){var n=window.__KATAL_METRICS_EXTENSION__;n&&n.publish(e,t.getFields())}(e,t))}},95989:function(e,t,n){"use strict";var r=n(95318),i=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Publisher",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"Context",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"MetricsDriver",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"ErrorHandler",{enumerable:!0,get:function(){return u.ErrorHandler}}),t.Metric=void 0;var o=i(n(65607));t.Metric=o;var a=r(n(8142)),s=r(n(37700)),c=r(n(44864)),u=n(25274)},10199:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(34575)),o=r(n(93913)),a=r(n(78585)),s=r(n(29754)),c=r(n(16525)),u=r(n(2205)),l=r(n(78116)),d=r(n(18059)),h=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,i.default)(this,t),(n=(0,a.default)(this,(0,s.default)(t).call(this,e))).value=r,n}return(0,u.default)(t,e),(0,o.default)(t,[{key:"add",value:function(e){this.value+=e}},{key:"validationError",value:function(){return(0,c.default)((0,s.default)(t.prototype),"validationError",this).call(this)||(0,d.default)(this.value,"field value in Counter metrics object '".concat(this.name,"'"))}},{key:"value",get:function(){return this._value},set:function(e){this._value=Math.round(e)}},{key:"type",get:function(){return l.default.Types.Counter}},{key:"canMonitor",get:function(){return!0}}]),t}(l.default);t.default=h},16673:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(34575)),o=r(n(93913)),a=r(n(78585)),s=r(n(29754)),c=r(n(2205)),u=r(n(59713)),l=r(n(34053)),d=r(n(92545)),h=function(e){function t(e){return(0,i.default)(this,t),(0,a.default)(this,(0,s.default)(t).call(this,"".concat(t.HTTP_REQUEST_PREFIX,".").concat(e)))}return(0,c.default)(t,e),(0,o.default)(t,[{key:"url",set:function(e){this.setOrDeleteNamedMetricValue(t.URL_SUFFIX,d.default,e)},get:function(){return this.getNamedMetricValue(t.URL_SUFFIX)}},{key:"urlMetric",get:function(){return this.getNamedMetric(t.URL_SUFFIX)}},{key:"statusCode",set:function(e){this.setOrDeleteNamedMetricValue(t.STATUS_CODE_SUFFIX,d.default,e)},get:function(){return this.getNamedMetricValue(t.STATUS_CODE_SUFFIX)}},{key:"statusCodeMetric",get:function(){return this.getNamedMetric(t.STATUS_CODE_SUFFIX)}},{key:"statusText",set:function(e){this.setOrDeleteNamedMetricValue(t.STATUS_TEXT_SUFFIX,d.default,e)},get:function(){return this.getNamedMetricValue(t.STATUS_TEXT_SUFFIX)}},{key:"statusTextMetric",get:function(){return this.getNamedMetric(t.STATUS_TEXT_SUFFIX)}}]),t}(l.default);t.default=h,(0,u.default)(h,"HTTP_REQUEST_PREFIX","HTTPRequest"),(0,u.default)(h,"URL_SUFFIX","URL"),(0,u.default)(h,"STATUS_CODE_SUFFIX","StatusCode"),(0,u.default)(h,"STATUS_TEXT_SUFFIX","StatusText")},40021:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(34575)),o=r(n(78585)),a=r(n(29754)),s=r(n(2205)),c=r(n(59713)),u=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(0,a.default)(t).call(this,t.INITIALIZE_METRIC_NAME))}return(0,s.default)(t,e),t}(r(n(34053)).default);t.default=u,(0,c.default)(u,"INITIALIZE_METRIC_NAME","Initialization")},58981:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(34575)),o=r(n(93913)),a=r(n(78585)),s=r(n(29754)),c=r(n(2205)),u=r(n(20124)),l=r(n(90469)),d=function(e){function t(e){var n;return(0,i.default)(this,t),(n=(0,a.default)(this,(0,s.default)(t).call(this,e))).namedMetrics={},n}return(0,c.default)(t,e),(0,o.default)(t,[{key:"setNamedMetric",value:function(e,t){var n=t(this.getNameForSubMetric(e));n.canMonitor&&(n.isMonitor=this.isMonitor),this.namedMetrics[e]=n}},{key:"setOrDeleteNamedMetricValue",value:function(e,t,n){null==n?this.deleteNamedMetric(e):this.getOrCreateNamedMetric(e,(function(e){return new t(e,n)})).value=n}},{key:"getOrCreateNamedMetric",value:function(e,t){return this.namedMetrics[e]||this.setNamedMetric(e,t),this.namedMetrics[e]}},{key:"getNamedMetric",value:function(e){return this.namedMetrics[e]}},{key:"deleteNamedMetric",value:function(e){delete this.namedMetrics[e]}},{key:"getNamedMetricValue",value:function(e){var t=this.getNamedMetric(e);if(t)return t.value}},{key:"getNameForSubMetric",value:function(e){return"".concat(this.name,".").concat(e)}},{key:"metricList",get:function(){return(0,l.default)(this.namedMetrics)}}]),t}(u.default);t.default=d},78116:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(50008)),o=r(n(34575)),a=r(n(93913)),s=r(n(59713)),c=r(n(11051)),u=r(n(22952)),l=function(){function e(t){(0,o.default)(this,e),this._name=t,this._isMonitor=!1}return(0,a.default)(e,[{key:"withMonitor",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.isMonitor=e,this}},{key:"validationError",value:function(){return void 0!==this.isMonitor&&"boolean"!=typeof this.isMonitor?new Error("Field isMonitor should be a boolean, but it was a ".concat((0,i.default)(this.isMonitor))):(0,c.default)(this.name,"field name")}},{key:"name",get:function(){return this._name}},{key:"metricKey",get:function(){return this._name}},{key:"isMonitor",set:function(e){this._isMonitor=!!e},get:function(){return this._isMonitor}},{key:"canMonitor",get:function(){throw new Error("Subclass of KatalMetricObject must implement canMonitor")}},{key:"type",get:function(){throw new Error("Subclass of KatalMetricObject must implement type getter")}}]),e}();t.default=l,(0,s.default)(l,"Types",u.default)},20124:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(34575)),o=r(n(93913)),a=r(n(78585)),s=r(n(16525)),c=r(n(29754)),u=r(n(2911)),l=r(n(2205)),d=r(n(78116)),h=r(n(42721)),f=function(e){function t(e){return(0,i.default)(this,t),(0,a.default)(this,(0,c.default)(t).call(this,e))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"validationError",value:function(){return(0,h.default)(this.metricList,(function(e){return e.validationError()}))}},{key:"metricList",get:function(){throw new Error("Subclass of KatalMetricObjectList must implement metricList getter")}},{key:"isMonitor",set:function(e){(0,u.default)((0,c.default)(t.prototype),"isMonitor",e,this,!0),this.metricList.forEach((function(t){t.canMonitor&&(t.isMonitor=e)}))},get:function(){return(0,s.default)((0,c.default)(t.prototype),"isMonitor",this)}},{key:"canMonitor",get:function(){return!0}},{key:"type",get:function(){return d.default.Types.List}}]),t}(d.default);t.default=f},92545:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(50008)),o=r(n(34575)),a=r(n(93913)),s=r(n(78585)),c=r(n(81506)),u=r(n(29754)),l=r(n(16525)),d=r(n(2205)),h=r(n(59713)),f=r(n(78116)),p=function(e){function t(e,n){var r;return(0,o.default)(this,t),r=(0,s.default)(this,(0,u.default)(t).call(this,e)),(0,h.default)((0,c.default)(r),"truncate",!1),r.value=n,r}return(0,d.default)(t,e),(0,a.default)(t,[{key:"validationError",value:function(){var e=(0,l.default)((0,u.default)(t.prototype),"validationError",this).call(this);if(e)return e;if("string"!=typeof this.value)return new Error("Expected field value in String metrics object '".concat(this.name,"' to be type string, but it was ").concat((0,i.default)(this.value)));if(this.value.length>t.MAX_SIZE){if(!this.truncate)return new Error("Expected field value in String metrics object '".concat(this.name,"' to be ").concat(t.MAX_SIZE," characters or less, but it was ").concat(this.value.length," characters."));this.value=this.value.substring(0,t.MAX_SIZE)}}},{key:"value",get:function(){return this._value},set:function(e){"number"!=typeof e&&"boolean"!=typeof e||(e=e.toString()),this._value=e}},{key:"type",get:function(){return f.default.Types.String}},{key:"canMonitor",get:function(){return!1}}]),t}(f.default);t.default=p,(0,h.default)(p,"MAX_SIZE",256)},34053:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(34575)),o=r(n(93913)),a=r(n(78585)),s=r(n(29754)),c=r(n(2205)),u=r(n(59713)),l=r(n(58981)),d=r(n(84392)),h=r(n(10199)),f=function(e){function t(e){var n;return(0,i.default)(this,t),(n=(0,a.default)(this,(0,s.default)(t).call(this,e))).setNamedMetric(t.LATENCY_SUFFIX,(function(e){return new d.default(e)})),n.setNamedMetric(t.FAILURE_SUFFIX,(function(e){return new h.default(e,1)})),n}return(0,c.default)(t,e),(0,o.default)(t,[{key:"setFailure",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e?1:0,n=this.failureMetric;n.value=t}},{key:"setSuccess",value:function(){this.setFailure(!1)}},{key:"setLatency",value:function(e){this.latencyMetric.value=e}},{key:"latencyMetric",get:function(){return this.getNamedMetric(t.LATENCY_SUFFIX)}},{key:"failureMetric",get:function(){return this.getNamedMetric(t.FAILURE_SUFFIX)}}]),t}(l.default);t.default=f,(0,u.default)(f,"LATENCY_SUFFIX","Latency"),(0,u.default)(f,"FAILURE_SUFFIX","Failure")},41741:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(34575)),o=r(n(93913)),a=r(n(78585)),s=r(n(29754)),c=r(n(16525)),u=r(n(2205)),l=r(n(78116)),d=r(n(18059)),h=function(e){function t(e,n){var r;return(0,i.default)(this,t),(r=(0,a.default)(this,(0,s.default)(t).call(this,e))).value=n,r}return(0,u.default)(t,e),(0,o.default)(t,[{key:"validationError",value:function(){return(0,c.default)((0,s.default)(t.prototype),"validationError",this).call(this)||(0,d.default)(this.value,"field value in Timer metrics object '".concat(this.name,"'"))}},{key:"value",get:function(){return this._value},set:function(e){this._value=null!=e?Math.round(e):e}},{key:"type",get:function(){return l.default.Types.Timer}},{key:"canMonitor",get:function(){return!0}}]),t}(l.default);t.default=h},84392:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(34575)),o=r(n(93913)),a=r(n(78585)),s=r(n(2911)),c=r(n(29754)),u=r(n(16525)),l=r(n(2205)),d=function(e){function t(e,n){var r;return(0,i.default)(this,t),(r=(0,a.default)(this,(0,c.default)(t).call(this,e,void 0))).start(n),r._value=void 0,r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"start",value:function(e){this._startTime=e||this.now()}},{key:"stop",value:function(e){return this._stopTime=e||this.now()}},{key:"now",value:function(){return performance.now()}},{key:"isStopped",get:function(){return void 0!==this._stopTime}},{key:"value",get:function(){return void 0===(0,u.default)((0,c.default)(t.prototype),"value",this)&&(this.isStopped||this.stop(),(0,s.default)((0,c.default)(t.prototype),"value",this.stopTime-this.startTime,this,!0)),(0,u.default)((0,c.default)(t.prototype),"value",this)},set:function(e){(0,s.default)((0,c.default)(t.prototype),"value",e,this,!0)}},{key:"startTime",get:function(){return this._startTime}},{key:"stopTime",get:function(){return this._stopTime}}]),t}(r(n(41741)).default);t.default=d},22952:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,function(e){e.String="String",e.Counter="Counter",e.Timer="Timer",e.List="List"}(n||(n={}));var r=n;t.default=r},65607:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Object",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"String",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Counter",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"Timer",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"TimerStopwatch",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"TimedAttempt",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Initialization",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"HttpRequest",{enumerable:!0,get:function(){return d.default}});var i=r(n(78116)),o=r(n(92545)),a=r(n(10199)),s=r(n(41741)),c=r(n(84392)),u=r(n(34053)),l=r(n(40021)),d=r(n(16673))},14873:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(59713)),o=r(n(34575)),a=r(n(93913));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.REGIONS.NA,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0;(0,o.default)(this,e);var s=e.createSushiUrl(t,n),c=e.createCsmUserContext(s,i);this.ue_csm=this.setupMockCSMObject(c),this.encapsulatedWindow=this.setupMockWindow(this.ue_csm),this.transportationClientCode(this.ue_csm,window),a&&(this.ue_csm.ue._sBcn={isSupported:!0,send:function(e,t){return a(e,t),!0}}),this.clientCode(this.ue_csm,this.encapsulatedWindow),this.errorHandler=r}return(0,a.default)(e,null,[{key:"createSushiUrl",value:function(t,n){if(!n)throw new Error("Sushi Driver was not provided with a source group.");var r;switch(t){case e.REGIONS.NA:r="unagi-na";break;case e.REGIONS.EU:r="unagi-eu";break;case e.REGIONS.FE:r="unagi-fe";break;case e.REGIONS.CN:r="unagi-cn";break;default:throw new Error("Unrecognized region '".concat(t,"' provided to SushiClient."))}return"https://".concat(r,".amazon.com/1/events/").concat(n)}},{key:"createCsmUserContext",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c({hiPriFlushInterval:1e3,lowPriFlushInterval:1e4,requestId:"1",errorChannel:"jserr",sessionStorageWrapper:void 0,errorHandlerFunction:console.log,sushiUrl:e},t)}},{key:"REGIONS",get:function(){return{NA:"NA",EU:"EU",FE:"FE",CN:"CN"}}}]),(0,a.default)(e,[{key:"event",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return i&&console.log("SushiClient wrapper publishing the following:",{data:e,producerId:t,schemaId:n,options:r}),this.ue_csm.ue.event(e,t,n,r)}},{key:"reset",value:function(){this.ue_csm.ue.event.reset()}},{key:"onSushiFlush",value:function(e){this.ue_csm.ue.onSushiFlush(e)}},{key:"onSushiUnload",value:function(e){this.ue_csm.ue.onSushiUnload(e)}},{key:"setupMockCSMObject",value:function(e){var t=this;return{ue_hpsi:e.hiPriFlushInterval,ue_lpsi:e.lowPriFlushInterval,ue:{ssw:e.sessionStorageWrapper,log:function(e,n){t.errorHandler?t.errorHandler(e):console.log("An error has occurred in SushiClient channel "+n,e)},exec:function(e,t){return e},event:function(e,t,n){console.warn("SushiClient CSM stub called in unsupported manner: event()")},attach:function(e,t,n){n=n||window,window.EventTarget&&window.EventTarget.prototype&&window.EventTarget.prototype.addEventListener?window.EventTarget.prototype.addEventListener.call(n,e,t,!!window.ue_clf):n.addEventListener?n.addEventListener(e,t,!!window.ue_clf):n.attachEvent&&n.attachEvent("on"+e,t)}},ueLogError:e.errorHandlerFunction,ue_surl:e.sushiUrl,ue_id:e.requestId,ue_err_chan:e.errorChannel}}},{key:"setupMockWindow",value:function(e){return{ue_csm:e,ueLogError:e.ueLogError,ue:e.ue,setTimeout:function(e,t){return window.setTimeout(e,t)}}}},{key:"clientCode",value:function(e,t){e.ue.exec((function(e,t){function n(){for(var e=0;e<arguments.length;e++){var n=arguments[e];try{if(!n.isSupported)throw dummyException;var r=x.buildPayload(S,w);return n.send(y,r)}catch(e){}}p({m:"All supported clients failed",attribution:"CSMSushiClient_TRANSPORTATION_FAIL",f:"sushi-client.js",logLevel:"ERROR"},t.ue_err_chan||"jserr")}function r(){if(w.length){for(var e=0;e<R.length;e++)R[e]();n(f._sBcn||{},f._ajx||{}),w=[],E={},S={},m=v=T=_=0}}function i(e){try{return JSON.stringify(e)}catch(e){}return null}function o(n,o,a,s){var c,h=!1;return s=s||{},++P==u&&p({m:"Max number of Sushi Logs exceeded",f:"sushi-client.js",logLevel:"ERROR",attribution:"CSMSushiClient_MAX_CALLS"},t.ue_err_chan||"jserr"),(c=!(P>=u))&&(c=n&&-1<n.constructor.toString().indexOf("Object")&&o&&-1<o.constructor.toString().indexOf("String")&&a&&-1<a.constructor.toString().indexOf("String")),c&&(f.count&&f.count("Event:"+a,1),n.producerId=n.producerId||o,n.schemaId=n.schemaId||a,n.timestamp=function(){var e=new Date,t=function(e){return 10>e?"0"+e:e};return Date.prototype.toISOString?e.toISOString():e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}(),o=Date.now?Date.now():+new Date,a=Math.random().toString().substring(2,12),n.messageId=e.ue_id+"-"+o+"-"+a,s&&!s.ssd&&(n.sessionId=n.sessionId||e.ue_sid,n.requestId=n.requestId||e.ue_id,n.obfuscatedMarketplaceId=n.obfuscatedMarketplaceId||e.ue_mid),(o=i(n))?(o=o.length,(w.length==l||T+o>d)&&r(),T+=o,n={data:x.compressEvent(n)},w.push(n),(s||{}).n?0===k?r():m||(m=t.setTimeout(r,k)):v||(v=t.setTimeout(r,I)),h=!0):h=!1),!h&&e.ue_int&&console.error("Invalid JS Nexus API call"),h}function a(){if(!O){for(var t=0;t<C.length;t++)C[t]();for(t=0;t<R.length;t++)R[t]();w.length&&(e.ue_sbuimp&&e.ue&&e.ue.ssw&&(t=i({dct:S,evt:w}),e.ue.ssw("eeldata",t),e.ue.ssw("eelsts","unk")),n(f._sBcn||{})),O=!0}}function s(e){C.push(e)}function c(e){R.push(e)}var u=1e3,l=499,d=524288,h=function(){},f=e.ue||{},p=f.log||h,g=e.uex||h;(e.uet||h)("bb","ue_sushi_v1",{wb:1});var m,v,y=e.ue_surl||"https://unagi-na.amazon.com/1/events/com.amazon.csm.nexusclient.gamma",b=["messageId","timestamp"],w=[],E={},S={},T=0,_=0,P=0,C=[],R=[],O=!1,k=void 0===e.ue_hpsi?1e3:e.ue_hpsi,I=void 0===e.ue_lpsi?1e4:e.ue_lpsi,x=function(){function e(e){return E[e]="#"+_++,S[E[e]]=e,E[e]}return{compressEvent:function t(n){if(!(n instanceof Function)){if(n instanceof Array){for(var r=[],i=n.length,o=0;o<i;o++)r[o]=t(n[o]);return r}if(n instanceof Object){for(i in r={},n)n.hasOwnProperty(i)&&(r[E[i]?E[i]:e(i)]=-1===b.indexOf(i)?t(n[i]):n[i]);return r}return"string"==typeof n&&(n.length>("#"+_).length||"#"===n.charAt(0))?E[n]?E[n]:e(n):n}},buildPayload:function(){return i({cs:{dct:S},events:w})}}}();!function(){if(f.event&&f.event.isStub){if(e.ue_sbuimp&&e.ue&&e.ue.ssw){var t=e.ue.ssw("eelsts").val;if(t&&"unk"===t&&(t=e.ue.ssw("eeldata").val)){var n;e:{try{n=JSON.parse(t);break e}catch(e){}n=null}n&&n.evt instanceof Array&&n.dct instanceof Object&&(w=n.evt,S=n.dct,w&&S&&(r(),e.ue.ssw("eeldata","{}"),e.ue.ssw("eelsts","scs")))}}f.event.replay((function(e){e[3]=e[3]||{},e[3].n=1,o.apply(this,e)})),f.onSushiUnload.replay((function(e){s(e[0])})),f.onSushiFlush.replay((function(e){c(e[0])}))}}(),f.attach("beforeunload",a),f.attach("pagehide",a),f._cmps=x,f.event=o,f.event.reset=function(){P=0},f.onSushiUnload=s,f.onSushiFlush=c;try{t.P&&t.P.register&&t.P.register("sushi-client",h)}catch(t){e.ueLogError(t,{logLevel:"WARN"})}g("ld","ue_sushi_v1",{wb:1})}),"Nxs-JS-Client")(e,t)}},{key:"transportationClientCode",value:function(e,t){e.ue.exec((function(e,t){var n=function(){},r={send:function(e,r){if(r&&e){var i;if(t.XDomainRequest)(i=new XDomainRequest).onerror=n,i.ontimeout=n,i.onprogress=n,i.onload=n,i.timeout=0;else if(t.XMLHttpRequest){if(!("withCredentials"in(i=new XMLHttpRequest)))throw""}else i=void 0;if(!i)throw"";i.open("POST",e,!0),i.setRequestHeader&&i.setRequestHeader("Content-type","text/plain"),i.send(r)}},isSupported:!0},i={send:function(t,n){if(t&&n){if(!navigator.sendBeacon(t,n))throw"";e.ue_sbuimp&&e.ue&&e.ue.ssw&&e.ue.ssw("eelsts","scs")}},isSupported:!(!navigator.sendBeacon||t.cordova&&t.cordova.platformId&&"ios"==t.cordova.platformId)};e.ue._ajx=r,e.ue._sBcn=i}),"Transportation-clients")(e,t)}}]),e}();t.default=u},3571:function(e,t,n){var r;self,r=(e,t,n,r,i)=>(()=>{var o={522:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});class r extends Error{}},863:()=>{},606:()=>{},800:(e,t,n)=>{"use strict";n.d(t,{Q:()=>a});var r=n(522),i=n(389),o=n(567);class a{constructor(e){this.options=e}build(){var e;const t=a.formatToBookFormat(this.options.bookInformation.format);switch(a.FORMAT_RENDERER_MAP.get(t)){case i.g4.KARAMEL:return Promise.resolve().then(n.bind(n,818)).then((e=>{var t;return null===(t=this.options.rendererSettings.rendererMetricsService)||void 0===t||t.recordCountMetrics(`${o.P.KARAMEL_RENDERER}:${o.P.COUNT}`,1),new e.KaramelBookRenderer(this.options)}));case i.g4.STUCCO:return Promise.resolve().then(n.bind(n,945)).then((e=>{var t;return null===(t=this.options.rendererSettings.rendererMetricsService)||void 0===t||t.recordCountMetrics(`${o.P.STUCCO_RENDERER}:${o.P.COUNT}`,1),new e.StuccoBookRenderer(this.options)}));case i.g4.YJ_HTML:if(!this.options.bookInformation.revision)throw"Can't use YJ renderer because revisionId is missing.";return Promise.resolve().then(n.bind(n,756)).then((({YJHTMLRenderer:e})=>{var t;return null===(t=this.options.rendererSettings.rendererMetricsService)||void 0===t||t.recordCountMetrics(`${o.P.YJHTML_RENDERER}:${o.P.COUNT}`,1),new e(this.options)}));case i.g4.PRINT:return Promise.resolve().then(n.bind(n,191)).then((({PrintRenderer:e})=>{var t;return null===(t=this.options.rendererSettings.rendererMetricsService)||void 0===t||t.recordCountMetrics(`${o.P.PRINT_RENDERER}:${o.P.COUNT}`,1),new e(this.options)}));default:throw null===(e=this.options.rendererSettings.rendererMetricsService)||void 0===e||e.recordCountMetrics(`${o.P.NO_RENDERER}:${o.P.COUNT}`,1),new r.c(`No renderer found for the following format: ${t}`)}}static formatToBookFormat(e){if(e.toLowerCase().startsWith("mobi"))return"MOBI";if("YJ"===e||"YJ_HTML"===e||"IMAGE_JPG"===e)return e;throw new Error("Not Supported Format")}}a.FORMAT_RENDERER_MAP=new Map([["MOBI",i.g4.STUCCO],["YJ",i.g4.KARAMEL],["IMAGE_JPG",i.g4.PRINT],["YJ_HTML",i.g4.YJ_HTML]])},556:(e,t,n)=>{"use strict";var r;n.d(t,{U:()=>i,g:()=>r}),function(e){e.Location="Location",e.Page="Page"}(r||(r={}));class i extends Error{}},345:(e,t,n)=>{"use strict";n.d(t,{BC:()=>s,JC:()=>a,Lo:()=>i,Z0:()=>r});var r,i,o=n(389);!function(e){e.READY="ready",e.LOADING="loading",e.ERROR="error"}(r||(r={})),function(e){e.JUMP="jump",e.NAVIGATE="navigate"}(i||(i={}));const a=e=>{switch(e){case"reading":default:return o.Ch.READING;case"end":return o.Ch.END}},s=e=>{switch(e){case r.LOADING:return o.QS.STATUS_LOADING;case r.READY:return o.QS.STATUS_IDLE;case r.ERROR:default:return o.QS.STATUS_ERROR}}},620:(e,t,n)=>{"use strict";n.d(t,{L:()=>r,q:()=>i});const r={navigationModes:[],navigationDirections:[],marginTop:!1,marginRight:!1,marginBottom:!1,marginLeft:!1,viewportHeight:!1,viewportWidth:!1,viewportTopOffset:!1,colorThemes:[],fontFamilies:[],fontSize:!1,maxNumberColumns:!1,isRendererPropagatedZoom:!1,pageStyle:!1,zoomPercent:!1,localizedStrings:!1,animatePageTurn:!1,guidedViewSettings:!1,zoomViewSettings:!1,wordsOnScreen:!1};function i(e,t,n){return{navigationMode:n.navigationModes.includes(t.navigationMode)?t.navigationMode:e.navigationMode,navigationDirection:n.navigationDirections.includes(t.navigationDirection)?t.navigationDirection:e.navigationDirection,chevronStyle:n.chevronStyle&&t.chevronStyle?t.chevronStyle:e.chevronStyle,marginTop:n.marginTop&&void 0!==t.marginTop?t.marginTop:e.marginTop,marginRight:n.marginRight&&void 0!==t.marginRight?t.marginRight:e.marginRight,marginBottom:n.marginBottom&&void 0!==t.marginBottom?t.marginBottom:e.marginBottom,marginLeft:n.marginLeft&&void 0!==t.marginLeft?t.marginLeft:e.marginLeft,viewportHeight:n.viewportHeight&&void 0!==t.viewportHeight?t.viewportHeight:e.viewportHeight,viewportWidth:n.viewportWidth&&void 0!==t.viewportWidth?t.viewportWidth:e.viewportWidth,viewportTopOffset:n.viewportTopOffset&&void 0!==t.viewportTopOffset?t.viewportTopOffset:e.viewportTopOffset,colorTheme:n.colorThemes.includes(t.colorTheme)?t.colorTheme:e.colorTheme,fontFamily:n.fontFamilies.includes(t.fontFamily)?t.fontFamily:e.fontFamily,fontSize:n.fontSize&&void 0!==t.fontSize?t.fontSize:e.fontSize,maxNumberColumns:n.maxNumberColumns&&void 0!==t.maxNumberColumns?t.maxNumberColumns:e.maxNumberColumns,isRendererPropagatedZoom:n.isRendererPropagatedZoom&&void 0!==t.isRendererPropagatedZoom?t.isRendererPropagatedZoom:e.isRendererPropagatedZoom,pageStyle:n.pageStyle&&void 0!==t.pageStyle?t.pageStyle:e.pageStyle,zoomPercent:n.zoomPercent&&void 0!==t.zoomPercent&&!t.isRendererPropagatedZoom?t.zoomPercent:e.zoomPercent,localizedStrings:n.localizedStrings&&void 0!==t.localizedStrings?t.localizedStrings:e.localizedStrings,animatePageTurn:n.animatePageTurn&&void 0!==t.animatePageTurn?t.animatePageTurn:e.animatePageTurn,guidedViewSettings:n.guidedViewSettings&&void 0!==t.guidedViewSettings?t.guidedViewSettings:e.guidedViewSettings,zoomViewSettings:n.zoomViewSettings&&void 0!==t.zoomViewSettings?t.zoomViewSettings:e.zoomViewSettings,viewingMode:n.viewingMode&&void 0!==t.viewingMode?t.viewingMode:e.viewingMode}}},547:(e,t,n)=>{"use strict";var r,i;n.d(t,{J:()=>i,a:()=>r}),function(e){e.Create="create",e.Update="update",e.Delete="delete",e.Bulk="bulk"}(r||(r={})),function(e){e.Note="kindle.note",e.Highlight="kindle.highlight",e.Bookmark="kindle.bookmark",e.SearchResult="kindle.search"}(i||(i={}))},389:(e,t,n)=>{"use strict";var r,i,o,a;n.d(t,{Ch:()=>o,QS:()=>a,Wi:()=>i,g4:()=>r}),function(e){e.KARAMEL="karamel",e.STUCCO="stucco",e.PRINT="print",e.YJ_HTML="yj-html"}(r||(r={})),function(e){e[e.Reflowable=1]="Reflowable",e[e.Paginated=2]="Paginated",e[e.VerticalScrolling=4]="VerticalScrolling",e[e.FixedFormat=8]="FixedFormat",e[e.FitToWidth=16]="FitToWidth",e[e.GuidedView=32]="GuidedView",e[e.TwoPageMode=64]="TwoPageMode",e[e.PinchToZoom=128]="PinchToZoom",e[e.Search=256]="Search",e[e.ZoomableContent=512]="ZoomableContent"}(i||(i={})),function(e){e[e.READING=0]="READING",e[e.END=1]="END"}(o||(o={})),function(e){e[e.STATUS_LOADING=0]="STATUS_LOADING",e[e.STATUS_IDLE=1]="STATUS_IDLE",e[e.STATUS_ERROR=2]="STATUS_ERROR"}(a||(a={}))},462:()=>{},918:(e,t,n)=>{"use strict";n.d(t,{$z:()=>i,CK:()=>r,ZM:()=>a,nk:()=>o});class r extends Error{constructor(e,t){super(e),this.name=`${t}ContentUnsupported`,this.stack=(new Error).stack,Object.setPrototypeOf(this,r.prototype)}}class i extends Error{constructor(e,t){super(e),this.name=`${t}FailedToGetBookManifestError`,this.stack=(new Error).stack,Object.setPrototypeOf(this,i.prototype)}}class o extends Error{constructor(e,t){super(e),this.name=`${t}ContentNotAllowed`,this.stack=(new Error).stack,Object.setPrototypeOf(this,o.prototype)}}class a extends Error{constructor(e,t){super(e),this.name=`${t}GeoLocationNotAllowed`,this.stack=(new Error).stack,Object.setPrototypeOf(this,a.prototype)}}},80:()=>{},444:()=>{},241:()=>{},129:(e,t,n)=>{"use strict";n.d(t,{x:()=>r});class r{constructor(){this.pageTokens={}}getToken(e){var t;return null!==(t=this.pageTokens[e])&&void 0!==t?t:null}setToken(e,t){this.pageTokens[e]=t}}},387:(e,t,n)=>{"use strict";n.d(t,{X:()=>r,p:()=>i});const r={White:"#000",Night:"#ACACAC",Sepia:"#5D4232",Green:"#3B4B43",Dark:"#ACACAC",Grey:"#FFFFFF"},i={White:"rgb(255, 255, 255)",Night:"rgb(18, 18, 18)",Sepia:"rgb(231, 222, 199)",Green:"rgb(197, 231, 206)",Dark:"rgb(0, 0, 0)",Grey:"rgb(99, 99, 99)"}},492:(e,t,n)=>{"use strict";var r;function i(e){return["rtl","ltr","lrtb","tbrl"].includes(e)}n.d(t,{j:()=>i,l:()=>r}),function(e){e.VERTICAL_RTL="vertical-rl",e.VERTICAL_LTR="vertical-lr",e.HORIZONTAL_RTL="horizontal-rl",e.HORIZONTAL_LTR="horizontal-lr"}(r||(r={}))},456:()=>{},839:(e,t,n)=>{"use strict";n.d(t,{W5:()=>i,fR:()=>a,nl:()=>o});var r=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class i extends Error{constructor(e){super(e),this.name="TimeoutError"}}class o extends Error{constructor(e,t){super(e),this.statusCode=t,this.name="ServerError"}}class a{static fetchJson(e,t){return r(this,void 0,void 0,(function*(){return a.fetch(e,t).then((e=>e.json()))}))}static fetch(e,t){return r(this,void 0,void 0,(function*(){return fetch(e,t).then((e=>{if(e.ok)return e;{const t=[...e.headers];if(e.status===a.GATEWAY_TIMEOUT_STATUS_CODE)throw a.dispatchOfflineEvent(),new i(`[TimeoutError] Timeout occurred while calling the service. Response Headers = ${t}.`);throw new o(`[ServerError] Error occurred while calling the service. Response Headers = ${t}.`,e.status)}})).catch((e=>{throw navigator.onLine||a.dispatchOfflineEvent(),e}))}))}}a.GATEWAY_TIMEOUT_STATUS_CODE=504,a.dispatchOfflineEvent=()=>{window.dispatchEvent(new CustomEvent("customOffline"))}},514:(e,t,n)=>{"use strict";n.d(t,{M:()=>r,r:()=>o});var r,i=n(87);!function(e){e.GET_BOOK_DATA="book-data",e.GO_TO_PAGE="go-to-page",e.GET_RANDOM_PAGE="random-page",e.GET_POSITION_DATA="position-data"}(r||(r={}));class o{}o.fetchBookData=e=>{const t={asin:e};return o.fetchFromSearchInside(r.GET_BOOK_DATA,t)},o.fetchPage=e=>o.fetchFromSearchInside(r.GO_TO_PAGE,e),o.fetchRandomPage=(e,t)=>{const n={asin:e,buyingAsin:t};return o.fetchFromSearchInside(r.GET_RANDOM_PAGE,n)},o.fetchSearchHighlights=(e,t,n,i)=>{return s=function*(){const a={asin:e,query:t,token:null!=i?i:null,page:n};return yield o.fetchFromSearchInside(r.GET_POSITION_DATA,a)},new((a=void 0)||(a=Promise))((function(e,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function r(e){try{i(s.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof a?i:new a((function(e){e(i)}))).then(n,r)}i((s=s.apply(void 0,[])).next())}));var a,s},o.fetchFromSearchInside=(e,t)=>{const n={credentials:"include",headers:new Headers({Accept:"application/json"})},r=o.constructQueryString(t),a=window.location.pathname.startsWith("/litb")?"/litb":"/sample";return(0,i.A)(`${a}/print/${e}?${r}`,n).then((e=>e.json())).then((e=>e)).catch((e=>Promise.reject(e)))},o.constructQueryString=e=>Object.keys(e).map((t=>`${t}=${e[t]}`)).join("&")},453:(e,t,n)=>{"use strict";n.d(t,{D:()=>a});var r=n(514),i=n(839),o=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class a{static karamelReading(e,t,n){return o(this,void 0,void 0,(function*(){const r=Object.assign(Object.assign({},e),{karamelVersion:e.version,kindleSessionId:t});return delete r.version,delete r.encryptionId,a.fetch(`${a.SRS_AUTHENTICATED_ROOT_URL}karamelReading?${new URLSearchParams(r)}&clientVersion=${a.CLIENT_VERSION}`,n)}))}static renderBook(e,t){return o(this,void 0,void 0,(function*(){const n=Object.assign(Object.assign({},e),{token:t.token});delete n.encryptionId;const r=yield a.fetch(`${a.KARAMEL_SERVICE_ROOT_URL}render?${new URLSearchParams(n)}`),i=new Response(r.body,r);return i.headers.set("karamel-rendering-token",JSON.stringify(t)),i}))}static getFileUrl(e,t){return o(this,void 0,void 0,(function*(){const n=t?a.SRS_AUTHENTICATED_ROOT_URL:a.SRS_UNAUTHENTICATED_ROOT_URL;return a.fetchJson(`${n}getFileUrl?${new URLSearchParams(e)}`,t)}))}static getPrintPageUrl(e,t){var n;return o(this,void 0,void 0,(function*(){const i=void 0===e.page||e.token?e:Object.assign(Object.assign({},e),{token:null!==(n=null==t?void 0:t.getToken(e.page))&&void 0!==n?n:null});return r.r.fetchFromSearchInside(r.M.GO_TO_PAGE,i)}))}static fetchJson(e,t){return i.fR.fetchJson(e,a.constructHeaders(t))}static fetch(e,t){return i.fR.fetch(e,a.constructHeaders(t))}static constructHeaders(e){return e?{headers:{"X-ADP-Session-Token":e}}:void 0}}a.SRS_AUTHENTICATED_ROOT_URL="/service/mobile/reader/",a.SRS_UNAUTHENTICATED_ROOT_URL="/service/web/content/",a.KARAMEL_SERVICE_ROOT_URL="/renderer/",a.CLIENT_VERSION="20000100"},369:(e,t,n)=>{"use strict";n.d(t,{f:()=>r});class r{constructor(e){this.metricsService=e,this.recordTimeMetrics=this.metricsService.recordTimeMetrics.bind(this.metricsService),this.recordCountMetrics=this.metricsService.recordCountMetrics.bind(this.metricsService)}asyncTimeExecution(e,t){return n=this,i=function*(){const n=Date.now();try{return yield t()}catch(t){throw this.recordErrorCountMetrics(e,1),t}finally{const t=Date.now();this.recordTimeMetrics(`${e}:ExecutionTime`,t-n)}},new((r=void 0)||(r=Promise))((function(e,t){function o(e){try{s(i.next(e))}catch(e){t(e)}}function a(e){try{s(i.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(o,a)}s((i=i.apply(n,[])).next())}));var n,r,i}recordErrorCountMetrics(e,t,n){this.recordErrorMetrics("ErrorCount",e,t,n)}recordErrorMetrics(e,t,n,r){r?this.recordCountMetrics(`${t}:${e}:${r}`,n):this.recordCountMetrics(`${t}:${e}`,n)}}},498:(e,t,n)=>{"use strict";n.d(t,{aX:()=>c,cr:()=>u,kl:()=>d,qw:()=>s});var r=n(389),i=n(453),o=n(839),a=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class s extends Error{constructor(e){super(e),this.name=this.constructor.name}}class c extends Error{constructor(e){super(e),this.name=this.constructor.name}}class u extends Error{constructor(e){super(e),this.name=this.constructor.name}}class l{constructor(){this.locationMapIsLoaded=!1}getServiceFetch(){return(e,t)=>a(this,void 0,void 0,(function*(){switch(e){case r.g4.STUCCO:return i.D.getFileUrl(t,this.adpToken);case r.g4.KARAMEL:{const e=Object.assign(Object.assign({},t),{locationMap:`${!this.locationMapIsLoaded}`});if(!this.karamelTokenProvider){if(!this.adpToken||!this.sessionId)throw new c;return this.locationMapIsLoaded=!0,i.D.karamelReading(e,this.sessionId,this.adpToken)}return this.renderBookUsingToken(e,this.karamelTokenProvider)}case r.g4.PRINT:return i.D.getPrintPageUrl(t,this.printTokenProvider);default:throw new s}}))}renderBookUsingToken(e,t){return a(this,void 0,void 0,(function*(){try{return yield this.callRenderBook(e,t)}catch(n){if(n instanceof o.nl&&n.statusCode===l.KARAMEL_TOKEN_EXPIRED_STATUS_CODE)return this.karamelToken=void 0,this.callRenderBook(e,t);throw n}}))}callRenderBook(e,t){return a(this,void 0,void 0,(function*(){if(null==this.karamelToken||Date.now()+l.TOKEN_EXPIRED_THRESHOLD>this.karamelToken.expiresAt)try{this.karamelToken=yield t.getToken()}catch(e){throw new u(JSON.stringify(e))}if(!this.karamelToken)throw new c;return this.locationMapIsLoaded=!0,i.D.renderBook(e,this.karamelToken)}))}getCdnPrefetchInfo(){var e,t,n,r;return{cdn:null===(e=this.cdnPrefetchInfo)||void 0===e?void 0:e.cdn,resources:null===(t=this.cdnPrefetchInfo)||void 0===t?void 0:t.resources,karamelToken:null!==(r=null===(n=this.cdnPrefetchInfo)||void 0===n?void 0:n.karamelToken)&&void 0!==r?r:this.karamelToken}}setAdpToken(e){this.adpToken=e}setKaramelToken(e){this.karamelToken=e}setCdnPrefetchInfo(e){this.cdnPrefetchInfo=e}setSessionId(e){this.sessionId=e}setKaramelTokenProvider(e){this.karamelTokenProvider=e}setPrintTokenProvider(e){this.printTokenProvider=e}}l.TOKEN_EXPIRED_THRESHOLD=5e3,l.KARAMEL_TOKEN_EXPIRED_STATUS_CODE=419;class d{withADPToken(e){return this.adpToken=e,this}withSessionId(e){return this.sessionId=e,this}withKaramelTokenProvider(e){return this.karamelTokenProvider=e,this}withKaramelToken(e){return this.karamelToken=e,this}withCdnPrefetchInfo(e){return this.cdnPrefetchInfo=e,this}withPrintTokenProvider(e){return this.printTokenProvider=e,this}populate(e){e.setKaramelTokenProvider(this.karamelTokenProvider),e.setSessionId(this.sessionId),e.setAdpToken(this.adpToken),e.setKaramelToken(this.karamelToken),e.setCdnPrefetchInfo(this.cdnPrefetchInfo),e.setPrintTokenProvider(this.printTokenProvider)}build(){const e=new l;return this.populate(e),e}}},33:(e,t,n)=>{"use strict";function r(e,t,n){let r,i,o=0,a=e.length-1;for(;o<=a;)if(r=Math.floor((o+a)/2),i=n(e[r],t),i<0)o=r+1;else{if(!(i>0))return r;a=r-1}return a>=0?a:o}n.d(t,{r:()=>r})},553:(e,t,n)=>{"use strict";n.d(t,{I:()=>r});const r="k.amazon.com"},479:(e,t,n)=>{"use strict";function r(e){return new Promise(((t,n)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>{t(r.result)},r.onerror=()=>{n("Failed to read blob as data URL.")}}))}function i(e,t){return e/t*72}function o(e){return new Promise(((t,n)=>{e.then((e=>t(e)),(e=>n(e)))}))}n.d(t,{_V:()=>a,fL:()=>r,oj:()=>i,tO:()=>o});const a=e=>{const t={};return e.forEach((({position:e,start:n,end:r,startY:i,endY:o})=>{var a;void 0!==n&&void 0!==r&&void 0!==i&&void 0!==o&&(t[e]=[...null!==(a=t[e])&&void 0!==a?a:[],[n,i,r-n,o-i]])})),t}},275:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});class r{constructor(){this.completed=!1,this.promise=new Promise(((e,t)=>{this.resolver=e,this.rejecter=t}))}resolve(e){if(this.completed)throw"Cannot resolve Deferred, it is already completed.";this.resolver(e),this.completed=!0}reject(e){if(this.completed)throw"Cannot reject Deferred, it is already completed.";this.rejecter(e),this.completed=!0}getPromise(){return this.promise}isCompleted(){return this.completed}}},713:(e,t,n)=>{"use strict";n.d(t,{DA:()=>x,Dt:()=>u,Gu:()=>y,Js:()=>w,LZ:()=>c,Nc:()=>k,Qz:()=>s,RG:()=>r,T8:()=>o,Tv:()=>v,V5:()=>f,YF:()=>S,Yr:()=>R,_1:()=>l,aQ:()=>a,fM:()=>_,fq:()=>E,gj:()=>O,gn:()=>h,gp:()=>T,iB:()=>I,jE:()=>C,nz:()=>p,sg:()=>d,si:()=>P,u4:()=>m,uA:()=>b,vU:()=>g});var r,i=n(824);!function(e){e[e.Android=0]="Android",e[e.iOS=1]="iOS",e[e.unknown=2]="unknown"}(r||(r={}));const o=()=>matchMedia("(orientation: portrait)").matches?"Portrait":matchMedia("(orientation: landscape)").matches?"Landscape":"Portrait",a=e=>{matchMedia("(orientation: landscape)").addListener((t=>{e(t.matches)}))},s=()=>window.innerWidth>768,c=e=>{switch(e){case"Landscape":return window.innerWidth>768;case"Portrait":return window.innerHeight>768}},u=()=>-1!==window.navigator.userAgent.indexOf("Android"),l=()=>-1!==window.navigator.userAgent.indexOf("iPad")||f()&&window.navigator.maxTouchPoints>2,d=()=>-1!==window.navigator.userAgent.indexOf("iPhone")||-1!==window.navigator.userAgent.indexOf("iPod"),h=()=>l()||d(),f=()=>-1!==window.navigator.userAgent.indexOf("Mac OS X"),p=()=>h()&&!/criOS|fxiOS/i.test(navigator.userAgent),g=()=>/Firefox|fxiOS/i.test(navigator.userAgent),m=()=>-1!==window.navigator.userAgent.indexOf("Silk"),v=()=>/Samsung/i.test(navigator.userAgent),y=()=>!!window.smash,b=()=>u()?r.Android:h()?r.iOS:r.unknown,w=()=>/msie\s|trident\/|edge\//i.test(window.navigator.userAgent),E=()=>/Trident\/[78]\.0/.test(window.navigator.userAgent),S=()=>{const e=navigator.userAgent,t=e.indexOf("Android"),n=parseFloat(e.slice(t+8));return t>=0&&n<3},T=()=>p()?Math.min(window.innerHeight,window.document.documentElement.clientHeight):document.documentElement.clientHeight,_=()=>document.documentElement.clientWidth,P=(e=!0)=>{if(h()&&!y()){const t=T(),n=document.getElementById("mainContainer"),r=document.documentElement.clientHeight-window.innerHeight;n&&(e&&window.scrollTo(window.scrollX,window.scrollY-r),n.style.height=`${t}px`,n.style.position="relative")}},C=()=>{if(h()&&!y()){const e=_(),t=document.getElementById("mainContainer");t&&(t.style.width=`${e}px`,t.style.position="relative")}},R=()=>{if(h()&&!y()){const e=_(),t=T(),n=document.documentElement.clientHeight-window.innerHeight,r=document.getElementById("mainContainer");r&&(window.scrollTo(window.scrollX,window.scrollY-n),r.style.width=`${e}px`,r.style.height=`${t}px`,r.style.position="relative")}},O=()=>{const e=_();return T()>=i.JB&&e>=i.QO},k=()=>_()>=i.Bl,I=()=>Math.round(T()*window.devicePixelRatio),x=()=>Math.round(_()*window.devicePixelRatio)},124:(e,t,n)=>{"use strict";n.d(t,{Jf:()=>a,WF:()=>o,ww:()=>r});var r,i=n(87);!function(e){e[e.STATUS_LOADING_FONT=0]="STATUS_LOADING_FONT",e[e.STATUS_LOADING_FONT_DONE=1]="STATUS_LOADING_FONT_DONE",e[e.STATUS_LOADING_FONT_ERROR=2]="STATUS_LOADING_FONT_ERROR"}(r||(r={}));const o=()=>/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)?["woff"]:["woff2"];class a{constructor(){this.fontsBaseUrl="",this.fontIndex=null,this.fontFormats=o(),"undefined"!=typeof litbReaderFonts&&(this.fontIndex=this.initFontIndex()),this.fontsBaseUrl=(()=>{const e=document.getElementById("assetsCfUrl");return e?e.getAttribute("data-assets-cf-url")+"/assets/fonts":""})()}getFontIndex(){return this.fontIndex?Promise.resolve(this.fontIndex):(0,i.A)(this.fontsBaseUrl+"/fonts.json",{}).then((e=>e.json())).then((e=>{for(const t of Object.keys(e))e[t].forEach((e=>{e.fontFiles&&e.fontFiles.forEach((e=>{e.url=this.fontsBaseUrl+"/"+e.fileName}))}));return Promise.resolve(e)}))}selectFontFormat(e){for(const t of e)if(-1!==this.fontFormats.indexOf(t.format))return t;throw new Error("Unable to find suitable font format")}initFontIndex(){const e={};for(const t of Object.keys(litbReaderFonts))e[t]=litbReaderFonts[t].map((e=>{const t=litbReaderFontsMap.find((t=>t.fontFamily===e.fontFamily&&t.fontWeight===e.fontWeight&&t.fontStyle===e.fontStyle&&t.fontStretch===e.fontStretch));if(!t)throw`Missing font face '${e.fontFamily}' for weight = ${e.fontWeight}, style = ${e.fontStyle}, stretch = ${e.fontStretch} in font face URL map`;return{fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontStretch:e.fontStretch,fontMetrics:e.fontMetrics,fontFiles:t.fontFiles}}));return e}}},597:(e,t,n)=>{"use strict";n.d(t,{g6:()=>o,mZ:()=>i,p5:()=>r});const r=["ta","hi","mr","mr","ml","gu"],i=Object.freeze({en:{initialFont:"Bookerly",availableFonts:["Bookerly","AmazonEmber"],unavailableFonts:["OpenDyslexic"]},ja:{initialFont:"TBMincho",availableFonts:["TBMincho","TBGothic"]},zh:{initialFont:"STSongSC",availableFonts:["STSongSC","STHeitiSC"]},"zh-hant":{initialFont:"STHeitiTC",availableFonts:["STHeitiTC","STSongTC"]}}),o=(e,t)=>{var n;const r=null!==(n=i[e])&&void 0!==n?n:i.en;return t&&r.availableFonts.includes(t)?t:r.initialFont}},809:(e,t,n)=>{"use strict";function r(e,t){const n=Object.keys,i=typeof e;return e&&t&&"object"===i&&i===typeof t?n(e).length===n(t).length&&n(e).every((n=>r(e[n],t[n]))):e===t}n.d(t,{q:()=>r})},902:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});class r{constructor(e){this.locations=e}positionToLocation(e){return Math.max(1,this.findLocationInMap(e))}locationToPosition(e){return this.locations[e-1]}findLocationInMap(e){const t=this.locations.length;if(0==t||this.locations[0]>=e)return 1;if(this.locations[t-1]<=e)return t;let n=0,r=t-1;for(;n<r-1;){const t=Math.floor((r+n)/2);this.locations[t]>e?r=t:n=t}return this.locations[r]<=e?r+1:n+1}}var i=n(556),o=n(33);class a{constructor(e){this.locationMap=e,this.labelsMap=new Map,this.pageLabelToNavUnitIndex=new Map,this.constructLabelsMap(),e.locations&&e.locations.length&&(this.locationsConverter=new r(e.locations))}convertPageToPosition(e){const t=this.labelsMap.get(e);return t?Promise.resolve(t):Promise.resolve(0)}convertPositionToPage(e){let t="";const n=this.locationMap.navigationUnit;return n&&e>=n[0].startPosition&&(t=n[(0,o.r)(n,e,a.compareTo)].label),Promise.resolve(t)}convertLocationToPosition(e){var t;const n=null===(t=this.locationsConverter)||void 0===t?void 0:t.locationToPosition(e);if(void 0!==n)return Promise.resolve(n);throw Error(`Location ${e} is invalid for this book`)}convertPositionToLocation(e){var t;const n=null===(t=this.locationsConverter)||void 0===t?void 0:t.positionToLocation(e);if(void 0!==n)return Promise.resolve(n);throw Error(`Position ${e} has no location on this book`)}getLastNavigationUnitStartPosition(){let e=0;const t=this.locationMap.navigationUnit;return t&&(e=t[t.length-1].startPosition),Promise.resolve(e)}getLastLocationPosition(){const e=this.locationMap.locations;return Promise.resolve(e[e.length-1])}getMaximumPageLabel(){const e=this.locationMap.navigationUnit;if(e){const t=[];for(const n of e){const e=Number(n.label);Number.isNaN(e)||t.push(e)}return 0===t.length?e[e.length-1].label:String(Math.max(...t))}return""}getTotalLocations(){return this.locationMap.locations.length}getTotalNavigationUnits(){return this.locationMap.navigationUnit?this.locationMap.navigationUnit.length:0}getNavigationUnitTypes(){var e;const t=[];return this.locationMap.locations&&this.locationMap.locations.length&&t.push(i.g.Location),(null===(e=this.locationMap.navigationUnit)||void 0===e?void 0:e.length)&&t.push(i.g.Page),t}getPageIndexInNavigationUnits(e){const t=this.pageLabelToNavUnitIndex.get(e);return void 0!==t?t:0}getNavigationUnitInitialPositionByIndex(e){const t=this.locationMap.navigationUnit;return t&&t[e]?t[e].startPosition:0}getNavigationUnitLabelByIndex(e){const t=this.locationMap.navigationUnit;if(t&&t[e])return t[e].label}validatePage(e){return this.labelsMap.has(e)}validateLocation(e){return e>0&&e<=this.locationMap.locations.length}static compareTo(e,t){return e.startPosition-t}constructLabelsMap(){const e=this.locationMap.navigationUnit;if(e)for(let t=0;t<e.length;t++)this.labelsMap.set(e[t].label,e[t].startPosition),this.pageLabelToNavUnitIndex.set(e[t].label,t)}}},43:(e,t,n)=>{"use strict";n.d(t,{L:()=>i,a:()=>r});const r={US:{marketplace:"US",domain:"read.amazon.com",region:"us-east-1",storeLink:"www.amazon.com/dp/",thankYouLink:"www.amazon.com/kindle-dbs/thankYouPage",marketplaceId:"ATVPDKIKX0DER"},JP:{marketplace:"JP",domain:"read.amazon.co.jp",region:"ap-northeast-1",storeLink:"www.amazon.co.jp/dp/",thankYouLink:"www.amazon.co.jp/kindle-dbs/thankYouPage",marketplaceId:"A1VC38T7YXB528"},CA:{marketplace:"CA",domain:"read.amazon.ca",region:"us-east-1",storeLink:"www.amazon.ca/dp/",thankYouLink:"www.amazon.ca/kindle-dbs/thankYouPage",marketplaceId:"A2EUQ1WTGCTBG2"},BR:{marketplace:"BR",domain:"ler.amazon.com.br",region:"eu-west-1",storeLink:"www.amazon.com.br/dp/",thankYouLink:"www.amazon.com.br/kindle-dbs/thankYouPage",marketplaceId:"A2Q3Y263D00KWC"},AU:{marketplace:"AU",domain:"read.amazon.com.au",region:"ap-northeast-1",storeLink:"www.amazon.com.au/dp/",thankYouLink:"www.amazon.com.au/kindle-dbs/thankYouPage",marketplaceId:"A39IBJ37TRP1C6"},MX:{marketplace:"MX",domain:"leer.amazon.com.mx",region:"us-east-1",storeLink:"www.amazon.com.mx/dp/",thankYouLink:"www.amazon.com.mx/kindle-dbs/thankYouPage",marketplaceId:"A1AM78C64UM0Y8"},UK:{marketplace:"GB",domain:"read.amazon.co.uk",region:"eu-west-1",storeLink:"www.amazon.co.uk/dp/",thankYouLink:"www.amazon.co.uk/kindle-dbs/thankYouPage",marketplaceId:"A1F83G8C2ARO7P"},DE:{marketplace:"DE",domain:"lesen.amazon.de",region:"eu-west-1",storeLink:"www.amazon.de/dp/",thankYouLink:"www.amazon.de/kindle-dbs/thankYouPage",marketplaceId:"A1PA6795UKMFR9"},FR:{marketplace:"FR",domain:"lire.amazon.fr",region:"eu-west-1",storeLink:"www.amazon.fr/dp/",thankYouLink:"www.amazon.fr/kindle-dbs/thankYouPage",marketplaceId:"A13V1IB3VIYZZH"},IT:{marketplace:"IT",domain:"leggi.amazon.it",region:"eu-west-1",storeLink:"www.amazon.it/dp/",thankYouLink:"www.amazon.it/kindle-dbs/thankYouPage",marketplaceId:"APJ6JRA9NG5V4"},ES:{marketplace:"ES",domain:"leer.amazon.es",region:"eu-west-1",storeLink:"www.amazon.es/dp/",thankYouLink:"www.amazon.es/kindle-dbs/thankYouPage",marketplaceId:"A1RKKUPIHCS9HS"},NL:{marketplace:"NL",domain:"lezen.amazon.nl",region:"eu-west-1",storeLink:"www.amazon.nl/dp/",thankYouLink:"www.amazon.nl/kindle-dbs/thankYouPage",marketplaceId:"A1805IZSGTT6HS"},IN:{marketplace:"IN",domain:"read.amazon.in",region:"eu-west-1",storeLink:"www.amazon.in/dp/",thankYouLink:"www.amazon.in/kindle-dbs/thankYouPage",marketplaceId:"A21TJRUUN4KGV"},CN:{marketplace:"CN",domain:"read.amazon.cn",region:"ap-northeast-1",storeLink:"www.amazon.cn/dp/",thankYouLink:"www.amazon.cn/kindle-dbs/thankYouPage",marketplaceId:"AAHKV2X7AFYLW"},USPreProd:{marketplace:"US",domain:"read-preprod.amazon.com",region:"us-east-1",storeLink:"pre-prod.amazon.com/dp/",thankYouLink:"pre-prod.amazon.com/kindle-dbs/thankYouPage",marketplaceId:"ATVPDKIKX0DER"},JPPreProd:{marketplace:"JP",domain:"read-pre-prod-jp.amazon.com",region:"ap-northeast-1",storeLink:"jp-pre-prod.amazon.com/dp/",thankYouLink:"jp-pre-prod.amazon.com/kindle-dbs/thankYouPage",marketplaceId:"A1VC38T7YXB528"},CAPreProd:{marketplace:"CA",domain:"read-pre-prod-ca.amazon.com",region:"us-east-1",storeLink:"ca-pre-prod.amazon.com/dp/",thankYouLink:"ca-pre-prod.amazon.com/kindle-dbs/thankYouPage",marketplaceId:"A2EUQ1WTGCTBG2"},BRPreProd:{marketplace:"BR",domain:"read-pre-prod-br.amazon.com",region:"eu-west-1",storeLink:"br-pre-prod.amazon.com/dp/",thankYouLink:"br-pre-prod.amazon.com/kindle-dbs/thankYouPage",marketplaceId:"A2Q3Y263D00KWC"},AUPreProd:{marketplace:"AU",domain:"read-pre-prod-au.amazon.com",region:"ap-northeast-1",storeLink:"au-pre-prod.amazon.com/dp/",thankYouLink:"au-pre-prod.amazon.com/kindle-dbs/thankYouPage",marketplaceId:"A39IBJ37TRP1C6"},MXPreProd:{marketplace:"MX",domain:"read-pre-prod-mx.amazon.com",region:"us-east-1",storeLink:"mx-pre-prod.amazon.com/dp/",thankYouLink:"mx-pre-prod.amazon.com/kindle-dbs/thankYouPage",marketplaceId:"A1AM78C64UM0Y8"},UKPreProd:{marketplace:"GB",domain:"read-pre-prod-uk.amazon.com",region:"eu-west-1",storeLink:"uk-pre-prod.amazon.com/dp/",thankYouLink:"uk-pre-prod.amazon.com/kindle-dbs/thankYouPage",marketplaceId:"A1F83G8C2ARO7P"},DEPreProd:{marketplace:"DE",domain:"read-pre-prod-de.amazon.com",region:"eu-west-1",storeLink:"de-pre-prod.amazon.com/dp/",thankYouLink:"de-pre-prod.amazon.com/kindle-dbs/thankYouPage",marketplaceId:"A1PA6795UKMFR9"},FRPreProd:{marketplace:"FR",domain:"read-pre-prod-fr.amazon.com",region:"eu-west-1",storeLink:"fr-pre-prod.amazon.com/dp/",thankYouLink:"fr-pre-prod.amazon.com/kindle-dbs/thankYouPage",marketplaceId:"A13V1IB3VIYZZH"},ITPreProd:{marketplace:"IT",domain:"read-pre-prod-it.amazon.com",region:"eu-west-1",storeLink:"it-pre-prod.amazon.com/dp/",thankYouLink:"it-pre-prod.amazon.com/kindle-dbs/thankYouPage",marketplaceId:"APJ6JRA9NG5V4"},ESPreProd:{marketplace:"ES",domain:"read-pre-prod-es.amazon.com",region:"eu-west-1",storeLink:"es-pre-prod.amazon.com/dp/",thankYouLink:"es-pre-prod.amazon.com/kindle-dbs/thankYouPage",marketplaceId:"A1RKKUPIHCS9HS"},NLPreProd:{marketplace:"NL",domain:"lezen-nl-preprod.dub.xcorp.amazon.com",region:"eu-west-1",storeLink:"nl-pre-prod.amazon.com/dp/",thankYouLink:"nl-pre-prod.amazon.com/kindle-dbs/thankYouPage",marketplaceId:"A1805IZSGTT6HS"},INPreProd:{marketplace:"IN",domain:"read-pre-prod-in.amazon.com",region:"eu-west-1",storeLink:"in-pre-prod.amazon.com/dp/",thankYouLink:"in-pre-prod.amazon.com/kindle-dbs/thankYouPage",marketplaceId:"A21TJRUUN4KGV"},CNPreProd:{marketplace:"CN",domain:"read-pre-prod-cn.amazon.com",region:"ap-northeast-1",storeLink:"cn-pre-prod.amazon.com/dp/",thankYouLink:"cn-pre-prod.amazon.com/kindle-dbs/thankYouPage",marketplaceId:"AAHKV2X7AFYLW"}},i=()=>{switch(window.location.hostname){case r.US.domain:return r.US;case r.JP.domain:return r.JP;case r.CA.domain:return r.CA;case r.BR.domain:return r.BR;case r.AU.domain:return r.AU;case r.MX.domain:return r.MX;case r.UK.domain:return r.UK;case r.DE.domain:return r.DE;case r.FR.domain:return r.FR;case r.IT.domain:return r.IT;case r.ES.domain:return r.ES;case r.NL.domain:return r.NL;case r.IN.domain:return r.IN;case r.CN.domain:return r.CN;case r.USPreProd.domain:return r.USPreProd;case r.JPPreProd.domain:return r.JPPreProd;case r.CAPreProd.domain:return r.CAPreProd;case r.BRPreProd.domain:return r.BRPreProd;case r.AUPreProd.domain:return r.AUPreProd;case r.MXPreProd.domain:return r.MXPreProd;case r.UKPreProd.domain:return r.UKPreProd;case r.DEPreProd.domain:return r.DEPreProd;case r.FRPreProd.domain:return r.FRPreProd;case r.ITPreProd.domain:return r.ITPreProd;case r.ESPreProd.domain:return r.ESPreProd;case r.NLPreProd.domain:return r.NLPreProd;case r.INPreProd.domain:return r.INPreProd;case r.CNPreProd.domain:return r.CNPreProd;default:return r.US}}},567:(e,t,n)=>{"use strict";n.d(t,{P:()=>r});class r{}r.EXECUTION_TIME="ExecutionTime",r.COUNT="Count",r.ERROR_COUNT="ErrorCount",r.SUCCESS="Success",r.ERROR="Error",r.STUCCO="Stucco",r.YJHTML="YjHTML",r.PRINT="Print",r.STUCCO_RENDERER="StuccoRenderer",r.KARAMEL_RENDERER="KaramelRenderer",r.YJHTML_RENDERER="YjHtmlRenderer",r.PRINT_RENDERER="PrintRenderer",r.NO_RENDERER="NoRenderer",r.LOADED_FONTS="LoadedFonts",r.RENDERER_INITIALIZED="RendererInitialized",r.ZOOMABLE_CONTENT_ERROR="ZoomableContentError"},906:(e,t,n)=>{"use strict";n.d(t,{J:()=>i});var r=n(567);class i{constructor(e,t="",n=""){this.metricsService=e,this.prefix=t,this.separator=n}recordCountMetrics(e,t){return this.metricsService.recordCountMetrics(this.prefix+this.separator+e,t)}loadedFonts(e){this.recordCountMetrics(r.P.LOADED_FONTS+this.separator+r.P.SUCCESS,e?1:0),e||this.recordCountMetrics(r.P.LOADED_FONTS+this.separator+r.P.ERROR,1)}rendererInitialized(e){this.recordCountMetrics(r.P.RENDERER_INITIALIZED+this.separator+r.P.SUCCESS,e?1:0),e||this.recordCountMetrics(r.P.RENDERER_INITIALIZED+this.separator+r.P.ERROR,1)}zoomableContentError(){this.recordCountMetrics(r.P.ZOOMABLE_CONTENT_ERROR,1)}}},87:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,j:()=>a});const r=e=>{if(!e.ok||e.status>=400){const t={type:"generic",response:e};return Promise.reject(t)}return Promise.resolve(e)},i=(e,t,n=0)=>{const o=Object.assign({mode:"cors",credentials:"same-origin"},t);return fetch(e,o).catch((e=>{if(navigator.onLine){const t={type:"connection",error:e};return Promise.reject(t)}const t={type:"offline",error:e};return Promise.reject(t)})).then(r).catch((t=>3===n?Promise.reject(t):new Promise(((t,r)=>{setTimeout((()=>{i(e,o,n+1).then(t).catch(r)}),3e3)}))))},o=(e,t={})=>i(e,t),a=(e,t,n={})=>{const r=new Headers(n.headers);r.set("Content-Type","application/json");const i={headers:r,method:"POST"};return i.body=JSON.stringify(t),o(e,i)}},824:(e,t,n)=>{"use strict";n.d(t,{Bl:()=>i,JB:()=>a,QO:()=>r,oz:()=>o});const r=768,i=999,o=992,a=512},191:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PrintRenderer:()=>C});var r=n(323),i=n(620),o=n(389),a=n(345),s=n(233),c=n.n(s),u=n(803),l=n.n(u),d=n(514),h=n(492),f=n(918),p=n(129),g=n(567);class m extends Error{constructor(e,t){super(e),this.nextPageToTry=t}}class v{constructor(e,t,n,r){this.asin=e,this.serviceFetch=t,this.onAddAnnotationsRange=n,this.localizedStrings=r,this.printTokenProvider=new p.x,this.pageToRequestMap={}}getMetadata(){return this.getBookManifest().then((e=>this.constructBookMetadata(e)))}getTableOfContents(){return this.getBookManifest().then((e=>{var t,n;if(e.tableOfContents.length>0){const i=e.tableOfContents.slice();return"print"===e.type&&i.push({label:null!==(n=null===(t=this.localizedStrings)||void 0===t?void 0:t.surpriseMeLabel)&&void 0!==n?n:"Surprise Me!",position:r.SURPRISE_ME_POSITION,inSample:!0}),i}return[]}))}getPageProgressionDirection(e){return(0,h.j)(e)?e:"lrtb"}getBookManifest(){return this.bookManifestPromise||(this.bookManifestPromise=this.getManifest()),this.bookManifestPromise}getManifest(){return this.bookManifestPromise||(this.bookManifestPromise=d.r.fetchBookData(this.asin).then((e=>(this.bookManifest=b(e),this.bookManifest))).catch((e=>{throw new f.$z(`Failed to get manifest for print asin: [${this.asin}], ${e}`,g.P.PRINT)}))),this.bookManifestPromise}getManifestIfAvailable(){return this.bookManifest}getPage(e,t){if(t in this.pageToRequestMap)return this.pageToRequestMap[t];const n=this.printTokenProvider.getToken(t);return this.pageToRequestMap[t]=this.fetchPage(e,e,t,n).then((e=>(delete this.pageToRequestMap[t],e))),this.pageToRequestMap[t]}fetchPage(e,t,n,r){const i={asin:e,buyingAsin:t,page:n,token:r};return this.serviceFetch?this.serviceFetch(o.g4.PRINT,i):d.r.fetchPage(i)}getRandomPage(){return e=this,n=function*(){const e=yield d.r.fetchRandomPage(this.asin,this.asin);return this.printTokenProvider.setToken(e.pageNumber,e.token),e},new((t=void 0)||(t=Promise))((function(r,i){function o(e){try{s(n.next(e))}catch(e){i(e)}}function a(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,a)}s((n=n.apply(e,[])).next())}));var e,t,n}getPageUrls(e){return this.getPage(this.asin,e).then((({jumboImageUrls:e,nextPageToTry:t,error:n})=>{if(!n)return e;if("PAGE_NOT_AVAILABLE_TITLE"===n.title.key)throw new m(n.text.key,t)}))}requestPageHighlights(e){this.onAddAnnotationsRange&&this.onAddAnnotationsRange(e,e)}constructBookMetadata(e){const t=this.getPageProgressionDirection(e.progressionDirection);return{asin:this.asin,bookmarks:e.bookmarks,numberOfPages:e.numberOfPages,language:"",coverUrl:"",pageProgressionDirection:t,navigationDirection:t,hasKindleEdition:e.hasKindleEdition,pageLabelSet:e.pageLabelSet,searchable:e.searchable,srl:-1,zoomable:e.zoomable}}}const y=e=>{let t;return e&&e.split("),(").forEach((e=>{const[n,i,o]=e.replace(")","").replace("(","").split(",");i===r.PageLabel.A&&(t={firstPageIdx:parseInt(n,10),pageLabel:i,actualPageNumber:parseInt(o,10)})})),t},b=e=>{if(e.error&&e.error.text)throw new Error(e.error.text.key);const t=E(e.xPages),n=w(e.bookmarks,t);return{bookmarks:e.bookmarks,imageUrls:e.jumboImageUrls,title:e.title,pages:e.litbPages||[1],numberOfPages:e.numPages,tableOfContents:n,progressionDirection:e.orientation,isFPS:!!e.isFPS,type:e.type,embargoedPages:t,pageLabelSet:e.pageLabelSet,firstPageInfo:y(e.pageLabelSet),searchable:e.searchable,zoomable:e.zoomable,hasKindleEdition:e.hasKindleEdition}},w=(e,t)=>e.map((e=>{const[n,r]=e;return{label:n,position:r,inSample:-1===t.indexOf(r)}})),E=e=>{if(e){const t=e.split(",").filter((e=>e&&e.length>0));return c()(t,(e=>{if(e&&e.indexOf("-")>-1){const[t,n]=e.split("-").map((e=>parseInt(e,10)));return l()(t,n+1)}return[parseInt(e,10)]}))}return[]};var S=n(479),T=n(906),_=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const P={navigationMode:"Scroll",navigationDirection:"Vertical",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,isRendererPropagatedZoom:!1,pageStyle:"margin-bottom: 6px; box-shadow: 0 0 4px 0 rgba(0,0,0,0.5)",zoomPercent:100};class C{constructor(e){var t,n,r,s,c,u,l,d,h;this.status=o.QS.STATUS_LOADING,this.cachedAnnotationPages=new Set;const f=e.rendererSettings.rendererMetricsService;this.metricsUtils=f&&new T.J(f,g.P.PRINT);const p=null!==(n=null===(t=e.rendererSettings.renderingService)||void 0===t?void 0:t.getServiceFetch())&&void 0!==n?n:e.rendererSettings.serviceFetch;this.bookService=new v(e.bookInformation.asin,p,null===(r=e.rendererSettings.rendererCallBacks)||void 0===r?void 0:r.onAddAnnotationsRange,e.renderSettings.localizedStrings);const m=null===(s=e.rendererSettings.rendererCallBacks)||void 0===s?void 0:s.onEndOfBook,y=null!==(c=e.rendererSettings.scrollContainer)&&void 0!==c?c:e.rendererSettings.container;this.viewerConfig={onReadingStatusChanged:m?e=>{m((0,a.JC)(e))}:void 0,onZoom:t=>{var n,r;return null===(r=null===(n=e.rendererSettings.rendererCallBacks)||void 0===n?void 0:n.onZoom)||void 0===r?void 0:r.call(n,t)},viewerRoot:e.rendererSettings.container,scrollContainer:e.rendererSettings.scrollContainer,onClick:null===(u=e.rendererSettings.rendererCallBacks)||void 0===u?void 0:u.onClick,onDoubleClick:null===(l=e.rendererSettings.rendererCallBacks)||void 0===l?void 0:l.onDoubleClick},this.renderSettings=(0,i.q)(P,e.renderSettings,this.getSupportedSettings()),this.onPositionChange=null===(d=e.rendererSettings.rendererCallBacks)||void 0===d?void 0:d.onPositionChange,this.onInitialization=null===(h=e.rendererSettings.rendererCallBacks)||void 0===h?void 0:h.onInitialization,y.addEventListener("scroll",(()=>{var t,n;return null===(n=null===(t=e.rendererSettings.rendererCallBacks)||void 0===t?void 0:t.onScroll)||void 0===n?void 0:n.call(t)}))}render(){return _(this,void 0,void 0,(function*(){if(this.initializationPromise)return this.initializationPromise;yield this.getMetadata();let e=!1;return this.initializationPromise=new Promise(((t,n)=>{this.viewerConfig.onRenderStatusChanged=(r,i)=>{var s,c;this.status=(0,a.BC)(r),e||(r===a.Z0.READY?(this.onInitialization&&this.onInitialization(o.QS.STATUS_IDLE),e=!0,null===(s=this.metricsUtils)||void 0===s||s.rendererInitialized(!0),t()):r===a.Z0.ERROR&&(this.onInitialization&&this.onInitialization(o.QS.STATUS_ERROR),e=!0,null===(c=this.metricsUtils)||void 0===c||c.rendererInitialized(!1),n(new Error(`Failed to initialize the print renderer. ${i}`))))},this.bookViewerPrint=new r.BookViewerPrint(this.viewerConfig,this.bookService,this.renderSettings)})),this.initializationPromise}))}goToPosition(e){var t,n;return _(this,void 0,void 0,(function*(){yield this.render(),yield null===(t=this.bookViewerPrint)||void 0===t?void 0:t.goToPosition(e),null===(n=this.onPositionChange)||void 0===n||n.call(this,e,e)}))}getSettings(){return Object.assign({},this.renderSettings)}updateSettings(e){return _(this,void 0,void 0,(function*(){this.renderSettings=(0,i.q)(this.renderSettings,e,this.getSupportedSettings()),this.bookViewerPrint&&this.bookViewerPrint.applyRenderSettings(this.renderSettings)}))}getMetadata(){return this.bookService.getMetadata()}getTableOfContents(){return this.bookService.getTableOfContents()}getSupportedSettings(){return{navigationModes:["Paginated"],navigationDirections:["Horizontal"],marginTop:!0,marginRight:!0,marginBottom:!0,marginLeft:!0,viewportHeight:!0,viewportWidth:!0,viewportTopOffset:!0,colorThemes:[],fontFamilies:[],fontSize:!1,maxNumberColumns:!1,isRendererPropagatedZoom:!0,pageStyle:!0,zoomPercent:!0,localizedStrings:!0,animatePageTurn:!1,guidedViewSettings:!1,zoomViewSettings:!1,viewingMode:!1,wordsOnScreen:!1}}getStatus(){return this.status}getReadingLocation(){return Promise.resolve(void 0)}canChangeUserSettings(){return!1}canAnnotate(){return!0}setAnnotations(e){var t,n;e.length||(null===(t=this.bookViewerPrint)||void 0===t||t.clearHighlights(),this.cachedAnnotationPages=new Set);const r=e.filter((e=>{var t;return!(null===(t=this.cachedAnnotationPages)||void 0===t?void 0:t.has(e.position))})),i=(0,S._V)(r);null===(n=this.bookViewerPrint)||void 0===n||n.addHighlights(i),r.forEach((e=>this.cachedAnnotationPages.add(e.position)))}canSearch(){var e,t;return null!==(t=null===(e=this.bookService.getManifestIfAvailable())||void 0===e?void 0:e.searchable)&&void 0!==t&&t}}},818:(e,t,n)=>{"use strict";n.r(t),n.d(t,{KaramelBookRenderer:()=>m,MINIMUM_SIDE_MARGIN:()=>g});var r=n(762),i=n(389),o=n(620);class a extends Error{constructor(...e){super(...e)}}class s{static convertToC(e){const t=[];return e.entries&&e.entries.forEach((e=>{t.push(this.convertToC(e))})),{position:e.tocPositionId,label:e.label,inSample:!1,subitems:t}}static fontChoiceToFontFamily(e){return"AmazonEmber"===e?"Amazon Ember":e}static getKaramelContentType(e){switch(e){case"EBOK":return"FullBook";case"EBSP":return"Sample";default:throw new a("Content Type not supported in Karamel")}}static getKaramelTheme(e){var t;return null!==(t=s.THEME_MAP.get(e))&&void 0!==t?t:"default"}static mapNavigationMode(e){return s.NAVIGATION_MODE_MAP[e]}static mapNavigationDirection(e){return s.NAVIGATION_DIRECTION_MAP[e]}}s.THEME_MAP=new Map([["White","default"],["Night","night"],["Sepia","sepia"],["Green","green"],["Dark","dark"],["Grey","grey"]]),s.NAVIGATION_MODE_MAP={Paginated:0,Scroll:1},s.NAVIGATION_DIRECTION_MAP={Horizontal:"Horizontal",Vertical:"Vertical"};var c=n(479),u=n(547),l=n(902);const d={navigationModes:["Paginated","Scroll"],navigationDirections:["Horizontal","Vertical"],chevronStyle:!0,marginTop:!0,marginRight:!0,marginBottom:!0,marginLeft:!0,viewportHeight:!0,viewportWidth:!0,viewportTopOffset:!1,colorThemes:["White","Night","Dark","Green","Sepia","Grey"],fontFamilies:["Bookerly","AmazonEmber","TBGothic","TBMincho","OpenDyslexic"],fontSize:!0,maxNumberColumns:!0,isRendererPropagatedZoom:!1,pageStyle:!1,zoomPercent:!1,animatePageTurn:!0,guidedViewSettings:!0,zoomViewSettings:!0,viewingMode:!0,wordsOnScreen:!0},h={fontFamilies:[],fontSize:!1,wordsOnScreen:!1},f={navigationMode:"Paginated",navigationDirection:"Horizontal",marginTop:20,marginRight:20,marginBottom:20,marginLeft:20,viewportHeight:400,viewportWidth:600,colorTheme:"White",fontFamily:"Bookerly",fontSize:11,maxNumberColumns:2,viewingMode:"FullPage",guidedViewSettings:{isEnabled:!0}};var p=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const g=20;class m{constructor(e){this.renderSettings=f,this.renderSettings=(0,o.q)(f,e.renderSettings,d),this.container=e.rendererSettings.container,this.setMargins(this.renderSettings),this.options=this.constructClientOptions(Object.assign(Object.assign({},e),{renderSettings:Object.assign(Object.assign({},this.renderSettings),{marginRight:g,marginLeft:g,viewportWidth:this.renderSettings.viewportWidth-this.renderSettings.marginLeft-this.renderSettings.marginRight})})),this.client=r.DefaultKaramelClientFactory.build(this.options),this.client&&e.rendererSettings.rendererCallBacks&&this.wireCallbacksToClientEvents(this.client,e.rendererSettings.rendererCallBacks)}goToPosition(e){return p(this,void 0,void 0,(function*(){yield this.client.goToPositionId(e)}))}render(){return p(this,void 0,void 0,(function*(){return this.client.goToPositionId(0)}))}getSettings(){return Object.assign({},this.renderSettings)}setMargins(e){this.container.style.left=e.marginLeft+"px",this.container.style.width=e.viewportWidth-e.marginLeft-e.marginRight+"px",this.container.style.top=e.marginTop+"px",this.container.style.height=e.viewportHeight-e.marginTop-e.marginBottom+"px"}updateSettings(e){return p(this,void 0,void 0,(function*(){const t=this.renderSettings.marginLeft!==e.marginLeft||this.renderSettings.marginRight!==e.marginRight||this.renderSettings.marginTop!==e.marginTop||this.renderSettings.marginBottom!==e.marginBottom,n=this.renderSettings.viewportWidth!==e.viewportWidth||this.renderSettings.viewportHeight!==e.viewportHeight;this.renderSettings=(0,o.q)(this.renderSettings,e,this.getSupportedSettings()),(t||n)&&this.setMargins(this.renderSettings);const r=Object.assign(Object.assign({},this.options.bookRenderOptions),{marginTop:0,marginRight:(0,c.oj)(g,m.DEFAULT_DPI),marginBottom:0,marginLeft:(0,c.oj)(g,m.DEFAULT_DPI),pageWidth:this.renderSettings.viewportWidth-this.renderSettings.marginLeft-this.renderSettings.marginRight,pageHeight:this.renderSettings.viewportHeight-this.renderSettings.marginTop-this.renderSettings.marginBottom,fontFamily:s.fontChoiceToFontFamily(this.renderSettings.fontFamily),fontSize:(0,c.oj)(this.renderSettings.fontSize,m.DEFAULT_DPI),theme:s.getKaramelTheme(this.renderSettings.colorTheme),maxNumberColumns:this.renderSettings.maxNumberColumns,viewingMode:this.renderSettings.viewingMode}),i=Object.assign(Object.assign({},this.options.guidedViewOptions),{isEnabled:this.renderSettings.guidedViewSettings.isEnabled,animationDuration:this.renderSettings.guidedViewSettings.animationDuration,letterboxingColor:this.renderSettings.guidedViewSettings.letterboxingColor,showFullPageOnEnter:this.renderSettings.guidedViewSettings.showFullPageOnEnter,showFullPageOnExit:this.renderSettings.guidedViewSettings.showFullPageOnExit}),a=this.renderSettings.zoomViewSettings?Object.assign(Object.assign({},this.options.zoomViewOptions),{animationDuration:this.renderSettings.zoomViewSettings.animationDuration,maxZoomRatio:this.renderSettings.zoomViewSettings.maxZoomRatio,initialZoomRatio:this.renderSettings.zoomViewSettings.initialZoomRatio,doubleClickZoomRatio:this.renderSettings.zoomViewSettings.doubleClickZoomRatio}):void 0;this.options=Object.assign(Object.assign({},this.options),{navigationMode:s.mapNavigationMode(this.renderSettings.navigationMode),navigationDirection:s.mapNavigationDirection(this.renderSettings.navigationDirection),animatePageTurn:this.renderSettings.animatePageTurn,bookRenderOptions:r,guidedViewOptions:i,zoomViewOptions:a}),yield this.client.updateRenderOptions({bookRenderOptions:this.options.bookRenderOptions,navigationOptions:{navigationMode:this.options.navigationMode,navigationDirection:this.options.navigationDirection,animatePageTurn:this.options.animatePageTurn},guidedViewOptions:this.options.guidedViewOptions,zoomViewOptions:this.options.zoomViewOptions})}))}getSupportedSettings(){var e;let t=d;return"FixedFormat"===(null===(e=this.metadata)||void 0===e?void 0:e.bookType)&&(t=Object.assign(Object.assign({},t),h)),t}clearSelection(){return p(this,void 0,void 0,(function*(){yield this.client.clearSelection()}))}setAnnotations(e){const t=e.map((e=>class{static convertAnnotationToDecoration(e){return{startPositionId:e.start,endPositionId:e.end,type:this.getDecorationType(e.type),highlightColor:e.highlightColor}}static getDecorationType(e){switch(e){case u.J.Bookmark:return"bookmark";case u.J.Highlight:return"highlight";case u.J.Note:return"note";case u.J.SearchResult:return"search";default:throw new Error(`Annotation type ${e} not supported`)}}}.convertAnnotationToDecoration(e)));this.client.setDecorations(t)}getMetadata(){return p(this,void 0,void 0,(function*(){const e=yield this.client.getMetadata(),t=yield this.client.getManifest(),n="rtl"===e.progressionDirection?"rtl":"ltr",r={asin:this.options.asin,srl:e.srl,pageProgressionDirection:n,navigationDirection:n,bookType:t.bookType,acr:t.acr,firstPosition:e.firstPositionId,endPosition:e.lastPositionId,publisherPanel:t.publisherPanel};return this.metadata=r,r}))}getTableOfContents(){return p(this,void 0,void 0,(function*(){return this.client.getTableOfContents().map((e=>s.convertToC(e)))}))}wireCallbacksToClientEvents(e,t){e.on("onPageChange",(e=>{t&&t.onPositionChange&&t.onPositionChange(e.startPositionId,e.endPositionId,e.wordsInPage)})),e.on("onClick",(e=>{(null==t?void 0:t.onClick)&&t.onClick(e)})),e.on("onDoubleClick",(e=>{(null==t?void 0:t.onDoubleClick)&&t.onDoubleClick(e)})),e.on("onSwipeLeft",(e=>{(null==t?void 0:t.onSwipeLeft)&&t.onSwipeLeft(e)})),e.on("onSwipeRight",(e=>{(null==t?void 0:t.onSwipeRight)&&t.onSwipeRight(e)})),e.on("onSwipeUp",(e=>{(null==t?void 0:t.onSwipeUp)&&t.onSwipeUp(e)})),e.on("onSwipeDown",(e=>{(null==t?void 0:t.onSwipeDown)&&t.onSwipeDown(e)})),e.on("onScroll",(()=>{(null==t?void 0:t.onScroll)&&t.onScroll()})),e.on("onHighlightClick",(e=>{(null==t?void 0:t.onHighlightClick)&&t.onHighlightClick(e.highlightStartPosition,e.highlightEndPosition,e.highlightRangeClass)})),e.on("onNoteClick",(e=>{(null==t?void 0:t.onNoteClick)&&t.onNoteClick(e)})),e.on("onSelectionEnded",(e=>{t&&t.onSelectionEnded&&t.onSelectionEnded(e.tokens,e.container,e.selectionClass)})),e.on("onInBookLinkClick",(e=>{t&&t.onInternalLinkClick&&t.onInternalLinkClick(e)})),e.on("onViewingModeChange",(e=>{t&&t.onViewingModeChange&&t.onViewingModeChange(e)})),e.on("onExceedingBoundsChanged",(e=>{t&&t.onExceedingBoundsChanged&&t.onExceedingBoundsChanged(e.exceeding)}))}constructClientOptions(e){var t,n,o;const a=e.bookInformation,u=e.renderSettings,l=e.rendererSettings,d=null!==(n=null===(t=l.renderingService)||void 0===t?void 0:t.getServiceFetch())&&void 0!==n?n:l.serviceFetch,h=new r.ServiceBookProviderFactory(s.getKaramelContentType(a.contentType),(e=>{if(d)return d(i.g4.KARAMEL,e);throw new Error("Missing Service Fetch")}),l.rendererMetricsService,null===(o=l.renderingService)||void 0===o?void 0:o.getCdnPrefetchInfo());let f="2.0";l.imageSecurityEnabled&&(f="2.5"),l.requireGuidedViewMetadata&&(f="3.0");const p=this.renderSettings.zoomViewSettings?{animationDuration:this.renderSettings.zoomViewSettings.animationDuration,maxZoomRatio:this.renderSettings.zoomViewSettings.maxZoomRatio,initialZoomRatio:this.renderSettings.zoomViewSettings.initialZoomRatio,doubleClickZoomRatio:this.renderSettings.zoomViewSettings.doubleClickZoomRatio}:void 0;return{asin:a.asin,revision:a.revision,container:l.container,fullPage:l.fullPage,interactionLayer:l.interactionLayer,navigationMode:s.mapNavigationMode(u.navigationMode),navigationDirection:s.mapNavigationDirection(u.navigationDirection),bookProviderFactory:h,animatePageTurn:u.animatePageTurn,enableInteractivity:l.enableInteractivity,enablePinchHandler:l.enablePinchHandler,metricsService:l.rendererMetricsService,requireHighResolutionImages:l.requireHighResolutionImages,renderBatchSize:l.renderBatchSize,bundleImages:l.bundleImages,mountPageCanvas:l.mountPageCanvas,canvasPoolSize:l.canvasPoolSize,canvasPixelRatio:l.canvasPixelRatio,enablePagePanning:l.enablePagePanning,bookRenderOptions:{version:f,dpi:m.DEFAULT_DPI,fontSize:(0,c.oj)(u.fontSize,m.DEFAULT_DPI),fontFamily:s.fontChoiceToFontFamily(u.fontFamily),lineHeight:1.4,marginTop:0,marginBottom:0,marginLeft:(0,c.oj)(u.marginLeft,m.DEFAULT_DPI),marginRight:(0,c.oj)(u.marginRight,m.DEFAULT_DPI),pageWidth:u.viewportWidth,pageHeight:u.viewportHeight-u.marginTop-u.marginBottom,includeLocationMap:!0,maxNumberColumns:u.maxNumberColumns,theme:s.getKaramelTheme(u.colorTheme)},skipNavigationToInternalLink:e.skipNavigationToInternalLink,guidedViewOptions:{isEnabled:this.renderSettings.guidedViewSettings.isEnabled,animationDuration:this.renderSettings.guidedViewSettings.animationDuration,letterboxingColor:this.renderSettings.guidedViewSettings.letterboxingColor,showFullPageOnEnter:this.renderSettings.guidedViewSettings.showFullPageOnEnter,showFullPageOnExit:this.renderSettings.guidedViewSettings.showFullPageOnExit},zoomViewOptions:p}}getPagePositionRange(){var e,t;return{startPosition:Number(null===(e=this.client.getCurrentPage())||void 0===e?void 0:e.startPositionId),endPosition:Number(null===(t=this.client.getCurrentPage())||void 0===t?void 0:t.endPositionId)}}canAnnotate(){return!0}getPositionMapper(){return new l.w(this.client.getLocationMap())}goToNextPage(){return this.client.nextPage()}goToPreviousPage(){return this.client.previousPage()}hasNextPage(){return this.client.hasNextPage()}hasPreviousPage(){return this.client.hasPreviousPage()}canSearch(){var e;return"FixedFormat"!==(null===(e=this.metadata)||void 0===e?void 0:e.bookType)}isReady(){return this.client.isReady()}disablePinchHandler(){return this.client.disablePinchHandler()}enablePinchHandler(){return this.client.enablePinchHandler()}}m.DEFAULT_DPI=160},945:(e,t,n)=>{"use strict";n.r(t),n.d(t,{StuccoBookRenderer:()=>M});var r,i,o,a=n(616),s=n.n(a);!function(e){e[e.STATUS_ERROR=0]="STATUS_ERROR",e[e.STATUS_LOADING=1]="STATUS_LOADING",e[e.STATUS_PAGINATING=2]="STATUS_PAGINATING",e[e.STATUS_PAGINATED=3]="STATUS_PAGINATED",e[e.STATUS_DONE=4]="STATUS_DONE"}(r||(r={})),function(e){e[e.ERROR_LOAD_FAILURE=0]="ERROR_LOAD_FAILURE",e[e.ERROR_CONTAINER_NOT_FOUND=1]="ERROR_CONTAINER_NOT_FOUND",e[e.ERROR_UNABLE_TO_GET_BOOK_CONTENT=2]="ERROR_UNABLE_TO_GET_BOOK_CONTENT",e[e.ERROR_UNABLE_TO_GET_WORD_RECTS=3]="ERROR_UNABLE_TO_GET_WORD_RECTS",e[e.ERROR_TIMEOUT_WHILE_LOADING_BOOK_CONTENT=4]="ERROR_TIMEOUT_WHILE_LOADING_BOOK_CONTENT",e[e.ERROR_UNKNOWN=5]="ERROR_UNKNOWN"}(i||(i={})),function(e){e.PAGE_LOAD_INCOMPLETE_FLAG_NAME="PageLoadIncomplete"}(o||(o={}));var c=n(124),u=n(87);class l extends c.Jf{getFontFaces(e){return this.getFontIndex().then((t=>Promise.all(t[e].map((t=>{const n=this.selectFontFormat(t.fontFiles),r=new URL(n.url);r.searchParams.set("f","2");const i=n.url?r.href:n.fileName?n.fileName:"";return(0,u.A)(i,{}).then((e=>e.blob())).then((n=>({fontFamily:e,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontStretch:t.fontStretch,fontData:n,fontMetrics:t.fontMetrics})))})))))}}var d=n(620),h=n(389),f=n(387),p=n(492),g=n(713),m=n(597),v=n(479),y=n(556);class b{constructor(e,t){this.locationConverter=e,this.totalNavigationUnits=t}convertLocationToPosition(e){return(0,v.tO)(this.locationConverter.positionFromLocation(e))}convertPositionToLocation(e){return(0,v.tO)(this.locationConverter.locationFromPosition(e))}convertPageToPosition(e){return Promise.resolve(0)}convertPositionToPage(e){return Promise.resolve("")}getPageIndexInNavigationUnits(e){return 0}getNavigationUnitInitialPositionByIndex(e){return 0}getNavigationUnitLabelByIndex(e){}getLastNavigationUnitStartPosition(){return this.convertLocationToPosition(this.totalNavigationUnits)}getLastLocationPosition(){return this.convertLocationToPosition(this.totalNavigationUnits)}getMaximumPageLabel(){return""}getTotalLocations(){return this.totalNavigationUnits}getTotalNavigationUnits(){return this.totalNavigationUnits}getNavigationUnitTypes(){return[y.g.Location]}validatePage(e){return!1}validateLocation(e){return e>0&&e<=this.totalNavigationUnits}}var w=n(275);const E={navigationModes:["Paginated"],navigationDirections:["Horizontal"],marginTop:!0,marginRight:!0,marginBottom:!0,marginLeft:!0,viewportHeight:!0,viewportWidth:!0,viewportTopOffset:!1,colorThemes:["White"],fontFamilies:[],fontSize:!1,maxNumberColumns:!0,isRendererPropagatedZoom:!1,pageStyle:!1,zoomPercent:!1,animatePageTurn:!1,guidedViewSettings:!1,zoomViewSettings:!1,viewingMode:!1,wordsOnScreen:!1},S=Object.freeze({TextLayout:function(e){var t;if(m.p5.includes(e))return{};const{availableFonts:n}=null!==(t=m.mZ[e])&&void 0!==t?t:m.mZ.en;return{fontFamilies:n,fontSize:!0}}});var T=n(567),_=n(906),P=n(918),C=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const R=[6,9,12,14,16,18,20],O={columns:{num:2,gap:30},backgroundColor:"white",textColor:"black"},k="next",I="prev",x={navigationMode:"Paginated",navigationDirection:"Horizontal",colorTheme:"White",fontFamily:void 0,fontSize:17.6,marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,maxNumberColumns:2},A=e=>{const t=[];for(const n of R){const r=parseFloat((e*n/14).toFixed(1));t.push(r)}return{fontSizes:t,fontSizeUnits:"px"}},L=e=>"data:application/font-woff2;base64"+e.substring(e.indexOf(","));class M{constructor(e){var t,n,i,o,a;this.renderSettings=x,this.requestedSettings=x,this.supportedSettings=E,this.stuccoInitialized=!1,this.stuccoStatus=r.STATUS_LOADING,this.fontStatus=c.ww.STATUS_LOADING_FONT_DONE,this.refreshForced=!1,this.pagePositionRange=void 0,this.zoomableList=null,this.currentZoomableIndex=0,this.zoomedState=!1,this.zoomableDirection=null,this.pendingOperations=[],this.bookInformation=e.bookInformation,this.factoryOptions=e,this.stucco=KindleRenderer;const s=this.factoryOptions.rendererSettings.rendererMetricsService;this.metricsUtils=s&&new _.J(s,T.P.STUCCO),this.endOfBookCallback=null===(t=e.rendererSettings.rendererCallBacks)||void 0===t?void 0:t.onEndOfBook,this.onPositionChange=null===(n=e.rendererSettings.rendererCallBacks)||void 0===n?void 0:n.onPositionChange,this.onRendererStatusChanged=null===(i=e.rendererSettings.rendererCallBacks)||void 0===i?void 0:i.onRendererStatusChanged,this.onInitialization=null===(o=e.rendererSettings.rendererCallBacks)||void 0===o?void 0:o.onInitialization,this.onFontLoadingStatusChanged=null===(a=e.rendererSettings.rendererCallBacks)||void 0===a?void 0:a.onFontLoadingStatusChanged,this.renderId=e.rendererSettings.container.id,this.container=e.rendererSettings.container,this.fontLoader=new l,this.requestedSettings=e.renderSettings,this.renderSettings=(0,d.q)(this.renderSettings,e.renderSettings,this.getSupportedSettings()),this.updateMargins(this.renderSettings)}getMetadata(){return this.getStuccoMetadata().then((e=>{var t,n,r,i,o,a,s,c,u,l,d;const h="comic"===(null===(n=null===(t=e.headerMetadata)||void 0===t?void 0:t.bookType)||void 0===n?void 0:n.toLowerCase())||"children"===(null===(i=null===(r=e.headerMetadata)||void 0===r?void 0:r.bookType)||void 0===i?void 0:i.toLowerCase()),f=M.getPageProgressionDirection(e);return{asin:e.asin,comicBook:"comic"===(null===(a=null===(o=e.headerMetadata)||void 0===o?void 0:o.bookType)||void 0===a?void 0:a.toLowerCase()),childrenBook:"children"===(null===(c=null===(s=e.headerMetadata)||void 0===s?void 0:s.bookType)||void 0===c?void 0:c.toLowerCase()),coverPosition:e.positions.cover,coverUrl:e.cover,endPosition:e.endPosition,language:M.getLanguage(e),pageProgressionDirection:f,navigationDirection:f,srl:(null===(l=null===(u=this.bookInformation)||void 0===u?void 0:u.stuccoBookInformation)||void 0===l?void 0:l.startReadingPosition)||e.positions.srl,startPosition:e.startPosition,regionMagnification:"true"===(null===(d=e.headerMetadata)||void 0===d?void 0:d.regionMagnification),bookType:h?"FixedFormat":"Reflowable"}}))}getCapabilities(){return this.getStuccoMetadata().then((e=>{var t,n;if("true"===(null===(t=e.headerMetadata)||void 0===t?void 0:t.fixedLayout)){let t=h.Wi.FixedFormat|h.Wi.Paginated;return"true"===(null===(n=e.headerMetadata)||void 0===n?void 0:n.regionMagnification)&&(t|=h.Wi.ZoomableContent),t}return h.Wi.Reflowable|h.Wi.Paginated|h.Wi.TwoPageMode}))}getTableOfContents(){return this.getStuccoBookInfoProviderFactory().then((e=>{let t=[];return e.getManifest((n=>{if(n.ncxResource){const r=n.resourceManifest[n.ncxResource.toString()].name;let i={};e.getResourceUrls((e=>{i=e}),(()=>{throw new Error("Failed to get resource URLs.")}),[r]),t=this.getTocItems(i[r])}}),(()=>{throw new P.$z("Failed to get book manifest.",T.P.STUCCO)})),t}))}render(){return C(this,void 0,void 0,(function*(){yield this.initializeStuccoData();let e=!1;return new Promise(((t,n)=>{var i,o;this.renderSettings.fontFamily||(this.renderSettings.fontFamily=(e=>{var t;const n=null===(t=null==e?void 0:e.headerMetadata)||void 0===t?void 0:t.app_contentLanguageTag;return m.g6(n||null,null)})(this.stuccoMetadata));const a=this.bookInformation,s=this.bookInfoProviderFactory,c=jQuery.Deferred().resolve(null===(i=a.stuccoBookInformation)||void 0===i?void 0:i.startReadingPosition),u={version:"99.0",bookInfo:s,containerId:this.renderId,startingPositionDfd:c.promise()},l={statusCallback:i=>C(this,void 0,void 0,(function*(){var o,a,s,c;this.setStuccoStatus(i.status),this.zoomedState&&i.status===r.STATUS_DONE&&this.activateZoomableOnPageTurn(),e||i.status!==r.STATUS_DONE&&i.status!==r.STATUS_ERROR||(i.status===r.STATUS_DONE?(this.onInitialization&&this.onInitialization(h.QS.STATUS_IDLE),this.handlePositionChanges(),null===(o=this.metricsUtils)||void 0===o||o.rendererInitialized(!0),t(),yield this.getFontFamilySettings(this.renderSettings.fontFamily)):(this.onInitialization&&this.onInitialization(h.QS.STATUS_ERROR),null===(a=this.metricsUtils)||void 0===a||a.rendererInitialized(!1),n(new Error(`Failed to initialize Stucco renderer. Stucco error id: ${null!==(s=i.errorCode)&&void 0!==s?s:"unknown"}. Stucco error msg: ${JSON.stringify(null!==(c=i.errorMsg)&&void 0!==c?c:"unknown")}.`))),this.zoomableList=this.stucco.getZoomableList(),e=!0),i.status===r.STATUS_DONE&&this.handlePositionChanges()})),contentInterfaceCallbacks:{gotoPosition:e=>C(this,void 0,void 0,(function*(){return yield this.goToPosition(e),e}))}},d=Object.assign(Object.assign(Object.assign({},O),A(this.renderSettings.fontSize)),{fontFamily:this.renderSettings.fontFamily,columns:{num:M.getNumberOfColumns(null!==(o=this.renderSettings.maxNumberColumns)&&void 0!==o?o:2,this.renderSettings.viewportWidth,this.renderSettings.viewportHeight),gap:30}});this.stucco.initialize(u,d,l,null)}))}))}redraw(){return new Promise((e=>{this.stucco.onWindowResize(),e()}))}clear(){this.stucco&&this.stucco.shutdown()}goToPosition(e){return C(this,void 0,void 0,(function*(){this.stuccoInitialized||(yield this.render()),this.stucco.gotoPosition(e)}))}goToNextPage(){let e=!0;if(this.zoomedState&&this.zoomableList?e=this.goToNextZoomable():this.isRendererReady()&&!this.hasNextPage()?this.endOfBookCallback&&this.endOfBookCallback(h.Ch.END):(e=this.stucco.nextScreen(),this.clearZoomables()),this.hasNextPage()||this.getStatus()===h.QS.STATUS_LOADING){if(e)return Promise.resolve();{const e=new w.B;return this.pendingOperations.push(e),e.getPromise()}}return Promise.reject()}goToPreviousPage(){let e=!0;if(this.zoomedState&&this.zoomableList?e=this.goToPrevZoomable():(this.endOfBookCallback&&this.endOfBookCallback(h.Ch.READING),e=this.stucco.previousScreen(),this.clearZoomables()),this.hasPreviousPage()||this.getStatus()===h.QS.STATUS_LOADING){if(e)return Promise.resolve();{const e=new w.B;return this.pendingOperations.push(e),e.getPromise()}}return Promise.reject()}hasNextPage(){return this.zoomedState&&this.zoomableList&&this.zoomableList.length>0&&this.currentZoomableIndex<this.zoomableList.length-1||this.stucco.hasNextScreen()}hasPreviousPage(){return this.zoomedState&&this.zoomableList&&this.zoomableList.length>0&&this.currentZoomableIndex>0||this.stucco.hasPreviousScreen()}updateSettings(e){var t;return C(this,void 0,void 0,(function*(){this.requestedSettings=Object.assign(Object.assign({},this.requestedSettings),e);const n=(0,d.q)(this.renderSettings,e,this.getSupportedSettings());n.fontFamily&&n.fontSize&&(yield this.setFont(n.fontFamily,n.fontSize));const r=n.colorTheme||"White",i={columns:{num:M.getNumberOfColumns(null!==(t=n.maxNumberColumns)&&void 0!==t?t:2,n.viewportWidth,n.viewportHeight),gap:30},backgroundColor:f.p[r],textColor:f.X[r]},o=this.renderSettings.marginTop!==n.marginTop||this.renderSettings.marginBottom!==n.marginBottom||this.renderSettings.marginLeft!==n.marginLeft||this.renderSettings.marginRight!==n.marginRight;o&&this.updateMargins(n),(o||this.renderSettings.viewportWidth!==n.viewportWidth||this.renderSettings.viewportHeight!==n.viewportHeight)&&this.stucco.onWindowResize(),this.renderSettings=n,this.stucco.updateSettings(i)}))}updateMargins(e){this.container.style.top=e.marginTop+"px",this.container.style.paddingBottom=e.marginTop+e.marginBottom+"px",this.container.style.left=e.marginLeft+"px",this.container.style.paddingRight=e.marginLeft+e.marginRight+"px"}setFont(e,t){return C(this,void 0,void 0,(function*(){e===this.renderSettings.fontFamily&&t===this.renderSettings.fontSize||(this.renderSettings.fontFamily=e,this.renderSettings.fontSize=t,this.setFontLoadingStatus(c.ww.STATUS_LOADING_FONT),yield this.getFontFamilySettings(e).then((e=>{this.setFontLoadingStatus(c.ww.STATUS_LOADING_FONT_DONE),this.stucco.updateSettings(Object.assign(Object.assign({},e),A(t)))})))}))}getSettings(){return Object.assign({},this.renderSettings)}getSupportedSettings(){return this.supportedSettings}updateSupportedSettings(e){this.supportedSettings=e,this.updateSettings(this.requestedSettings)}updateSupportedSettingsFromMetadata(){var e;return C(this,void 0,void 0,(function*(){const t=yield this.getStuccoMetadata();"true"===(null===(e=t.headerMetadata)||void 0===e?void 0:e.fixedLayout)||this.updateSupportedSettings(Object.assign(Object.assign({},this.supportedSettings),S.TextLayout(M.getLanguage(t))))}))}handleClick(e,t){return this.stucco.handleClick(e,t)}handleDoubleClick(e,t){this.clickZoomableContent(e,t)}hasZoomableContent(){return!!this.zoomableList&&this.zoomableList.length>0}isZoomed(){return this.zoomedState}getStatus(){return M.convertRendererStatus(this.stuccoStatus,this.fontStatus)}retryStuccoIntialization(e,t=5,n=1e3){return new Promise(((r,i)=>{e().then(r).catch((o=>{setTimeout((()=>{1!==t?this.retryStuccoIntialization(e,t-1,n).then(r,i):i(o)}),n)}))}))}getManifestCallback(e){return C(this,void 0,void 0,(function*(){return new Promise(((t,n)=>e.getMetadata((r=>C(this,void 0,void 0,(function*(){var i,o,a,s,c,u;r?(this.stuccoMetadata=r,this.locationConverter=e.getLocationConverter(),this.stuccoMetadata.endLocation=null!==(u=null!==(o=null===(i=this.stuccoMetadata.locationsInfo)||void 0===i?void 0:i.numOfLocations)&&void 0!==o?o:yield null===(a=this.locationConverter)||void 0===a?void 0:a.locationFromPosition(null!==(c=null===(s=this.stuccoMetadata)||void 0===s?void 0:s.endPosition)&&void 0!==c?c:0))&&void 0!==u?u:0,this.updateSupportedSettingsFromMetadata(),t()):n(new Error("Failed to get stucco metadata: metadata object is undefined."))}))),(()=>{n(new Error("Failed to get stucco metadata."))}))))}))}initializeStuccoData(){return this.stuccoDataPromise||(this.stuccoDataPromise=new Promise(((e,t)=>{var n,r;const i=this.factoryOptions,o=null!==(r=null===(n=i.rendererSettings.renderingService)||void 0===n?void 0:n.getServiceFetch())&&void 0!==r?r:i.rendererSettings.serviceFetch,a=e=>{if(o)return o(h.g4.STUCCO,e);throw new Error("Missing Service Fetch")};this.bookInformation.asin||t(new Error("asin cannot be empty"));const s=KindleReaderBookInfoProviderFactory(),c=this.bookInformation,{stuccoBookInformation:u}=c,l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(c,["stuccoBookInformation"]);this.retryStuccoIntialization((()=>s.initialize(Object.assign(Object.assign(Object.assign({},l),u),{srl:null==u?void 0:u.startReadingPosition}),a))).then((()=>{this.bookInfoProviderFactory=s,this.getManifestCallback(s).then(e).catch(t)})).catch((e=>t(new Error("Failed to initialize stucco book info provider factory. "+JSON.stringify(e)))))}))),this.stuccoDataPromise}getStuccoMetadata(){return this.stuccoMetadata?Promise.resolve(this.stuccoMetadata):this.initializeStuccoData().then((()=>this.stuccoMetadata))}getStuccoBookInfoProviderFactory(){return this.bookInfoProviderFactory?Promise.resolve(this.bookInfoProviderFactory):this.initializeStuccoData().then((()=>this.bookInfoProviderFactory))}getTocItems(e){const t=[];return(new DOMParser).parseFromString(e,"text/xml").querySelectorAll("navPoint").forEach((e=>{const n=e.querySelector(":scope > navLabel > text"),r=e.querySelector(":scope > content");if(n&&r&&r.hasAttribute("src")){const e=n.textContent,i=parseInt(r.getAttribute("src"),10);e&&s()(i)&&t.push({label:e,position:i,inSample:!0})}})),t}clickZoomableContent(e,t){var n,r;const i=this.stucco.getZoomableAt(e,t);this.zoomedState&&(this.zoomableList&&this.zoomableList.length&&this.zoomableList[this.currentZoomableIndex]&&this.handleZoomableDeactivate(this.zoomableList[this.currentZoomableIndex]),this.currentZoomableIndex=-1,this.zoomedState=!1),i&&i.activate?(this.zoomableList&&this.zoomableList.length||this.prepareZoomables(),this.zoomableList&&this.zoomableList.length&&(this.currentZoomableIndex=this.zoomableList.findIndex((e=>e.isSame(i))),this.zoomableList[this.currentZoomableIndex]&&(this.handleZoomableActivate(this.zoomableList[this.currentZoomableIndex]),this.zoomedState=!0,null===(n=document.getElementById(this.renderId))||void 0===n||n.setAttribute("zoomed","1")),this.endOfBookCallback&&this.endOfBookCallback(h.Ch.READING))):null===(r=document.getElementById(this.renderId))||void 0===r||r.setAttribute("zoomed","0")}handleZoomableActivate(e){var t;try{e.activate()}catch(e){null===(t=this.metricsUtils)||void 0===t||t.zoomableContentError(),console.error("Failed to activate zoomable",e)}}handleZoomableDeactivate(e){var t;try{e.deactivate()}catch(e){null===(t=this.metricsUtils)||void 0===t||t.zoomableContentError(),console.error("Failed to deactivate zoomable",e)}}goToNextZoomable(){return!!this.zoomableList&&(0===this.zoomableList.length?this.goToFirstZoomableOnNextPage():(this.handleZoomableDeactivate(this.zoomableList[this.currentZoomableIndex]),this.endOfBookCallback&&this.endOfBookCallback(h.Ch.READING),this.currentZoomableIndex<this.zoomableList.length-1?(this.handleZoomableActivate(this.zoomableList[++this.currentZoomableIndex]),!0):this.goToFirstZoomableOnNextPage()))}goToPrevZoomable(){return!!this.zoomableList&&(0===this.zoomableList.length?this.goToLastZoomableOnPrevPage():(this.handleZoomableDeactivate(this.zoomableList[this.currentZoomableIndex]),this.endOfBookCallback&&this.endOfBookCallback(h.Ch.READING),this.currentZoomableIndex>0?(this.handleZoomableActivate(this.zoomableList[--this.currentZoomableIndex]),!0):this.goToLastZoomableOnPrevPage()))}goToFirstZoomableOnNextPage(){if(this.clearZoomables(),this.stucco.hasNextScreen()){this.zoomableDirection=k;const e=this.stucco.nextScreen();return e&&this.activateZoomableOnPageTurn(),e}return this.endOfBookCallback&&(this.zoomedState=!1,this.endOfBookCallback(h.Ch.END)),!1}goToLastZoomableOnPrevPage(){if(this.clearZoomables(),this.hasPreviousPage()){this.zoomableDirection=I;const e=this.stucco.previousScreen();return e&&this.activateZoomableOnPageTurn(),e}return!1}clearZoomables(){this.zoomableList=null}prepareZoomables(){this.zoomableList=this.stucco.getZoomableList(),this.zoomedState=this.zoomedState&&!!this.zoomableList}activateZoomableOnPageTurn(){this.prepareZoomables(),this.zoomableList&&this.zoomableList.length>0&&(this.zoomableDirection===I?(this.currentZoomableIndex=this.zoomableList.length-1,this.handleZoomableActivate(this.zoomableList[this.currentZoomableIndex])):this.zoomableDirection===k&&(this.currentZoomableIndex=0,this.handleZoomableActivate(this.zoomableList[this.currentZoomableIndex])),this.zoomableDirection=null)}isRendererReady(){return this.stuccoStatus===r.STATUS_PAGINATED||this.stuccoStatus===r.STATUS_DONE}loadFontFaces(e){return this.fontLoader.getFontFaces(e).then((t=>Promise.all(t.map((t=>v.fL(t.fontData).then((n=>({fontFamily:e,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontStretch:t.fontStretch,fontDataUrl:L(n)})))))))).then((e=>{var t;return null===(t=this.metricsUtils)||void 0===t||t.loadedFonts(!0),this.onFontLoadingStatusChanged&&this.onFontLoadingStatusChanged(c.ww.STATUS_LOADING_FONT_DONE),e})).catch((()=>{var e;throw null===(e=this.metricsUtils)||void 0===e||e.loadedFonts(!1),this.onFontLoadingStatusChanged&&this.onFontLoadingStatusChanged(c.ww.STATUS_LOADING_FONT_ERROR),new Error("Failed to load fonts.")}))}getFontFamilySettings(e){return"TBGothic"!==e&&"TBMincho"!==e||!g.gn()&&!g.V5()?this.loadFontFaces(e).then((t=>({fontFamily:e,fontFaces:t}))):Promise.resolve({fontFamily:"TBGothic"===e?"Hiragino Sans":"Hiragino Mincho ProN",fontFaces:[]})}setFontLoadingStatus(e){this.fontStatus=e,this.resolveRendererStatus(this.stuccoStatus,this.fontStatus)}setStuccoStatus(e){if(this.stuccoStatus=e,this.stuccoStatus!==r.STATUS_DONE&&this.stuccoStatus!==r.STATUS_PAGINATED&&this.stuccoStatus!==r.STATUS_ERROR||(this.pendingOperations.forEach((e=>e.resolve())),this.pendingOperations.length=0),this.stuccoStatus===r.STATUS_ERROR){if(!this.stuccoInitialized&&!this.refreshForced)return this.refreshForced=!0,this.stucco.onWindowResize(),void this.resolveRendererStatus(this.stuccoStatus,this.fontStatus);const e=`pageFailedRendering: Stucco Error ${r.STATUS_ERROR}`;throw new Error(e)}this.stuccoStatus!==r.STATUS_DONE&&this.stuccoStatus!==r.STATUS_PAGINATED||(this.stuccoInitialized=!0),this.resolveRendererStatus(this.stuccoStatus,this.fontStatus)}resolveRendererStatus(e,t){const n=M.convertRendererStatus(e,t);this.onRendererStatusChanged&&this.onRendererStatusChanged(n)}static convertRendererStatus(e,t){let n;return n=e===r.STATUS_LOADING||e===r.STATUS_PAGINATING?h.QS.STATUS_LOADING:h.QS.STATUS_IDLE,n}static getPageProgressionDirection(e){var t,n;return(null===(t=e.headerMetadata)||void 0===t?void 0:t.app_PrimaryWritingMode)===p.l.VERTICAL_RTL||(null===(n=e.headerMetadata)||void 0===n?void 0:n.app_PrimaryWritingMode)===p.l.HORIZONTAL_RTL?"rtl":"ltr"}static getLanguage(e){var t;return(null===(t=e.headerMetadata)||void 0===t?void 0:t.app_contentLanguageTag)?e.headerMetadata.app_contentLanguageTag:e.language?e.language:(console.error("Language is not defined"),"")}handlePositionChanges(){var e,t;const n=this.getPagePositionRange(),r=(null==n?void 0:n.endPosition)!==(null===(e=this.pagePositionRange)||void 0===e?void 0:e.endPosition)||(null==n?void 0:n.startPosition)!==(null===(t=this.pagePositionRange)||void 0===t?void 0:t.startPosition);this.onPositionChange&&r&&(this.pagePositionRange=this.getPagePositionRange(),this.onPositionChange(this.pagePositionRange.startPosition,this.pagePositionRange.endPosition))}getPagePositionRange(){var e,t;return{startPosition:null===(e=this.stucco.getPagePositionRange())||void 0===e?void 0:e.currentTopOfPage,endPosition:null===(t=this.stucco.getPagePositionRange())||void 0===t?void 0:t.currentBottomOfPage}}canChangeUserSettings(){return!1}canAnnotate(){return!1}getPositionMapper(){var e;if(this.locationConverter&&this.stuccoMetadata)return new b(this.locationConverter,null!==(e=this.stuccoMetadata.endLocation)&&void 0!==e?e:0);throw new Error("Location converter and stucco metadata must be defined first")}static getNumberOfColumns(e,t,n){return t<n?1:e}canSearch(){return!1}}},756:(e,t,n)=>{"use strict";n.r(t),n.d(t,{YJHTMLRenderer:()=>R});var r=n(323),i=n(124),o=n(389),a=n(345),s=n(620),c=n(87),u=n(43),l=n(492),d=n(918),h=n(567);const f="styles.css",p="fonts.json",g="toc.json",m=new Map;m.set("us-east-1","d374oxlv7wyffd"),m.set("eu-west-1","d2i0w0hu6hvxgc"),m.set("ap-northeast-1","d2574jtht5dtd0");const v=(e,t)=>{const n=u.L().region,r=m.get(n)||m.get("us-east-1");return new URL(e+"/"+t,"https://"+r+".cloudfront.net/").toString()};class y{constructor(e,t){this.asin=e,this.revisionId=t,this.bookDirUrl=v(e,t)}getMetadata(){return this.getManifest().then((e=>{const t=new URL(e.coverImage,v(this.asin,this.revisionId)+"/").toString(),n=(0,l.j)(e.progressionDirection)?e.progressionDirection:"ltr";return{asin:this.asin,coverUrl:t,language:e.language,srl:e.srl,pageProgressionDirection:n,navigationDirection:n}}))}getTableOfContents(){return this.getManifest().then((e=>e.resources.some((e=>e.name===g))?this.getResourceAsObject(g).then((e=>e.map((e=>({position:e.pid,label:e.label,inSample:e.inSample,subitems:e.subitems}))))):null))}getContent(){if(this.contentPromise)return this.contentPromise;const e=new URL(this.bookDirUrl+"/content.json");return this.contentPromise=(0,c.A)(e.toString(),{}).then((e=>e.json())),this.contentPromise}getManifest(){return this.getContent().then((e=>0===Object.keys(e).length?Promise.reject("Manifest is empty"):{language:e.language,writingMode:e.writingMode,progressionDirection:e.progressionDirection,srl:e.srl,coverImage:e.coverImage,sections:e.sections.map((e=>({startPosition:e.startPosition,endPosition:e.endPosition}))),resources:w(e)})).catch((e=>{throw new d.$z(`Failed to get book manifest for YJ book with asin: [${this.asin}]. ${e}`,h.P.YJHTML)}))}getSectionContent(e){return this.getContent().then((t=>t.sections[e].content))}getAllContent(){return this.getContent().then((e=>e.sections.map((e=>e.content))))}getResourceUrl(e){const t=this.bookDirUrl+"/"+e;return Promise.resolve(t)}getResourceAsString(e){if(e===f)return this.getContent().then((e=>e.stylesheet));if(e===p)return Promise.reject("cannot fetch "+e+" as string");{const t=new URL(this.bookDirUrl+"/"+e);return(0,c.A)(t.toString(),{}).then((e=>e.text()))}}getResourceAsBlob(e){if(e===f||e===p)return Promise.reject("cannot fetch "+e+" as blob");{const t=new URL(this.bookDirUrl+"/"+e);return(0,c.A)(t.toString(),{}).then((e=>e.blob()))}}getResourceAsObject(e){if(e===f)return Promise.reject("cannot fetch "+e+" as object");if(e===p)return this.getContent().then((e=>b(e)?e.fonts:[]));{const t=new URL(this.bookDirUrl+"/"+e);return(0,c.A)(t.toString(),{}).then((e=>e.json()))}}}const b=e=>!!(e.fonts.length&&e.fonts.length>0),w=e=>{const t=[];t.push({assetType:"stylesheet",name:f,mimeType:"text/css"});for(const n of e.images)t.push({assetType:"image",name:n.name,mimeType:n.mimeType,imageWidth:n.width,imageHeight:n.height});if(b(e)){t.push({assetType:"font_index",name:p,mimeType:"application/json"});for(const n of e.fonts)for(const e of n.fontFiles)t.push({assetType:"font",name:e.fileName,mimeType:"font/"+e.format})}return t.push({assetType:"toc",name:g,mimeType:"application/json"}),t};var E=n(556);const S="Position mapper operation unsupported in YJ HTML Renderer";class T{constructor(e,t){this.renderer=e,this.maximumLocation=t}convertLocationToPosition(e){return Promise.resolve(this.renderer.pidToPixel(e))}convertPositionToLocation(e){return Promise.resolve(this.renderer.pixelToPid(e))}convertPageToPosition(e){throw new E.U(S)}convertPositionToPage(e){throw new E.U(S)}getPageIndexInNavigationUnits(e){throw new E.U(S)}getNavigationUnitInitialPositionByIndex(e){throw new E.U(S)}getNavigationUnitLabelByIndex(e){throw new E.U(S)}getLastNavigationUnitStartPosition(){throw new E.U(S)}getLastLocationPosition(){return Promise.resolve(this.renderer.pidToPixel(this.maximumLocation))}getMaximumPageLabel(){throw new E.U(S)}getTotalLocations(){throw new E.U(S)}getTotalNavigationUnits(){throw new E.U(S)}getNavigationUnitTypes(){return[E.g.Location]}validatePage(e){throw new E.U(S)}validateLocation(e){throw new E.U(S)}}var _=n(906),P=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const C={navigationMode:"Scroll",navigationDirection:"Vertical",colorTheme:"White",fontFamily:"Bookerly",fontSize:17.6,marginTop:0,marginRight:0,marginBottom:0,marginLeft:0};class R{constructor(e){var t,n,r,c,u,l,d,f,p;this.status=o.QS.STATUS_LOADING,this.bookViewer=null,this.bookViewerPromise=void 0,this.positionMapper=void 0,this.bookInformation=e.bookInformation;const{asin:g,revision:m}=this.bookInformation,v=e.rendererSettings.rendererMetricsService;this.metricsUtils=v&&new _.J(v,h.P.YJHTML),this.renderSettings=(0,s.q)(C,e.renderSettings,this.getSupportedSettings()),this.bookProvider=new y(g,m),this.fontLoader=new i.Jf,this.endOfBookCallback=null===(t=e.rendererSettings.rendererCallBacks)||void 0===t?void 0:t.onEndOfBook,this.onPositionChange=null===(n=e.rendererSettings.rendererCallBacks)||void 0===n?void 0:n.onPositionChange,this.onRendererStatusChanged=null===(r=e.rendererSettings.rendererCallBacks)||void 0===r?void 0:r.onRendererStatusChanged,this.onInitialization=null===(c=e.rendererSettings.rendererCallBacks)||void 0===c?void 0:c.onInitialization,this.onFontLoadingStatusChanged=null===(u=e.rendererSettings.rendererCallBacks)||void 0===u?void 0:u.onFontLoadingStatusChanged,this.onScroll=null===(l=e.rendererSettings.rendererCallBacks)||void 0===l?void 0:l.onScroll;const b=e.rendererSettings.container,w=null!==(d=e.rendererSettings.scrollContainer)&&void 0!==d?d:b;this.viewerConfig={supportedFontFormats:(0,i.WF)(),onLinkClicked:O,onReadingStatusChanged:this.endOfBookCallback?e=>{var t;null===(t=this.endOfBookCallback)||void 0===t||t.call(this,(0,a.JC)(e))}:void 0,onRenderStatusChanged:e=>{var t;return null===(t=this.onRendererStatusChanged)||void 0===t?void 0:t.call(this,(0,a.BC)(e))},viewerRoot:b,scrollContainer:w,onClick:null===(f=e.rendererSettings.rendererCallBacks)||void 0===f?void 0:f.onClick,onDoubleClick:null===(p=e.rendererSettings.rendererCallBacks)||void 0===p?void 0:p.onDoubleClick},w.addEventListener("scroll",(()=>{var e;null===(e=this.onScroll)||void 0===e||e.call(this),this.handlePositionChanges()}))}render(){if(this.bookViewerPromise)return this.bookViewerPromise;let e=!1;return this.bookViewerPromise=new Promise(((t,n)=>{this.fontLoader.getFontIndex().then((s=>{var c;this.viewerConfig.readerFonts=s,null===(c=this.metricsUtils)||void 0===c||c.loadedFonts(!0),this.onFontLoadingStatusChanged&&this.onFontLoadingStatusChanged(i.ww.STATUS_LOADING_FONT_DONE),this.viewerConfig.onRenderStatusChanged=(r,i)=>{var s;this.status=(0,a.BC)(r),e||(r===a.Z0.READY?(this.onInitialization&&this.onInitialization(o.QS.STATUS_IDLE),e=!0,this.onInitialized(),t()):r===a.Z0.ERROR&&(this.onInitialization&&this.onInitialization(o.QS.STATUS_ERROR),e=!0,null===(s=this.metricsUtils)||void 0===s||s.rendererInitialized(!1),n(new Error(`Failed to load renderer. ${i}`))))},this.bookViewer=new r.BookViewerReflowable(this.viewerConfig,this.bookProvider,A(this.renderSettings))})).catch((e=>{var t;this.onFontLoadingStatusChanged&&(null===(t=this.metricsUtils)||void 0===t||t.loadedFonts(!1),this.onFontLoadingStatusChanged(i.ww.STATUS_LOADING_FONT_ERROR)),n(e)}))})),this.bookViewerPromise}clear(){this.bookViewer&&this.bookViewer.clear()}redraw(e,t){return this.bookViewer?this.status===o.QS.STATUS_ERROR?Promise.reject("Renderer failed to initialize."):(e&&(this.renderSettings=Object.assign({},e)),this.viewerConfig.scrollContainer=t,this.bookViewer.clear(),this.bookViewer=new r.BookViewerReflowable(this.viewerConfig,this.bookProvider,A(this.renderSettings)),Promise.resolve()):Promise.reject("Renderer not initialized yet.")}highlightSearchResult(e){this.bookViewer&&this.bookViewer.highlightSearchResult(e)}clearSearchHighlights(){this.bookViewer&&this.bookViewer.clearSearchHighlights()}getReadingLocation(){return this.bookViewer?Promise.resolve(k(this.bookViewer.getCurrentReadingLocationData())):Promise.reject()}getStatus(){return this.status}handlePositionChanges(){var e,t,n;if(!this.bookViewer)return;const r=k(this.bookViewer.getCurrentReadingLocationData());(null==r?void 0:r.currentPositionRange)&&(null===(e=this.onPositionChange)||void 0===e||e.call(this,null===(t=r.currentPositionRange)||void 0===t?void 0:t.currentTopOfPage,null===(n=r.currentPositionRange)||void 0===n?void 0:n.currentBottomOfPage))}goToPosition(e,t){return P(this,void 0,void 0,(function*(){if(!this.bookViewer)throw"Renderer not initialized.";this.bookViewer.goToPosition(e,null==t?void 0:t.focus)}))}onInitialized(){var e,t;null===(e=this.bookViewer)||void 0===e||e.applyRenderSettings(A(this.renderSettings)),this.createPositionMapper(),null===(t=this.metricsUtils)||void 0===t||t.rendererInitialized(!0)}createPositionMapper(){return P(this,void 0,void 0,(function*(){const e=yield this.getReadingLocation();e.maximumPosition&&this.bookViewer&&(this.positionMapper=new T(this.bookViewer,e.maximumPosition),this.handlePositionChanges())}))}getPositionMapper(){if(this.positionMapper)return this.positionMapper;throw new Error("Renderer must be initialized before requesting the position mapper")}updateSettings(e){return P(this,void 0,void 0,(function*(){this.renderSettings=(0,s.q)(this.renderSettings,e,this.getSupportedSettings()),yield this.applySettings()}))}getSettings(){return Object.assign({},this.renderSettings)}getSupportedSettings(){return{navigationModes:["Scroll"],navigationDirections:["Vertical"],marginTop:!0,marginRight:!0,marginBottom:!0,marginLeft:!0,viewportHeight:!0,viewportWidth:!0,viewportTopOffset:!1,colorThemes:["White","Night","Green","Sepia"],fontFamilies:["Bookerly","AmazonEmber"],fontSize:!0,maxNumberColumns:!1,isRendererPropagatedZoom:!1,pageStyle:!1,zoomPercent:!1,animatePageTurn:!1,guidedViewSettings:!1,zoomViewSettings:!1,viewingMode:!1,wordsOnScreen:!1}}applySettings(){var e;return P(this,void 0,void 0,(function*(){return yield this.render(),null===(e=this.bookViewer)||void 0===e?void 0:e.applyRenderSettings(A(this.renderSettings))}))}getTableOfContents(){return P(this,void 0,void 0,(function*(){return this.bookProvider.getTableOfContents()}))}canChangeUserSettings(){return!1}canAnnotate(){return!1}canSearch(){return!1}getMetadata(){return this.bookProvider.getMetadata()}}const O=e=>{window.open(e)},k=e=>({currentPositionRange:{currentTopOfPage:e.currentPositionRange.topOfFirstVisiblePid,currentBottomOfPage:e.currentPositionRange.bottomOfFirstVisiblePid},minimumPosition:e.minimumPosition,maximumPosition:e.maximumPosition});var I;!function(e){e[e.Default=0]="Default",e[e.Night=1]="Night",e[e.Sepia=2]="Sepia",e[e.Green=3]="Green"}(I||(I={}));const x=new Map([["White",I.Default],["Night",I.Night],["Sepia",I.Sepia],["Green",I.Green],["Dark",I.Night]]),A=e=>({colorTheme:x.get(e.colorTheme||"White")||I.Default,font:e.fontFamily||"Bookerly",fontSize:e.fontSize,marginTop:e.marginTop||0,marginRight:e.marginRight||0,marginBottom:e.marginBottom||0,marginLeft:e.marginLeft||0,viewportHeight:e.viewportHeight,viewportWidth:e.viewportWidth,viewportTopOffset:e.viewportTopOffset||0})},323:t=>{"use strict";t.exports=e},762:e=>{"use strict";e.exports=n},233:e=>{"use strict";e.exports=r},616:e=>{"use strict";e.exports=t},803:e=>{"use strict";e.exports=i}},a={};function s(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return o[e](n,n.exports,s),n.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var c={};return(()=>{"use strict";s.r(c),s.d(c,{Action:()=>l.a,AnnotationType:()=>l.J,BACKGROUND_THEME_MAP:()=>y.p,COLOR_THEME_MAP:()=>y.X,Capabilities:()=>d.Wi,ContentNotAllowed:()=>f.nk,ContentUnSupported:()=>f.CK,DEV_HOST_NAME:()=>R.I,DefaultBookRendererFactory:()=>i.Q,Deferred:()=>k.B,FailedToGetBookManifestError:()=>f.$z,FontLoader:()=>x.Jf,FontLoadingStatus:()=>x.ww,GeoLocationNotAllowed:()=>f.ZM,HtmlRenderStatusEnums:()=>a.Z0,KaramelPositionMapper:()=>M.w,KaramelTokenProviderError:()=>P.cr,LANGUAGES_TO_EXCLUDE_FONTS:()=>A.p5,LANGUAGE_TO_FONTS:()=>A.mZ,LARGE_WIDTH:()=>U.oz,LITB_PRINT_METHOD:()=>S.M,MEDIUM_HEIGHT:()=>U.JB,MEDIUM_LARGE_WIDTH:()=>U.Bl,MEDIUM_WIDTH:()=>U.QO,MetricsConstants:()=>D.P,MetricsUtils:()=>F.J,MobileOS:()=>I.RG,NO_SUPPORTED_SETTINGS:()=>u.L,NavigationAction:()=>a.Lo,NavigationUnitType:()=>o.g,NetworkFetch:()=>E.fR,PrintRendererClient:()=>S.r,PrintTokenProvider:()=>v.x,ReadingStatus:()=>d.Ch,RendererClient:()=>T.D,RendererMetricsServiceWrapper:()=>_.f,RendererNotFoundError:()=>e.c,RendererServiceFetchNotFoundError:()=>P.qw,RendererStatus:()=>d.QS,RendererType:()=>d.g4,RenderingServiceBuilder:()=>P.kl,RenderingServiceMissingArgsError:()=>P.aX,ServerError:()=>E.nl,TimeoutError:()=>E.W5,UnavailablePositionMappingError:()=>o.U,WritingMode:()=>b.l,adjustHeight:()=>I.si,adjustViewPort:()=>I.Yr,adjustWidth:()=>I.jE,annotationsToPrintHighlights:()=>O._V,binarySearch:()=>C.r,blobToDataUrl:()=>O.fL,calculateNewRenderingSettings:()=>u.q,convertReadingStatus:()=>a.JC,convertRenderStatus:()=>a.BC,deepEquals:()=>L.q,deferredToPromise:()=>O.tO,getMarketplace:()=>N.L,getMobileOS:()=>I.uA,getOrientation:()=>I.T8,getPhysicalWindowHeight:()=>I.iB,getPhysicalWindowWidth:()=>I.DA,getRequest:()=>B.A,getSupportedFontFormats:()=>x.WF,getWindowHeight:()=>I.gp,getWindowWidth:()=>I.fM,isAndroid:()=>I.Dt,isFirefox:()=>I.vU,isIE11:()=>I.fq,isIOS:()=>I.gn,isIOSSafari:()=>I.nz,isInternetExplorerOrEdge:()=>I.Js,isLandscapeWideEnoughForTwoPage:()=>I.LZ,isLargeOrLargerScreen:()=>I.Nc,isMShop:()=>I.Gu,isMac:()=>I.V5,isMediumOrLargerScreen:()=>I.gj,isOldAndroid:()=>I.YF,isPageProgressionDirection:()=>b.j,isSamsungInternet:()=>I.Tv,isSilk:()=>I.u4,isWidthEnoughForTwoPage:()=>I.Qz,isiPad:()=>I._1,isiPhone:()=>I.sg,marketplaceInfo:()=>N.a,onOrientationChange:()=>I.aQ,pixelToPoints:()=>O.oj,postRequest:()=>B.j,resolveFont:()=>A.g6});var e=s(522),t=s(863),n={};for(const e in t)["default","RendererNotFoundError"].indexOf(e)<0&&(n[e]=()=>t[e]);s.d(c,n);var r=s(606);n={};for(const e in r)["default","RendererNotFoundError"].indexOf(e)<0&&(n[e]=()=>r[e]);s.d(c,n);var i=s(800),o=s(556),a=s(345),u=s(620),l=s(547),d=s(389),h=s(462);n={};for(const e in h)["default","RendererNotFoundError","DefaultBookRendererFactory","NavigationUnitType","UnavailablePositionMappingError","HtmlRenderStatusEnums","NavigationAction","convertReadingStatus","convertRenderStatus","NO_SUPPORTED_SETTINGS","calculateNewRenderingSettings","Action","AnnotationType","Capabilities","ReadingStatus","RendererStatus","RendererType"].indexOf(e)<0&&(n[e]=()=>h[e]);s.d(c,n);var f=s(918),p=s(80);n={};for(const e in p)["default","RendererNotFoundError","DefaultBookRendererFactory","NavigationUnitType","UnavailablePositionMappingError","HtmlRenderStatusEnums","NavigationAction","convertReadingStatus","convertRenderStatus","NO_SUPPORTED_SETTINGS","calculateNewRenderingSettings","Action","AnnotationType","Capabilities","ReadingStatus","RendererStatus","RendererType","ContentNotAllowed","ContentUnSupported","FailedToGetBookManifestError","GeoLocationNotAllowed"].indexOf(e)<0&&(n[e]=()=>p[e]);s.d(c,n);var g=s(444);n={};for(const e in g)["default","RendererNotFoundError","DefaultBookRendererFactory","NavigationUnitType","UnavailablePositionMappingError","HtmlRenderStatusEnums","NavigationAction","convertReadingStatus","convertRenderStatus","NO_SUPPORTED_SETTINGS","calculateNewRenderingSettings","Action","AnnotationType","Capabilities","ReadingStatus","RendererStatus","RendererType","ContentNotAllowed","ContentUnSupported","FailedToGetBookManifestError","GeoLocationNotAllowed"].indexOf(e)<0&&(n[e]=()=>g[e]);s.d(c,n);var m=s(241);n={};for(const e in m)["default","RendererNotFoundError","DefaultBookRendererFactory","NavigationUnitType","UnavailablePositionMappingError","HtmlRenderStatusEnums","NavigationAction","convertReadingStatus","convertRenderStatus","NO_SUPPORTED_SETTINGS","calculateNewRenderingSettings","Action","AnnotationType","Capabilities","ReadingStatus","RendererStatus","RendererType","ContentNotAllowed","ContentUnSupported","FailedToGetBookManifestError","GeoLocationNotAllowed"].indexOf(e)<0&&(n[e]=()=>m[e]);s.d(c,n);var v=s(129),y=s(387),b=s(492),w=s(456);n={};for(const e in w)["default","RendererNotFoundError","DefaultBookRendererFactory","NavigationUnitType","UnavailablePositionMappingError","HtmlRenderStatusEnums","NavigationAction","convertReadingStatus","convertRenderStatus","NO_SUPPORTED_SETTINGS","calculateNewRenderingSettings","Action","AnnotationType","Capabilities","ReadingStatus","RendererStatus","RendererType","ContentNotAllowed","ContentUnSupported","FailedToGetBookManifestError","GeoLocationNotAllowed","PrintTokenProvider","BACKGROUND_THEME_MAP","COLOR_THEME_MAP","WritingMode","isPageProgressionDirection"].indexOf(e)<0&&(n[e]=()=>w[e]);s.d(c,n);var E=s(839),S=s(514),T=s(453),_=s(369),P=s(498),C=s(33),R=s(553),O=s(479),k=s(275),I=s(713),x=s(124),A=s(597),L=s(809),M=s(902),N=s(43),D=s(567),F=s(906),B=s(87),U=s(824)})(),c})(),e.exports=r(n(16990),n(93754),n(87814),n(94654),n(96026))},16990:function(e){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){var r;void 0===(r=function(e,t){"use strict";var n,r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.DisclaimerType=t.KeywordStatus=t.PageLabel=void 0,(i=t.PageLabel||(t.PageLabel={})).A="a",i.R="r",i.I="i",(r=t.KeywordStatus||(t.KeywordStatus={}))[r.FOUND=0]="FOUND",r[r.IMPOSSIBLE=1]="IMPOSSIBLE",r[r.POSSIBLE=2]="POSSIBLE",(n=t.DisclaimerType||(t.DisclaimerType={}))[n.GENERIC=0]="GENERIC",n[n.SPECIFIC_PAGES_MISSING=1]="SPECIFIC_PAGES_MISSING"}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t){"use strict";var n,r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.isEqualRenderSettings=t.showContent=t.callReadingStatusChanged=t.callRenderStatusChanged=t.PageLoadStatus=t.ReadStatus=t.Status=void 0,(i=t.Status||(t.Status={})).READY="ready",i.LOADING="loading",i.ERROR="error",(r=t.ReadStatus||(t.ReadStatus={})).END="end",r.READING="reading",(n=t.PageLoadStatus||(t.PageLoadStatus={})).UNLOADED="unloaded",n.LOADING="loading",n.LOADED="loaded",t.callRenderStatusChanged=function(e,t,n){if(e.onRenderStatusChanged)return e.onRenderStatusChanged(t,n)},t.callReadingStatusChanged=function(e,t){if(e.onReadingStatusChanged)return e.onReadingStatusChanged(t)},t.showContent=function(e,t){e.style.visibility=t?"visible":"hidden"},t.isEqualRenderSettings=function(e,t){for(var n in e)if(e[n]!==t[n])return!1;return!0}}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){var r,i;r=[n,t,n(10)],void 0===(i=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attemptWithRetries=t.isMouseEvent=t.clamp=t.mapYJFontWeight=t.isBlockImage=t.getLargeFontSizeFactor=t.getAlphabetWidth=t.getFirstElementChild=t.binarySearch=void 0,t.binarySearch=function(e,t,n){for(var r,i=0,o=e.length-1;i<=o;){var a=t(e[r=Math.floor(i+(o-i)/2)]);if(a===n)return r;n<a?o=r-1:i=r+1}return Math.min(i,e.length-1)},t.getFirstElementChild=function(e){for(var t=e.childNodes,n=0;n<t.length;n++){var r=t[n];if(r.nodeType===Node.ELEMENT_NODE)return r}return null};function r(e){return 11.93*e}t.getAlphabetWidth=r,t.getLargeFontSizeFactor=function(e,t,n){var i=0,o=r(e),a=t/o,s=1.2*n/o,c=Math.min(a,s);return c<1.3&&(i=1.3-c),i<=0?1:i<=.35?1-1.5*i:i<=.55?.5-1*(i-.35):Math.max(0,.3-1.5*(i-.55))},t.isBlockImage=function(e){return"DIV"===e.parentElement.tagName&&1===e.parentElement.childNodes.length};var i={thin:"100",ultra_light:"200",light:"300",book:"normal",normal:"normal",medium:"500",semi_bold:"600",bold:"bold",ultra_bold:"800",heavy:"900",ultra_heavy:"1000"};t.mapYJFontWeight=function(e){return i[e]||"normal"},t.clamp=function(e,t,n){return Math.max(t,Math.min(e,n))},t.isMouseEvent=function(e){return"x"in e},t.attemptWithRetries=function(e,t){var r=0;return n(e,(function(e,n){return r=n,t().catch(e)})).catch((function(e){return Promise.reject(new Error("Failed "+r+" attempts: "+e))}))}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollModel=void 0;var n=function(){function e(e){this.extraEventListeners=[],this.scrollModelConfig=e,this.scrollContainer=e.scrollContainer}return e.prototype.clear=function(){this.scrollEventListener&&this.getContainer().removeEventListener("scroll",this.scrollEventListener),this.touchStartEventListener&&(this.getContainer().removeEventListener("touchstart",this.touchStartEventListener),this.removeTouchStartedEventListeners())},e.prototype.disableScroll=function(){this.scrollContainer&&(this.scrollContainer.style.overflow="hidden")},e.prototype.enableScroll=function(){this.scrollContainer&&(this.scrollContainer.style.overflow="")},e.prototype.addEventListener=function(e,t){this.getContainer().addEventListener(e,t),this.extraEventListeners.push([e,t])},e.prototype.attachEventListeners=function(){this.attachScrollEventListener(),this.attachTouchEventListener()},e.prototype.getScrollX=function(){return this.scrollContainer?this.scrollContainer.scrollLeft:window.scrollX},e.prototype.getScrollY=function(){return this.scrollContainer?this.scrollContainer.scrollTop:window.pageYOffset},e.prototype.getLeftOffset=function(){return this.scrollContainer?this.scrollContainer.getBoundingClientRect().left:0},e.prototype.getTopOffset=function(){return this.scrollContainer?this.scrollContainer.getBoundingClientRect().top:0},e.prototype.getContainerWidth=function(){return this.scrollContainer?this.scrollContainer.clientWidth:window.innerWidth},e.prototype.setScrollY=function(e){this.scrollTo(0,e)},e.prototype.scrollTo=function(e,t){this.scrollContainer?(this.scrollContainer.scrollLeft=e,this.scrollContainer.scrollTop=t):this.getContainer().scrollTo(e,t)},e.prototype.isAtEndOfBook=function(){return Math.floor(this.getContainerScrollHeight()-(this.getScrollY()+this.getContainerHeight()))<=0},e.prototype.removeTouchStartedEventListeners=function(){var e=this;this.getContainer().removeEventListener("touchmove",this.touchMoveEventListener),this.getContainer().removeEventListener("touchend",this.touchEndEventListener),this.getContainer().removeEventListener("touchcancel",this.touchEndEventListener),this.extraEventListeners.forEach((function(t){var n=t[0],r=t[1];e.getContainer().removeEventListener(n,r)}))},e.prototype.attachTouchEventListener=function(){var e=this,t=!1,n=0;this.touchStartEventListener=function(t){if(e.isAtEndOfBook()){var r=t.changedTouches[0];n=r.clientY,e.getContainer().addEventListener("touchmove",e.touchMoveEventListener),e.getContainer().addEventListener("touchend",e.touchEndEventListener),e.getContainer().addEventListener("touchcancel",e.touchCancelEventListener)}},this.touchMoveEventListener=function(e){var r=e.changedTouches[0];10<=n-r.clientY&&(t=!0)},this.touchEndEventListener=function(n){t&&e.scrollModelConfig.scrollCallback(),t=!1,e.removeTouchStartedEventListeners()},this.touchCancelEventListener=function(){t=!1,e.removeTouchStartedEventListeners()},this.getContainer().addEventListener("touchstart",this.touchStartEventListener)},e.prototype.attachScrollEventListener=function(){var e=this,t=!1;this.scrollEventListener=function(n){e.scrollModelConfig.scrollCallback(),t||(t=!0,setTimeout((function(){e.scrollModelConfig.throttledScrollCallback&&e.scrollModelConfig.throttledScrollCallback(),t=!1}),250))},this.getContainer().addEventListener("scroll",this.scrollEventListener)},e.prototype.getContainerScrollHeight=function(){return this.scrollContainer?this.scrollContainer.scrollHeight:document.documentElement.scrollHeight},e.prototype.getContainerHeight=function(){return this.scrollContainer?this.scrollContainer.clientHeight:window.innerHeight},e.prototype.getContainer=function(){return this.scrollContainer?this.scrollContainer:window},e}();t.ScrollModel=n}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClickHandler=t.DOUBLE_CLICK_TIMEOUT=void 0,t.DOUBLE_CLICK_TIMEOUT=300;t.ClickHandler=function(){var e=this;this.clickCount=0,this.handleClickEvent=function(n,r,i,o){if(r){var a=e.getCoordinates(r,n);e.clickCount++,2===e.clickCount?(null==o||o({x:a.x,y:a.y}),clearTimeout(e.clickTimer),e.clickCount=0):e.clickTimer=window.setTimeout((function(){null==i||i({x:a.x,y:a.y}),e.clickCount=0}),t.DOUBLE_CLICK_TIMEOUT)}},this.getCoordinates=function(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}}}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.COLOR_THEMES_STYLE=t.ColorTheme=void 0,function(e){e[e.Default=0]="Default",e[e.Night=1]="Night",e[e.Sepia=2]="Sepia",e[e.Green=3]="Green"}(n=t.ColorTheme||(t.ColorTheme={})),t.COLOR_THEMES_STYLE={},t.COLOR_THEMES_STYLE[n[n.Default]]={textColor:"#000000",backgroundColor:"#ffffff",searchHighlightStyle:{backgroundColor:"#cacaca",textDecoration:"underline #000000"}},t.COLOR_THEMES_STYLE[n[n.Night]]={textColor:"#acacac",backgroundColor:"#121212",searchHighlightStyle:{backgroundColor:"#cacaca",textDecoration:"underline #000000"}},t.COLOR_THEMES_STYLE[n[n.Sepia]]={textColor:"#5d4232",backgroundColor:"#e7dec7",searchHighlightStyle:{backgroundColor:"#cacaca",textDecoration:"underline #000000"}},t.COLOR_THEMES_STYLE[n[n.Green]]={textColor:"#3a4b43",backgroundColor:"#c5e7ce",searchHighlightStyle:{backgroundColor:"#cacaca",textDecoration:"underline #000000"}}}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){var r,i;r=[n,t,n(7),n(15),n(0),n(1)],void 0===(i=function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SURPRISE_ME_POSITION=t.BookViewerReflowable=t.BookViewerPrint=t.Status=t.PageLoadStatus=t.ReadStatus=t.PageLabel=void 0,Object.defineProperty(t,"BookViewerPrint",{enumerable:!0,get:function(){return n.BookViewerPrint}}),Object.defineProperty(t,"SURPRISE_ME_POSITION",{enumerable:!0,get:function(){return n.SURPRISE_ME_POSITION}}),Object.defineProperty(t,"BookViewerReflowable",{enumerable:!0,get:function(){return r.BookViewerReflowable}}),Object.defineProperty(t,"PageLabel",{enumerable:!0,get:function(){return i.PageLabel}}),Object.defineProperty(t,"ReadStatus",{enumerable:!0,get:function(){return o.ReadStatus}}),Object.defineProperty(t,"PageLoadStatus",{enumerable:!0,get:function(){return o.PageLoadStatus}}),Object.defineProperty(t,"Status",{enumerable:!0,get:function(){return o.Status}})}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};r=[n,t,n(3),n(0),n(1),n(8),n(4)],void 0===(i=function(e,t,n,r,i,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BookViewerPrint=t.SURPRISE_ME_POSITION=void 0;t.SURPRISE_ME_POSITION=-999;var c=function(e){return!e||"Embargoed Page"===e},u=function(e,t){if(e.pageLabel===r.PageLabel.A)return t-e.firstPageIdx+e.actualPageNumber},l=function(){function e(e,t,r){var i=this;this.defaultMinHeight=400,this.searchHighlights=[],this.bookProvider=t,this.viewerConfig=e,this.viewerRoot=e.viewerRoot,this.renderSettings=r,this.pages=[],this.defaultWidth=this.viewerRoot.clientWidth,this.scrollModel=new n.ScrollModel({scrollCallback:function(){return i.callReadingStatusChangedOnScroll()},scrollContainer:this.viewerConfig.scrollContainer}),this.gestureHandler=new a.GestureHandlerScale(this.viewerRoot,this.scrollModel,this.onPageZoom.bind(this)),this.intersectionObserver=new IntersectionObserver((function(e){return i.loadMorePages(e)}),{threshold:.1}),this.clickHandler=new s.ClickHandler,this.applyRenderSettings(this.renderSettings),this.displayBook()}return e.prototype.setDefaultWidth=function(e){this.defaultWidth=e,this.gestureHandler.setInitialWidth(e)},e.prototype.goToPosition=function(e,n){var r=this,i=this.getPageContainer(e);if(i){this.requestPageHighlights(e);var o=this.viewerRoot.clientWidth-this.scrollModel.getContainerWidth();this.scrollModel.scrollTo(o/2,i.offsetTop)}else"Embargoed Page"!==this.pages[e]&&(e===t.SURPRISE_ME_POSITION?this.bookProvider.getRandomPage().then((function(e){r.setPages(e.jumboImageUrls),r.goToPosition(e.pageNumber)})):e>=0&&(this.pages[e]=this.pages[e]||"Loading Page",this.fetchPage(e).then((function(){r.fetchNeighborPages(e,!0)}))))},e.prototype.applyRenderSettings=function(e){var t=this;e.localizedStrings!==this.renderSettings.localizedStrings&&this.setLocalizedStrings(e.localizedStrings),this.renderSettings=o(o({},this.renderSettings),e),this.viewerRoot.style.paddingRight=this.renderSettings.marginRight+"px",this.viewerRoot.style.paddingLeft=this.renderSettings.marginLeft+"px",this.renderSettings.viewportWidth!==this.defaultWidth&&(this.setDefaultWidth(this.renderSettings.viewportWidth),this.displayBook()),e.isRendererPropagatedZoom||new Promise((function(e){t.gestureHandler.zoom(t.getScaleFromZoomPercent()),e()}))},e.prototype.clear=function(){this.viewerRoot.innerHTML="",this.scrollModel.clear(),this.gestureHandler.disconnect()},e.prototype.setSearchInfo=function(e){},e.prototype.clearSearchHighlights=function(){},e.prototype.clearHighlights=function(){document.querySelectorAll(".search-highlight").forEach((function(e){return e.remove()})),this.searchHighlights=[]},e.prototype.setLocalizedStrings=function(e){this.renderSettings.localizedStrings=e,this.resetSampleDisclaimers()},e.prototype.callRenderStatusReady=function(){this.pageLoaded&&this.rendererInitialized&&(this.onInitialized(),i.callRenderStatusChanged(this.viewerConfig,i.Status.READY))},e.prototype.onInitialized=function(){var e=this;setTimeout((function(){return e.setDefaultWidth(e.viewerRoot.clientWidth)}),0)},e.prototype.displayBook=function(){var e=this;i.callRenderStatusChanged(this.viewerConfig,i.Status.LOADING),this.bookProvider.getManifest().then((function(t){return e.manifest=t,e.initializePages(t.pages,t.embargoedPages,t.imageUrls)})).then((function(){e.appendPages(),e.appendSampleDisclaimers(),e.attachClickEventHandling(),e.scrollModel.attachEventListeners(),e.rendererInitialized||(e.rendererInitialized=!0,e.callRenderStatusReady())})).catch((function(t){i.callRenderStatusChanged(e.viewerConfig,i.Status.ERROR,t)}))},e.prototype.initializePages=function(e,t,n){var r=this;return new Promise((function(i){if(n){for(var o in e.forEach((function(e){r.pages[e]="Loading Page"})),t.forEach((function(e){r.pages[e]="Embargoed Page"})),n)r.isPendingPage(parseInt(o,10))&&(r.pages[o]=n[o]);i()}else r.fetchPage(e[0]).then((function(){i()}))}))},e.prototype.appendPages=function(){var e=this;this.viewerRoot.innerHTML="",this.pages.forEach((function(t,n){var r=e.createPageContainer(n);if(!c(t)){if(function(e){return"Loading Page"===e}(t))r.insertAdjacentHTML("beforeend",e.getSpinner(n));else{var i=e.getPageImage(n,t);i.onload=function(){(400===e.defaultMinHeight||i.clientHeight<e.defaultMinHeight||e.renderSettings.viewportHeight&&e.renderSettings.viewportHeight<e.defaultMinHeight)&&i.clientHeight>0&&(e.defaultMinHeight=i.clientHeight),document.querySelectorAll("[data-page]").forEach((function(t){t.style.minHeight=e.defaultMinHeight+"px"})),e.hideSpinner(n),e.pageLoaded||(e.pageLoaded=!0,e.callRenderStatusReady())},r.appendChild(i),r.insertAdjacentHTML("beforeend",e.getSpinner(n)),e.gestureHandler.observe(r,e.getGestureOptions())}e.viewerRoot.insertAdjacentElement("beforeend",r),e.intersectionObserver.observe(r)}}))},e.prototype.appendSampleDisclaimers=function(){for(var e,t,n=1;n<=this.manifest.numberOfPages;n++){var i=this.pages[n];if(c(i))e||(e=n),t=n;else if(e&&t){var o;o=this.manifest.firstPageInfo&&e>this.manifest.firstPageInfo.firstPageIdx?this.createDisclaimer(this.getSampleDisclaimerText(r.DisclaimerType.SPECIFIC_PAGES_MISSING,{startMissingPageIdx:e,endMissingPageIdx:t,firstPageInfo:this.manifest.firstPageInfo})):this.createDisclaimer(this.getSampleDisclaimerText(r.DisclaimerType.GENERIC));var a=this.getPageContainer(n);this.viewerRoot.insertBefore(o,a),e=null,t=null}}},e.prototype.stylePageContainer=function(e){e.setAttribute("style","margin-bottom: 10px; box-shadow: 0 0 4px 0 rgba(0,0,0,0.50); overflow: hidden; position: relative; min-height: "+this.defaultMinHeight+"px")},e.prototype.getPageImage=function(e,t){var n=document.createElement("img");return n.alt="Page "+e,n.src=t,n.draggable=!1,n.style.display="block",n.style.height="100%",n.style.width="100%",n.style.objectFit="contain",n},e.prototype.loadMorePages=function(e){var t=this;e.forEach((function(e){if(e.isIntersecting){var n=e.target.dataset.page;if(n){var r=parseInt(n,10);t.fetchNeighborPages(r),t.fetchNeighborHighlights(r)}}}))},e.prototype.fetchNeighborPages=function(e,t){var n=this;this.fetchPage(e-1).then((function(){return n.navigateToPage(e,t)})),this.fetchPage(e).then((function(){return n.navigateToPage(e,t)})),this.fetchPage(e+1).then((function(){return n.navigateToPage(e,t)}))},e.prototype.fetchNeighborHighlights=function(e){this.requestPageHighlights(e-1),this.requestPageHighlights(e),this.requestPageHighlights(e+1)},e.prototype.isPendingPage=function(e){return!this.pages[e]||"Loading Page"===this.pages[e]},e.prototype.isValidPage=function(e,t){return t?e>0&&e<=t:this.manifest.pages.indexOf(e)>-1},e.prototype.fetchPage=function(e,t){var n=this;return void 0===t&&(t=5),this.isPendingPage(e)&&this.isValidPage(e,this.manifest.numberOfPages)?this.bookProvider.getPageUrls(e).then((function(e){e&&n.setPages(e)})).catch((function(e){var r=e.nextPageToTry;if((null!=r?r:-1)>=0&&t>0)return n.fetchPage(r,t-1)})):Promise.resolve()},e.prototype.requestPageHighlights=function(e){var t,n;return c(e.toString())||null===(n=(t=this.bookProvider).requestPageHighlights)||void 0===n||n.call(t,e),Promise.resolve()},e.prototype.addHighlights=function(e){var t=this,n=function(n){var i=r.getPageContainer(parseInt(n,10));if(!i)return"continue";i.querySelectorAll(".search-highlight").forEach((function(e){return e.remove()})),r.searchHighlights[n]=e[n],r.searchHighlights[n].forEach((function(e){i.appendChild(t.createHighlight({left:e[0]*(100/1024)+"%",top:e[1]*(100/1024)+"%",width:e[2]*(100/1024)+"%",height:e[3]*(100/1024)+"%"}))}))},r=this;for(var i in e)n(i)},e.prototype.setPages=function(e){for(var t in e){var n=parseInt(t,10);this.isPendingPage(n)&&this.setPage(n,e[n])}},e.prototype.setPage=function(e,t){var n=this;this.pages[e]=t;var r=this.getPageImage(e,t);r.onload=function(){n.hideSpinner(e),n.pageLoaded||(n.pageLoaded=!0,n.callRenderStatusReady())};var i=this.getPageContainer(e);if(!i){var o=this.getLastRenderedPageNumber();i=this.createPageContainer(e),o<e?this.viewerRoot.appendChild(i):this.viewerRoot.insertBefore(i,this.getNextAvailablePage(e)),this.intersectionObserver.observe(i)}var a=i.querySelectorAll(".search-highlight");i.innerHTML="",i.appendChild(r),i.insertAdjacentHTML("beforeend",this.getSpinner(e)),a.forEach((function(e){i.appendChild(e)})),this.gestureHandler.observe(i,this.getGestureOptions()),this.resetSampleDisclaimers()},e.prototype.clearSamplePageDisclaimers=function(){document.querySelectorAll(".sample-page-disclaimer").forEach((function(e){e.remove()}))},e.prototype.callReadingStatusChangedOnScroll=function(){this.scrollModel.isAtEndOfBook()?i.callReadingStatusChanged(this.viewerConfig,i.ReadStatus.END):i.callReadingStatusChanged(this.viewerConfig,i.ReadStatus.READING)},e.prototype.createPageContainer=function(e){var t=document.createElement("div");return t.dataset.page=e.toString(),this.stylePageContainer(t),t},e.prototype.createHighlight=function(e){var t=document.createElement("div");return t.className="search-highlight",t.style.position="absolute",t.style.background="rgba(0,0,0,0.20)",t.style.borderBottom="2px solid #000000",t.style.left=e.left,t.style.top=e.top,t.style.width=e.width,t.style.height=e.height,t},e.prototype.createDisclaimer=function(e){var t=document.createElement("div");return t.innerHTML=e,t.style.backgroundColor="#CDE6E0",t.style.textAlign="center",t.style.fontSize="14px",t.style.paddingTop="7px",t.style.paddingBottom="7px",t.style.marginBottom="10px",t.className="sample-page-disclaimer",t},e.prototype.getNextAvailablePage=function(e){for(var t=e+1;c(this.pages[t])&&t<this.pages.length;)t++;return this.getPageContainer(t)},e.prototype.getLastRenderedPageNumber=function(){for(var e=this.pages.length-1;e>=0;e--)if(!c(this.pages[e])&&this.getPageContainer(e))return e;return 0},e.prototype.navigateToPage=function(e,t){t&&this.goToPosition(e)},e.prototype.getScaleFromZoomPercent=function(){return this.renderSettings.zoomPercent/100},e.prototype.getGestureOptions=function(){return{defaultWidth:this.defaultWidth,viewportTopOffset:this.renderSettings.viewportTopOffset}},e.prototype.getPageContainer=function(e){return document.querySelector('[data-page="'+e+'"]')},e.prototype.getSampleDisclaimerText=function(e,t){if(!this.renderSettings.localizedStrings)return"";switch(e){case r.DisclaimerType.SPECIFIC_PAGES_MISSING:if(!t||!this.renderSettings.localizedStrings.getMissingPageMessage||!this.renderSettings.localizedStrings.getMissingPagesMessage)return"";var n=u(t.firstPageInfo,t.startMissingPageIdx);if(t.startMissingPageIdx===t.endMissingPageIdx)return this.renderSettings.localizedStrings.getMissingPageMessage(n);var i=u(t.firstPageInfo,t.endMissingPageIdx);return this.renderSettings.localizedStrings.getMissingPagesMessage(n,i);case r.DisclaimerType.GENERIC:default:return this.renderSettings.localizedStrings.genericSampleMessage||""}},e.prototype.onPageZoom=function(e,t){this.viewerConfig.onZoom(100*e),this.viewerConfig.isManga||this.gestureHandler.zoom(e,t)},e.prototype.getSpinner=function(e){return'\n            <div id="'+this.getSpinnerId(e)+'" style="position: absolute; left: 0; right: 0; bottom: 0; top: 0; height: 40px; width: 40px; margin: auto; animation: spin 1s linear infinite;">\n                <svg version="1.1" id="Layer_1" x="0px" y="0px"\n                    viewBox="0 0 80 80" enable-background="new 0 0 80 80" xml:space="preserve">\n                    <path id="spinner-'+e+'" fill="#B8B8B8" d="M40,72C22.4,72,8,57.6,8,40C8,22.4,22.4,8,40,8c17.6,0,32,14.4,32,32c0,1.1-0.9,2-2,2s-2-0.9-2-2c0-15.4-12.6-28-28-28S12,24.6,12,40s12.6,28,28,28c1.1,0,2,0.9,2,2S41.1,72,40,72z"/>\n                </svg>\n            </div>\n        '},e.prototype.getSpinnerId=function(e){return"PrintSpinner"+e},e.prototype.hideSpinner=function(e){document.getElementById(this.getSpinnerId(e)).style.display="none"},e.prototype.resetSampleDisclaimers=function(){this.clearSamplePageDisclaimers(),this.appendSampleDisclaimers()},e.prototype.attachClickEventHandling=function(){var e=this;this.viewerRoot.addEventListener("click",(function(t){e.clickHandler.handleClickEvent(t,e.viewerConfig.scrollContainer,e.viewerConfig.onClick,e.viewerConfig.onDoubleClick)}))},e}();t.BookViewerPrint=l}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n,t,n(9),n(2)],void 0===(i=function(e,t,n,r){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.GestureHandlerScale=void 0,function(e){e.PINCH="pinch",e.PINCH_CANCEL="pinchcancel",e.PINCH_END="pinchend",e.PINCH_MOVE="pinchmove"}(i||(i={}));var o=i.PINCH+" "+i.PINCH_MOVE,a=function(){function e(e,t,n){this.displayImageScale=1,this.pinchStartEventListener=this.onPinchStart.bind(this),this.touchPadPinchEventListener=this.onTouchPadPinchZoom.bind(this),this.panStartEventListener=this.onPanStart.bind(this),this.panMoveEventListener=this.onPanMove.bind(this),this.panEndEventListener=this.onPanEnd.bind(this),this.doubleTapEventListener=this.onDoubleTap.bind(this),this.panning=!1,this.viewerRoot=e,this.observedElements=[],this.onZoom=n,this.scrollModel=t,this.initialize(),this.attachEventListeners()}return e.prototype.observe=function(e,t){this.observedElements.push(e),this.initialWidth||(this.initialWidth=t.defaultWidth)},e.prototype.setInitialWidth=function(e){this.initialWidth=e,this.viewerRoot.parentElement.style.width=e*this.getScale()+"px"},e.prototype.disconnect=function(){this.removeEventListeners(),this.observedElements=[]},e.prototype.zoom=function(e,t,n,i){var o=this;if(r.clamp(e,1,2)!==this.displayImageScale){var a=t;if(!a||a===this.getViewerRoot()){var s=this.observedElements.filter((function(e){return o.elementIsInViewport(e)})),c=s.map(this.getElementHeightInViewport.bind(this)),u=0;s.forEach((function(e,t){c[t]>u&&(u=c[t],a=e)}))}var l=this.getScrollModel().getLeftOffset()-a.getBoundingClientRect().left,d=this.getScrollModel().getTopOffset()-a.getBoundingClientRect().top,h=this.getScale();this.setScale(e),this.getViewerRoot().parentElement.style.width=this.initialWidth*this.getScale()+"px";var f=this.getZoomedScrollX(a,l,h,n),p=this.getZoomedScrollY(a,d,h,i);this.centerPage(f,p)}},e.prototype.getScrollModel=function(){return this.scrollModel},e.prototype.getViewerRoot=function(){return this.viewerRoot},e.prototype.getScale=function(){return this.displayImageScale},e.prototype.setScale=function(e){this.displayImageScale=r.clamp(e,1,2),1===this.displayImageScale?this.getViewerRoot().style.cursor="auto":this.getViewerRoot().style.cursor="pointer"},e.prototype.centerPage=function(e,t){var n=this.getScrollModel(),r=this.getViewerRoot().clientWidth-n.getContainerWidth();n.scrollTo(e||r/2,t||n.getScrollY())},e.prototype.initialize=function(){this.manager=new n.Manager(this.getViewerRoot(),{touchAction:"pan-x pan-y"}),this.manager.add(new n.Pinch({enable:!0})),this.manager.add(new n.Tap({event:"doubletap",taps:2}))},e.prototype.attachEventListeners=function(){this.manager.on(o,this.pinchStartEventListener),this.manager.on("doubletap",this.doubleTapEventListener),this.getViewerRoot().addEventListener("gesturechange",this.pinchStartEventListener),this.getViewerRoot().addEventListener("wheel",this.touchPadPinchEventListener),this.getViewerRoot().addEventListener("mousedown",this.panStartEventListener),this.getViewerRoot().addEventListener("mousemove",this.panMoveEventListener),this.getViewerRoot().addEventListener("mouseup",this.panEndEventListener),this.getViewerRoot().addEventListener("mouseleave",this.panEndEventListener)},e.prototype.removeEventListeners=function(){this.manager.off(o,this.pinchStartEventListener),this.manager.off("doubletap",this.doubleTapEventListener),this.getViewerRoot().removeEventListener("gesturechange",this.pinchStartEventListener),this.getViewerRoot().removeEventListener("wheel",this.touchPadPinchEventListener),this.getViewerRoot().removeEventListener("mousedown",this.panStartEventListener),this.getViewerRoot().removeEventListener("mousemove",this.panMoveEventListener),this.getViewerRoot().removeEventListener("mouseup",this.panEndEventListener),this.getViewerRoot().removeEventListener("mouseleave",this.panEndEventListener)},e.prototype.onDoubleTap=function(e){e.preventDefault();var t=this.getScrollingElement(e.target);this.getScale()<2?this.zoom(2,t,e.center.x,e.center.y):this.zoom(1,t,e.center.x,e.center.y),this.onZoom&&this.onZoom(this.displayImageScale,t)},e.prototype.onPinchStart=function(e){e.preventDefault();var t=e.scale>1?1:-1;this.setScale(.01*t+this.getScale()),this.getViewerRoot().parentElement.style.width=this.initialWidth*this.getScale()+"px";var n=this.getViewerRoot().clientWidth-this.getScrollModel().getContainerWidth();this.getScrollModel().scrollTo(n/2,this.getScrollModel().getScrollY())},e.prototype.onTouchPadPinchZoom=function(e){e.ctrlKey&&(e.preventDefault(),this.handlePinchZoom(this.getScale()-.01*e.deltaY,e.target,e.clientX,e.clientY))},e.prototype.handlePinchZoom=function(e,t,n,r){if(t){var i=this.getScrollingElement(t);this.zoom(e,i,n,r),this.onZoom&&this.onZoom(this.displayImageScale,i)}},e.prototype.onPanStart=function(e){this.panning=(r.isMouseEvent(e)||1===e.touches.length)&&this.getScale()>1,this.setPointerPosition(e)},e.prototype.onPanMove=function(e){if(this.panning){e.preventDefault();var t=this.getScrollModel(),n=this.pointerPosition.x-s(e),r=this.pointerPosition.y-c(e);t.scrollTo(t.getScrollX()+n,t.getScrollY()+r),this.setPointerPosition(e)}},e.prototype.onPanEnd=function(){this.panning=!1},e.prototype.setPointerPosition=function(e){r.isMouseEvent(e)?this.pointerPosition={x:e.x,y:e.y}:this.pointerPosition={x:e.touches[0].clientX,y:e.touches[0].clientY}},e.prototype.getScrollingElement=function(e){var t=e;return t&&"IMG"===t.nodeName&&(t=t.parentElement),t},e.prototype.getZoomedScrollX=function(e,t,n,r){var i=r?r-this.getScrollModel().getLeftOffset()+parseInt(this.getViewerRoot().style.paddingLeft):.5*this.initialWidth,o=(t+i)/n*this.getScale()-i;return e.offsetLeft+o},e.prototype.getZoomedScrollY=function(e,t,n,r){var i=r?r-this.getScrollModel().getTopOffset():.5*this.getScrollModel().getContainerHeight(),o=this.viewerRoot.getBoundingClientRect().top-this.getScrollModel().getTopOffset()+this.getScrollModel().getScrollY(),a=(t+i)/n*this.getScale()-i+o;return e.offsetTop+a},e.prototype.elementIsInViewport=function(e){var t=this.getElementPositionsRelativeToScrollContainer(e);return t.top>=-e.offsetHeight&&t.bottom<=this.getScrollModel().getContainerHeight()+e.offsetHeight},e.prototype.getElementPositionsRelativeToScrollContainer=function(e){var t=e.getBoundingClientRect();return{top:t.top-this.getScrollModel().getTopOffset(),bottom:t.bottom-this.getScrollModel().getTopOffset()}},e.prototype.getElementHeightInViewport=function(e){var t=this.getElementPositionsRelativeToScrollContainer(e),n=e.offsetHeight;t.top<0&&(n+=t.top);var r=this.getScrollModel().getContainerHeight();return t.bottom>r&&(n+=r-t.bottom),n},e}();t.GestureHandlerScale=a;var s=function(e){return r.isMouseEvent(e)?e.x:e.touches[0].clientX},c=function(e){return r.isMouseEvent(e)?e.y:e.touches[0].clientY}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;!function(i,o,a,s){"use strict";var c,u=["","webkit","Moz","MS","ms","o"],l=o.createElement("div"),d=Math.round,h=Math.abs,f=Date.now;function p(e,t,n){return setTimeout(E(e,n),t)}function g(e,t,n){return!!Array.isArray(e)&&(m(e,n[t],n),!0)}function m(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==s)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function v(e,t,n){var r="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),e.apply(this,arguments)}}c="function"!=typeof Object.assign?function(e){if(e===s||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t}:Object.assign;var y=v((function(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;)(!n||n&&e[r[i]]===s)&&(e[r[i]]=t[r[i]]),i++;return e}),"extend","Use `assign`."),b=v((function(e,t){return y(e,t,!0)}),"merge","Use `assign`.");function w(e,t,n){var r,i=t.prototype;(r=e.prototype=Object.create(i)).constructor=e,r._super=i,n&&c(r,n)}function E(e,t){return function(){return e.apply(t,arguments)}}function S(e,t){return"function"==typeof e?e.apply(t&&t[0]||s,t):e}function T(e,t){return e===s?t:e}function _(e,t,n){m(O(t),(function(t){e.addEventListener(t,n,!1)}))}function P(e,t,n){m(O(t),(function(t){e.removeEventListener(t,n,!1)}))}function C(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function R(e,t){return e.indexOf(t)>-1}function O(e){return e.trim().split(/\s+/g)}function k(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function I(e){return Array.prototype.slice.call(e,0)}function x(e,t,n){for(var r=[],i=[],o=0;o<e.length;){var a=t?e[o][t]:e[o];k(i,a)<0&&r.push(e[o]),i[o]=a,o++}return n&&(r=t?r.sort((function(e,n){return e[t]>n[t]})):r.sort()),r}function A(e,t){for(var n,r,i=t[0].toUpperCase()+t.slice(1),o=0;o<u.length;){if((r=(n=u[o])?n+i:t)in e)return r;o++}return s}var L=1;function M(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}var N="ontouchstart"in i,D=A(i,"PointerEvent")!==s,F=N&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),B=24,U=["x","y"],j=["clientX","clientY"];function H(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){S(e.options.enable,[e])&&n.handler(t)},this.init()}function z(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,o=1&t&&r-i==0,a=12&t&&r-i==0;n.isFirst=!!o,n.isFinal=!!a,o&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=V(t)),i>1&&!n.firstMultiple?n.firstMultiple=V(t):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,c=a?a.center:o.center,u=t.center=G(r);t.timeStamp=f(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=Y(c,u),t.distance=K(c,u),function(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},o=e.prevInput||{};1!==t.eventType&&4!==o.eventType||(i=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}(n,t),t.offsetDirection=q(t.deltaX,t.deltaY);var l,d,p=W(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=p.x,t.overallVelocityY=p.y,t.overallVelocity=h(p.x)>h(p.y)?p.x:p.y,t.scale=a?(l=a.pointers,K((d=r)[0],d[1],j)/K(l[0],l[1],j)):1,t.rotation=a?function(e,t){return Y(t[1],t[0],j)+Y(e[1],e[0],j)}(a.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,r,i,o,a=e.lastInterval||t,c=t.timeStamp-a.timeStamp;if(8!=t.eventType&&(c>25||a.velocity===s)){var u=t.deltaX-a.deltaX,l=t.deltaY-a.deltaY,d=W(c,u,l);r=d.x,i=d.y,n=h(d.x)>h(d.y)?d.x:d.y,o=q(u,l),e.lastInterval=t}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;t.velocity=n,t.velocityX=r,t.velocityY=i,t.direction=o}(n,t);var g=e.element;C(t.srcEvent.target,g)&&(g=t.srcEvent.target),t.target=g}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function V(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:d(e.pointers[n].clientX),clientY:d(e.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:t,center:G(t),deltaX:e.deltaX,deltaY:e.deltaY}}function G(e){var t=e.length;if(1===t)return{x:d(e[0].clientX),y:d(e[0].clientY)};for(var n=0,r=0,i=0;i<t;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:d(n/t),y:d(r/t)}}function W(e,t,n){return{x:t/e||0,y:n/e||0}}function q(e,t){return e===t?1:h(e)>=h(t)?e<0?2:4:t<0?8:16}function K(e,t,n){n||(n=U);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function Y(e,t,n){n||(n=U);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,r)/Math.PI}H.prototype={handler:function(){},init:function(){this.evEl&&_(this.element,this.evEl,this.domHandler),this.evTarget&&_(this.target,this.evTarget,this.domHandler),this.evWin&&_(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&P(this.element,this.evEl,this.domHandler),this.evTarget&&P(this.target,this.evTarget,this.domHandler),this.evWin&&P(M(this.element),this.evWin,this.domHandler)}};var X={mousedown:1,mousemove:2,mouseup:4},Z="mousedown",$="mousemove mouseup";function J(){this.evEl=Z,this.evWin=$,this.pressed=!1,H.apply(this,arguments)}w(J,H,{handler:function(e){var t=X[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var Q={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},ee={2:"touch",3:"pen",4:"mouse",5:"kinect"},te="pointerdown",ne="pointermove pointerup pointercancel";function re(){this.evEl=te,this.evWin=ne,H.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(te="MSPointerDown",ne="MSPointerMove MSPointerUp MSPointerCancel"),w(re,H,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=Q[r],o=ee[e.pointerType]||e.pointerType,a="touch"==o,s=k(t,e.pointerId,"pointerId");1&i&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):12&i&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(s,1))}});var ie={touchstart:1,touchmove:2,touchend:4,touchcancel:8},oe="touchstart",ae="touchstart touchmove touchend touchcancel";function se(){this.evTarget=oe,this.evWin=ae,this.started=!1,H.apply(this,arguments)}w(se,H,{handler:function(e){var t=ie[e.type];if(1===t&&(this.started=!0),this.started){var n=function(e,t){var n=I(e.touches),r=I(e.changedTouches);return 12&t&&(n=x(n.concat(r),"identifier",!0)),[n,r]}.call(this,e,t);12&t&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}});var ce={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ue="touchstart touchmove touchend touchcancel";function le(){this.evTarget=ue,this.targetIds={},H.apply(this,arguments)}w(le,H,{handler:function(e){var t=ce[e.type],n=function(e,t){var n=I(e.touches),r=this.targetIds;if(3&t&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=I(e.changedTouches),s=[],c=this.target;if(o=n.filter((function(e){return C(e.target,c)})),1===t)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),12&t&&delete r[a[i].identifier],i++;return s.length?[x(o.concat(s),"identifier",!0),s]:void 0}.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}});function de(){H.apply(this,arguments);var e=E(this.handler,this);this.touch=new le(this.manager,e),this.mouse=new J(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function he(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)}),2500)}}w(de,H,{handler:function(e,t,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)(function(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,he.call(this,t)):12&e&&he.call(this,t)}).call(this,t,n);else if(i&&function(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(t-i.x),a=Math.abs(n-i.y);if(o<=25&&a<=25)return!0}return!1}.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var fe=A(l.style,"touchAction"),pe=fe!==s,ge="auto",me="manipulation",ve="none",ye="pan-x",be="pan-y",we=function(){if(!pe)return!1;var e={},t=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){e[n]=!t||i.CSS.supports("touch-action",n)})),e}();function Ee(e,t){this.manager=e,this.set(t)}Ee.prototype={set:function(e){"compute"==e&&(e=this.compute()),pe&&this.manager.element.style&&we[e]&&(this.manager.element.style[fe]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return m(this.manager.recognizers,(function(t){S(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(R(e,ve))return ve;var t=R(e,ye),n=R(e,be);return t&&n?ve:t||n?t?ye:be:R(e,me)?me:ge}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,i=R(r,ve)&&!we.none,o=R(r,be)&&!we["pan-y"],a=R(r,ye)&&!we["pan-x"];if(i){var s=1===e.pointers.length,c=e.distance<2,u=e.deltaTime<250;if(s&&c&&u)return}if(!a||!o)return i||o&&6&n||a&&n&B?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};function Se(e){this.options=c({},this.defaults,e||{}),this.id=L++,this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Te(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function _e(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function Pe(e,t){var n=t.manager;return n?n.get(e):e}function Ce(){Se.apply(this,arguments)}function Re(){Ce.apply(this,arguments),this.pX=null,this.pY=null}function Oe(){Ce.apply(this,arguments)}function ke(){Se.apply(this,arguments),this._timer=null,this._input=null}function Ie(){Ce.apply(this,arguments)}function xe(){Ce.apply(this,arguments)}function Ae(){Se.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Le(e,t){return(t=t||{}).recognizers=T(t.recognizers,Le.defaults.preset),new Me(e,t)}function Me(e,t){this.options=c({},Le.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new(this.options.inputClass||(D?re:F?le:N?de:J))(this,z),this.touchAction=new Ee(this,this.options.touchAction),Ne(this,!0),m(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function Ne(e,t){var n,r=e.element;r.style&&(m(e.options.cssProps,(function(i,o){n=A(r.style,o),t?(e.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=e.oldCssProps[n]||""})),t||(e.oldCssProps={}))}Se.prototype={defaults:{},set:function(e){return c(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(g(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Pe(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return g(e,"dropRecognizeWith",this)||(e=Pe(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(g(e,"requireFailure",this))return this;var t=this.requireFail;return-1===k(t,e=Pe(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(g(e,"dropRequireFailure",this))return this;e=Pe(e,this);var t=k(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<8&&r(t.options.event+Te(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=8&&r(t.options.event+Te(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=c({},e);if(!S(this.options.enable,[this,t]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},w(Ce,Se,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=6&t,i=this.attrTest(e);return r&&(8&n||!i)?16|t:r||i?4&n?8|t:2&t?4|t:2:32}}),w(Re,Ce,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push(be),e&B&&t.push(ye),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,o=e.deltaX,a=e.deltaY;return i&t.direction||(6&t.direction?(i=0===o?1:o<0?2:4,n=o!=this.pX,r=Math.abs(e.deltaX)):(i=0===a?1:a<0?8:16,n=a!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return Ce.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=_e(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),w(Oe,Ce,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ve]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),w(ke,Se,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ge]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||12&e.eventType&&!i)this.reset();else if(1&e.eventType)this.reset(),this._timer=p((function(){this.state=8,this.tryEmit()}),t.time,this);else if(4&e.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),w(Ie,Ce,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ve]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),w(xe,Ce,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Re.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return 30&n?t=e.overallVelocity:6&n?t=e.overallVelocityX:n&B&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&h(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=_e(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),w(Ae,Se,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[me]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=e.eventType)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||K(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,a&&o?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=p((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=p((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Le.VERSION="2.0.7",Le.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Ie,{enable:!1}],[Oe,{enable:!1},["rotate"]],[xe,{direction:6}],[Re,{direction:6},["swipe"]],[Ae],[Ae,{event:"doubletap",taps:2},["tap"]],[ke]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Me.prototype={set:function(e){return c(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,i=t.curRecognizer;(!i||i&&8&i.state)&&(i=t.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===t.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&14&n.state&&(i=t.curRecognizer=n),o++}},get:function(e){if(e instanceof Se)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(g(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(g(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=k(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==s&&t!==s){var n=this.handlers;return m(O(e),(function(e){n[e]=n[e]||[],n[e].push(t)})),this}},off:function(e,t){if(e!==s){var n=this.handlers;return m(O(e),(function(e){t?n[e]&&n[e].splice(k(n[e],t),1):delete n[e]})),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=o.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&Ne(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},c(Le,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:B,DIRECTION_ALL:30,Manager:Me,Input:H,TouchAction:Ee,TouchInput:le,MouseInput:J,PointerEventInput:re,TouchMouseInput:de,SingleTouchInput:se,Recognizer:Se,AttrRecognizer:Ce,Tap:Ae,Pan:Re,Swipe:xe,Pinch:Oe,Rotate:Ie,Press:ke,on:_,off:P,each:m,merge:b,extend:y,assign:c,inherit:w,bindFn:E,prefixed:A}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=Le,(r=function(){return Le}.call(t,n,t,e))===s||(e.exports=r)}(window,document)},function(e,t,n){"use strict";var r=n(11),i=n(12),o=Object.prototype.hasOwnProperty;function a(e){return e&&"EPROMISERETRY"===e.code&&o.call(e,"retried")}e.exports=function(e,t){var n,o;return"object"==typeof e&&"function"==typeof t&&(n=t,t=e,e=n),o=i.operation(t),new Promise((function(t,n){o.attempt((function(i){Promise.resolve().then((function(){return e((function(e){throw a(e)&&(e=e.retried),r(new Error("Retrying"),"EPROMISERETRY",{retried:e})}),i)})).then(t,(function(e){a(e)&&(e=e.retried,o.retry(e||new Error))||n(e)}))}))}))}},function(e,t,n){"use strict";function r(e,t){for(const n in t)Object.defineProperty(e,n,{value:t[n],enumerable:!0,configurable:!0});return e}e.exports=function(e,t,n){if(!e||"string"==typeof e)throw new TypeError("Please pass an Error to err-code");n||(n={}),"object"==typeof t&&(n=t,t=void 0),null!=t&&(n.code=t);try{return r(e,n)}catch(t){n.message=e.message,n.stack=e.stack;const i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(e)),r(new i,n)}}},function(e,t,n){e.exports=n(13)},function(e,t,n){var r=n(14);t.operation=function(e){var n=t.timeouts(e);return new r(n,{forever:e&&e.forever,unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var n in e)t[n]=e[n];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],i=0;i<t.retries;i++)r.push(this.createTimeout(i,t));return e&&e.forever&&!r.length&&r.push(this.createTimeout(i,t)),r.sort((function(e,t){return e-t})),r},t.createTimeout=function(e,t){var n=t.randomize?Math.random()+1:1,r=Math.round(n*t.minTimeout*Math.pow(t.factor,e));return Math.min(r,t.maxTimeout)},t.wrap=function(e,n,r){if(n instanceof Array&&(r=n,n=null),!r)for(var i in r=[],e)"function"==typeof e[i]&&r.push(i);for(var o=0;o<r.length;o++){var a=r[o],s=e[a];e[a]=function(r){var i=t.operation(n),o=Array.prototype.slice.call(arguments,1),a=o.pop();o.push((function(e){i.retry(e)||(e&&(arguments[0]=i.mainError()),a.apply(this,arguments))})),i.attempt((function(){r.apply(e,o)}))}.bind(e,s),e[a].options=n}}},function(e,t){function n(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=n,n.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts},n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(void 0===n){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),n=this._timeouts.shift()}var r=this,i=setTimeout((function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout((function(){r._operationTimeoutCb(r._attempts)}),r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)}),n);return this._options.unref&&i.unref(),!0},n.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){n._operationTimeoutCb()}),n._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},n.prototype.try=function(e){this.attempt(e)},n.prototype.start=function(e){this.attempt(e)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,n=0,r=0;r<this._errors.length;r++){var i=this._errors[r],o=i.message,a=(e[o]||0)+1;e[o]=a,a>=n&&(t=i,n=a)}return t}},function(e,t,n){var r,i,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};r=[n,t,n(4),n(5),n(16),n(3),n(2),n(17),n(18),n(19),n(20),n(1)],void 0===(i=function(e,t,n,r,i,a,s,c,u,l,d,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BookViewerReflowable=t.DefaultRenderSettings=void 0,t.DefaultRenderSettings={font:"Bookerly",fontSize:16,lineHeightFactor:1.3525,leftAlign:!1,marginTop:20,marginRight:14.67,marginBottom:13.33,marginLeft:14.67,colorTheme:r.ColorTheme.Default,viewportHeight:0,viewportWidth:0,viewportTopOffset:0,linkStyle:"color: #0066c0; text-decoration: underline;",disabledLinkStyle:"color: gray; text-decoration: underline;",searchResultItem:null};var f={supportedFontFormats:["woff2"]},p=function(){function e(e,r,s){var c=this;this.viewerRoot=e.viewerRoot,this.bookProvider=r,this.sectionLoader=new i.SectionLoader(r),this.viewerConfig=o(o({},f),e),this.renderSettings=o(o({},t.DefaultRenderSettings),s);var u={scrollCallback:function(){return c.callReadingStatusChangedOnScroll()},throttledScrollCallback:function(){return c.setFirstVisibleElementPid()},scrollContainer:this.viewerConfig.scrollContainer};this.scrollModel=new a.ScrollModel(u),this.clickHandler=new n.ClickHandler,this.displayBook()}return e.prototype.clear=function(){for(var e=this.viewerRoot.firstChild;e;)this.viewerRoot.removeChild(e),e=this.viewerRoot.firstChild;document.getElementById("book-stylesheet").remove(),document.getElementById("reader-link-stylesheet").remove(),this.scrollModel.clear(),this.firstVisibleElementPid=0},e.prototype.clearStyleSheets=function(){document.contains(document.getElementById("book-stylesheet"))&&document.getElementById("book-stylesheet").remove(),document.contains(document.getElementById("reader-link-stylesheet"))&&document.getElementById("reader-link-stylesheet").remove()},e.prototype.goToPosition=function(e,t){if(this.pidSortedInfoList){var n=s.binarySearch(this.pidSortedInfoList,(function(e){return e.pid}),e),r=this.pidSortedInfoList[n],i=document.querySelector('[data-pid="'+r.pid+'"]');i?(this.scrollModel.setScrollY(r.pixelPositions.topMargin),t&&i.focus()):console.warn("PID element not found: "+r.pid)}},e.prototype.getCurrentReadingLocationData=function(){var e=this.getFirstVisibleElement();return{currentPositionRange:{firstVisiblePid:e.pid,topOfFirstVisiblePid:e.pixelPositions.top,bottomOfFirstVisiblePid:e.pixelPositions.bottom},minimumPosition:0,maximumPosition:this.bookManifest.sections[this.bookManifest.sections.length-1].endPosition}},e.prototype.displayBook=function(){var e=this;h.callRenderStatusChanged(this.viewerConfig,h.Status.LOADING),this.setupReaderFonts(),Promise.all([this.bookProvider.getManifest(),this.bookProvider.getResourceAsString("styles.css"),this.sectionLoader.getAllSections(),this.sectionLoader.getCoverImage(),this.ensureReaderFontLoaded(this.renderSettings.font),this.loadEmbeddedFonts()]).then((function(t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[5];return e.bookManifest=n,e.embeddedFonts=a,h.showContent(e.viewerRoot,!1),e.clearStyleSheets(),document.head.appendChild(e.createBookStylesheetHTML(r)),document.head.appendChild(e.createReaderLinkStylesheetHTML()),e.viewerRoot.style.fontFamily="DefaultFont",e.attachClickEventHandling(),e.changeReaderFont(null,e.renderSettings.font),e.applyColorTheme(),e.appendCoverImage(o),e.appendSections(i),e.addAccessibilityTabIndexAttribute(),e.loadImages(),e.changeBackgroundImageUrls(),e.attachAnchorEventHandling(n.sections),e.fixUpLinkStyles(),e.applyLinkStyles(),e.applyHyphenation(n.language),e.applyRenderSettingsInternal(e.renderSettings).then((function(){e.scrollModel.attachEventListeners(),e.goToPosition(n.srl),h.showContent(e.viewerRoot,!0),e.setFirstVisibleElementPid(),h.callRenderStatusChanged(e.viewerConfig,h.Status.READY)}))})).catch((function(t){h.callRenderStatusChanged(e.viewerConfig,h.Status.ERROR,t)}))},e.prototype.highlightSearchResult=function(e){this.clearSearchHighlights(),this.renderSettings.searchResultItem=e,c.highlightSearchResult(e,this.renderSettings.colorTheme)},e.prototype.clearSearchHighlights=function(){c.clearSearchHighlights(),this.renderSettings.searchResultItem=null},e.prototype.attachAnchorEventHandling=function(e){for(var t=this,n=this.viewerRoot.getElementsByTagName("a"),r=function(r){var i=n[r];i.addEventListener("click",(function(n){n.preventDefault(),n.stopPropagation();var r=i.href.match(/^book:(\d+)$/);if(r){var o=parseInt(r[1],10);o>=e[e.length-1].endPosition?t.callOutOfBoundsAnchor():t.goToPosition(o)}else t.callLinkClicked(i.href)}))},i=0;i<n.length;i++)r(i)},e.prototype.addAccessibilityTabIndexAttribute=function(){for(var e=this.viewerRoot.querySelectorAll("[data-pid]"),t=0;t<e.length;t++)e[t].setAttribute("tabindex",(1e3+t).toString())},e.prototype.fixUpLinkStyles=function(){for(var e=this.viewerRoot.getElementsByTagName("a"),t=0;t<e.length;t++)e[t].classList.add("book-content-link");var n=this.viewerRoot.getElementsByTagName("span");for(t=0;t<n.length;t++){var r=n[t];"text-decoration: underline"===r.getAttribute("style")&&(r.removeAttribute("style"),r.classList.add("book-content-disabled-link"))}},e.prototype.buildPidPixelMaps=function(){for(var e=[],t=this.viewerRoot.querySelectorAll("[data-pid]"),n=0;n<t.length;n++){var r=t[n],i=parseInt(r.dataset.pid,10),o=!!r.dataset.imageName,a=getComputedStyle(r),s=r.getBoundingClientRect(),c=this.viewerRoot.getBoundingClientRect().top+this.renderSettings.viewportTopOffset,u=s.top-c,l=s.bottom-c,d={topMargin:u-parseFloat(a.marginTop),bottom:l,top:u};e.push({pid:i,pixelPositions:d,isImage:o})}this.pidSortedInfoList=e.sort((function(e,t){return e.pid-t.pid})),this.pixelSortedInfoList=e.sort((function(e,t){return e.pixelPositions.top-t.pixelPositions.top}))},e.prototype.determineImageSnapElement=function(e){var t=this.pixelSortedInfoList[e-1];if(t.isImage){var n=this.scrollModel.getScrollY();n<t.pixelPositions.bottom&&n>t.pixelPositions.top&&(e-=1)}return e},e.prototype.getFirstVisibleElement=function(){var e=s.binarySearch(this.pixelSortedInfoList,(function(e){return e.pixelPositions.top}),this.scrollModel.getScrollY());return(e=Math.min(e,this.pixelSortedInfoList.length-1))>=1&&(e=this.determineImageSnapElement(e)),this.pixelSortedInfoList[e]},e.prototype.pidToPixel=function(e){var t=s.binarySearch(this.pidSortedInfoList,(function(e){return e.pid}),e);return this.pidSortedInfoList[t].pixelPositions.top},e.prototype.pixelToPid=function(e){var t=s.binarySearch(this.pixelSortedInfoList,(function(e){return e.pixelPositions.top}),e);return this.pixelSortedInfoList[t].pid},e.prototype.getFirstVisibleElementPid=function(){return this.getFirstVisibleElement().pid},e.prototype.applyRenderSettingsInternal=function(e){var n=this;if(e.viewportHeight<=0||e.viewportWidth<=0)throw new Error("Viewport height and/or viewport width is missing.");e=o(o({},t.DefaultRenderSettings),e);var r=this.renderSettings.font,i=r!==e.font,a=this.isReaderFontLoaded(e.font),s=this.renderSettings.colorTheme!==e.colorTheme,c=this.renderSettings.linkStyle,u=this.renderSettings.disabledLinkStyle,l=c!==e.linkStyle||u!==e.disabledLinkStyle;return this.renderSettings=o(o({},this.renderSettings),e),i&&!a&&h.callRenderStatusChanged(this.viewerConfig,h.Status.LOADING),this.ensureReaderFontLoaded(e.font).then((function(){h.isEqualRenderSettings(n.renderSettings,e)&&(i&&n.changeReaderFont(r,e.font),s&&(n.applyColorTheme(),e.searchResultItem&&n.highlightSearchResult(e.searchResultItem)),n.applyFontSize(e.fontSize),n.applyLineHeight(e.lineHeightFactor),n.resizeIndents(e),n.updateDropcaps(e),n.applyMargins(),n.applyAlignment(),n.fixImageDimensions(n.bookManifest.resources),n.fixTableCells(),n.addOverflowXAroundTable(),l&&n.applyLinkStyles(),n.buildPidPixelMaps(),i&&!a&&h.callRenderStatusChanged(n.viewerConfig,h.Status.READY))}))},e.prototype.applyRenderSettings=function(e){var t=this;return this.applyRenderSettingsInternal(e).then((function(){t.goToPosition(t.firstVisibleElementPid)}))},e.prototype.applyHyphenation=function(e){this.viewerRoot.lang=e,this.viewerRoot.style.hyphens="auto",this.viewerRoot.style["-webkit-hyphens"]="auto",this.viewerRoot.style["-ms-hyphens"]="auto",this.viewerRoot.style["overflow-wrap"]="break-word",this.viewerRoot.style["word-wrap"]="break-word"},e.prototype.applyFontSize=function(e){document.documentElement.style.fontSize=e+"px"},e.prototype.applyLinkStyles=function(){var e=document.getElementById("reader-link-stylesheet");e&&e.remove(),document.head.appendChild(this.createReaderLinkStylesheetHTML())},e.prototype.applyLineHeight=function(e){for(var t=this.viewerRoot.querySelectorAll("div"),n=0;n<t.length;n++){var r=t[n];if(r.dataset.lh){var i=parseFloat(r.dataset.lh);r.style.lineHeight=(e*i).toString()}}},e.prototype.resizeIndents=function(e){this.viewerRoot.querySelectorAll("[data-resize-indent]").forEach((function(t){if(!("initIndent"in t.dataset)){var n=getComputedStyle(t),r=parseFloat(n.textIndent)/parseFloat(n.fontSize);t.dataset.initIndent=r+"em"}var i=s.getLargeFontSizeFactor(e.fontSize,e.viewportWidth,e.viewportHeight)*parseFloat(t.dataset.initIndent);t.style.textIndent=i+"em"}))},e.prototype.applyMargins=function(){this.sectionsContainer.style.margin=this.renderSettings.marginTop+"px "+this.renderSettings.marginRight+"px "+this.renderSettings.marginBottom+"px "+this.renderSettings.marginLeft+"px"},e.prototype.applyAlignment=function(){for(var e=this.viewerRoot.querySelectorAll("[data-is-justified]"),t=(this.renderSettings.viewportWidth-this.renderSettings.marginLeft-this.renderSettings.marginRight)/s.getAlphabetWidth(this.renderSettings.fontSize)>1.321,n=0;n<e.length;n++){var r=e[n];t&&!this.renderSettings.leftAlign?r.style.textAlign="justify":r.style.textAlign="left"}},e.prototype.updateDropcaps=function(e){u.applyDropcaps(this.viewerRoot,e,this.viewerConfig.readerFonts,this.embeddedFonts)},e.prototype.applyColorTheme=function(){var e=r.COLOR_THEMES_STYLE[r.ColorTheme[this.renderSettings.colorTheme]];this.viewerRoot.style.color=e.textColor,this.viewerRoot.style.background=e.backgroundColor},e.prototype.appendCoverImage=function(e){if(e){var t='<img alt="Book cover"data-pid="1" data-is-cover-image = "true"data-image-name="'+e+'"style="width: 100%; height: 100%; object-fit: contain;\n                    padding-left: '+this.renderSettings.marginLeft+"px;\n                    padding-right: "+this.renderSettings.marginLeft+'px;\n                ">';this.viewerRoot.insertAdjacentHTML("beforeend",t)}},e.prototype.appendSections=function(e){this.sectionsContainer=document.createElement("div");for(var t=0;t<e.length;t++){var n='<div style="clear: both; margin-bottom: '+(t===e.length-1?0:"5em")+'">'+e[t]+"</div>";this.sectionsContainer.insertAdjacentHTML("beforeend",n)}this.viewerRoot.insertAdjacentElement("beforeend",this.sectionsContainer)},e.prototype.loadImages=function(){var e=this;this.viewerRoot.querySelectorAll("[data-image-name]").forEach((function(t){s.isBlockImage(t)&&(t.parentElement.style.width="100%",t.style.height&&(t.parentElement.style.minHeight=t.style.height)),e.bookProvider.getResourceUrl(t.dataset.imageName).then((function(e){t.src=e,t.hasAttribute("alt")&&!t.alt.match(/^\s*$/)||(t.alt=" ")}))}))},e.prototype.changeBackgroundImageUrls=function(){var e=this;this.viewerRoot.querySelectorAll("[data-background-image-name]").forEach((function(t){e.bookProvider.getResourceUrl(t.dataset.backgroundImageName).then((function(e){t.style.backgroundImage="url("+e+")"}))}))},e.prototype.fixImageDimensions=function(e){var t=this.viewerRoot.querySelector("[data-is-cover-image]");t&&(t.style.height=this.renderSettings.viewportHeight+"px",t.style.width=this.renderSettings.viewportWidth+"px");for(var n=this.sectionsContainer.getElementsByTagName("img"),r=function(t){var r=n[t];if("true"===r.dataset.imageHasTableParent)return"continue";r.style.removeProperty("width"),r.style.removeProperty("height");var o=e.filter((function(e){if(e.name===r.dataset.imageName)return e})),a=o[0].imageWidth,c=o[0].imageHeight;"false"===r.dataset.imageHasWidth&&(r.style.width="100%"),r.style.maxWidth="100%";var u=c/a*r.clientWidth;u>i.renderSettings.viewportHeight?(r.style.height=.9*i.renderSettings.viewportHeight+"px",r.style.width=a/c*i.renderSettings.viewportHeight*.9+"px"):(r.style.height=u+"px",r.style.width=r.clientWidth+"px"),s.isBlockImage(r)&&(r.parentElement.style.width="unset",r.parentElement.style.minHeight=u+"px")},i=this,o=0;o<n.length;o++)r(o)},e.prototype.fixTableCells=function(){l.fixTableCells(this.viewerRoot)},e.prototype.addOverflowXAroundTable=function(){d.addOverflowXAroundTable(this.viewerRoot)},e.prototype.createBookStylesheetHTML=function(e){var t=document.createElement("style");return t.id="book-stylesheet",t.type="text/css",t.appendChild(document.createTextNode(e)),t},e.prototype.createReaderLinkStylesheetHTML=function(){var e=document.createElement("style");e.id="reader-link-stylesheet",e.type="text/css";var t="a.book-content-link {"+this.renderSettings.linkStyle+"}span.book-content-disabled-link {"+this.renderSettings.disabledLinkStyle+"}";return e.appendChild(document.createTextNode(t)),e},e.prototype.selectFontFormat=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(-1!==this.viewerConfig.supportedFontFormats.indexOf(r.format))return r}throw new Error("Can't find suitable font format")},e.prototype.setupReaderFonts=function(){for(var e in this.readerFontFaces={},this.viewerConfig.readerFonts){var t=[];if(window.FontFace)for(var n=0,r=this.viewerConfig.readerFonts[e];n<r.length;n++){var i=r[n],o=this.selectFontFormat(i.fontFiles),a=new FontFace("DefaultFont","url("+o.url+")",{style:i.fontStyle,weight:i.fontWeight,stretch:i.fontStretch});t.push(a)}this.readerFontFaces[e]=t}},e.prototype.isReaderFontLoaded=function(e){for(var t=0,n=this.readerFontFaces[e];t<n.length;t++)if("loaded"!==n[t].status)return!1;return!0},e.prototype.ensureReaderFontLoaded=function(e){var t=this;return Promise.all(this.readerFontFaces[e].map((function(e){return t.loadFontFace(e)}))).then()},e.prototype.changeReaderFont=function(e,t){if(e)for(var n=0,r=this.readerFontFaces[e];n<r.length;n++){var i=r[n];document.fonts.delete(i)}for(var o=0,a=this.readerFontFaces[t];o<a.length;o++)i=a[o],document.fonts.add(i)},e.prototype.loadEmbeddedFonts=function(){var e=this;return this.bookProvider.getResourceAsObject("fonts.json").then((function(t){return Promise.all(t.map((function(t){var n=e.selectFontFormat(t.fontFiles);return e.bookProvider.getResourceUrl(n.fileName).then((function(e){var n=s.mapYJFontWeight(t.fontWeight),r=new FontFace(t.fontFamily,"url("+e+")",{style:t.fontStyle,weight:n,stretch:t.fontStretch});return document.fonts.add(r),r.load()})).catch((function(e){console.warn(e)}))}))).then((function(){return t}))}))},e.prototype.callLinkClicked=function(e){if(this.viewerConfig.onLinkClicked)return this.viewerConfig.onLinkClicked(e)},e.prototype.callOutOfBoundsAnchor=function(){if(this.viewerConfig.onOutOfBoundsAnchor)return this.viewerConfig.onOutOfBoundsAnchor()},e.prototype.callReadingStatusChangedOnScroll=function(){this.scrollModel.isAtEndOfBook()?h.callReadingStatusChanged(this.viewerConfig,h.ReadStatus.END):h.callReadingStatusChanged(this.viewerConfig,h.ReadStatus.READING)},e.prototype.setFirstVisibleElementPid=function(){this.firstVisibleElementPid=this.getFirstVisibleElementPid()},e.prototype.loadFontFace=function(e){var t=this;return s.attemptWithRetries({retries:3},(function(){return e.load()})).catch((function(n){var r,i=null!==(r=Object.keys(t.readerFontFaces).find((function(n){return-1!==t.readerFontFaces[n].indexOf(e)})))&&void 0!==r?r:e.family,o=t.selectFontFormat(t.viewerConfig.readerFonts[i].find((function(t){return t.fontStyle===e.style&&t.fontStretch===e.stretch&&t.fontWeight===e.weight})).fontFiles);return Promise.reject("Failed to load font "+i+": "+n+"                 style:"+e.style+" weight:"+e.weight+" stretch:"+e.stretch+"                 format:"+(o?o.format:"unavailable")+" url:"+(o?o.url:"unavailable"))}))},e.prototype.attachClickEventHandling=function(){var e=this;this.viewerRoot.addEventListener("click",(function(t){e.clickHandler.handleClickEvent(t,e.viewerConfig.scrollContainer,e.viewerConfig.onClick,e.viewerConfig.onDoubleClick)}))},e}();t.BookViewerReflowable=p}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SectionLoader=void 0;var n=function(){function e(e){this.bookProvider=e,this.manifest=e.getManifest()}return e.prototype.getSectionIndexByPosition=function(e){return this.manifest.then((function(t){for(var n=0;n<t.sections.length;n++){var r=t.sections[n];if(e>=r.startPosition&&e<=r.endPosition)return n}return null}))},e.prototype.getSectionMetadata=function(e){return this.manifest.then((function(t){return t.sections[e]}))},e.prototype.isLastSection=function(e){return this.manifest.then((function(t){return t.sections.length===e+1}))},e.prototype.getSectionDataByIndex=function(e){return this.bookProvider.getSectionContent(e)},e.prototype.getSectionDataByPosition=function(e){var t=this;return this.getSectionIndexByPosition(e).then((function(e){return t.getSectionDataByIndex(e)}))},e.prototype.getAllSections=function(){var e=this;return this.bookProvider.getManifest().then((function(t){return Promise.all(t.sections.map((function(t,n){return e.bookProvider.getSectionContent(n)})))}))},e.prototype.getCoverImage=function(){return this.manifest.then((function(e){return e.coverImage}))},e}();t.SectionLoader=n}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){var r,i;r=[n,t,n(5),n(0)],void 0===(i=function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearSearchHighlights=t.highlightSearchResult=void 0;var i=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"],o=function(){function e(e){this.closeTags=[],this.descendantInfoIdx=0,this.htmlPieces=[],this.rootNode=e,this.rootString=this.rootNode.outerHTML}return e.prototype.transformString=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent},e.prototype.getDescendants=function(){for(var e=this.rootNode.querySelectorAll("*"),t=[],n=0;n<e.length;n++){var r=s(e[n]);t.push({descendant:e[n],idx:n,tag:r})}return t},e.prototype.nextIndex=function(e,t){var n=this.rootString.length-1;this.descendantInfoIdx<e.length&&(n=this.rootString.indexOf(e[this.descendantInfoIdx].tag.open,t));var r=this.closeTags[this.closeTags.length-1],i=this.rootString.indexOf(r,t),o=t;if(n<i){var a=this.rootString.substring(t,n);this.htmlPieces.push(this.transformString(a)),this.htmlPieces.push(e[this.descendantInfoIdx].tag.open),e[this.descendantInfoIdx].tag.close&&this.closeTags.push(e[this.descendantInfoIdx].tag.close),o=n+e[this.descendantInfoIdx].tag.open.length-1,this.descendantInfoIdx++}else n>i&&(a=this.rootString.substring(t,i),this.htmlPieces.push(this.transformString(a)),this.htmlPieces.push(r),o=i+r.length-1,this.closeTags.length&&this.closeTags.pop());return o},e.prototype.findHtmlPieces=function(){var e=this.getDescendants(),t=s(this.rootNode);t.close&&this.closeTags.push(t.close),this.htmlPieces.push(t.open);for(var n=t.open.length;n<this.rootString.length;n++)n=this.nextIndex(e,n);return t.close&&this.htmlPieces.push(t.close),this.htmlPieces},e}(),a=function(){function e(e,t){this.appearanceIndex=e.appearancesInPid,this.htmlPieces=t,this.keyword=e.keyword.toLowerCase(),this.keywordPositions=[],this.keywordStartPositionCandidates=[],this.tempKeywordInfo={keyword:"",appearanceIndex:0},this.visitedHtmlPieceIdx=[]}return e.prototype.updateStartPositionCandidates=function(e,t){var n={htmlPieceIdx:t,characterIdx:e};this.keywordStartPositionCandidates.some((function(e){return e===n}))||this.keywordStartPositionCandidates.push(n)},e.prototype.getKeywordStatus=function(e){return this.tempKeywordInfo.keyword+=e,this.tempKeywordInfo.keyword===this.keyword?(this.tempKeywordInfo.appearanceIndex++,this.tempKeywordInfo.appearanceIndex===this.appearanceIndex?r.KeywordStatus.FOUND:r.KeywordStatus.IMPOSSIBLE):0===this.keyword.indexOf(this.tempKeywordInfo.keyword)?r.KeywordStatus.POSSIBLE:r.KeywordStatus.IMPOSSIBLE},e.prototype.nextKeywordStartPosition=function(e){var t=this.keywordStartPositionCandidates.shift();return this.visitedHtmlPieceIdx=this.visitedHtmlPieceIdx.slice(0,e+1),t},e.prototype.newKeywordPositionInfo=function(e,t,n){for(var i=e;i<t.length;i++){var o=t[i];o===this.keyword[0]&&this.tempKeywordInfo.keyword.length&&this.updateStartPositionCandidates(i,n),this.keywordPositions.push({htmlPieceIdx:n,characterIdx:i});var a=this.getKeywordStatus(o);if(a===r.KeywordStatus.FOUND)return{status:a,nextKeywordStartPosition:null};if(a===r.KeywordStatus.IMPOSSIBLE&&(this.tempKeywordInfo.keyword="",this.keywordPositions=[],this.keywordStartPositionCandidates.length))return{status:a,nextKeywordStartPosition:this.nextKeywordStartPosition(n)}}return{status:r.KeywordStatus.POSSIBLE,nextKeywordStartPosition:null}},e.prototype.findKeywordPositions=function(){for(var e=0,t=1,n=null;t!==this.htmlPieces.length-1;)if(this.htmlPieces[t].length){var i=this.htmlPieces[t].toLowerCase();if(this.visitedHtmlPieceIdx.some((function(e){return e===t}))||(e=0,this.visitedHtmlPieceIdx.push(t)),(n=this.newKeywordPositionInfo(e,i,t)).status===r.KeywordStatus.FOUND)return this.keywordPositions;var o=n.nextKeywordStartPosition;o?(t=o.htmlPieceIdx,e=o.characterIdx):t+=2}else t+=2;return this.keywordPositions},e}(),s=function(e){var t=e.tagName,n=e.outerHTML,r=e.innerHTML;if(i.some((function(e){return e===t.toLowerCase()})))return{open:n,close:null};var o="</"+t.toLowerCase()+">";return{open:n.substring(0,n.length-(r+o).length),close:o}},c=function(e,t,n){var r=e.slice(0,t),i=e.slice(t+1,e.length);return r+n.outerHTML+i},u=function(e,t){var r=document.createElement("span"),i=n.COLOR_THEMES_STYLE[n.ColorTheme[t]].searchHighlightStyle;return r.className="search-tag",r.innerHTML=e,r.style.textDecoration=i.textDecoration,r.style.backgroundColor=i.backgroundColor,r};t.highlightSearchResult=function(e,t){var n='[data-pid="'+e.pidIndex+'"]',r=document.querySelector(n),i=new o(r).findHtmlPieces(),s=new a(e,i).findKeywordPositions();r.outerHTML=function(e,t,n){for(var r=e.length-1;r>=0;r--){var i=e[r].htmlPieceIdx,o=t[i],a=e[r].characterIdx,s=u(o[a],n);t[i]=c(o,a,s)}return t.join("")}(s,i,t)},t.clearSearchHighlights=function(){var e=document.getElementsByClassName("search-tag");if(e.length>0)for(var t=e.length-1;t>=0;t--){var n=s(e[t]),r=e[t],i=r.parentElement,o=i.innerHTML,a=o.indexOf(e[t].outerHTML),c=a+n.open.length,u=a+n.open.length+n.close.length+r.innerHTML.length;i.innerHTML=o.substring(0,a)+o[c]+o.substring(u,o.length)}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n,t,n(2)],void 0===(i=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyDropcaps=void 0;function r(e,t,n,r,i){for(var o=0,a=e;o<a.length;o++){var s=a[o];if(s.fontFamily===t&&(s.fontWeight===n||!s.fontWeight&&"normal"===n)&&(s.fontStyle===r||!s.fontStyle&&"normal"===r)&&(s.fontStretch===i||!s.fontStretch&&"normal"===i))return s.fontMetrics}return null}function i(e,t){for(var n=0,r=t.glyphMetrics;n<r.length;n++){var i=r[n];if(i.glyph===e)return i}}function o(e,t,n,r,i,o){for(a(e,t,n,r,i);e.offsetWidth>.6*o&&i>1;)a(e,t,n,r,--i)}function a(e,t,n,r,o){if(1===o||!r||!n)return e.style.fontFamily="unset",e.style.cssFloat="unset",e.style.fontSize="unset",e.style.lineHeight="unset",void(e.style.marginTop="unset");for(var a=n.ascent/n.unitsPerEm,s=-n.descent/n.unitsPerEm,c=n.capHeight/n.unitsPerEm,u=r.capHeight/r.unitsPerEm,l=r.ascent/r.unitsPerEm,d=-r.descent/r.unitsPerEm,h=null,f=null,p=0,g=0,m=e.innerHTML;g<m.length;g++){var v=i(m[g],n);if(null==v){h=null,f=null,p=null;break}var y=v.yMax/n.unitsPerEm,b=-v.yMin/n.unitsPerEm;y>h&&(h=y),b>f&&(f=b),p+=(v.xMax-v.xMin)/n.unitsPerEm}var w=(o-1)*t+u,E=w/c,S=0;null!=f&&f*E>d&&(E=(w+d)/(c+f),S+=f);var T=a-s-(o*t-(t-(l+d))/2-d)/E+S;e.style.cssFloat="left",e.style.fontSize=E+"em",e.style.lineHeight=(a-s).toString(),e.style.marginTop=-T+"em",e.style.height=w/E+T+"em",p>0&&(e.style.width=p+"em"),e.style.marginRight=.6*(t-u)/E+"em"}function s(e,t,n){var r=getComputedStyle(e),i=parseFloat(r.lineHeight);i>0&&1===Math.round(e.clientHeight/i)?e.dataset.dcKnockout=t.offsetWidth+"px":delete e.dataset.dcKnockout;var o=e.previousElementSibling;if(o){var a=parseFloat(o.dataset.dcKnockout);a&&a+t.offsetWidth<=.6*n?t.style.marginLeft=a+"px":t.style.marginLeft="unset"}}t.applyDropcaps=function(e,t,i,a){for(var c=e.querySelectorAll("div"),u=0;u<c.length;u++){var l=c[u];if(l.dataset.dropcapFontFamily&&l.dataset.dropcapLines&&l.dataset.dropcapChars){var d=n.getFirstElementChild(l);if(d&&"SPAN"===d.tagName){var h=l.dataset.dropcapFontFamily,f=parseInt(l.dataset.dropcapLines),p=l.dataset.dropcapFontWeight||"normal",g=l.dataset.dropcapFontStyle||"normal",m=l.dataset.dropcapFontStretch||"normal",v=parseFloat(l.dataset.lh)*t.lineHeightFactor,y=r(i[t.font],t.font,p,g,m),b=y;"default"!==h&&(b=r(a,h,p,g,m)),null!=b&&(o(d,v,b,y,f,t.viewportWidth),s(l,d,t.viewportWidth))}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fixTableCells=void 0,t.fixTableCells=function(e){!function(e){e.querySelectorAll("[data-has-padding-as-percentage]").forEach((function(e){var t=getComputedStyle(e);e.style.paddingLeft=t.paddingLeft,e.style.paddingRight=t.paddingRight}))}(e),function(e){e.querySelectorAll("[data-has-margin-as-percentage]").forEach((function(e){var t=getComputedStyle(e);e.style.marginLeft=t.marginLeft,e.style.marginRight=t.marginRight}))}(e)}}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addOverflowXAroundTable=void 0,t.addOverflowXAroundTable=function(e){e.querySelectorAll("table").forEach((function(e){var t=document.createElement("div");t.style.overflowX="auto",e.parentNode.insertBefore(t,e),t.appendChild(e)}))}}.apply(t,[n,t]))||(e.exports=r)}])},87814:function(e,t,n){var r;"undefined"!=typeof self&&self,r=(e,t,n)=>(()=>{var r={3501:(e,t,n)=>{"use strict";n.d(t,{J:()=>y,T:()=>v});var r=n(9611),i=n(9779),o=n(27),a=n(373),s=n(7801),c=n(9108),u=n(2775),l=n(5162),d=n(4953),h=n(6942),f=n(3969),p=n(8334),g=n(7614),m=n(1900);const v=6;class y{static build(e){var t,n,y,b,w,E,S,T,_,P,C,R;const O=null!==(t=e.canvasService)&&void 0!==t?t:this.buildCanvasService(e.requireHighResolutionImages,e.canvasPixelRatio),k=null!==(n=e.bookRenderOptions.theme)&&void 0!==n?n:"default",I="custom"===k?e.themeData:u.M[k];if(!I)throw new Error('Theme was set to "custom" but no "themeData" were specified');const x=Object.assign(Object.assign(Object.assign({},e),e.bookRenderOptions),{pixelRatio:O.pixelRatio}),A=null!==(y=e.metricsService)&&void 0!==y?y:new i.ConsoleMetricsService,L=i.PageRendererFactory.build(x,new i.MetricsUtil(A)),M=Object.assign(Object.assign(Object.assign({},e),e.bookRenderOptions),{scale:null!==(b=e.scale)&&void 0!==b?b:1,pageRenderer:L,canvasService:O,enableWebWorker:!1,mountPageCanvas:null===(w=e.mountPageCanvas)||void 0===w||w}),N=new i.PageImageRenderer(M),D=null!==(E=e.bookProviderFactory)&&void 0!==E?E:new i.DevBookProviderFactory,F=new d.v,B=null!==(S=e.decorationRenderer)&&void 0!==S?S:new p.G({[o.g.ANNOTATION_TYPE_NOTE]:new s.j,[o.g.ANNOTATION_TYPE_HIGHLIGHT]:new c.y,[o.g.ANNOTATION_TYPE_SEARCH]:new m.v}),U=new a.b({bookRenderOptions:Object.assign({},e.bookRenderOptions),navigationOptions:{navigationDirection:e.navigationDirection,navigationMode:e.navigationMode,animatePageTurn:e.animatePageTurn},themeData:I,guidedViewOptions:e.guidedViewOptions,zoomViewOptions:e.zoomViewOptions}),j=null!==(T=e.decorationProvider)&&void 0!==T?T:new g.i,H=new l.B(e.asin,e.revision,{readAheadPageCount:null!==(_=e.renderBatchSize)&&void 0!==_?_:v,bundleImages:null!==(P=e.bundleImages)&&void 0!==P&&P,bookProviderFactory:D,pageImageRenderer:N,eventEmitter:F,clientRenderOptionsFactory:U,metricsService:A}),z=0==e.enableInteractivity?void 0:new f._V({container:e.container,interactionLayer:e.interactionLayer,fullPage:e.fullPage,decorationProvider:j,decorationRenderer:B,eventEmitter:F,canvasService:O,clientRenderOptionsFactory:U}),V=Object.assign(Object.assign({},e),{clientRenderOptionsFactory:U,scale:null!==(C=e.scale)&&void 0!==C?C:1,rendererController:H,eventEmitter:F,metricsService:A,decorationProvider:j,interactivityLayer:z,bookProviderFactory:D,selectionRenderer:null!==(R=e.selectionShapesRenderer)&&void 0!==R?R:new h.G({clientRenderOptionsFactory:U}),enableInteractivity:void 0===e.enableInteractivity||e.enableInteractivity});return new r.y(V)}static buildCanvasService(e=!1,t){const n=null!=t&&t>0?t:this.MINIMUM_FIXED_FORMAT_PIXEL_RATIO;return e&&window.devicePixelRatio<=n?i.DefaultCanvasService.withPixelRatio(n):i.DefaultCanvasService.fromDocument()}}y.MINIMUM_FIXED_FORMAT_PIXEL_RATIO=2},9611:(e,t,n)=>{"use strict";n.d(t,{y:()=>g});var r=n(27),i=n(4650),o=n(4289),a=n(2775),s=n(9779),c=n(3501),u=n(5988),l=n(4155),d=n(9665),h=n(4910),f=n(9343),p=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class g{constructor(e){var t,n;this.busyDeferred=new h.B,this.onViewingModeChange=e=>p(this,void 0,void 0,(function*(){const t=this.options.clientRenderOptionsFactory.get();this.options.clientRenderOptionsFactory.set(Object.assign(Object.assign({},t),{bookRenderOptions:Object.assign(Object.assign({},t.bookRenderOptions),{viewingMode:e.viewingMode})})),yield this.updateClientServices(!1),this.options.eventEmitter.emit("onViewingModeChangeEnded",{viewingMode:e.viewingMode})})),this.options=e,this.navigationService=this.options.navigationService,this.interactionControllerFactory=this.options.interactionControllerFactory,this.bookMetadataProvider=this.options.bookMetadataProvider,this.metricsUtil=new s.MetricsUtil(e.metricsService),this.metricsService=e.metricsService;const o=e.clientRenderOptionsFactory.get();this.options.container.className+=` ${r.g.ROOT_ELEMENT_CLASS} ${r.g.ROOT_THEME_CLASS[null!==(t=o.bookRenderOptions.theme)&&void 0!==t?t:"custom"]}`,this.options.eventEmitter.on("onViewingModeChange",this.onViewingModeChange),this.nextPageThrottler=i.d.throttler((()=>this.doNextPage()),100),this.previousPageThrottler=i.d.throttler((()=>this.doPreviousPage()),100),this.options.eventEmitter.on("onInBookLinkClick",(e=>p(this,void 0,void 0,(function*(){this.options.skipNavigationToInternalLink||(yield this.goToPositionId(e.startPositionId))})))),this.isPinchHandlerEnabled=null===(n=this.options.enablePinchHandler)||void 0===n||n}isReady(){return this.busyDeferred.isCompleted}on(e,t){this.options.eventEmitter.on(e,t)}hasPreviousPage(){var e;const t=null===(e=this.navigationService)||void 0===e?void 0:e.getCurrentView();return(0,s.assertIsDefined)(t,"hasPreviousPage can only be called after navigation"),!t.isFirst()}previousPage(){return p(this,void 0,void 0,(function*(){return this.metricsUtil.asyncExecuteMetrics(s.MetricsConstants.PREVIOUS_PAGE,(()=>{(0,s.assertIsDefined)(this.navigationService,"previousPage can only be called after navigation"),(0,s.assertIsDefined)(this.bookMetadata,"metadata should be defined before navigation"),this.checkIfClientIsBusy();const e=this.previousPageThrottler();return e.invoked?(!this.supportsGuidedView(this.bookMetadata)||this.navigationService instanceof l.q||this.options.metricsService.recordCountMetrics("GuidedView:Off:Page:Previous",1),e.result):Promise.reject(new f.yy)}))}))}doPreviousPage(){return p(this,void 0,void 0,(function*(){this.checkCallbackInProgress(),yield this.performBusyTask((()=>p(this,void 0,void 0,(function*(){var e;return null===(e=this.navigationService)||void 0===e?void 0:e.goToPrevious()}))))}))}hasNextPage(){var e;const t=null===(e=this.navigationService)||void 0===e?void 0:e.getCurrentView();return(0,s.assertIsDefined)(t,"hasNextPage can only be called after navigation"),!t.isLast()}nextPage(){return p(this,void 0,void 0,(function*(){return this.metricsUtil.asyncExecuteMetrics(s.MetricsConstants.NEXT_PAGE,(()=>{(0,s.assertIsDefined)(this.navigationService,"nextPage can only be called after navigation"),(0,s.assertIsDefined)(this.bookMetadata,"metadata should be defined before navigation"),this.checkIfClientIsBusy();const e=this.nextPageThrottler();return e.invoked?(!this.supportsGuidedView(this.bookMetadata)||this.navigationService instanceof l.q||this.options.metricsService.recordCountMetrics("GuidedView:Off:Page:Next",1),e.result):Promise.reject(new f.yy)}))}))}doNextPage(){return p(this,void 0,void 0,(function*(){this.checkCallbackInProgress(),yield this.performBusyTask((()=>p(this,void 0,void 0,(function*(){var e;return null===(e=this.navigationService)||void 0===e?void 0:e.goToNext()}))))}))}getTableOfContents(){return this.metricsUtil.syncExecuteMetrics(s.MetricsConstants.GET_TABLE_OF_CONTENTS,(()=>this.getBookMetadata().tableOfContent))}getBookMetadata(){return(0,s.assertIsDefined)(this.bookMetadata,"Metadata is not available before rendering"),this.bookMetadata}getMetadata(){return this.metricsUtil.syncExecuteMetrics(s.MetricsConstants.GET_METADATA,(()=>this.getBookMetadata().metadata))}getManifest(){return this.metricsUtil.syncExecuteMetrics(s.MetricsConstants.GET_MANIFEST,(()=>this.getBookMetadata().manifest))}getCurrentPage(){var e;const t=null===(e=this.navigationService)||void 0===e?void 0:e.getCurrentView();return(0,s.assertIsDefined)(t,"getCurrentPage can only be called after navigation"),t.getRenderedPage().page}getLocationMap(){return this.metricsUtil.syncExecuteMetrics(s.MetricsConstants.GET_LOCATION_MAP,(()=>this.getBookMetadata().locationMap))}setDecorations(e){this.options.decorationProvider.setDecorations&&this.options.decorationProvider.setDecorations(e)}checkCallbackInProgress(){if(this.options.eventEmitter.isCallbackInProgress)throw new Error("An operation has been invoked on the client from a callback. This can affect performance and it is not allowed")}didBookRenderOptionsChange(e,t){return[...new Set([...Object.keys(e),...Object.keys(t)])].filter((e=>"viewingMode"!==e)).some((n=>e[n]!==t[n]))}updateRenderOptions(e){return p(this,void 0,void 0,(function*(){yield this.metricsUtil.asyncExecuteMetrics(s.MetricsConstants.UPDATE_RENDER_OPTIONS,(()=>p(this,void 0,void 0,(function*(){var t,n,i,o;this.checkCallbackInProgress();const c=this.options.clientRenderOptionsFactory.get(),u=null===(t=this.navigationService)||void 0===t?void 0:t.getCurrentPositionId(),l=null!==(n=c.bookRenderOptions.viewingMode)&&void 0!==n?n:g.DEFAULT_VIEWING_MODE,d=e.bookRenderOptions.viewingMode,h=null!==(i=c.bookRenderOptions.theme)&&void 0!==i?i:"default",f=null!==(o=e.bookRenderOptions.theme)&&void 0!==o?o:"default",p=h!==f,m=c.navigationOptions.navigationMode!==e.navigationOptions.navigationMode,v=c.navigationOptions.navigationDirection!==e.navigationOptions.navigationDirection,y=this.didBookRenderOptionsChange(c.bookRenderOptions,e.bookRenderOptions);if(p){const e=document.getElementsByClassName(r.g.ROOT_ELEMENT_CLASS).item(0);null==e||e.classList.remove(r.g.ROOT_THEME_CLASS[h]),null==e||e.classList.add(r.g.ROOT_THEME_CLASS[f])}const b="custom"===f?e.themeData:a.M[f];(0,s.assertIsDefined)(b,'Theme was set to "custom" but no "themeData" were specified'),this.options.clientRenderOptionsFactory.set(Object.assign(Object.assign(Object.assign({},c),e),{themeData:b})),(p||m||y)&&null!=u?m?yield this.updateClientServices(!0):yield this.goToPositionId(u):null!=d&&l!==d?this.options.eventEmitter.emit("onViewingModeChange",{viewingMode:d}):v&&(yield this.updateClientServices(!1))}))))}))}goToPositionId(e){return p(this,void 0,void 0,(function*(){yield this.metricsUtil.asyncExecuteMetrics(s.MetricsConstants.GO_TO_POSITION,(()=>p(this,void 0,void 0,(function*(){yield this.performBusyTask((()=>p(this,void 0,void 0,(function*(){this.navigationService||(this.bookMetadata||(this.bookMetadata=yield this.loadBookMetadata(e)),this.navigationService=yield this.buildNavigationService(this.bookMetadata),this.options.enableInteractivity&&this.initializeInteractionController(this.bookMetadata,this.navigationService)),yield this.navigationService.goToPositionId(e)}))))}))))}))}updateClientServices(e){return p(this,void 0,void 0,(function*(){let t,n;this.navigationService&&(n=this.navigationService.getCurrentIndex(),t=this.navigationService.getCurrentPositionId()),yield this.updateNavigationService(),(0,s.assertIsDefined)(this.navigationService,"navigation service must be defined"),yield this.updateInteractionControllerIfNecessary(this.navigationService),e&&null!=t?yield this.goToPositionId(t):(null==n&&(n=this.navigationService.getCurrentIndex()),yield this.navigationService.goToRelativePage(n,"Absolute"))}))}buildNavigationService(e){var t;const n=this.options.clientRenderOptionsFactory.get(),r=void 0!==n.zoomViewOptions&&"FixedFormat"===e.manifest.bookType,i={asin:this.options.asin,container:this.options.container,navigationDirection:n.navigationOptions.navigationDirection,progressionDirection:e.metadata.progressionDirection,eventEmitter:this.options.eventEmitter,layerFactories:[...null!==(t=this.options.layerFactories)&&void 0!==t?t:[]],rendererController:this.options.rendererController,clientRenderOptionsFactory:this.options.clientRenderOptionsFactory,metricsService:this.options.metricsService,fullPage:this.options.fullPage,animatePageTurn:n.navigationOptions.animatePageTurn,isZoomableContent:r,usePanningPaginationService:this.options.enablePagePanning};return u.p.build(n.navigationOptions.navigationMode,e.manifest,i)}updateNavigationService(){var e;return p(this,void 0,void 0,(function*(){null==this.bookMetadata&&(this.bookMetadata=yield this.loadBookMetadata()),yield null===(e=this.navigationService)||void 0===e?void 0:e.destroy(),this.navigationService=this.buildNavigationService(this.bookMetadata)}))}updateInteractionControllerIfNecessary(e){var t,n;return p(this,void 0,void 0,(function*(){(0,s.assertIsDefined)(this.interactionControllerFactory,"updateInteractionController can only be called after having an existing interactionControllerFactory.");const r=this.interactionControllerFactory.determineInteractionControllerType(this.options);(null===(t=this.interactionController)||void 0===t?void 0:t.constructor.prototype)===r?this.interactionController.updateNavigationService(e):(null===(n=this.interactionController)||void 0===n||n.destroy(),this.interactionController=this.interactionControllerFactory.buildWithType(this.options,e,r,this.isPinchHandlerEnabled))}))}loadBookMetadata(e=0){var t,n;return p(this,void 0,void 0,(function*(){return this.bookMetadataProvider||(this.bookMetadataProvider=new o.i({asin:this.options.asin,revision:this.options.revision,startReadingPosition:e,readAheadPageCount:null!==(t=this.options.renderBatchSize)&&void 0!==t?t:c.T,bookProviderFactory:this.options.bookProviderFactory,bookRenderOptions:this.options.clientRenderOptionsFactory.get().bookRenderOptions,bundleImages:null!==(n=this.options.bundleImages)&&void 0!==n&&n})),yield this.bookMetadataProvider.get()}))}clearSelection(){return p(this,void 0,void 0,(function*(){yield this.metricsUtil.asyncExecuteMetrics(s.MetricsConstants.CLEAR_TEXT_SELECTION,(()=>p(this,void 0,void 0,(function*(){var e,t;yield null===(t=null===(e=this.interactionController)||void 0===e?void 0:e.clearSelection)||void 0===t?void 0:t.call(e)}))))}))}supportsGuidedView(e){return"FixedFormat"===e.manifest.bookType&&e.manifest.publisherPanel}initializeInteractionController(e,t){this.interactionControllerFactory||(this.interactionControllerFactory=new d.y(e,this.metricsService)),this.interactionController=this.interactionControllerFactory.build(this.options,t,this.isPinchHandlerEnabled)}checkIfClientIsBusy(){if(!this.busyDeferred.isCompleted)throw new f.Tg}disablePinchHandler(){var e;this.isPinchHandlerEnabled=!1,null===(e=this.interactionController)||void 0===e||e.disablePinchHandler()}enablePinchHandler(){var e;this.isPinchHandlerEnabled=!0,null===(e=this.interactionController)||void 0===e||e.enablePinchHandler()}performBusyTask(e){this.busyDeferred=new h.B;const t=e();return t.catch((e=>this.metricsService.recordCountMetrics(`Karamel:Client:Error:${e.name}`,1))).finally((()=>this.busyDeferred.resolve())),t}}g.DEFAULT_VIEWING_MODE="FullPage"},3253:()=>{},9434:()=>{},1598:()=>{},9343:(e,t,n)=>{"use strict";n.d(t,{Lf:()=>s,Tg:()=>o,w8:()=>a,yy:()=>i});var r=n(9779);class i extends r.InformativeError{constructor(){super("The operation failed because of throttling."),this.name="ThrottlingException"}}class o extends r.InformativeError{constructor(){super("The operation failed because the client is busy."),this.name="BusyException"}}class a extends r.InformativeError{constructor(){super("Render result is no longer valid because the settings changed."),this.name="RenderSettingsChangedException"}}class s extends r.InformativeError{constructor(){super("View is no longer valid."),this.name="ViewNoLongerValidException"}}},5889:(e,t,n)=>{"use strict";n.d(t,{_:()=>r});class r{constructor(e){this.options=e,this.loadingPromise=this.load()}get(){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){return this.bookMetadata=yield this.loadingPromise,this.bookMetadata}))}}},4289:(e,t,n)=>{"use strict";n.d(t,{i:()=>o});var r=n(9779),i=n(5889);class o extends i._{constructor(e){super(e),this.options=e}load(){var e;return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const t=(yield this.options.bookProviderFactory.get(this.options.asin,this.options.revision,this.getNavigationOptions(this.options.startReadingPosition),this.options.bookRenderOptions))[0];return{locationMap:null!==(e=yield t.getLocationMap())&&void 0!==e?e:{locations:[],navigationUnit:[]},manifest:yield t.getManifest(),metadata:yield t.getMetadata(),tableOfContent:yield t.getTableOfContent()}}))}getNavigationOptions(e){return{direction:r.Direction.Absolute,pageCount:this.options.readAheadPageCount,skipPageCount:0,startPositionId:e,type:r.NavigationType.Position,bundleImages:this.options.bundleImages}}}},2817:(e,t,n)=>{"use strict";n.d(t,{d:()=>s});var r=n(9779),i=n(7253),o=n(9205),a=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class s{constructor(e,t){this.metricsUtil=e,this.imageDecipher=t,this.cache=new i.y}getImage(e){return a(this,void 0,void 0,(function*(){return this.cache.get(e)}))}addImages(e,t,n){this.cache.evict();for(const r of t)if(r&&!this.cache.has(r.url)){const t=this.metricsUtil.asyncExecuteMetrics("RequestImageFromCdnWithRetry"+(e.isEncrypted?":Encrypted":""),(()=>(0,o.J)((()=>this.requestImageFromCDN(r,e,n)))));this.cache.put(r.url,t),t.catch((()=>{this.cache.remove(r.url)}))}}recordNetworkSpeed(e,t,n){this.metricsUtil.recordCountMetrics("CDN:Encrypted:Count",n?1:0),this.metricsUtil.recordCountMetrics("DownloadImageSizeInBytes"+(n?":Encrypted":""),e),this.metricsUtil.recordTimeMetrics("DownloadImageTimeElapsedInMs"+(n?":Encrypted":""),t),this.metricsUtil.recordCountMetrics("DownloadImageNetworkSpeedInKBpS"+(n?":Encrypted":""),e/1024/(t/1e3))}requestImageFromCDN(e,t,n){var i;return a(this,void 0,void 0,(function*(){const o=null===(i=t.isEncrypted)||void 0===i||i;return this.metricsUtil.asyncExecuteMetrics("DownloadImageFromCDN"+(o?":Encrypted":""),(()=>a(this,void 0,void 0,(function*(){let i,a=Date.now();const s=o?t.authParameter:e.authParameter;(0,r.assertIsDefined)(s,"authParameter cannot be undefined.");let c=[t.baseUrl,e.url].join("/")+"?"+s;if(null!=n&&o){const e=n.token,t=encodeURIComponent(e),r=n.expiresAt;c=[c,`token=${t}`,`expiration=${r}`].join("&")}const u=yield this.metricsUtil.asyncExecuteMetrics("RequestImageFromCDN"+(o?":Encrypted":""),(()=>fetch(c)));let l;if(o){const e=yield this.metricsUtil.asyncExecuteMetrics("GetImageFromCDN:Encrypted",(()=>u.arrayBuffer()));a=Date.now()-a,i=e.byteLength;const t=yield this.metricsUtil.asyncExecuteMetrics("DecryptImageFromCDN",(()=>this.imageDecipher.decrypt(e,n)));l=new Blob([t])}else l=yield this.metricsUtil.asyncExecuteMetrics("GetImageFromCDN",(()=>u.blob())),a=Date.now()-a,i=l.size;return this.recordNetworkSpeed(i,a,o),l}))))}))}}},7253:(e,t,n)=>{"use strict";n.d(t,{y:()=>r});class r{constructor(){this.MAX_SIZE=100,this.images=new Map,this.fifo=new Array}has(e){return this.images.has(e)}get(e){return this.images.get(e)}put(e,t){this.images.has(e)||(this.fifo.unshift(e),this.images.set(e,t))}remove(e){const t=this.fifo.indexOf(e);t>-1&&(this.fifo.splice(t,1),this.images.delete(e))}evict(){for(const e of this.fifo.splice(this.MAX_SIZE))this.images.delete(e)}}},5078:()=>{},5922:(e,t,n)=>{"use strict";n.d(t,{m:()=>r});class r{constructor(e,t){this.serviceDataLoader=t,this.pageIndex=e}getLayoutPage(){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){return this.serviceDataLoader.getLayoutPage(this.pageIndex)}))}getImage(e){return this.serviceDataLoader.getImage(e)}getMetadata(){return this.serviceDataLoader.getMetadata()}getManifest(){return this.serviceDataLoader.getManifest()}getPage(){return this.serviceDataLoader.getPage(this.pageIndex)}getTableOfContent(){return this.serviceDataLoader.getTableOfContent()}getTokens(){return this.serviceDataLoader.getTokens(this.pageIndex)}getPanels(){return this.serviceDataLoader.getPanels(this.pageIndex)}getFonts(){return this.serviceDataLoader.getFonts()}getLocationMap(){return this.serviceDataLoader.getLocationMap()}}},180:(e,t,n)=>{"use strict";n.d(t,{n:()=>l});var r=n(9779),i=n(5502),o=n(6270),a=n.n(o),s=n(8298),c=n(5941),u=n(2817);class l{constructor(e,t,n,i){this.contentType=e,this.serviceFetch=t,this.FIVE_SECONDS=5e3,this.imageDecipher=new s.N(new c.L),this.metricsUtil=new r.MetricsUtil(null!=n?n:new r.ConsoleMetricsService),this.memoizedServiceFetch=a()(this.serviceFetch,{normalizer:function(e){return JSON.stringify(e[0])},max:3}),this.cdnDataLoader=new u.d(this.metricsUtil,this.imageDecipher),i&&i.cdn&&i.resources&&(i.karamelToken||!i.cdn.isEncrypted)?i.cdn.expirationDate>Date.now()+this.FIVE_SECONDS?(this.cdnDataLoader.addImages(i.cdn,i.resources,i.karamelToken),this.metricsUtil.recordCountMetrics("CdnPrefetch",1)):(this.metricsUtil.recordCountMetrics("CdnPrefetch:Expired",1),this.metricsUtil.recordCountMetrics("CdnPrefetch",0)):this.metricsUtil.recordCountMetrics("CdnPrefetch",0)}get(e,t,n,r){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const o={asin:e,revision:t,contentType:this.contentType,settings:r,navigation:n,imageDecipher:this.imageDecipher},a=new i.h(o,this.memoizedServiceFetch,"TAR",this.metricsUtil,this.cdnDataLoader);return yield a.load()}))}}},5502:(e,t,n)=>{"use strict";n.d(t,{h:()=>c});var r=n(9779),i=n(5922),o=n(27),a=n(6565),s=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class c{constructor(e,t,n,r,i){this.options=e,this.fetch=t,this.packageType=n,this.metricsUtil=r,this.cdnDataLoader=i}load(){var e,t;return s(this,void 0,void 0,(function*(){const n=this.options,s=n.settings,c={version:null!==(e=s.version)&&void 0!==e?e:o.g.VERSION,asin:n.asin,contentType:n.contentType,revision:n.revision,fontFamily:s.fontFamily,fontSize:String(s.fontSize),lineHeight:String(s.lineHeight),dpi:String(s.dpi),height:String(s.pageHeight),width:String(s.pageWidth),marginBottom:String(s.marginBottom),marginLeft:String(s.marginLeft),marginRight:String(s.marginRight),marginTop:String(s.marginTop),maxNumberColumns:s.maxNumberColumns?String(s.maxNumberColumns):o.g.DEFAULT_MAX_COLUMN,theme:String(null!==(t=s.theme)&&void 0!==t?t:"custom").toLowerCase(),locationMap:String(s.includeLocationMap),packageType:this.packageType,encryptionVersion:"NONE"};if(n.navigation.type===r.NavigationType.Position){const e=n.navigation,t=e.direction==r.Direction.Backward?String(-1*e.pageCount):String(e.pageCount);c.numPage=t,c.skipPageCount=String(e.skipPageCount),c.startingPosition=String(e.startPositionId),c.bundleImages=String(e.bundleImages)}else{const e=n.navigation;c.startingPage=String(e.pageIndex)}const u=yield this.metricsUtil.asyncExecuteMetrics("RequestKaramelData",(()=>this.fetch(c))),l=yield this.metricsUtil.asyncExecuteMetrics("GetKaramelData",(()=>u.clone().arrayBuffer())),d=u.headers.get("karamel-rendering-token"),h=null!=d?JSON.parse(d):void 0;if("TAR"!==this.packageType)throw new Error(`Unknown package type ${this.packageType}`);this.packageDataLoader=new a.t(l,this.metricsUtil,this.options.imageDecipher,h);const f=yield this.packageDataLoader.getManifest();f.cdn&&f.cdnResources&&this.cdnDataLoader.addImages(f.cdn,f.cdnResources,h);const p=yield this.packageDataLoader.getPageCount(),g=new Array;for(let e=0;e<p;e++){const t=new i.m(e,this);g.push(t)}return g}))}getDataLoader(){return s(this,void 0,void 0,(function*(){return this.packageDataLoader||(yield this.load()),this.packageDataLoader}))}getImageFromZip(e){return s(this,void 0,void 0,(function*(){return(yield this.getDataLoader()).getImage(e)}))}getImageFromCdn(e){return s(this,void 0,void 0,(function*(){return this.cdnDataLoader.getImage(e)}))}getImage(e){var t;return s(this,void 0,void 0,(function*(){const n=null!==(t=yield this.getImageFromZip(e))&&void 0!==t?t:yield this.getImageFromCdn(e);return(0,r.assertIsDefined)(n),n}))}getPage(e){return s(this,void 0,void 0,(function*(){return(yield this.getDataLoader()).getPage(e)}))}getLocationMap(){return s(this,void 0,void 0,(function*(){return(yield this.getDataLoader()).getLocationMap()}))}getTableOfContent(){return s(this,void 0,void 0,(function*(){return(yield this.getDataLoader()).getTableOfContent()}))}getTokens(e){return s(this,void 0,void 0,(function*(){return(yield this.getDataLoader()).getTokens(e)}))}getPanels(e){return s(this,void 0,void 0,(function*(){return(yield this.getDataLoader()).getPanels(e)}))}getMetadata(){return s(this,void 0,void 0,(function*(){return(yield this.getDataLoader()).getMetadata()}))}getManifest(){return s(this,void 0,void 0,(function*(){return(yield this.getDataLoader()).getManifest()}))}getFonts(){return s(this,void 0,void 0,(function*(){return(yield this.getDataLoader()).getFonts()}))}getLayoutPage(e){return s(this,void 0,void 0,(function*(){return(yield this.getDataLoader()).getLayoutPage(e)}))}}},6565:(e,t,n)=>{"use strict";n.d(t,{t:()=>a});var r=n(9779),i=n(7976),o=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class a{constructor(e,t,n,r){this.metricsUtil=t,this.imageDecipher=n,this.karamelToken=r,this.pages=new Map,this.layoutPages=new Map,this.images=new Map,this.tokens=new Map,this.panels=new Map,this.reader=new i.J(e),this.loadingPromise=new Promise(((e,t)=>{try{this.reader.init();const n=new Array;this.reader.getEntries().forEach((e=>{const t=e.name;t.startsWith("img_")||t.startsWith(a.ASSETS_DIR)||t.startsWith("rsrc")||t.endsWith(".png")?n.push(this.addImage(e)):t.startsWith("page_")?n.push(this.addPage(e)):t.startsWith("layout_data_")?n.push(this.addLayoutPage(e)):t.startsWith("tokens_")?n.push(this.addTokens(e)):t.startsWith("panels_")?n.push(this.addPanels(e)):"glyphs.json"===t?n.push(this.addGlyphs(e)):"toc.json"===t?n.push(this.addTableOfContent(e)):"metadata.json"===t?n.push(this.addMetadata(e)):"manifest.json"===t?n.push(this.addManifest(e)):"location_map.json"===t&&n.push(this.addLocationMap(e))})),Promise.all(n).then(e).catch((e=>t(e)))}catch(e){t(e)}}))}getType(){return"TAR"}addLocationMap(e){return o(this,void 0,void 0,(function*(){return this.reader.getText(e.name).then((e=>{this.locationMap=JSON.parse(e)}))}))}getLocationMap(){return o(this,void 0,void 0,(function*(){return this.loadingPromise.then((()=>this.locationMap))}))}getPageCount(){return o(this,void 0,void 0,(function*(){return yield this.loadingPromise,this.pages.size}))}getImage(e){return o(this,void 0,void 0,(function*(){return this.loadingPromise.then((()=>this.images.has(e)?this.images.get(e):void 0))}))}getPage(e){return o(this,void 0,void 0,(function*(){return this.loadingPromise.then((()=>{const t=this.pages.get(e);return(0,r.assertIsDefined)(t),t}))}))}getLayoutPage(e){return o(this,void 0,void 0,(function*(){return this.loadingPromise.then((()=>{const t=this.layoutPages.get(e);return(0,r.assertIsDefined)(t),t}))}))}getTableOfContent(){return o(this,void 0,void 0,(function*(){return this.loadingPromise.then((()=>((0,r.assertIsDefined)(this.tableOfContent),this.tableOfContent)))}))}getTokens(e){return o(this,void 0,void 0,(function*(){return this.loadingPromise.then((()=>{const t=this.tokens.get(e);return(0,r.assertIsDefined)(t),t}))}))}getPanels(e){return o(this,void 0,void 0,(function*(){return this.loadingPromise.then((()=>this.panels.get(e)))}))}getMetadata(){return o(this,void 0,void 0,(function*(){return this.loadingPromise.then((()=>((0,r.assertIsDefined)(this.metadata),this.metadata)))}))}getManifest(){return o(this,void 0,void 0,(function*(){return this.loadingPromise.then((()=>((0,r.assertIsDefined)(this.manifest),this.manifest)))}))}getFonts(){return o(this,void 0,void 0,(function*(){return this.loadingPromise.then((()=>((0,r.assertIsDefined)(this.fonts),this.fonts)))}))}addManifest(e){return o(this,void 0,void 0,(function*(){return this.reader.getText(e.name).then((e=>{this.manifest=JSON.parse(e)}))}))}addImage(e){return o(this,void 0,void 0,(function*(){let t=yield this.reader.getBlob(e.name);if(null!=this.karamelToken){const e=yield t.arrayBuffer(),n=yield this.metricsUtil.asyncExecuteMetrics("DecryptImageFromTar",(()=>this.imageDecipher.decrypt(e,this.karamelToken)));t=new Blob([n])}let n=e.name;e.name.startsWith(a.ASSETS_DIR)?n=e.name.substr(a.ASSETS_DIR.length):e.name.startsWith("rsrc")&&(n="resource/"+e.name),this.images.set(n,t)}))}addPage(e){return o(this,void 0,void 0,(function*(){return this.reader.getText(e.name).then((e=>{JSON.parse(e).forEach((e=>{this.pages.set(e.pageIndex,e)}))}))}))}addLayoutPage(e){return o(this,void 0,void 0,(function*(){return this.reader.getText(e.name).then((e=>{JSON.parse(e).forEach((e=>{this.layoutPages.set(e.pageIndex,e)}))}))}))}addTokens(e){return o(this,void 0,void 0,(function*(){return this.reader.getText(e.name).then((e=>{JSON.parse(e).forEach((e=>{this.tokens.set(e.pageIndex,e)}))}))}))}addPanels(e){return o(this,void 0,void 0,(function*(){return this.reader.getText(e.name).then((e=>{JSON.parse(e).forEach((e=>{this.panels.set(e.pageIndex,e)}))}))}))}addGlyphs(e){return o(this,void 0,void 0,(function*(){return this.reader.getText(e.name).then((e=>{this.fonts=JSON.parse(e)}))}))}addTableOfContent(e){return o(this,void 0,void 0,(function*(){return this.reader.getText(e.name).then((e=>{this.tableOfContent=JSON.parse(e)}))}))}addMetadata(e){return o(this,void 0,void 0,(function*(){return this.reader.getText(e.name).then((e=>{this.metadata=JSON.parse(e)}))}))}}a.ASSETS_DIR="assets/"},7976:(e,t,n)=>{"use strict";n.d(t,{J:()=>o});var r=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const i=512;class o{constructor(e){this.entries=new Map,this.view=new Uint8Array(e),this.buffer=e}init(){let e=0,t=0,n="",r=null;for(;e<this.view.byteLength-512&&(n=this.readFileName(e),0!=n.length);){r=this.readFileType(e),t=this.readFileSize(e);let o={name:n,type:r,size:t,headerOffset:e};this.entries.set(n,o),e+=i+i*Math.trunc(t/i),t%i&&(e+=i)}}getEntries(){return this.entries}readString(e,t){let n=0,r="";for(;0!=this.view[e+n]&&n<t;)r+=String.fromCharCode(this.view[e+n]),n++;return r}readFileName(e){return this.readString(e+0,100)}readFileType(e){let t=String.fromCharCode(this.view[e+156]);return"0"===t?"file":"5"===t?"directory":t}readFileSize(e){let t="";for(let n=0;n<12;n++)t+=String.fromCharCode(this.view[e+124+n]);return parseInt(t,8)}readFileBlob(e,t){let n=new Uint8Array(this.buffer,e,t);return new Blob([n])}readTextFile(e,t){let n=this.buffer.slice(e,e+t);return(new TextDecoder).decode(n)}getText(e){return r(this,void 0,void 0,(function*(){const t=this.entries.get(e);if(t)return this.readTextFile(t.headerOffset+512,t.size);throw Error(`Unable to find entry ${e}`)}))}getBlob(e){return r(this,void 0,void 0,(function*(){const t=this.entries.get(e);if(t)return this.readFileBlob(t.headerOffset+512,t.size);throw Error(`Unable to find entry ${e}`)}))}}},7754:()=>{},7614:(e,t,n)=>{"use strict";n.d(t,{i:()=>r});class r{constructor(){this.decorations=new Array,this.listeners=new Set}addDecorationChangeEventListener(e){this.listeners.add(e)}getDecorations(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){return{decorations:this.decorations}}))}removeDecorationChangeEventListener(e){this.listeners.delete(e)}setDecorations(e){this.decorations=e,this.listeners.forEach((e=>{var t;return null===(t=e.onDecorationsChange)||void 0===t?void 0:t.call(e,{})}))}}},8334:(e,t,n)=>{"use strict";n.d(t,{G:()=>r});class r{constructor(e){this.renderers=e}render(e,t){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){let n=new Array;for(const r of e.decorationTokens){const e=this.renderers[r.type];if(e){const i=yield e.render({decorationTokens:[r]},t);i&&(n=n.concat(i))}}return n}))}}},9108:(e,t,n)=>{"use strict";n.d(t,{y:()=>o});var r=n(27),i=n(9429);class o{render(e,t){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){let n=new Array;return e.decorationTokens.forEach((e=>{this.getHighlightedTokens(e).forEach((i=>{(i=i.sort(((e,t)=>e.endPositionId-t.endPositionId))).forEach((i=>{var o;let a=this.renderHighlightedToken(i,e.startPositionId,e.endPositionId,null!==(o=e.highlightColor)&&void 0!==o?o:r.g.DEFAULT_HIGHLIGHT_COLOR,t);n=n.concat(a)}))}))})),n}))}renderHighlightedToken(e,t,n,o,a){const s=`${t}/${n}`,c=e=>{var i;const c=document.createElement("div");c.classList.add(r.g.HIGHLIGHT_ELEMENT_CLASS),c.classList.add(null!==(i=r.g.HIGHLIGHT_COLOR_CLASS[o])&&void 0!==i?i:r.g.HIGHLIGHT_COLOR_CLASS.yellow),c.classList.add(s),c.dataset.startPositionId=String(e.startPositionId),c.dataset.endPositionId=String(e.endPositionId);const u=c.style;return u.width=`${e.width}px`,u.height=`${e.height}px`,u.position="absolute",u.left=e.x+"px",u.top=e.y+"px",c.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault(),null==a||a.emit("onHighlightClick",{highlightStartPosition:t,highlightEndPosition:n,highlightRangeClass:s})})),c},u=new Array;if(void 0!==e.pieces&&e.pieces.length)for(const t of e.pieces){let n=c(i.g.calculatePieceToken(t,e));n.classList.add(r.g.WORD_PIECE_CSS_CLASS),u.push(n)}else u.push(c(e));return u}getHighlightedTokens(e){const t=new Array;return t.push(i.g.fillTokensGaps(e.tokens)),t}}},7801:(e,t,n)=>{"use strict";n.d(t,{j:()=>i});var r=n(27);class i{render(e,t){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const n=new Array;return e.decorationTokens.forEach((e=>{const i=e.tokens,o=i[i.length-1],a=document.createElement("div");a.classList.add(r.g.NOTE_ELEMENT_CLASS);const s=a.style;s.position="absolute",s.left=o.x+o.width-16+"px",s.top=o.y-15-4+"px",n.push(a),a.addEventListener("click",(n=>{n.stopPropagation(),n.preventDefault(),null==t||t.emit("onNoteClick",{startPositionId:e.startPositionId,endPositionId:e.endPositionId})}))})),n}))}}},1900:(e,t,n)=>{"use strict";n.d(t,{v:()=>o});var r=n(27),i=n(9429);class o{render(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){let t=new Array;return e.decorationTokens.forEach((e=>{this.getHighlightedTokens(e).forEach((e=>{(e=e.sort(((e,t)=>e.endPositionId-t.endPositionId))).forEach((e=>{const n=this.renderHighlightedToken(e);t=t.concat(n)}))}))})),t}))}renderHighlightedToken(e){const t=e=>{const t=document.createElement("div");t.classList.add(r.g.SEARCH_RESULT_ELEMENT_CLASS),t.dataset.startPositionId=String(e.startPositionId),t.dataset.endPositionId=String(e.endPositionId);const n=t.style;return n.width=`${e.width}px`,n.height=`${e.height}px`,n.position="absolute",n.left=e.x+"px",n.top=e.y+"px",t},n=new Array;if(void 0!==e.pieces&&e.pieces.length)for(const o of e.pieces){const a=t(i.g.calculatePieceToken(o,e));a.classList.add(r.g.WORD_PIECE_CSS_CLASS),n.push(a)}else n.push(t(e));return n}getHighlightedTokens(e){const t=new Array;return t.push(i.g.fillTokensGaps(e.tokens)),t}}},8972:(e,t,n)=>{"use strict";n.d(t,{s:()=>a});var r=n(9148),i=n(4953),o=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class a{constructor(e,t){this.eventEmitter=new i.v,this.gesture=r.d.None,this.startX=-1,this.startY=-1,this.clickCounter=0,this.onDown=e=>o(this,void 0,void 0,(function*(){this.startX=e.clientX,this.startY=e.clientY,this.targetElement.addEventListener("mousemove",this.onMove),this.targetElement.addEventListener("mouseup",this.onUp),this.gestureTimer=setTimeout((()=>o(this,void 0,void 0,(function*(){this.startDrag(e)}))),r.z.PRESS_THRESHOLD_MS)})),this.onTouch=e=>{this.cancel()},this.onMove=e=>o(this,void 0,void 0,(function*(){e.buttons<=0||(this.gesture===r.d.Drag?(r.z.consume(e),this.eventEmitter.emit("onDrag",{x:e.clientX,y:e.clientY})):Math.pow(e.clientX-this.startX,2)+Math.pow(e.clientY-this.startY,2)>=r.z.DRAG_THRESHOLD_PX_SQUARED&&(r.z.consume(e),this.clearTimer(),this.startDrag(e)))})),this.onUp=e=>o(this,void 0,void 0,(function*(){this.gesture===r.d.Drag?this.eventEmitter.emit("onDragEnd",{x:e.clientX,y:e.clientY}):(this.clickCounter++,2===this.clickCounter?(clearTimeout(this.clickTimer),this.eventEmitter.emit("onDoubleTap",{x:e.clientX,y:e.clientY}),this.clickCounter=0):this.clickTimer=setTimeout((()=>{this.eventEmitter.emit("onTap",{x:e.clientX,y:e.clientY}),this.clickCounter=0}),r.z.DOUBLE_CLICK_TIMEOUT)),this.cancel()})),this.onDoubleClick=e=>o(this,void 0,void 0,(function*(){r.z.consume(e)})),this.onWheel=e=>{if(e.ctrlKey)return;if(r.z.consume(e),clearTimeout(this.gestureTimer),this.gestureTimer=setTimeout((()=>o(this,void 0,void 0,(function*(){this.gesture=r.d.None}))),r.z.WHEEL_COOLDOWN_MS),this.gesture===r.d.Swipe)return;this.gesture=r.d.Swipe;const t=r.z.getSwipeEvent(-e.deltaX,-e.deltaY);t&&this.eventEmitter.emit(t,{x:0,y:0})},this.targetElement=e,e.addEventListener("mousedown",this.onDown),e.addEventListener("dblclick",this.onDoubleClick),(null==t?void 0:t.captureMouseWheel)&&e.addEventListener("wheel",this.onWheel),e.addEventListener("touchstart",this.onTouch)}on(e,t){this.eventEmitter.on(e,t)}startDrag(e){this.eventEmitter.emit("onDragStart",{x:this.startX,y:this.startY}),this.eventEmitter.emit("onDrag",{x:e.clientX,y:e.clientY}),this.gesture=r.d.Drag}cancel(){this.targetElement.removeEventListener("mousemove",this.onMove),this.targetElement.removeEventListener("mouseup",this.onUp),this.clearTimer(),this.gesture=r.d.None,this.startX=-1,this.startY=-1}clearTimer(){this.gestureTimer&&(clearTimeout(this.gestureTimer),this.gestureTimer=void 0)}destroy(){this.targetElement.removeEventListener("mousedown",this.onDown),this.targetElement.removeEventListener("dblclick",this.onDoubleClick),this.targetElement.removeEventListener("mousemove",this.onMove),this.targetElement.removeEventListener("mouseup",this.onUp),this.targetElement.removeEventListener("wheel",this.onWheel),this.targetElement.removeEventListener("touchstart",this.onTouch)}}},2307:(e,t,n)=>{"use strict";n.d(t,{Q:()=>s});var r=n(9148),i=n(4953),o=n(9250),a=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class s{constructor(e){this.eventEmitter=new i.v,this.navigationMetrics=new o.p,this.gesture=r.d.None,this.touchIdentifier=-1,this.clickCounter=0,this.ignoreSwipe=!1,this.onCancel=e=>a(this,void 0,void 0,(function*(){r.z.consume(e),this.cancel(),this.eventEmitter.emit("onDragCancel",{})})),this.onDown=e=>a(this,void 0,void 0,(function*(){if(this.startX&&this.startY)return;const t=e.touches.item(0);this.startX=t.clientX,this.startY=t.clientY,this.touchIdentifier=t.identifier,this.gestureTimer=setTimeout((()=>a(this,void 0,void 0,(function*(){this.startDrag(t)}))),r.z.PRESS_THRESHOLD_MS)})),this.onMove=e=>a(this,void 0,void 0,(function*(){const t=this.findMatchingTouch(e);t&&this.gesture!==r.d.Swipe&&(this.gesture===r.d.Drag?(r.z.consume(e),this.eventEmitter.emit("onDrag",{x:t.clientX,y:t.clientY})):Math.pow(t.clientX-this.startX,2)+Math.pow(t.clientY-this.startY,2)>r.z.DRAG_THRESHOLD_PX_SQUARED&&(this.ignoreSwipe?(r.z.consume(e),this.clearTimer(),this.startDrag(t)):this.gesture=r.d.Swipe))})),this.onUp=e=>a(this,void 0,void 0,(function*(){const t=this.findMatchingTouch(e);t&&(e.preventDefault(),this.gesture===r.d.Swipe?this.processSwipe(t):this.gesture===r.d.Drag?this.eventEmitter.emit("onDragEnd",{x:t.clientX,y:t.clientY}):(this.clickCounter++,2===this.clickCounter?(clearTimeout(this.clickTimer),this.eventEmitter.emit("onDoubleTap",{x:t.clientX,y:t.clientY}),this.clickCounter=0):this.clickTimer=setTimeout((()=>{this.eventEmitter.emit("onTap",{x:t.clientX,y:t.clientY}),this.clickCounter=0}),r.z.DOUBLE_CLICK_TIMEOUT)),this.cancel())})),this.targetElement=e,e.addEventListener("touchstart",this.onDown,{passive:!1}),e.addEventListener("touchmove",this.onMove,{passive:!1}),e.addEventListener("touchend",this.onUp,{passive:!1}),e.addEventListener("touchcancel",this.onCancel,{passive:!1})}on(e,t){this.eventEmitter.on(e,t)}setIgnoreSwipe(e){this.ignoreSwipe=e}startDrag(e){this.eventEmitter.emit("onDragStart",{x:this.startX,y:this.startY}),this.eventEmitter.emit("onDrag",{x:e.clientX,y:e.clientY}),this.gesture=r.d.Drag}processSwipe(e){const t=e.clientX,n=e.clientY,i=t-this.startX,o=n-this.startY,a=r.z.getSwipeEvent(i,o,r.z.SWIPE_THRESHOLD_PX);a&&(this.navigationMetrics.recordCountMetrics(a,1),this.eventEmitter.emit(a,{x:this.startX,y:this.startY}))}findMatchingTouch(e){for(const t of e.changedTouches)if(t.identifier===this.touchIdentifier)return t}cancel(){this.clearTimer(),this.gesture=r.d.None,this.startX=void 0,this.startY=void 0,this.touchIdentifier=-1}clearTimer(){this.gestureTimer&&(clearTimeout(this.gestureTimer),this.gestureTimer=void 0)}destroy(){this.targetElement.removeEventListener("touchstart",this.onDown),this.targetElement.removeEventListener("touchmove",this.onMove),this.targetElement.removeEventListener("touchend",this.onUp),this.targetElement.removeEventListener("touchcancel",this.onCancel)}}},9148:(e,t,n)=>{"use strict";var r;n.d(t,{d:()=>r,z:()=>i}),function(e){e.None="none",e.Click="click",e.Drag="drag",e.Swipe="swipe"}(r||(r={}));class i{static consume(e){e.stopPropagation(),e.preventDefault()}static getRelativeLocation(e,t,n){const r=n.getBoundingClientRect();return{x:e-r.x+n.scrollLeft,y:t-r.y+n.scrollTop}}static getSwipeEvent(e,t,n=0){const r=Math.abs(t/e),i=Math.abs(e/t);return r<=this.SWIPE_ANGLE_LIMIT&&Math.abs(e)>n?e>0?"onSwipeRight":"onSwipeLeft":i<=this.SWIPE_ANGLE_LIMIT&&Math.abs(t)>n?t>0?"onSwipeDown":"onSwipeUp":void 0}}i.DOUBLE_CLICK_TIMEOUT=300,i.DRAG_THRESHOLD_PX_SQUARED=Math.pow(5,2),i.SWIPE_THRESHOLD_PX=20,i.PRESS_THRESHOLD_MS=500,i.WHEEL_COOLDOWN_MS=70,i.SWIPE_ANGLE_LIMIT=Math.tan(.25*Math.PI)},2168:(e,t,n)=>{"use strict";n.d(t,{C:()=>o});var r=n(5745),i=n(4229);class o extends r.y{constructor(e){super(e),this.options=e,this.onDoubleTap=e=>{var t,n;const r=this.viewsTracker.getViewAtPoint(e.x,e.y);if(r instanceof i.k){if(r.hasMoveLockAll())return;this.clickEvent=void 0,this.options.eventEmitter.emit("onViewingModeChange",{viewingMode:"FullPage"}),null===(t=this.metricsService)||void 0===t||t.recordCountMetrics("GuidedViewController:DoubleTap:ExitGuidedView",1)}else this.clickEvent=e,this.options.eventEmitter.emit("onViewingModeChange",{viewingMode:"GuidedView"}),null===(n=this.metricsService)||void 0===n||n.recordCountMetrics("GuidedViewController:DoubleTap:EnterGuidedView",1);this.options.eventEmitter.emit("onDoubleClick",e)},this.onViewingModeChangeEnded=e=>function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){if("GuidedView"!==e.viewingMode)return;let t,n;void 0===this.clickEvent?n=this.viewsTracker.getViews()[0]:(n=this.viewsTracker.getViewAtPoint(this.clickEvent.x,this.clickEvent.y),t=this.viewsTracker.getPanelOrdinalAtPoint(this.clickEvent.x,this.clickEvent.y)),setTimeout((()=>{n instanceof i.k&&(n.acquireMoveLockAll(),n.guidedViewMove(t),n.hasPanels()&&n.isAnimationEnabled()?n.getRoot().addEventListener("transitionend",(e=>{n instanceof i.k&&"transform"===e.propertyName&&n.releaseMoveLock()})):n.releaseMoveLock())}),0),this.clickEvent=void 0})),e.enablePinchHandler&&super.enablePinchHandler(),super.attachHandlers(),this.metricsService=this.options.metricsService,this.options.eventEmitter.on("onViewingModeChangeEnded",this.onViewingModeChangeEnded)}destroy(){super.destroy(),this.options.eventEmitter.off("onViewingModeChangeEnded",this.onViewingModeChangeEnded)}}},9665:(e,t,n)=>{"use strict";n.d(t,{y:()=>c});var r=n(6854),i=n(5745),o=n(9367),a=n(6786),s=n(2168);class c{constructor(e,t){this.bookMetadata=e,this.metricsService=t}determineInteractionControllerType(e){var t;const n=this.bookMetadata.manifest,c=e.clientRenderOptionsFactory.get(),u=n.publisherPanel&&c.guidedViewOptions.isEnabled,l="Zoom"===c.bookRenderOptions.viewingMode,d="FixedFormat"===n.bookType,h=null===(t=(0,r.f)())||void 0===t?void 0:t.isSelectionEnabled,f=0===c.navigationOptions.navigationMode;return d&&f&&(!u||l)?a.Q.prototype:d&&f&&u&&!l?s.C.prototype:!d&&h?o.x.prototype:i.q.prototype}build(e,t,n){const r=this.determineInteractionControllerType(e);return this.buildWithType(e,t,r,n)}buildWithType(e,t,n,r){const c={eventEmitter:e.eventEmitter,container:e.container,bookMetadata:this.bookMetadata,interactionLayer:e.interactionLayer,navigationService:t,fullPage:e.fullPage,isPaginated:0===e.clientRenderOptionsFactory.get().navigationOptions.navigationMode,metricsService:this.metricsService,enablePagePanning:e.enablePagePanning,enablePinchHandler:(!e.nativePinchZoom||n===a.Q.prototype)&&r};switch(n){case a.Q.prototype:return new a.Q(c);case s.C.prototype:return new s.C(c);case o.x.prototype:return new o.x(Object.assign(Object.assign({},c),{selectionRenderer:e.selectionRenderer}));default:return new i.q(c)}}}},5745:(e,t,n)=>{"use strict";n.d(t,{q:()=>u,y:()=>c});var r=n(2797),i=n(2307),o=n(8972),a=n(2683),s=n(4650);class c{constructor(e){var t;this.options=e,this.shiftingLayout=!1,this.scrolling=!1,this.onTapInternal=e=>{this.scrolling?this.scrolling=!1:this.onTap(e)},this.onGestureStartInternal=e=>{this.scrolling||this.onGestureStart(e)},this.onTap=e=>{this.options.eventEmitter.emit("onClick",e)},this.onDoubleTap=e=>{this.options.eventEmitter.emit("onDoubleClick",e)},this.onSwipeLeft=e=>{this.options.eventEmitter.emit("onSwipeLeft",e)},this.onSwipeRight=e=>{this.options.eventEmitter.emit("onSwipeRight",e)},this.onSwipeUp=e=>{this.options.eventEmitter.emit("onSwipeUp",e)},this.onSwipeDown=e=>{this.options.eventEmitter.emit("onSwipeDown",e)},this.container=e.container,this.interactionLayer=null!==(t=e.interactionLayer)&&void 0!==t?t:e.container,this.navigationService=e.navigationService,this.viewsTracker=new r.B(this.container,e.eventEmitter),this.touchHandler=new i.Q(this.interactionLayer),this.mouseHandler=new o.s(this.interactionLayer,{captureMouseWheel:e.isPaginated}),this.options.eventEmitter.on("onLayoutShift",(e=>this.shiftingLayout=e.shiftingLayout));const n=s.d.debouncer((()=>this.scrolling=!1),c.SCROLL_STOPPED_DELAY,!1);(e.fullPage?window:this.container).addEventListener("scroll",(e=>{this.shiftingLayout||(this.scrolling||(this.scrolling=!0,this.options.eventEmitter.emit("onScroll",e)),n())}))}attachHandlers(){this.touchHandler.on("onDragStart",this.onGestureStartInternal),this.touchHandler.on("onDrag",this.onGestureMove),this.touchHandler.on("onDragEnd",this.onGestureEnd),this.touchHandler.on("onDragCancel",this.onGestureCancel),this.touchHandler.on("onTap",this.onTapInternal),this.touchHandler.on("onDoubleTap",this.onDoubleTap),this.mouseHandler.on("onDragStart",this.onGestureStartInternal),this.mouseHandler.on("onDrag",this.onGestureMove),this.mouseHandler.on("onDragEnd",this.onGestureEnd),this.mouseHandler.on("onTap",this.onTapInternal),this.mouseHandler.on("onDoubleTap",this.onDoubleTap),this.options.isPaginated&&(this.touchHandler.on("onSwipeLeft",this.onSwipeLeft),this.touchHandler.on("onSwipeRight",this.onSwipeRight),this.touchHandler.on("onSwipeUp",this.onSwipeUp),this.touchHandler.on("onSwipeDown",this.onSwipeDown),this.mouseHandler.on("onSwipeLeft",this.onSwipeLeft),this.mouseHandler.on("onSwipeRight",this.onSwipeRight),this.mouseHandler.on("onSwipeUp",this.onSwipeUp),this.mouseHandler.on("onSwipeDown",this.onSwipeDown))}onGestureStart(e){}onGestureCancel(){}onGestureMove(e){}onGestureEnd(e){}onPinchStart(e){}onPinch(e){}onPinchEnd(e){}updateNavigationService(e){this.reset(),this.navigationService=e}reset(){this.viewsTracker.resetViews()}disablePinchHandler(){var e;null===(e=this.hammerManager)||void 0===e||e.destroy(),this.hammerManager=void 0}enablePinchHandler(){this.hammerManager&&this.disablePinchHandler(),this.hammerManager=this.createHammerManager(),this.hammerManager.add(new a.Pinch),this.hammerManager.on("pinch",this.onPinch),this.hammerManager.on("pinchstart",this.onPinchStart),this.hammerManager.on("pinchend pinchcancel",this.onPinchEnd)}createHammerManager(){return new a.Manager(this.interactionLayer,{touchAction:"pan-y"})}destroy(){var e;this.reset(),this.touchHandler.destroy(),this.mouseHandler.destroy(),null===(e=this.hammerManager)||void 0===e||e.destroy(),this.hammerManager=void 0}}c.SCROLL_STOPPED_DELAY=300;class u extends c{constructor(e){super(e),e.enablePinchHandler&&super.enablePinchHandler(),super.attachHandlers()}}},3969:(e,t,n)=>{"use strict";n.d(t,{I6:()=>a,_V:()=>l,c8:()=>c,gy:()=>o,tj:()=>u,uJ:()=>s});var r=n(27),i=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const o=100,a=o+10,s=a+10,c=s+10,u="kg-decoration";class l{constructor(e){var t;this.views=new Set,this.startPositionId=Number.MAX_SAFE_INTEGER,this.endPositionId=Number.MIN_SAFE_INTEGER,this.links=[],this.onViewsAdded=e=>i(this,void 0,void 0,(function*(){for(const t of e.views)this.views.add(t),yield this.populateNavigationLayer(t),yield this.renderDecorations(t);yield this.updatePositionIds()})),this.onViewsRemoved=e=>i(this,void 0,void 0,(function*(){for(const t of e.views)this.views.delete(t);yield this.updatePositionIds()})),this.options=e,this.options.container.style.userSelect="none",this.options.eventEmitter.on("onViewsAdded",this.onViewsAdded),this.options.eventEmitter.on("onViewsRemoved",this.onViewsRemoved),null===(t=e.decorationProvider)||void 0===t||t.addDecorationChangeEventListener(this)}updatePositionIds(){return i(this,void 0,void 0,(function*(){this.startPositionId=Number.MAX_SAFE_INTEGER,this.endPositionId=Number.MIN_SAFE_INTEGER;for(const e of this.views){const t=(yield e.getRenderedPage()).page;this.startPositionId=Math.min(this.startPositionId,t.startPositionId),this.endPositionId=Math.max(this.endPositionId,t.endPositionId)}}))}renderDecorations(e){return i(this,void 0,void 0,(function*(){const t=this.options.decorationProvider,n=this.options.decorationRenderer;if(t&&n){const i=yield t.getDecorations({startPositionId:this.startPositionId,endPositionId:this.endPositionId});if(i.decorations.length>0){const t=yield this.getTokensByDecoration(e,i);if(t.length){const i=yield n.render({decorationTokens:t},this.options.eventEmitter);if(i){const t=e.getRoot();for(const n of i){n.classList.add(u);const i=n.classList.contains(r.g.NOTE_ELEMENT_CLASS),o=n.classList.contains(r.g.HIGHLIGHT_ELEMENT_CLASS);(i||o)&&(n.style.zIndex=String(i?c:a),e.addInteractiveElement(n,!0)),t.append(n)}}}}}}))}getTokensByDecoration(e,t){return i(this,void 0,void 0,(function*(){const n=new Map,r=e.getTokenMap();for(const[e,i]of r)for(const e of i)for(const r of t.decorations)if(r.startPositionId<=e.startPositionId&&r.endPositionId>=e.startPositionId||r.startPositionId>=e.startPositionId&&r.endPositionId<=e.endPositionId){let t=n.get(r);t||(t=[],n.set(r,t)),t.push(e)}const i=new Array;return n.forEach(((e,t)=>{i.push(Object.assign(Object.assign({},t),{tokens:e}))})),i}))}onDecorationsChange(e){return i(this,void 0,void 0,(function*(){const e=this.options.container.getElementsByClassName(u);if(e){let t=e.length;for(;t--;)e[t].remove();for(const e of this.views)e.resetInteractiveDecorationElements()}for(const e of this.views)yield this.renderDecorations(e)}))}destroy(){return i(this,void 0,void 0,(function*(){this.options.decorationProvider&&this.options.decorationProvider.removeDecorationChangeEventListener(this),this.options.eventEmitter.on("onViewsAdded",this.onViewsAdded),this.options.eventEmitter.on("onViewsRemoved",this.onViewsRemoved)}))}populateNavigationLayer(e){return i(this,void 0,void 0,(function*(){const t=(yield e.getRenderedPage()).tokens.children,n=e.getRoot();for(const r of t)if(r.containsLinks)for(const t of r.words)if(t.linkPositionId||0===t.linkPositionId){const r=this.createInternalLink(t);n.append(r),e.addInteractiveElement(r)}else if(t.externalLink){const r=this.createExternalLink(t);n.append(r),e.addInteractiveElement(r)}}))}createExternalLink(e){const t=l.createLinkHTMLElement(e);return t.href=e.externalLink,t.target=r.g.EXTERNAL_LINK_TARGET_VALUE,t}createInternalLink(e){const t=l.createLinkHTMLElement(e);return t.addEventListener("click",(t=>{t.stopPropagation(),this.options.eventEmitter.emit("onInBookLinkClick",{startPositionId:e.linkPositionId})})),t}static createLinkHTMLElement(e){const t=document.createElement("a"),n=t.style;return n.width=e.width+"px",n.height=e.height+"px",n.position="absolute",n.left=e.x+"px",n.top=e.y+"px",n.cursor="pointer",n.zIndex=String(s),t}}},9367:(e,t,n)=>{"use strict";n.d(t,{x:()=>s});var r=n(5745),i=n(756),o=n(9148),a=n(27);class s extends r.y{constructor(e){super(e),this.options=e,this.isTouchScreen=!1,this.redrawIsPending=!1,this.selectionStarted=!1,this.selectionInProgress=!1,this.onGestureStart=e=>{if(this.selectionInProgress)return;this.selectionStarted=!0,this.lastGestureStartEvent=e,this.lastGestureMoveEvent=void 0,this.hideHandlers(),this.clearSelection();const t=e.x,n=e.y,r=this.viewsTracker.getViewAtPoint(t,n);r&&(this.dragSource={location:o.z.getRelativeLocation(t,n,r.getRoot()),view:r})},this.onGestureCancel=()=>{this.selectionInProgress||(this.cancelScrolling(),this.selectionStarted=!1,this.lastGestureStartEvent=void 0,this.lastGestureMoveEvent=void 0,this.hideHandlers(),this.clearSelection())},this.onTap=e=>{if(!this.selectionInProgress){const t=this.viewsTracker.getInteractiveElementAtPoint(e.x,e.y);t?t.click():this.options.eventEmitter.emit("onClick",e),this.onGestureCancel()}},this.onDoubleTap=e=>{this.selectionInProgress||this.options.eventEmitter.emit("onDoubleClick",e),this.onGestureAtSameLocation(e)},this.onGestureAtSameLocation=e=>{const t=e.x,n=e.y,r=this.viewsTracker.getViewAtPoint(t,n);r&&(this.dragSource={location:o.z.getRelativeLocation(t,n,r.getRoot()),view:r},this.dragTarget=this.dragSource,this.scheduleSelectionRepaint()),this.reinitializeSelection(),this.notifySelectionEndedListener()},this.onGestureMove=e=>{var t,n;if(!this.selectionStarted)return;this.selectionInProgress=!0,this.lastGestureMoveEvent=e;const r=e.x,i=e.y,a=this.viewsTracker.getViewAtPoint(r,i);if(a){const e=o.z.getRelativeLocation(r,i,a.getRoot());this.dragTarget={location:e,view:a};const c=this.interactionLayer.getBoundingClientRect();let u=!1;const l=i-(null!==(n=null===(t=this.lastGestureStartEvent)||void 0===t?void 0:t.y)&&void 0!==n?n:0);l<0&&i<c.top+s.DRAG_ZONE_HEIGHT&&(this.scroll(-s.SCROLL_HEIGHT),u=!0),l>0&&i>c.bottom-s.DRAG_ZONE_HEIGHT&&(this.scroll(s.SCROLL_HEIGHT),u=!0),!u&&this.scrollingInterval&&this.cancelScrolling(),this.scheduleSelectionRepaint()}},this.onGestureEnd=()=>{this.cancelScrolling(),this.selectionStarted=!1,this.lastGestureStartEvent=void 0,this.lastGestureMoveEvent=void 0,this.notifySelectionEndedListener(),setTimeout((()=>this.selectionInProgress=!1),s.SELECTION_IN_PROGRESS_TIMEOUT)},this.cancelScrolling=()=>{this.scrollingInterval&&(window.clearInterval(this.scrollingInterval),this.scrollingInterval=void 0)},this.selection=new i.Y(this.options.bookMetadata.metadata,this.dragSource,this.dragTarget,this.viewsTracker,this.options.container),this.firstHandler=e.selectionRenderer.renderFirstHandler();const t=this.firstHandler.style;t.position="absolute",t.visibility="hidden",this.container.appendChild(this.firstHandler),this.secondHandler=e.selectionRenderer.renderSecondHandler();const n=this.secondHandler.style;n.position="absolute",n.visibility="hidden",this.container.appendChild(this.secondHandler),e.enablePinchHandler&&super.enablePinchHandler(),super.attachHandlers(),window.addEventListener("mouseup",this.cancelScrolling),window.addEventListener("touchend",this.cancelScrolling)}scroll(e){this.scrollingInterval||(this.scrollingInterval=setInterval((()=>{this.lastGestureMoveEvent&&((this.options.fullPage?document.documentElement:this.container).scrollBy(0,e),this.onGestureMove(this.lastGestureMoveEvent))}),s.SCROLL_INTERVAL_MS))}scheduleSelectionRepaint(){this.redrawIsPending||(this.redrawIsPending=!0,setTimeout((()=>{this.calculateAndPaintSelection()})))}notifySelectionEndedListener(){if(this.selection&&!this.selection.isEmpty()){const e=this.selection.getAdjustedSelectedTokens();e.length>0&&this.options.eventEmitter.emit("onSelectionEnded",{tokens:e,container:this.options.container,selectionClass:a.g.SELECTION_ELEMENT_CLASS})}}calculateAndPaintSelection(){var e,t;if(this.dragSource&&this.dragTarget){this.selection.adjust(this.dragSource,this.dragTarget);const n=this.selection.getSelectedTokensByView();if(0===n.size)this.removeAllTokenNodes();else{const r=null!==(t=null===(e=this.selection)||void 0===e?void 0:e.getElementKeys())&&void 0!==t?t:new Set,i=this.getTextDirection(),o=this.getWritingMode();n.forEach(((e,t)=>{const n=this.options.selectionRenderer.renderSelection({tokens:e,direction:i,writingMode:o});for(const e of n)if(r.has(e.key))r.delete(e.key);else{const n=e.element;this.selection.addElement(e),n.className+=` ${a.g.SELECTION_ELEMENT_CLASS} `,n.style.userSelect="none",t.getRoot().append(n)}}));for(const e of r){const t=this.selection.getElement(e);this.selection.removeElement(e),t.element.remove(),this.isTouchScreen&&this.showHandlers()}}}this.redrawIsPending=!1}reinitializeSelection(){this.selection=new i.Y(this.options.bookMetadata.metadata,this.dragSource,this.dragTarget,this.viewsTracker,this.options.container)}removeAllTokenNodes(){var e,t;const n=null===(t=null===(e=this.selection)||void 0===e?void 0:e.isEmpty())||void 0===t||t;if(this.selection)for(const e of this.selection.getElementKeys()){const t=this.selection.getElement(e);this.selection.removeElement(e),t.element.remove()}return this.hideHandlers(),!n}clearSelection(){this.dragSource=void 0,this.dragTarget=void 0,this.removeAllTokenNodes(),this.reinitializeSelection()}showHandlers(){}hideHandlers(){this.firstHandler.style.visibility="hidden",this.secondHandler.style.visibility="hidden"}adjustHandlersOrientation(){}getHandlersTipLocations(){return{firstHandlerLocation:{x:0,y:0},secondHandlerLocation:{x:0,y:0}}}getTextDirection(){return this.options.bookMetadata.metadata.direction}getWritingMode(){return this.options.bookMetadata.metadata.writingMode}}s.DEFAULT_MAGNIFIER_SCALE=1.5,s.DRAG_ZONE_HEIGHT=20,s.SCROLL_HEIGHT=30,s.SCROLL_INTERVAL_MS=60,s.SELECTION_IN_PROGRESS_TIMEOUT=250},6942:(e,t,n)=>{"use strict";n.d(t,{G:()=>a,I:()=>o});var r=n(9429),i=n(27);class o{constructor(e,t,n){this.element=e,this.tokens=t,this.key=`${t[0].startPositionId}/${t[t.length-1].endPositionId}`,null!=n&&(this.key+=`/${n}`)}}class a{constructor(e){var t,n,r,i,o,a,s;this.handlerWidth=null!==(t=e.handlerWidth)&&void 0!==t?t:50,this.handlerHeight=null!==(n=e.handlerHeight)&&void 0!==n?n:100,this.handlerHitStrokeWidth=null!==(r=e.handlerHitStrokeWidth)&&void 0!==r?r:40,this.firstHandlerFill=null!==(i=e.firstHandlerFill)&&void 0!==i?i:"green",this.secondHandlerFill=null!==(o=e.secondHandlerFill)&&void 0!==o?o:"blue",this.magnifierWidth=null!==(a=e.magnifierWidth)&&void 0!==a?a:50,this.magnifierHeight=null!==(s=e.magnifierHeight)&&void 0!==s?s:25,this.clientRenderOptionsFactory=e.clientRenderOptionsFactory}renderSelection(e){const t=[],n=r.g.fillTokensGaps(e.tokens);for(const e of n)if(e.pieces)for(let n=0;n<e.pieces.length;n++){const a=r.g.calculatePieceToken(e.pieces[n],e);let s=this.createSelectedElement(a);s.classList.add(i.g.WORD_PIECE_CSS_CLASS),t.push(new o(s,[e],n))}else t.push(new o(this.createSelectedElement(e),[e]));return t}createSelectedElement(e){const t=this.clientRenderOptionsFactory.get().themeData.selection.background.fill,n=document.createElement("div");n.dataset.startPositionId=String(e.startPositionId),n.dataset.endPositionId=String(e.endPositionId);const r=n.style;return r.width=e.width+"px",r.height=e.height+"px",r.backgroundColor=t,r.position="absolute",r.left=e.x+"px",r.top=e.y+"px",r.userSelect="none",n}renderFirstHandler(){const e=document.createElement("div"),t=e.style;return t.width="20px",t.height="40px",t.backgroundColor="green",e}renderSecondHandler(){const e=document.createElement("div"),t=e.style;return t.width="20px",t.height="40px",t.backgroundColor="blue",e}}},756:(e,t,n)=>{"use strict";n.d(t,{Y:()=>o});var r=n(560),i=n(9429);class o{constructor(e,t,n,r,i){this.elements=new Map,this.tokens=new Map,this.metadata=e,this.source=t,this.target=n,this.container=i,this.viewsTracker=r,this.source&&this.target&&(this.tokens=this.getTokensInRange(this.source,this.target))}isLocationAfterTokenInReadingOrder(e,t){let n,r=!1;if(e.pieces)for(const o of e.pieces){const e=i.g.createTokenRectFromTokenPiece(o);if(n=i.g.distanceFromToken(e,t),r=this.isForwardInReadingOrder(n),r)return!0}else n=i.g.distanceFromToken(e,t),r=this.isForwardInReadingOrder(n);return r}isForwardInReadingOrder(e){const t=e.x,n=e.y;switch(this.metadata.writingMode){case"vertical_rl":return t<0||0===t&&n>0;case"vertical_lr":return t>0||0===t&&n>0;case"horizontal_tb":switch(this.metadata.direction){case"unknown":case"ltr":return n>0||0===n&&t>0;case"rtl":return n>0||0===n&&t<0}}return!1}getTokensInRange(e,t){var n;const o=this.getViewsRange(e,t),a=new Map;let s,c,u=0;const l=new Map;for(const n of o){const o=n.getTokenMap(),a=n.getColumnsInReadingOrder();if(0===a.length)n===t.view&&(c={x:t.location.x,y:u+t.location.y}),u+=n.getRoot().getBoundingClientRect().height;else for(let d=0;d<a.length;d++){const h=a[d],f=o.get(h);if(f&&f.length>0){const o=h.rect;e.view===n&&r.S.isInRect(o,e.location)&&(s={x:e.location.x,y:u+e.location.y}),t.view===n&&r.S.isInRect(o,t.location)&&(c={x:t.location.x,y:u+t.location.y});for(const e of f){const t=i.g.createVirtualToken(e,u);l.set(e,t)}u+=o.bottom-o.top}}}if(c&&s){for(const e of o){const t=e.getColumnsInReadingOrder(),r=e.getTokenMap(),o=new Array;a.set(e,o);for(let e=0;e<t.length;e++){const a=t[e],u=r.get(a);if(u)for(const e of u){const t=null!==(n=l.get(e))&&void 0!==n?n:e,r=i.g.isTokenUnderLocation(t,s),a=i.g.isTokenUnderLocation(t,c);if(r&&a){o.push(e);break}if(r){s=i.g.getTokenLocation(t),o.push(e);continue}if(a){c=i.g.getTokenLocation(t),o.push(e);continue}const u=!this.isLocationAfterTokenInReadingOrder(t,s),d=!this.isLocationAfterTokenInReadingOrder(t,c);(u&&!d||!u&&d)&&o.push(e)}}}return a}return this.tokens}getViewsRange(e,t){const n=this.viewsTracker.getViews(),r=new Array;let i=!1;for(let o=0;o<n.length;o++){let a=n[o];if(a===e.view){if(r.push(a),i)return r;i=!0}else if(a===t.view){if(r.push(a),i)return r;i=!0}else i&&r.push(a)}return r}adjust(e,t){this.source=e,this.target=t,this.tokens=this.getTokensInRange(this.source,this.target)}isEmpty(){return 0===this.tokens.size}addElement(e){this.elements.set(e.key,e)}getElement(e){return this.elements.get(e)}removeElement(e){this.elements.delete(e)}getElementKeys(){return new Set(this.elements.keys())}getSelectedTokens(){const e=new Array;for(const t of this.tokens.values())e.push(...t);return e}getAdjustedSelectedTokens(){const e=new Array;for(const t of this.tokens.keys()){const n=t.getRoot().getBoundingClientRect();for(const r of this.tokens.get(t))e.push(i.g.getRelativeTokenPosition(r,n))}return e.sort(((e,t)=>e.endPositionId-t.endPositionId))}getSelectedTokensByView(){return this.tokens}}},2797:(e,t,n)=>{"use strict";n.d(t,{B:()=>c});var r=n(27),i=n(9148),o=n(560),a=n(9429),s=n(4229);class c{constructor(e,t){this.views=new Array,this.onViewsAdded=e=>{const t=new Map,n=this.container.getElementsByClassName(r.g.VIEW_ELEMENT_CLASS);let i=0;for(const e of n){const n=e;t.set(n,i++)}this.views.push(...e.views),this.views.sort(((e,n)=>t.get(e.getRoot())<t.get(n.getRoot())?-1:1))},this.onViewsRemoved=e=>{const t=new Set(e.views);this.views=this.views.filter((e=>!t.has(e)))},this.emitter=t,this.emitter.on("onViewsAdded",this.onViewsAdded),this.emitter.on("onViewsRemoved",this.onViewsRemoved),this.container=e}getViewAtPoint(e,t){for(const n of this.views){const r=n.getRoot().getBoundingClientRect();if(r.left<e&&e<r.right&&r.top<t&&t<r.bottom)return n}}getTokenAtPoint(e,t){const n=this.getViewAtPoint(e,t);if(n){const r=i.z.getRelativeLocation(e,t,n.getRoot()),s=n.getTokenMap();for(const[e,t]of s)if(o.S.isInRect(e.rect,r))for(const e of t)if(a.g.isTokenUnderLocation(e,r))return e;return null}return null}getInteractiveElementAtPoint(e,t){const n=this.getViewAtPoint(e,t);if(n){const r=i.z.getRelativeLocation(e,t,n.getRoot()),a=n.getInteractiveElements();a.sort(((e,t)=>t.style.zIndex.localeCompare(e.style.zIndex)));for(const e of a){const t={top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight,right:e.offsetLeft+e.offsetWidth,left:e.offsetLeft};if(o.S.isInRect(t,r))return e}return null}return null}getViews(){return this.views}resetViews(){for(const e of this.views)e.getRoot().remove();this.views=[]}getPanelOrdinalAtPoint(e,t){var n;const r=this.getViewAtPoint(e,t);if(r){const o=null===(n=r.getRenderedPage().panels)||void 0===n?void 0:n.children;if(o){const n=i.z.getRelativeLocation(e,t,r.getRoot());let a=0,c=Number.MAX_VALUE,u=Number.MAX_VALUE;s.k.resolvePanels(o);for(const e of o){const t=this.squaredDistanceBetweenPointAndPanel(n.x,n.y,e);if(t<=Number.EPSILON){const t=this.getAvgDistToPointWithinRect(n.x,n.y,e);t<u&&(a=e.ordinal,u=t),c=Number.MIN_VALUE}else t<c&&(a=e.ordinal,c=t)}return a}}return 0}squaredDistanceBetweenPointAndPanel(e,t,n){const r=n.y,i=n.x,o=n.y+n.height,a=n.x+n.width,s=e>=i&&e<=a;return(t>=r&&t<=o?0:Math.pow(Math.min(t-r,o-t),2))+(s?0:Math.pow(Math.min(e-i,a-e),2))}getAvgDistToPointWithinRect(e,t,n){return(Math.abs(e-n.x)+Math.abs(e-(n.x+n.width))+Math.abs(t-n.y)+Math.abs(t-(n.y+n.height)))/4}}},6786:(e,t,n)=>{"use strict";n.d(t,{Q:()=>a});var r=n(5745),i=n(3942),o=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class a extends r.y{constructor(e){super(e),this.options=e,this.isPanningInProgress=!1,this.isPinchInProgress=!1,this.prevPan={x:0,y:0},this.pinchStartCoordinates={x:0,y:0},this.initialScale=1,this.onGestureStart=e=>{this.isPinchInProgress||(this.prevPan={x:e.x,y:e.y},this.isPanningInProgress=!0,this.options.enablePagePanning&&this.navigationService.panStart())},this.onGestureMove=e=>o(this,void 0,void 0,(function*(){if(this.isPanningInProgress){let t=e.x-this.prevPan.x,n=e.y-this.prevPan.y;if(this.prevPan={x:e.x,y:e.y},this.options.enablePagePanning&&this.navigationService.isPanned()){const e=this.navigationService.pan(t,n);t-=e.x,n-=e.y}const r=this.viewsTracker.getViewAtPoint(e.x,e.y);if(r instanceof i.h&&r.inZoomedState()){const e=r.pan(t,n);t-=e.x,n-=e.y}!this.options.enablePagePanning||0===t&&0===n||this.navigationService.pan(t,n)}})),this.onGestureEnd=e=>o(this,void 0,void 0,(function*(){var e;this.isPanningInProgress&&(this.options.enablePagePanning&&this.navigationService.panEnd(),this.isPanningInProgress=!1,null===(e=this.metricsService)||void 0===e||e.recordCountMetrics("ZoomableViewController:Pan",1))})),this.onPinchStart=e=>o(this,void 0,void 0,(function*(){if(!this.isPanningInProgress){const t=this.viewsTracker.getViewAtPoint(e.center.x,e.center.y);t instanceof i.h&&(this.pinchStartCoordinates={x:e.center.x,y:e.center.y},this.initialScale=t.getZoomState().scale,this.isPinchInProgress=!0,this.touchHandler.setIgnoreSwipe(!0))}})),this.onPinch=e=>o(this,void 0,void 0,(function*(){if(this.isPinchInProgress){const t=this.viewsTracker.getViewAtPoint(this.pinchStartCoordinates.x,this.pinchStartCoordinates.y);if(t instanceof i.h){const n=t.getZoomState().scale,r=this.initialScale*e.scale/n;t.pinchZoom(this.pinchStartCoordinates.x,this.pinchStartCoordinates.y,r)}}})),this.onPinchEnd=e=>o(this,void 0,void 0,(function*(){var e;if(this.isPinchInProgress){if(!this.options.enablePagePanning){const e=this.viewsTracker.getViewAtPoint(this.pinchStartCoordinates.x,this.pinchStartCoordinates.y);e instanceof i.h&&this.touchHandler.setIgnoreSwipe(e.inZoomedState())}this.isPinchInProgress=!1,null===(e=this.metricsService)||void 0===e||e.recordCountMetrics("ZoomableViewController:PinchZoom",1)}})),this.onDoubleTap=e=>o(this,void 0,void 0,(function*(){var t,n;const r=this.viewsTracker.getViewAtPoint(e.x,e.y);r instanceof i.h&&(r.inZoomedState()?(r.exitZoom(),this.options.eventEmitter.emit("onViewingModeChange",{viewingMode:"FullPage"}),null===(t=this.metricsService)||void 0===t||t.recordCountMetrics("ZoomableViewController:DoubleTap:ExitZoom",1)):(r.doubleTapZoom(e.x,e.y),null===(n=this.metricsService)||void 0===n||n.recordCountMetrics("ZoomableViewController:DoubleTap:EnterZoom",1)),this.options.enablePagePanning||this.touchHandler.setIgnoreSwipe(r.inZoomedState())),this.options.eventEmitter.emit("onDoubleClick",e)})),this.onZoomViewsAdded=e=>o(this,void 0,void 0,(function*(){for(const t of e.views)t instanceof i.h&&t.initializeZoomHandler()})),this.onPageChange=()=>{this.touchHandler.setIgnoreSwipe(!1)},this.options.eventEmitter.on("onViewsAdded",this.onZoomViewsAdded),this.options.enablePagePanning?this.touchHandler.setIgnoreSwipe(!0):this.options.eventEmitter.on("onPageChange",this.onPageChange),super.attachHandlers(),this.metricsService=this.options.metricsService,e.enablePinchHandler&&super.enablePinchHandler()}destroy(){super.destroy(),this.options.eventEmitter.off("onViewsAdded",this.onZoomViewsAdded),this.options.eventEmitter.off("onPageChange",this.onPageChange)}}},9040:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});var r=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class i{render(e,t){return r(this,void 0,void 0,(function*(){return this.rootElement=e,this.pageElement=t.renderResult.pageElement,this.pageElement.style.pointerEvents="none",this.rootElement.append(this.pageElement),Promise.resolve(void 0)}))}destroy(){return r(this,void 0,void 0,(function*(){if(this.rootElement&&this.pageElement)try{this.rootElement.removeChild(this.pageElement)}catch(e){}this.rootElement=void 0,this.pageElement=void 0}))}clearSelection(){return r(this,void 0,void 0,(function*(){}))}}},6042:(e,t,n)=>{"use strict";n.d(t,{Y:()=>r});class r{constructor(e){this.options=e}compose(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const t=document.createElement("div");t.style.position="relative";const n=new Array;for(const r of this.options.layers){const i=document.createElement("div");i.style.display="flex",t.append(i);const o=r.render(i,e);n.push(o)}return Promise.all(n).then((()=>t))}))}}},1822:()=>{},8724:(e,t,n)=>{"use strict";n.d(t,{I:()=>c});var r=n(4910),i=n(9779),o=n(9083),a=n(9343),s=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class c{constructor(e){this.options=e,this.currentIndex=0}fillView(e,t){return s(this,void 0,void 0,(function*(){if(e.isEmpty()){const n=new r.B,i=n.getPromise();i.catch((()=>{})),this.options.eventEmitter.emit("onRendering",{renderingPromise:i});try{yield e.fill(t),n.resolve()}catch(e){throw n.reject(e),e}}yield t}))}reset(){return s(this,void 0,void 0,(function*(){yield this.options.rendererController.reset(),yield this.resetViews()}))}goToPage(e){return s(this,void 0,void 0,(function*(){yield this.reset();const t=this.options.rendererController.goToPageIndex(e);return this.renderView(t,0,"Absolute")}))}goToPositionId(e){return s(this,void 0,void 0,(function*(){yield this.reset(),this.currentPositionId=e;const t=this.options.rendererController.goToPositionId(e);return this.renderView(t,0,"Absolute")}))}goToPrevious(){var e;return s(this,void 0,void 0,(function*(){return null===(e=this.options.metricsService)||void 0===e||e.recordCountMetrics("PreviousPage",1),this.move("PreviousPage")}))}goToNext(){var e;return s(this,void 0,void 0,(function*(){return null===(e=this.options.metricsService)||void 0===e||e.recordCountMetrics("NextPage",1),this.move("NextPage")}))}goToRelativePage(e,t){return s(this,void 0,void 0,(function*(){let n;switch(t){case"Absolute":n=i.Direction.Absolute;break;case"NextPage":n=i.Direction.Forward;break;case"PreviousPage":n=i.Direction.Backward}const r=this.options.rendererController.getPageByRelativeIndex(e,n);return this.renderView(r,e,t)}))}move(e){return s(this,void 0,void 0,(function*(){const t="NextPage"===e?this.currentIndex+1:this.currentIndex-1;return this.goToRelativePage(t,e)}))}renderView(e,t,n){return s(this,void 0,void 0,(function*(){const r=this.options.rendererController.getRenderingProcessId(),i=this.createView(t);if(yield this.fillView(i,e),r!==this.options.rendererController.getRenderingProcessId())throw new a.Lf;return yield this.showView(i,n),i}))}resetViews(){this.currentView=void 0,this.currentPositionId=void 0}createView(e){return new o.w({index:e,bookRenderOptions:this.options.clientRenderOptionsFactory.get().bookRenderOptions,layerFactories:this.options.layerFactories})}removeView(e){return s(this,void 0,void 0,(function*(){yield e.destroy()}))}getCurrentView(){return this.currentView}getCurrentIndex(){return this.currentIndex}getCurrentPositionId(){return this.currentPositionId}notifyPageChange(e){var t;const n=e.getRenderedPage().page;this.currentPositionId=n.startPositionId,this.currentView=e,this.currentIndex=e.getIndex(),this.options.eventEmitter.emit("onPageChange",{startPositionId:n.startPositionId,endPositionId:n.endPositionId,wordsInPage:n.wordsInPage}),null===(t=this.options.metricsService)||void 0===t||t.recordCountMetrics("PageChange",1)}panStart(){}pan(e,t){return{x:0,y:0}}panEnd(){}isPanned(){return!1}}},2226:(e,t,n)=>{"use strict";n.d(t,{C:()=>r});class r{constructor(e){this.empty=!0,this.index=0,this.tokenMap=new Map,this.columnsInReadingOrder=new Array,this.options=e,this.root=document.createElement("div"),this.root.style.minHeight=`${this.options.bookRenderOptions.pageHeight}px`,this.root.style.minWidth=`${this.options.bookRenderOptions.pageWidth}px`,this.interactiveElements=[],this.interactiveDecorationElements=[],this.offset={x:0,y:0}}getTrimBounds(){return this.renderedPage.renderResult.rect}isFirst(){return this.renderedPage.isFirst}isLast(){return this.renderedPage.isLast}isEmpty(){return this.empty}getRoot(){return this.root}getIndex(){return this.options.index}scrollIntoView(e=!0){this.root.scrollIntoView({behavior:e?"smooth":"auto"})}destroy(){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){if(this.layers)for(const e of this.layers)yield e.destroy();this.root.remove()}))}getRenderedPage(){return this.renderedPage}getTokenMap(){return this.tokenMap}getColumnsInReadingOrder(){return this.columnsInReadingOrder}addInteractiveElement(e,t=!1){t?this.interactiveDecorationElements.push(e):this.interactiveElements.push(e)}resetInteractiveDecorationElements(){this.interactiveDecorationElements=[]}getInteractiveElements(){return[...this.interactiveElements,...this.interactiveDecorationElements]}getOffset(){return this.offset}setOffset(e,t){this.offset={x:e,y:t},this.root.style.left=`${e}px`,this.root.style.top=`${t}px`}addOffset(e,t){this.setOffset(this.offset.x+e,this.offset.y+t)}}},9083:(e,t,n)=>{"use strict";n.d(t,{w:()=>l});var r=n(9779),i=n(9040),o=n(6042),a=n(27),s=n(560),c=n(9429),u=n(2226);class l extends u.C{fill(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){(0,r.assert)(this.empty,"A view can only be filled once");const t=yield e;this.renderedPage=t,this.buildColumnTokenMap(t);const n=new i.d;this.layers=[n,...this.options.layerFactories.flatMap((e=>e.get()))];const s=new o.Y({height:this.options.bookRenderOptions.pageHeight,width:this.options.bookRenderOptions.pageWidth,layers:this.layers}),c=yield s.compose(t);return this.root.replaceWith(c),this.root=c,this.root.className+=` ${a.g.VIEW_ELEMENT_CLASS} `,this.empty=!1,t}))}buildColumnTokenMap(e){const t=e.layoutPage;let n=e.tokens.children.map((e=>e.words)).reduce(((e,t)=>e.concat(t)),[]);n=c.g.adjustTokenHeights(n,this.options.bookRenderOptions.fontFamily),this.mapRecursively(t.children,new Set(n))}mapRecursively(e,t){var n;for(let r=0;r<e.length;r++){const i=e[r];this.columnsInReadingOrder.push(i);const o=null===(n=i.children)||void 0===n?void 0:n.filter((e=>"column"===e.type));void 0!==o&&o.length>0&&this.mapRecursively(o,t);const a=new Array,c=i.rect;for(const e of t)s.S.isInRect(c,{x:e.x+e.width/2,y:e.y+e.height/2})&&(a.push(e),t.delete(e));this.tokenMap.set(i,a)}}}},4229:(e,t,n)=>{"use strict";n.d(t,{k:()=>c});var r=n(2226),i=n(9779),o=n(9040),a=n(6042),s=n(27);class c extends r.C{constructor(e){var t;super(e),this.currentPanel=0,this.gvMoveLock="None",this.animationDuration=null!=(null===(t=e.guidedViewOptions)||void 0===t?void 0:t.animationDuration)?e.guidedViewOptions.animationDuration:s.g.DEFAULT_ANIMATION_DURATION,this.root.style.transitionDuration=`${this.animationDuration}ms`,this.root.style.transitionTimingFunction=c.DEFAULT_TRANSITION_FORMULA,this.root.style.opacity="1"}isFirst(){return this.isFirstPanel()&&this.renderedPage.isFirst}isLast(){return this.isLastPanel()&&this.renderedPage.isLast}fill(e){var t;return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){(0,i.assert)(this.empty,"A view can only be filled once");const n=yield e;this.renderedPage=n,this.panelsOnCurrentPage=null===(t=n.panels)||void 0===t?void 0:t.children,c.resolvePanels(this.panelsOnCurrentPage);const r=new o.d;this.layers=[r,...this.options.layerFactories.flatMap((e=>e.get()))];const s=new a.Y({height:this.options.bookRenderOptions.pageHeight,width:this.options.bookRenderOptions.pageWidth,layers:this.layers}),u=yield s.compose(n);return this.replaceRoot(u),this.empty=!1,n}))}replaceRoot(e){const t=this.root.style.transitionDuration,n=this.root.style.transitionTimingFunction,r=this.root.style.opacity;this.root.replaceWith(e),this.root=e,this.root.className+=` ${s.g.VIEW_ELEMENT_CLASS} `,this.setView(this.currentPanel),this.root.style.transitionDuration=t,this.root.style.transitionTimingFunction=n,this.root.style.opacity=r}guidedViewMove(e=1){this.setView(e)}guidedViewStop(){this.reset()}fadeIn(e=.5){const t=this.root.style.transitionDuration;this.root.style.transitionDuration=this.getTransitionDurationNumber()*e+"ms",this.setView(this.currentPanel,1),setTimeout((()=>this.root.style.transitionDuration=t),0)}fadeOut(e=.5){const t=this.root.style.transitionDuration;this.root.style.transitionDuration=this.getTransitionDurationNumber()*e+"ms",this.setView(this.currentPanel,0),setTimeout((()=>this.root.style.transitionDuration=t),0)}acquireMoveLockPage(){this.gvMoveLock="Page"}acquireMoveLockAll(){this.gvMoveLock="All"}releaseMoveLock(){this.gvMoveLock="None"}hasMoveLockPage(){return"Page"===this.gvMoveLock||"All"===this.gvMoveLock}hasMoveLockAll(){return"All"===this.gvMoveLock}getPanels(){return this.panelsOnCurrentPage}getPanelNumber(){var e;return null!==(e=this.currentPanel)&&void 0!==e?e:0}setPanelNumber(e){this.currentPanel=e}isFirstPanel(){return 1===this.currentPanel||!this.hasPanels()}isLastPanel(){var e;return this.currentPanel===(null===(e=this.panelsOnCurrentPage)||void 0===e?void 0:e.length)||!this.hasPanels()}isAnimationEnabled(){return this.animationDuration>0}hasPanels(){var e;return!!(null===(e=this.panelsOnCurrentPage)||void 0===e?void 0:e.length)}setView(e,t=1){var n,r;this.root.style.opacity=`${t}`;const i=null===(r=null===(n=this.renderedPage)||void 0===n?void 0:n.panels)||void 0===r?void 0:r.children;if(0==e||void 0===i||e>i.length)return this.currentPanel=0,void this.guidedViewStop();this.currentPanel=e;const o=i[e-1],a=o.x,s=o.x+o.width,c=o.y,u=o.y+o.height,[l,d]=this.getTranslate(e),h=this.getZoom(e);this.root.style.clipPath=`polygon(${a}px ${c}px, ${s}px ${c}px, ${s}px ${u}px, ${a}px ${u}px)`,this.root.style.transform=`translate(${l*h}px, ${d*h}px) scale(${h})`}reset(){this.root.style.clipPath=c.DEFAULT_FULL_PAGE_CLIPPATH,this.root.style.transform=c.DEFAULT_FULL_PAGE_TRANSFORM}getZoom(e){if(void 0===this.panelsOnCurrentPage)return 1;const t=this.panelsOnCurrentPage[e-1],n=this.options.bookRenderOptions.pageWidth/t.width,r=this.options.bookRenderOptions.pageHeight/t.height;return n<r?n:r}getTranslate(e){if(void 0===this.panelsOnCurrentPage)return[0,0];const t=this.panelsOnCurrentPage[e-1],n=this.options.bookRenderOptions.pageWidth,r=this.options.bookRenderOptions.pageHeight;return[-t.x-(t.width-n)/2,-t.y-(t.height-r)/2]}updateAnimationDuration(e){e!==this.animationDuration&&(this.animationDuration=e,this.root.style.transitionDuration=`${this.animationDuration}ms`)}getTransitionDurationNumber(){const e=parseInt(this.root.style.transitionDuration);return isNaN(e)?s.g.DEFAULT_ANIMATION_DURATION:e}static resolvePanels(e){if(e&&e.length>0){let t=0;e.forEach(((e,n)=>{n>e.ordinal-1?e.ordinal=t+e.ordinal:t=e.ordinal}))}}}c.DEFAULT_TRANSITION_FORMULA="cubic-bezier(0.455, 0.03, 0.515, 0.955)",c.DEFAULT_FULL_PAGE_CLIPPATH="polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",c.DEFAULT_FULL_PAGE_TRANSFORM="translate(0px, 0px) scale(1)"},4155:(e,t,n)=>{"use strict";n.d(t,{q:()=>c});var r=n(4910),i=n(8724),o=n(4229),a=n(27),s=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class c extends i.I{constructor(e){super(e),this.pageChange=!1}goToPositionId(e){const t=Object.create(null,{goToPositionId:{get:()=>super.goToPositionId}});return s(this,void 0,void 0,(function*(){const n=yield t.goToPositionId.call(this,e);return this.assertIsGuidedContentView(n),n.guidedViewMove(1),n.releaseMoveLock(),n}))}goToPrevious(){return s(this,void 0,void 0,(function*(){return this.move("PreviousPage"),Promise.resolve({})}))}goToNext(){return s(this,void 0,void 0,(function*(){return this.move("NextPage"),Promise.resolve({})}))}move(e){var t,n,i,o,s;const c=this.getCurrentGuidedContentView(),u=this.options.clientRenderOptionsFactory.get().guidedViewOptions.animationDuration;let l;if(c.updateAnimationDuration(null!=u?u:a.g.DEFAULT_ANIMATION_DURATION),this.nextPanel=new r.B,this.isPageChange(e)||"Absolute"===e){if(c.hasMoveLockPage())return this.nextPanel.getPromise();const r="NextPage"===e?this.getCurrentIndex()+1:this.getCurrentIndex()-1;switch(l="NextPage"===e?this.options.rendererController.nextPage():this.options.rendererController.previousPage(),this.pageChange=!0,c.acquireMoveLockAll(),c.fadeOut(),c.hasPanels()&&c.isAnimationEnabled()?c.getRoot().addEventListener("transitionend",(t=>{"opacity"===t.propertyName&&this.resolveNextPanel(l,r,e)})):this.resolveNextPanel(l,r,e),e){case"Absolute":null===(t=this.options.metricsService)||void 0===t||t.recordCountMetrics("GuidedView:On:Page:Absolute",1);break;case"NextPage":null===(n=this.options.metricsService)||void 0===n||n.recordCountMetrics("GuidedView:On:Page:Next",1);break;case"PreviousPage":null===(i=this.options.metricsService)||void 0===i||i.recordCountMetrics("GuidedView:On:Page:Previous",1)}return this.nextPanel.getPromise()}{if(c.hasMoveLockAll())return this.nextPanel.getPromise();l=this.options.rendererController.currentPage();const t=c.getPanelNumber(),n="NextPage"===e?t+1:t-1;switch(c.acquireMoveLockPage(),c.guidedViewMove(n),c.hasPanels()&&c.isAnimationEnabled()?c.getRoot().addEventListener("transitionend",(t=>{"transform"===t.propertyName&&(this.resolveNextPanel(l,this.getCurrentIndex(),e),c.releaseMoveLock())})):(this.resolveNextPanel(l,this.getCurrentIndex(),e),c.releaseMoveLock()),e){case"NextPage":null===(o=this.options.metricsService)||void 0===o||o.recordCountMetrics("GuidedView:On:Panel:Next",1);break;case"PreviousPage":null===(s=this.options.metricsService)||void 0===s||s.recordCountMetrics("GuidedView:On:Panel:Previous",1)}return this.nextPanel.getPromise()}}isPageChange(e){const t=this.getCurrentGuidedContentView();return t&&(t.isFirstPanel()&&"PreviousPage"===e||t.isLastPanel()&&"NextPage"===e)}createView(e){return new o.k({index:e,bookRenderOptions:this.options.clientRenderOptionsFactory.get().bookRenderOptions,layerFactories:this.options.layerFactories,guidedViewOptions:this.options.clientRenderOptionsFactory.get().guidedViewOptions})}showView(e,t){var n;return s(this,void 0,void 0,(function*(){const r=this.getCurrentView();if(yield e.getRenderedPage(),r)if(this.assertIsGuidedContentView(r),r.getRoot().remove(),this.options.eventEmitter.emit("onViewsRemoved",{views:[r]}),this.pageChange)e.acquireMoveLockAll(),e.fadeOut(),"PreviousPage"===t?e.guidedViewMove(e.hasPanels()?null===(n=e.getPanels())||void 0===n?void 0:n.length:1):e.guidedViewMove(1),setTimeout((()=>e.fadeIn()),0),e.releaseMoveLock(),this.pageChange=!1;else{const t=r.getPanelNumber();e.guidedViewMove(t)}const i=e.getRoot();this.notifyPageChange(e),this.options.container.append(i),this.options.eventEmitter.emit("onViewsAdded",{views:[e]})}))}resolveNextPanel(e,t,n){var r;return s(this,void 0,void 0,(function*(){this.getCurrentGuidedContentView().getRoot().remove();const i=yield this.renderView(e,t,n);this.assertIsGuidedContentView(i),null===(r=this.nextPanel)||void 0===r||r.resolve(i)}))}getCurrentGuidedContentView(){const e=this.getCurrentView();return this.assertIsGuidedContentView(e),e}assertIsGuidedContentView(e,t){if(null==e||!(e instanceof o.k))throw new Error(null!=t?t:`Expected 'val' to be defined GuidedContentView, but received ${e}`)}notifyPageChange(e){var t;super.notifyPageChange(e),null===(t=this.options.metricsService)||void 0===t||t.recordCountMetrics("PageChange:GuidedView",1)}resetViews(){const e=Object.create(null,{resetViews:{get:()=>super.resetViews}});return s(this,void 0,void 0,(function*(){const t=this.getCurrentView();t&&(yield t.destroy(),this.options.eventEmitter.emit("onViewsRemoved",{views:[t]})),e.resetViews.call(this)}))}destroy(){return s(this,void 0,void 0,(function*(){return new Promise((e=>{const t=this.getCurrentView();this.assertIsGuidedContentView(t),t.acquireMoveLockAll(),t.guidedViewStop(),t.hasPanels()&&t.isAnimationEnabled()?t.getRoot().addEventListener("transitionend",(n=>{"transform"===n.propertyName&&(t.releaseMoveLock(),t.getRoot().remove(),e())})):(t.releaseMoveLock(),t.getRoot().remove(),e())}))}))}}},8707:()=>{},9250:(e,t,n)=>{"use strict";n.d(t,{p:()=>o});var r=n(8390),i=n(6854);class o{constructor(e){this.metricsService=e,this.animationFrameStartTime=(new Date).getTime(),this.animationFrame=this.getInitialAnimationFrame(),this.topSpinnerStartTime=performance.now(),this.bottomSpinnerStartTime=performance.now()}recordTimeMetrics(e,t){var n,r,o;const a=(null===(n=(0,i.f)())||void 0===n?void 0:n.isIOSFullscreenEnabled)?"TopBlankSpace":"NoBlankSpace";null===(r=this.metricsService)||void 0===r||r.recordTimeMetrics(e,t),null===(o=this.metricsService)||void 0===o||o.recordTimeMetrics(`${e}:${a}`,t)}recordCountMetrics(e,t){var n,r,o;const a=(null===(n=(0,i.f)())||void 0===n?void 0:n.isIOSFullscreenEnabled)?"TopBlankSpace":"NoBlankSpace";null===(r=this.metricsService)||void 0===r||r.recordCountMetrics(e,t),null===(o=this.metricsService)||void 0===o||o.recordCountMetrics(`${e}:${a}`,t)}measureFrameRate(e,t){const n=1e3/(e-this.animationFrameStartTime);n<this.animationFrame.min&&(this.animationFrame.min=n),n>this.animationFrame.max&&(this.animationFrame.max=n),this.animationFrame.count++,this.animationFrame.avg+=(n-this.animationFrame.avg)/this.animationFrame.count,this.animationFrameStartTime=e,t.isConnected&&window.requestAnimationFrame((e=>this.measureFrameRate(e,t)))}emitFrameRateMetrics(){this.metricsService&&this.animationFrame.count>0&&(this.recordTimeMetrics(`${r.P.FRAME_RATE}:${r.P.MIN}`,this.animationFrame.min),this.recordTimeMetrics(`${r.P.FRAME_RATE}:${r.P.MAX}`,this.animationFrame.max),this.recordTimeMetrics(`${r.P.FRAME_RATE}:${r.P.AVG}`,this.animationFrame.avg),this.animationFrame=this.getInitialAnimationFrame())}emitLayoutErrorMetric(){this.recordCountMetrics(`${r.P.LAYOUT_ERROR}:${r.P.COUNT}`,1)}emitSpinnerMetrics(e,t,n,i){e.forEach((e=>{const{target:o,isIntersecting:a}=e;o===n?this.recordSpinnerTimer(r.P.TOP_SPINNER,a,t):o===i&&this.recordSpinnerTimer(r.P.BOTTOM_SPINNER,a,t)}))}recordSpinnerTimer(e,t,n){if(t)e===r.P.TOP_SPINNER?this.topSpinnerStartTime=performance.now():e===r.P.BOTTOM_SPINNER&&(this.bottomSpinnerStartTime=performance.now());else if(n.length>0&&this.metricsService){const t=performance.now();let n=0;e===r.P.TOP_SPINNER?n=t-this.topSpinnerStartTime:e===r.P.BOTTOM_SPINNER&&(n=t-this.bottomSpinnerStartTime),this.recordTimeMetrics(`${e}:${r.P.EXECUTION_TIME}`,n)}}getInitialAnimationFrame(){return{min:Number.MAX_SAFE_INTEGER,max:Number.MIN_SAFE_INTEGER,avg:0,count:0}}}},5988:(e,t,n)=>{"use strict";n.d(t,{p:()=>s});var r=n(5526),i=n(6835),o=n(4155),a=n(6583);class s{static build(e,t,n){switch(e){case 0:return this.shouldReturnGuidedView(t,n)?new o.q(n):n.usePanningPaginationService?new a.s(n):new i.N(n);case 1:return new r.a(n)}}static shouldReturnGuidedView(e,t){const n=t.clientRenderOptionsFactory.get().bookRenderOptions;return t.clientRenderOptionsFactory.get().guidedViewOptions.isEnabled&&"GuidedView"===n.viewingMode&&"FixedFormat"===e.bookType&&e.publisherPanel}}},6835:(e,t,n)=>{"use strict";n.d(t,{N:()=>a});var r=n(8724),i=n(3942),o=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class a extends r.I{constructor(e){super(e),this.ANIMATION_MAP={enter:{common:{Horizontal:"kg-slidein-right",Vertical:"kg-slidein-bottom"},inverted:{Horizontal:"kg-slidein-left",Vertical:"kg-slidein-top"}},exit:{common:{Horizontal:"kg-slideout-left",Vertical:"kg-slideout-top"},inverted:{Horizontal:"kg-slideout-right",Vertical:"kg-slideout-bottom"}}},this.navigationDirection=e.navigationDirection}resetViews(){const e=Object.create(null,{resetViews:{get:()=>super.resetViews}});return o(this,void 0,void 0,(function*(){const t=this.getCurrentView();t&&(yield t.destroy()),e.resetViews.call(this)}))}createView(e){return this.options.isZoomableContent?new i.h({index:e,bookRenderOptions:this.options.clientRenderOptionsFactory.get().bookRenderOptions,layerFactories:this.options.layerFactories,zoomViewOptions:this.options.clientRenderOptionsFactory.get().zoomViewOptions}):super.createView(e)}showView(e,t){return o(this,void 0,void 0,(function*(){const n=this.getCurrentView();if(n){const e=n.getRoot();this.options.animatePageTurn&&"Absolute"!=t?(e.style.animationName=this.getAnimationName("exit",t),e.addEventListener("animationend",(()=>{e.remove(),this.options.eventEmitter.emit("onViewsRemoved",{views:[n]})}))):(e.remove(),this.options.eventEmitter.emit("onViewsRemoved",{views:[n]}))}this.notifyPageChange(e),yield e.getRenderedPage();const r=e.getRoot();r.style.position="absolute",r.style.animationDuration="0.3s",r.style.animationTimingFunction="ease-in-out",this.options.animatePageTurn&&"Absolute"!=t&&(r.style.animationName=this.getAnimationName("enter",t)),this.options.container.contains(r)||this.options.container.append(r),this.options.eventEmitter.emit("onViewsAdded",{views:[e]})}))}notifyPageChange(e){var t;super.notifyPageChange(e),null===(t=this.options.metricsService)||void 0===t||t.recordCountMetrics("PageChange:Pagination",1)}getAnimationName(e,t){let n="common";return"PreviousPage"===t&&(n="inverted"),"rtl"===this.options.progressionDirection&&"Horizontal"===this.navigationDirection&&(n="common"===n?"inverted":"common"),this.ANIMATION_MAP[e][n][this.navigationDirection]}destroy(){return o(this,void 0,void 0,(function*(){yield this.resetViews()}))}}},6583:(e,t,n)=>{"use strict";n.d(t,{s:()=>c});var r=n(8724),i=n(3942),o=n(4953),a=n(9779),s=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class c extends r.I{constructor(e){super(e),this.viewMap=new Map,this.viewPromiseMap=new Map,this.layoutOffset=0,this.layoutEmitter=new o.v,this.layoutHandlerMap=new Map,this.panningInProgress=!1,this.panVelocity=0,this.spinnerTimers=new Map,this.navigationDirection=e.navigationDirection,this.layoutEmitter.on("move",(e=>{const t=performance.now();this.panPrevTime&&t!==this.panPrevTime&&(this.panVelocity=e/(t-this.panPrevTime)),this.panPrevTime=t})),this.spinner=this.createSpinnerElement(),this.options.container.append(this.spinner)}createSpinnerElement(){const e=document.createElement("div"),t=document.createElement("div");return e.classList.add("kg-spinner"),e.style.position="absolute",e.append(t),e}goToRelativePage(e,t){const n=Object.create(null,{goToRelativePage:{get:()=>super.goToRelativePage}});return s(this,void 0,void 0,(function*(){const r=this.viewMap.get(e);if(r)return r;const i=this.viewPromiseMap.get(e);if(i)return i;{const r=n.goToRelativePage.call(this,e,t);return this.viewPromiseMap.set(e,r),r.finally((()=>this.viewPromiseMap.delete(e))),r}}))}move(e){var t;return s(this,void 0,void 0,(function*(){if("Absolute"===e)throw new Error("Invalid move operation, direction cannot be Absolute");const n=this.getCurrentView();(0,a.assertIsDefined)(n,"Cannot paginate if the book hasn't loaded");const r="NextPage"===e?n.getIndex()+1:n.getIndex()-1;let i=this.viewMap.get(r);if(i||(this.spinnerTimers.has(r)||this.spinnerTimers.set(r,performance.now()),i=yield this.goToRelativePage(r,e)),i.getIndex()!==(null===(t=this.getCurrentView())||void 0===t?void 0:t.getIndex())&&!this.panningInProgress)if(this.options.animatePageTurn)this.animatePageSnap(e);else{const t=this.getJumpDistance(e),n=this.getCoords(t-this.layoutOffset);this.pan(n.x,n.y),this.resetZoomedViews()}return i}))}animatePageSnap(e){this.cancelCurrentAnimation();let t=0;if(e){const n=this.getJumpDistance(e);t=0===this.layoutOffset?n:Math.sign(n)===Math.sign(this.layoutOffset)?n-this.layoutOffset:-this.layoutOffset}else t=-this.layoutOffset;0!==t&&(this.currentAnimation=requestAnimationFrame((e=>this.animatePan(this.getCoords(t),c.ANIMATION_DURATION_MS,c.EASE_IN_OUT,e,e,e))))}animatePan(e,t,n,r,i,o){if(i!==o){const a=(i-r)/t,s=Math.min((o-r)/t,1),c=n(s)-n(a);this.pan(e.x*c,e.y*c)}if(o-r<t)this.currentAnimation=requestAnimationFrame((i=>this.animatePan(e,t,n,r,o,i)));else{const e=this.getCoords(-this.layoutOffset);this.pan(e.x,e.y),this.resetZoomedViews()}}cancelCurrentAnimation(){this.currentAnimation&&(cancelAnimationFrame(this.currentAnimation),this.currentAnimation=void 0)}resetZoomedViews(){for(const e of this.viewMap.values())e!==this.getCurrentView()&&e instanceof i.h&&e.exitZoom()}removeView(e){const t=Object.create(null,{removeView:{get:()=>super.removeView}});return s(this,void 0,void 0,(function*(){e===this.viewMap.get(e.getIndex())&&this.viewMap.delete(e.getIndex());const n=this.layoutHandlerMap.get(e);return this.layoutEmitter.off("move",n),this.layoutHandlerMap.delete(e),this.options.eventEmitter.emit("onViewsRemoved",{views:[e]}),t.removeView.call(this,e)}))}resetViews(){const e=Object.create(null,{resetViews:{get:()=>super.resetViews}});return s(this,void 0,void 0,(function*(){this.viewPromiseMap.clear();for(const e of this.viewMap.values())yield this.removeView(e);this.spinnerTimers.clear(),this.layoutOffset=0,e.resetViews.call(this)}))}createView(e){return this.options.isZoomableContent?new i.h({index:e,bookRenderOptions:this.options.clientRenderOptionsFactory.get().bookRenderOptions,layerFactories:this.options.layerFactories,zoomViewOptions:this.options.clientRenderOptionsFactory.get().zoomViewOptions}):super.createView(e)}showView(e,t){var n,r,i;return s(this,void 0,void 0,(function*(){const o=e.getIndex(),s=this.viewMap.get(o);s&&(yield this.removeView(s)),this.viewMap.set(o,e);const c=e.getRoot();if(c.style.position="absolute","Absolute"===t)this.notifyPageChange(e),this.goToRelativePage(this.getCurrentIndex()+1,"NextPage"),this.goToRelativePage(this.getCurrentIndex()-1,"PreviousPage");else{const t=this.getCurrentView();(0,a.assertIsDefined)(t,"Cannot paginate if the book hasn't loaded");const s=this.getJumpDistance("NextPage"),c=o-t.getIndex(),u=this.getCoords(s*c),l=t.getOffset();e.setOffset(l.x-u.x,l.y-u.y),this.updateState();const d=this.spinnerTimers.get(o);if(d){this.spinnerTimers.delete(o),null===(n=this.options.metricsService)||void 0===n||n.recordCountMetrics("PanningSpinner:Count",1);const e=performance.now()-d;null===(r=this.options.metricsService)||void 0===r||r.recordTimeMetrics("PanningSpinner:Time",e),null===(i=this.options.metricsService)||void 0===i||i.recordTimeMetrics("PanningSpinner:ElapsedTime",e)}}this.options.container.append(c);const u=t=>{const n=this.getCoords(t);e.addOffset(n.x,n.y)};this.layoutHandlerMap.set(e,u),this.layoutEmitter.on("move",u),this.options.eventEmitter.emit("onViewsAdded",{views:[e]})}))}pan(e,t){let n=0;const r=this.getCurrentView();if(r){const i=this.getPageSize();let o="Horizontal"===this.navigationDirection?e:t;if(0===this.layoutOffset){const e=this.getDirection(o);if(r.isFirst()&&"PreviousPage"===e)return this.options.eventEmitter.emit("onExceedingBoundsChanged",{exceeding:"Before"}),this.getCoords(n);if(r.isLast()&&"NextPage"===e)return this.options.eventEmitter.emit("onExceedingBoundsChanged",{exceeding:"After"}),this.getCoords(n)}else Math.sign(this.layoutOffset+o)!==Math.sign(this.layoutOffset)&&(o=-this.layoutOffset);const a="Horizontal"===this.options.navigationDirection?r.getOffset().x:r.getOffset().y;Math.sign(a)===Math.sign(o)&&(o=Math.sign(o)*Math.min(Math.max(0,i-Math.abs(a)),Math.abs(o))),n=o,0!==o&&(this.layoutOffset+=o,this.layoutEmitter.emit("move",o)),Math.abs(this.layoutOffset)>i*c.CURRENT_PAGE_THRESHOLD&&(this.layoutOffset-=i*Math.sign(this.layoutOffset),this.updateState())}return this.getCoords(n)}updateState(){var e,t;const n=this.getCurrentView();(0,a.assertIsDefined)(n,"Cannot paginate if the book hasn't loaded");const r=this.getPageSize(),i="Horizontal"===this.options.navigationDirection?n.getOffset().x:n.getOffset().y;if(Math.abs(i)>r*c.CURRENT_PAGE_THRESHOLD){const r=this.getDirection(i),o="NextPage"===r?n.getIndex()+1:n.getIndex()-1,a=this.viewMap.get(o);if(a){this.notifyPageChange(a),this.spinnerTimers.has(o)||(null===(e=this.options.metricsService)||void 0===e||e.recordCountMetrics("PanningSpinner:Count",0),null===(t=this.options.metricsService)||void 0===t||t.recordTimeMetrics("PanningSpinner:Time",0));const n="NextPage"===r?a.getIndex()+1:a.getIndex()-1;this.viewMap.has(n)||this.goToRelativePage(n,r);for(const e of this.viewMap.values())Math.abs(e.getIndex()-a.getIndex())>=2&&this.removeView(e)}else this.spinnerTimers.has(o)||this.spinnerTimers.set(o,performance.now())}}notifyPageChange(e){var t;super.notifyPageChange(e),null===(t=this.options.metricsService)||void 0===t||t.recordCountMetrics("PageChange:Panning",1)}panStart(){super.panStart(),this.panningInProgress=!0}panEnd(){super.panEnd(),this.panningInProgress=!1;const e=this.getPageSize();if(Math.abs(this.panVelocity)>c.PAN_VELOCITY_THRESHOLD){const e=this.getDirection(this.panVelocity);this.animatePageSnap(e)}else if(Math.abs(this.layoutOffset)<e*c.PAN_SNAP_BACK_THRESHOLD)this.animatePageSnap();else{const e=this.getDirection(this.layoutOffset);this.animatePageSnap(e)}}isPanned(){return 0!==this.layoutOffset}getPageFlow(e){let t="common";return"PreviousPage"===e&&(t="inverted"),"rtl"===this.options.progressionDirection&&"Horizontal"===this.navigationDirection&&(t="common"===t?"inverted":"common"),t}getPageSize(){const e=this.getCurrentView();return(0,a.assertIsDefined)(e,"Cannot paginate if the book hasn't loaded"),"Horizontal"===this.navigationDirection?e.getRenderedPage().page.width:e.getRenderedPage().page.height}getJumpDistance(e){const t=this.getPageSize();return"common"===this.getPageFlow(e)?-t:t}getDirection(e){return Math.sign(e)===Math.sign(this.getJumpDistance("NextPage"))?"NextPage":"PreviousPage"}getCoords(e){return"Horizontal"===this.navigationDirection?{x:e,y:0}:{x:0,y:e}}destroy(){return s(this,void 0,void 0,(function*(){this.spinner.remove(),yield this.resetViews()}))}}c.ANIMATION_DURATION_MS=100,c.PAN_SNAP_BACK_THRESHOLD=.5,c.PAN_VELOCITY_THRESHOLD=.3,c.CURRENT_PAGE_THRESHOLD=.6,c.EASE_IN_OUT=e=>e*e*(3-2*e)},9114:(e,t,n)=>{"use strict";n.d(t,{t:()=>r});class r{constructor(e){this.el=e}save(){this.position=this.el.scrollHeight-this.el.scrollTop}restore(){if(void 0===this.position)throw new Error("Cannot restore without a previous call to save()");const e=this.el.scrollHeight-this.el.scrollTop;this.el.scrollBy({top:e-this.position})}}},5526:(e,t,n)=>{"use strict";n.d(t,{a:()=>u});var r=n(8724),i=n(4910),o=n(9718),a=n(6891),s=n(9250),c=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class u extends r.I{constructor(e){super(e),this.options=e,this.LOAD_PAGE_DELAY=100,this.LOAD_WATCH_DELAY=1e3,this.views=[],this.viewMap=new Map,this.expiredViews=new Set,this.isBookLoaded=!1,this.topIndex=0,this.bottomIndex=0,this.topIsFull=!1,this.bottomIsFull=!1,this.setupContainer(),this.navigationMetrics=new s.p(e.metricsService)}setupContainer(){var e;const t=this.options.container;this.topSentinel=document.createElement("div"),this.topSentinel.id="top-sentinel",this.bottomSentinel=document.createElement("div"),this.bottomSentinel.id="bottom-sentinel";const n={fullPage:this.options.fullPage,container:t,topSentinel:this.topSentinel,bottomSentinel:this.bottomSentinel,eventEmitter:this.options.eventEmitter,metricsService:this.options.metricsService};this.layoutController=null!==(e=this.options.layoutController)&&void 0!==e?e:(0,a.g)()?new o.oX(n):new o.CP(n),this.topLoader=new i.B,this.topLoader.resolve(),this.bottomLoader=new i.B,this.bottomLoader.resolve(),this.loaderObserver=new IntersectionObserver((e=>this.loaderObserverCallback(e)),{root:this.options.fullPage?void 0:t,rootMargin:"200% 0% 200% 0%",threshold:0}),this.outOfBoundsObserver=new IntersectionObserver((e=>this.outOfBoundsObserverCallback(e)),{root:this.options.fullPage?void 0:t,rootMargin:"0%",threshold:0}),this.outOfBoundsObserver.observe(this.topSentinel),this.outOfBoundsObserver.observe(this.bottomSentinel),this.loaderObserver.observe(this.topSentinel),this.loaderObserver.observe(this.bottomSentinel),this.currentViewObserver=new IntersectionObserver((e=>this.currentViewObserverCallback(e)),{root:this.options.fullPage?void 0:t,rootMargin:"-25% 0% -75% 0%",threshold:0}),setTimeout((()=>this.loadContentWatch()),this.LOAD_WATCH_DELAY)}loaderObserverCallback(e){this.isBookLoaded&&(e.forEach((e=>{const{target:t,isIntersecting:n}=e;if(t===this.topSentinel)this.topIsFull=!n;else if(t===this.bottomSentinel)this.bottomIsFull=!n;else{const e=this.viewMap.get(t);n?this.expiredViews.delete(e):this.expiredViews.add(e)}})),this.verifyLayoutHealth(),this.loadContentAsync())}currentViewObserverCallback(e){this.isBookLoaded&&e.forEach((e=>{const{target:t,isIntersecting:n}=e;if(n){const e=this.viewMap.get(t);this.notifyPageChange(e)}}))}outOfBoundsObserverCallback(e){this.isBookLoaded&&e.forEach((e=>{var t,n;const{target:r,isIntersecting:i}=e;i&&(r===this.topSentinel&&(null===(t=this.getCurrentView())||void 0===t?void 0:t.isFirst())&&this.options.eventEmitter.emit("onExceedingBoundsChanged",{exceeding:"Before"}),r===this.bottomSentinel&&(null===(n=this.getCurrentView())||void 0===n?void 0:n.isLast())&&this.options.eventEmitter.emit("onExceedingBoundsChanged",{exceeding:"After"}))}))}loadContentWatch(){this.layoutController.isConnected()&&(this.loadContentAsync(),setTimeout((()=>this.loadContentWatch()),this.LOAD_WATCH_DELAY))}loadContentAsync(){this.isBookLoaded&&(this.bottomLoader.isCompleted&&(this.bottomLoader=new i.B,this.bottomLoader.getPromise().catch((()=>this.loadContentAsync())),setTimeout((()=>this.loadContentBottom()))),this.topLoader.isCompleted&&(this.topLoader=new i.B,this.topLoader.getPromise().catch((()=>this.loadContentAsync())),setTimeout((()=>this.loadContentTop()))))}loadContentBottom(){return c(this,void 0,void 0,(function*(){try{if(this.isBookLoaded&&this.layoutController.isConnected())if(this.bottomIsFull&&this.expiredViews.has(this.bottomView)){const e=this.bottomView;yield this.removeView(e),this.views.pop(),this.bottomView=this.views[this.views.length-1],this.bottomIndex--,this.options.eventEmitter.emit("onViewsRemoved",{views:[e]}),setTimeout((()=>this.loadContentBottom()),this.LOAD_PAGE_DELAY)}else if(this.bottomIsFull||this.bottomView.isLast())this.bottomLoader.resolve();else{const e=yield this.goToRelativePage(this.bottomIndex+1,"NextPage");this.bottomView=e,this.views.push(e),this.bottomIndex++,setTimeout((()=>this.loadContentBottom()),this.LOAD_PAGE_DELAY)}else this.bottomLoader.resolve()}catch(e){this.bottomLoader.reject(e)}}))}loadContentTop(){return c(this,void 0,void 0,(function*(){try{if(this.isBookLoaded&&this.layoutController.isConnected())if(this.topIsFull&&this.expiredViews.has(this.topView)){const e=this.topView;yield this.removeView(e),this.views.shift(),this.topView=this.views[0],this.topIndex++,this.options.eventEmitter.emit("onViewsRemoved",{views:[e]}),setTimeout((()=>this.loadContentTop()),this.LOAD_PAGE_DELAY)}else if(this.topIsFull||this.topView.isFirst())this.topLoader.resolve();else{const e=yield this.goToRelativePage(this.topIndex-1,"PreviousPage");this.topView=e,this.views.unshift(e),this.topIndex--,setTimeout((()=>this.loadContentTop()),this.LOAD_PAGE_DELAY)}else this.topLoader.resolve()}catch(e){this.topLoader.reject(e)}}))}removeView(e){return c(this,void 0,void 0,(function*(){const t=e.getRoot();yield this.layoutController.removeView(e),this.loaderObserver.unobserve(t),this.currentViewObserver.unobserve(t),this.viewMap.delete(t),this.expiredViews.delete(e),this.verifyLayoutHealth()}))}verifyLayoutHealth(){if(this.topIsFull&&this.bottomIsFull&&0==this.viewMap.size){this.navigationMetrics.emitLayoutErrorMetric();const e=this.getCurrentPositionId();(e||0===e)&&this.goToPositionId(e)}}goToPage(e){const t=Object.create(null,{goToPage:{get:()=>super.goToPage}});return c(this,void 0,void 0,(function*(){const n=yield t.goToPage.call(this,e);return this.bookLoaded(n),this.notifyPageChange(n),n}))}goToPositionId(e){const t=Object.create(null,{goToPositionId:{get:()=>super.goToPositionId}});return c(this,void 0,void 0,(function*(){const n=yield t.goToPositionId.call(this,e);return this.bookLoaded(n),this.notifyPageChange(n),n}))}bookLoaded(e){this.isBookLoaded=!0,this.bottomView=this.topView=e,this.bottomIndex=this.topIndex=0,this.views.push(e),setTimeout((()=>this.loadContentAsync()),this.LOAD_PAGE_DELAY)}resetViews(){return c(this,void 0,void 0,(function*(){this.isBookLoaded=!1,this.loaderObserver.disconnect(),this.currentViewObserver.disconnect();for(const e of this.views)yield e.destroy();this.layoutController.reset(),this.views=[],this.viewMap.clear(),this.expiredViews.clear(),this.bottomView=this.topView=void 0,this.bottomIndex=this.topIndex=0,this.bottomIsFull=this.topIsFull=!1,this.loaderObserver.observe(this.topSentinel),this.loaderObserver.observe(this.bottomSentinel),this.outOfBoundsObserver.observe(this.topSentinel),this.outOfBoundsObserver.observe(this.bottomSentinel)}))}showView(e,t){return c(this,void 0,void 0,(function*(){const n=e.getRoot();if(!this.options.container.contains(n))switch(t){case"Absolute":case"NextPage":this.layoutController.insertBottom(e);break;case"PreviousPage":this.layoutController.insertTop(e)}this.viewMap.set(n,e),this.loaderObserver.observe(n),this.currentViewObserver.observe(n),this.options.eventEmitter.emit("onViewsAdded",{views:[e]})}))}notifyPageChange(e){var t;super.notifyPageChange(e),null===(t=this.options.metricsService)||void 0===t||t.recordCountMetrics("PageChange:Scroll",1)}move(e){return c(this,void 0,void 0,(function*(){throw"Continuous scrolling doesn't support the move operation"}))}destroy(){return c(this,void 0,void 0,(function*(){this.isBookLoaded=!1,this.layoutController.destroy(),this.loaderObserver.disconnect(),this.outOfBoundsObserver.disconnect(),this.currentViewObserver.disconnect()}))}}},9718:(e,t,n)=>{"use strict";n.d(t,{CP:()=>u,hy:()=>s,oX:()=>c});var r=n(4945),i=n(4650),o=n(9250),a=n(6854);class s{constructor(e){this.SPINNER_PAGE_HEIGHT=260,this.LAYOUT_SHIFT_EVENT_DELAY=100,this.RUNWAY_DELTA=1e4,this.views=[],this.contentScroll=0,this.maxScroll=0,this.setSpinnerHeight=()=>this.runway.style.height=this.views.length?"unset":"100%",this.notifyLayoutShiftStart=()=>this.eventEmitter.emit("onLayoutShift",{shiftingLayout:!0}),this.notifyLayoutShiftEnd=i.d.debouncer((()=>this.eventEmitter.emit("onLayoutShift",{shiftingLayout:!1})),this.LAYOUT_SHIFT_EVENT_DELAY,!1),this.eventEmitter=e.eventEmitter,this.container=e.container,this.navigationMetrics=new o.p(e.metricsService),e.fullPage?(document.body.classList.add("kg-scrollable","kg-hide-scrollbar"),this.scrollableElem=document.documentElement):(this.container.classList.add("kg-scrollable","kg-hide-scrollbar"),this.scrollableElem=this.container),this.topSentinel=new r.hs(e.topSentinel,0),this.bottomSentinel=new r.MV(e.bottomSentinel,0),this.fullPage=e.fullPage,this.setupContainer()}setupContainer(){this.container.classList.add("kg-scroll-container"),this.runway=document.createElement("div"),this.runway.classList.add("kg-scroll-runway"),this.setSpinnerHeight(),this.topSpinner=new r.hs(this.createSpinnerElement(),0),this.topSpinner.setVisible(!1),this.bottomSpinner=new r.MV(this.createSpinnerElement(),0),this.runway.append(this.topSentinel.getRoot()),this.runway.append(this.bottomSentinel.getRoot()),this.runway.append(this.topSpinner.getRoot()),this.runway.append(this.bottomSpinner.getRoot()),this.container.append(this.runway),this.spinnerObserver=new IntersectionObserver((e=>this.navigationMetrics.emitSpinnerMetrics(e,this.views,this.topSpinner.getRoot(),this.bottomSpinner.getRoot())),{root:this.fullPage?void 0:this.container,threshold:0}),this.spinnerObserver.observe(this.topSpinner.getRoot()),this.spinnerObserver.observe(this.bottomSpinner.getRoot()),window.requestAnimationFrame((e=>this.layoutMonitor(e))),window.requestAnimationFrame((e=>this.navigationMetrics.measureFrameRate(e,this.runway)))}createSpinnerElement(){const e=document.createElement("div"),t=document.createElement("div");return e.classList.add("kg-spinner"),e.append(t),e}isConnected(){return this.runway.isConnected}layoutMonitor(e){this.isConnected()&&(this.scrollLayoutIfNecessary(),window.requestAnimationFrame((e=>this.layoutMonitor(e))))}scrollLayoutIfNecessary(){var e;this.setSpinnerHeight();let t=this.maxScroll-this.contentScroll;if(this.topSpinner.isVisible()&&(t+=this.SPINNER_PAGE_HEIGHT),(null===(e=(0,a.f)())||void 0===e?void 0:e.isIOSFullscreenEnabled)?t>0:0!=t){const e=this.fullPage?window.innerHeight:this.scrollableElem.clientHeight,n=Math.max(0,this.scrollableElem.scrollHeight-this.scrollableElem.scrollTop-e);return t>n&&(t=n),this.notifyLayoutShiftStart(),this.scrollableElem.scrollBy(0,t),this.scrollLayoutByDelta(t),this.notifyLayoutShiftEnd(),!0}return!1}scrollLayoutByDelta(e){this.contentScroll+=e,this.contentScroll>0&&this.moveRunwayToNegativeValueAndAdjustViews(),this.runway.style.transform="translateY("+this.contentScroll+"px)"}moveRunwayToNegativeValueAndAdjustViews(){this.views.forEach((e=>e.offsetByDelta(this.RUNWAY_DELTA))),this.bottomSpinner.offsetByDelta(this.RUNWAY_DELTA),this.bottomSentinel.offsetByDelta(this.RUNWAY_DELTA),this.topSpinner.offsetByDelta(this.RUNWAY_DELTA),this.topSentinel.offsetByDelta(this.RUNWAY_DELTA),this.contentScroll-=this.RUNWAY_DELTA,this.maxScroll-=this.RUNWAY_DELTA}insertTop(e){this.setSpinnerHeight();const t=e.getRoot(),n=this.topSentinel.getOffset(),i=new r.hs(t,n);this.views.unshift(i),this.runway.prepend(t);const o=e.getRenderedPage().page.height;this.topSentinel.offsetByDelta(-o),this.topSpinner.offsetByDelta(-o),this.topSpinner.setVisible(!e.isFirst()),this.maxScroll+=o}isScrollPositionPastTopContent(){const e=this.topSpinner.isVisible()?this.SPINNER_PAGE_HEIGHT:0;return this.scrollableElem.scrollTop<this.topSpinner.getOffset()+this.contentScroll-e}resetScrollPositionToTopContent(){const e=this.topSpinner.isVisible()?this.SPINNER_PAGE_HEIGHT:0,t=this.topSpinner.getOffset()+this.contentScroll-e-this.scrollableElem.scrollTop;this.scrollableElem.scrollBy(0,t)}insertBottom(e){this.setSpinnerHeight();const t=e.getRoot(),n=this.bottomSentinel.getOffset(),i=new r.MV(t,n);this.views.push(i),this.runway.append(t);const o=e.getRenderedPage().page.height;this.bottomSentinel.offsetByDelta(o),this.bottomSpinner.offsetByDelta(o),this.bottomSpinner.setVisible(!e.isLast()),1===this.views.length&&this.topSpinner.setVisible(!e.isFirst())}removeView(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const t=this.views[0],n=this.views[this.views.length-1],r=e.getRoot(),i=e.getRenderedPage().page.height;if(this.setSpinnerHeight(),r===n.getRoot())this.views.pop(),this.bottomSentinel.offsetByDelta(-i),this.bottomSpinner.offsetByDelta(-i),this.bottomSpinner.setVisible(e.isLast());else{if(r!==t.getRoot())throw"Layout controller only supports removing views from top or bottom";this.views.shift(),this.topSentinel.offsetByDelta(i),this.topSpinner.offsetByDelta(i),this.topSpinner.setVisible(e.isFirst()),this.maxScroll-=i}yield e.destroy(),this.navigationMetrics.emitFrameRateMetrics()}))}reset(){this.views=[],this.topSentinel.setOffset(0),this.topSpinner.setOffset(0),this.topSpinner.setVisible(!1),this.bottomSentinel.setOffset(0),this.bottomSpinner.setOffset(0),this.bottomSpinner.setVisible(!0),this.contentScroll=0,this.maxScroll=0,this.scrollLayoutByDelta(0),this.setSpinnerHeight()}destroy(){this.runway.remove(),this.spinnerObserver.disconnect(),this.container.classList.remove("kg-scroll-container"),this.fullPage?document.body.classList.remove("kg-scrollable","kg-hide-scrollbar"):this.container.classList.remove("kg-scrollable","kg-hide-scrollbar")}}class c extends s{constructor(){super(...arguments),this.LAYOUT_MONITOR_DELAY_MS=100,this.LAYOUT_MONITOR_DELAY_FRAMES=5,this.prevScrollTop=0,this.scrollStoppedCounter=0,this.userIsInteracting=!1,this.scrollDisabled=!1,this.prevTime=void 0}setupContainer(){super.setupContainer(),window.addEventListener("touchstart",(()=>this.userIsInteracting=!0)),window.addEventListener("touchend",(()=>this.userIsInteracting=!1)),window.addEventListener("touchcancel",(()=>this.userIsInteracting=!1))}layoutMonitor(e){if(this.isConnected()){this.scrollDisabled&&(this.scrollableElem.style.overflow="scroll",this.scrollDisabled=!1);const t=this.scrollableElem.scrollTop;if(this.isScrollPositionPastTopContent())this.resetScrollPositionToTopContent(),this.scrollableElem.style.overflow="hidden",this.scrollDisabled=!0;else if(t<0)this.scrollableElem.style.overflow="hidden",this.scrollDisabled=!0;else if(this.userIsInteracting)this.prevTime=void 0,this.scrollStoppedCounter=0;else{const n=t-this.prevScrollTop;this.prevScrollTop=t,0===n?(this.scrollStoppedCounter++,this.prevTime?e-this.prevTime>this.LAYOUT_MONITOR_DELAY_MS&&this.scrollStoppedCounter>this.LAYOUT_MONITOR_DELAY_FRAMES&&this.scrollLayoutIfNecessary()&&(this.scrollableElem.style.overflow="hidden",this.scrollDisabled=!0,this.prevTime=void 0,this.scrollStoppedCounter=0):this.prevTime=e):(this.prevTime=void 0,this.scrollStoppedCounter=0)}window.requestAnimationFrame((e=>this.layoutMonitor(e)))}}}class u extends s{constructor(){super(...arguments),this.LAYOUT_MONITOR_DELAY_MS=100,this.LAYOUT_MONITOR_DELAY_FRAMES=5,this.scrollDisabled=!1,this.prevTime=void 0,this.scrollStoppedCounter=0,this.prevScrollTop=0}layoutMonitor(e){if(this.isConnected()){this.scrollDisabled&&(this.scrollDisabled=!1,this.scrollableElem.style.overflow="scroll");const t=this.scrollableElem.scrollTop,n=t-this.prevScrollTop;this.prevScrollTop=t,this.isScrollPositionPastTopContent()?(this.scrollableElem.style.overflow="hidden",this.resetScrollPositionToTopContent(),this.scrollDisabled=!0):0===n?(this.scrollStoppedCounter++,this.prevTime?e-this.prevTime>this.LAYOUT_MONITOR_DELAY_MS&&this.scrollStoppedCounter>this.LAYOUT_MONITOR_DELAY_FRAMES&&this.scrollLayoutIfNecessary()&&(this.prevTime=void 0,this.scrollStoppedCounter=0):this.prevTime=e):(this.prevTime=void 0,this.scrollStoppedCounter=0),window.requestAnimationFrame((e=>this.layoutMonitor(e)))}}}},4945:(e,t,n)=>{"use strict";n.d(t,{MV:()=>o,hs:()=>i,nH:()=>r});class r{constructor(e,t){this.visible=!0,this.root=e,e.style.position="absolute",this.setOffset(t)}offsetByDelta(e){this.setOffset(this.offset+e)}getRoot(){return this.root}getOffset(){return this.offset}isVisible(){return this.visible}setVisible(e){this.visible=e,this.root.style.display=e?"":"none"}}class i extends r{constructor(e,t){super(e,t)}setOffset(e){this.offset=e,this.root.style.bottom=-e+"px"}}class o extends r{constructor(e,t){super(e,t)}setOffset(e){this.offset=e,this.root.style.top=e+"px"}}},7728:(e,t,n)=>{"use strict";n.d(t,{o:()=>r});class r{constructor({startScale:e,minScale:t,maxScale:n,doubleClickScale:i,animationDuration:o},a){this.setTransform=(e,t,n)=>{this.currentZoomState.translateX=e,this.currentZoomState.translateY=t,this.currentZoomState.scale=n,this.element.style.transform=`translate(${e}px,${t}px) scale(${n})`},this.element=a,this.element.style.transformOrigin=r.TRANSFORM_ORIGIN,this.updateOriginalPosition(),this.startScale=null!=e?e:r.SCALE_OF_ONE,this.animationDuration=null!=o?o:r.DEFAULT_ANIMATION_DURATION,this.minScale=null!=t?t:r.SCALE_OF_ONE,this.maxScale=n,this.doubleClickScale=i,this.isZoomed=!1,this.currentZoomState={translateX:0,translateY:0,scale:r.SCALE_OF_ONE},this.startScale!==this.minScale&&this.enterInitialZoom()}updateOriginalPosition(){const e=this.element.getBoundingClientRect();this.originalElementWidth=e.width,this.originalElementHeight=e.height,this.originalElementLeftOff=e.left,this.originalElementTopOff=e.top}zoomAtPoint(e,t,n){this.isZoomed||this.updateOriginalPosition();const r=document.documentElement,i=this.currentZoomState.scale,o=this.restrictScale(this.currentZoomState.scale*n);this.isZoomed=o!==this.minScale;const a=r.scrollLeft,s=r.scrollTop,c=e-this.originalElementLeftOff+a,u=t-this.originalElementTopOff+s,l=(c-this.currentZoomState.translateX)/i,d=(u-this.currentZoomState.translateY)/i,h=l+(c-l)-l*o,f=d+(u-d)-d*o,p=this.restrictPosition(h,f,o),g=p.x,m=p.y;this.setTransform(g,m,o)}doubleClickZoom(e,t){this.enableAnimation(),this.zoomAtPoint(e,t,this.doubleClickScale),setTimeout((()=>this.disableAnimation()),this.animationDuration+50)}pan(e,t){const n=this.currentZoomState.translateX,r=this.currentZoomState.translateY,i=this.restrictPosition(n+e,r+t,this.currentZoomState.scale);return this.setTransform(i.x,i.y,this.currentZoomState.scale),{x:i.x-n,y:i.y-r}}resetZoom(){this.isZoomed&&(this.enableAnimation(),this.setTransform(0,0,1),this.isZoomed=!1,setTimeout((()=>this.disableAnimation()),this.animationDuration))}inZoomedState(){return this.isZoomed}getCurrentZoomState(){return this.currentZoomState}restrictScale(e){return e>=this.maxScale?this.maxScale:e<=this.minScale?this.minScale:e}enterInitialZoom(){this.enableAnimation();const e=this.originalElementWidth/2+this.originalElementLeftOff,t=this.originalElementHeight/2+this.originalElementTopOff;this.zoomAtPoint(e,t,this.startScale),setTimeout((()=>this.disableAnimation()),this.animationDuration+50)}restrictPosition(e,t,n){const r=this.originalElementWidth*n,i=this.originalElementHeight*n,o=this.originalElementWidth,a=this.originalElementHeight,s=Math.max(0,(o-r)/2),c=o-s,u=Math.max(0,(a-i)/2),l=a-u;let d,h;return d=s<e?s:e+r<c?c-r:e,h=u<t?u:t+i<l?l-i:t,{x:d,y:h}}enableAnimation(){this.element.style.transitionDuration=`${this.animationDuration}ms`}disableAnimation(){this.element.style.transitionDuration=""}}r.SCALE_OF_ONE=1,r.DEFAULT_ANIMATION_DURATION=200,r.TRANSFORM_ORIGIN="0 0 0"},3942:(e,t,n)=>{"use strict";n.d(t,{h:()=>u});var r=n(2226),i=n(9779),o=n(9040),a=n(6042),s=n(27),c=n(7728);class u extends r.C{constructor(e){var t,n,r,i,o,a,s;super(e),this.animationDuration=null!=(null===(t=e.zoomViewOptions)||void 0===t?void 0:t.animationDuration)?e.zoomViewOptions.animationDuration:c.o.DEFAULT_ANIMATION_DURATION,this.initialZoomRatio=null!==(r=null===(n=e.zoomViewOptions)||void 0===n?void 0:n.initialZoomRatio)&&void 0!==r?r:c.o.SCALE_OF_ONE,this.maxZoomRatio=null!==(o=null===(i=e.zoomViewOptions)||void 0===i?void 0:i.maxZoomRatio)&&void 0!==o?o:2*this.initialZoomRatio,this.doubleClickZoomRatio=null!==(s=null===(a=e.zoomViewOptions)||void 0===a?void 0:a.doubleClickZoomRatio)&&void 0!==s?s:2*this.initialZoomRatio}fill(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){(0,i.assert)(this.empty,"A view can only be filled once");const t=yield e;this.renderedPage=t;const n=new o.d;this.layers=[n,...this.options.layerFactories.flatMap((e=>e.get()))];const r=new a.Y({height:this.options.bookRenderOptions.pageHeight,width:this.options.bookRenderOptions.pageWidth,layers:this.layers}),c=yield r.compose(t);return this.root.replaceWith(c),this.root=c,this.root.className+=` ${s.g.VIEW_ELEMENT_CLASS} `,this.root.style.position="absolute",this.empty=!1,this.exitZoom(),t}))}doubleTapZoom(e,t){var n;null===(n=this.zoomHandler)||void 0===n||n.doubleClickZoom(e,t)}pinchZoom(e,t,n){var r;null===(r=this.zoomHandler)||void 0===r||r.zoomAtPoint(e,t,n)}pan(e,t){var n,r;return null!==(r=null===(n=this.zoomHandler)||void 0===n?void 0:n.pan(e,t))&&void 0!==r?r:{x:0,y:0}}initializeZoomHandler(){this.zoomHandler=new c.o({startScale:this.initialZoomRatio,maxScale:this.maxZoomRatio,doubleClickScale:this.doubleClickZoomRatio,animationDuration:this.animationDuration},this.root)}inZoomedState(){return!!this.zoomHandler&&this.zoomHandler.inZoomedState()}exitZoom(){var e;null===(e=this.zoomHandler)||void 0===e||e.resetZoom()}getZoomState(){return this.zoomHandler?this.zoomHandler.getCurrentZoomState():{translateX:0,translateY:0,scale:1}}}},5162:(e,t,n)=>{"use strict";n.d(t,{B:()=>c});var r=n(9779),i=n(4910),o=n(2941),a=n(9343),s=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class c{constructor(e,t,n){this.asin=e,this.revision=t,this.options=n,this.cache=new Map,this.cacheIndex=0,this.navRef={startPositionId:1},this.pendingRenderDeferred=new i.B,this.renderingProcessId=Symbol(),this.pendingRenderDeferred.resolve()}goToPageIndex(e){return s(this,void 0,void 0,(function*(){return this.clearCache(),this.navRef={startPositionId:e},this.getPageByRelativeIndex(0,r.Direction.Absolute)}))}getRenderSettings(){return this.options.clientRenderOptionsFactory.get().bookRenderOptions}goToPositionId(e){return s(this,void 0,void 0,(function*(){return this.clearCache(),this.navRef={startPositionId:e},this.getPageByRelativeIndex(0,r.Direction.Absolute)}))}removeExpiredEntries(){const e=this.cacheIndex-12,t=this.cacheIndex+12;this.cache.forEach(((n,r)=>{(r<e||r>t)&&this.cache.delete(r)}))}renderPages(e,t,n,i){const a=new Array;let u=Promise.resolve(void 0);for(let l=0;l<t.length;l++){const d=e+(n===r.Direction.Backward?-l:l),h=this.cache.get(d);if(h)a.push(h);else{const e=t[l],h=n!==r.Direction.Backward&&l==t.length-1&&t.length<i;let f;f=0===l?this.render(e,h):u.then((()=>s(this,void 0,void 0,(function*(){return yield(0,o.N)((()=>this.render(e,h)),c.RENDERING_DELTA)})))),u=f,a.push(f),this.cache.set(d,f)}}return this.removeExpiredEntries(),a[0]}nextPage(){return s(this,void 0,void 0,(function*(){return this.cacheIndex++,this.getPageByRelativeIndex(this.cacheIndex,r.Direction.Forward)}))}previousPage(){return s(this,void 0,void 0,(function*(){return this.cacheIndex--,this.getPageByRelativeIndex(this.cacheIndex,r.Direction.Backward)}))}currentPage(){return s(this,void 0,void 0,(function*(){return this.cache.get(this.cacheIndex)||this.getPageByRelativeIndex(this.cacheIndex,r.Direction.Absolute)}))}getPageByRelativeIndex(e,t){const n=this.renderingProcessId;this.cacheIndex=e;let i=this.cache.get(e);return i?(this.prefetchBatchIfNecessary(e,n),i):this.execAndNotifyListener((()=>s(this,void 0,void 0,(function*(){for(;!this.pendingRenderDeferred.isCompleted;)if(yield this.pendingRenderDeferred.getPromise(),this.renderingProcessId!==n)throw new a.w8;if(i=this.cache.get(e),i)this.prefetchBatchIfNecessary(e,n);else{i=this.renderBatch(e,t,n);const o=t===r.Direction.Backward?r.Direction.Forward:r.Direction.Backward;i.then((()=>{this.prefetchBatchIfNecessary(e,n,o)})).catch((()=>{}))}return i}))))}prefetchBatchIfNecessary(e,t,n){const i=Math.min(...this.cache.keys()),o=Math.max(...this.cache.keys()),a=e-i,s=o-e;let c,u=Math.min(a,s);void 0!==n?(c=n===r.Direction.Absolute?r.Direction.Forward:n,u=n===r.Direction.Backward?a:s):c=u===s?r.Direction.Forward:r.Direction.Backward;const l=c===r.Direction.Backward?i-1:o+1;this.shouldRequestNewBatch(u)&&this.pendingRenderDeferred.isCompleted&&this.renderBatch(l,c,t).then((()=>{this.options.metricsService.recordCountMetrics("CachingRendererController:PrefetchFailed",0),this.renderingProcessId===t&&this.prefetchBatchIfNecessary(e,t)})).catch((()=>{this.options.metricsService.recordCountMetrics("CachingRendererController:PrefetchFailed",1)}))}renderBatch(e,t,n){return this.pendingRenderDeferred=new i.B,new Promise(((i,o)=>{setTimeout((()=>s(this,void 0,void 0,(function*(){try{const s=t===r.Direction.Backward?e+1:e,c=this.createNavigationOptions(this.navRef.startPositionId,s,t,this.options.readAheadPageCount);let u=yield this.options.bookProviderFactory.get(this.asin,this.revision,c,this.getRenderSettings());if(t===r.Direction.Backward&&(u=u.reverse()),this.renderingProcessId===n){const n=this.renderPages(e,u,t,c.pageCount);i(n)}else o(new a.w8)}catch(e){o(e)}finally{this.pendingRenderDeferred.resolve()}}))),0)}))}createNavigationOptions(e,t,n,i){return{direction:n,pageCount:i,skipPageCount:t,startPositionId:e,type:r.NavigationType.Position,bundleImages:this.options.bundleImages&&n===r.Direction.Absolute}}execAndNotifyListener(e){return s(this,void 0,void 0,(function*(){const t=new i.B,n=t.getPromise();n.catch((()=>{})),this.options.eventEmitter.emit("onRenderingBlocking",{renderingPromise:n});try{const n=yield e();return t.resolve(),n}catch(e){throw t.reject(e),e}}))}clearCache(){this.renderingProcessId=Symbol(),this.cacheIndex=0,this.cache.clear()}shouldRequestNewBatch(e){return e<6}render(e,t){return s(this,void 0,void 0,(function*(){const n=yield this.options.pageImageRenderer.render(e),r=yield e.getPage(),i=yield e.getLayoutPage(),o=yield e.getTokens(),a=yield e.getPanels(),s=yield e.getMetadata();return{renderResult:n,page:r,layoutPage:i,tokens:o,panels:a,isFirst:r.startPositionId<=1,isLast:t||0!=s.lastPositionId&&r.endPositionId>=s.lastPositionId}}))}reset(){return s(this,void 0,void 0,(function*(){this.clearCache();const e=this.getRenderSettings();this.options.pageImageRenderer.updateSurfaceOptions(e)}))}getRenderingProcessId(){return this.renderingProcessId}}c.RENDERING_DELTA=300},8427:()=>{},2775:(e,t,n)=>{"use strict";n.d(t,{M:()=>r});const r={default:{highlight:{background:{fill:"rgba(255, 224, 0, 0.321)"}},search:{background:{fill:"rgba(255, 235, 90, 0.2)"},border:{color:"rgb(204, 201, 178)"}},selection:{background:{fill:"rgba(5, 20, 40, 0.2)"}}},night:{highlight:{background:{fill:"rgba(105, 188, 255, 0.4)"}},search:{background:{fill:"rgba(61, 145, 215, 0.3)"},border:{color:"rgb(54, 97, 133)"}},selection:{background:{fill:"rgba(245, 245, 245, 0.4)"}}},sepia:{highlight:{background:{fill:"rgba(255, 247, 170, 0.4)"}},search:{background:{fill:"rgba(257, 246, 179, 0.4)"},border:{color:"rgb(203, 195, 145)"}},selection:{background:{fill:"rgba(0, 15, 36, 0.15)"}}},green:{highlight:{background:{fill:"rgba(255, 224, 0, 0.321)"}},search:{background:{fill:"rgba(255, 235, 90, 0.2)"},border:{color:"rgb(204, 201, 178)"}},selection:{background:{fill:"rgba(5, 20, 40, 0.2)"}}},dark:{highlight:{background:{fill:"rgba(105, 188, 255, 0.4)"}},search:{background:{fill:"rgba(61, 145, 215, 0.3)"},border:{color:"rgb(54, 97, 133)"}},selection:{background:{fill:"rgba(245, 245, 245, 0.4)"}}},grey:{highlight:{background:{fill:"rgba(105, 188, 255, 0.4)"}},search:{background:{fill:"rgba(61, 145, 215, 0.3)"},border:{color:"rgb(54, 97, 133)"}},selection:{background:{fill:"rgba(245, 245, 245, 0.4)"}}}}},2941:(e,t,n)=>{"use strict";n.d(t,{N:()=>r});function r(e,t){return new Promise(((n,r)=>{setTimeout((()=>function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){try{const t=yield e();n(t)}catch(e){r(e)}}))),t)}))}},27:(e,t,n)=>{"use strict";n.d(t,{g:()=>r});class r{}r.VERSION="2.0",r.DEFAULT_MAX_COLUMN="2",r.INTERACTION_LAYER_CLASS="kg-client-interaction-layer",r.ROOT_ELEMENT_CLASS="kg-client-root",r.VIEW_ELEMENT_CLASS="kg-view",r.SELECTION_ELEMENT_CLASS="kg-selection",r.HIGHLIGHT_ELEMENT_CLASS="kg-client-highlight",r.SEARCH_RESULT_ELEMENT_CLASS="kg-client-search-result",r.NOTE_ELEMENT_CLASS="kg-client-note",r.WORD_PIECE_CSS_CLASS="kg-client-piece",r.ANNOTATION_TYPE_NOTE="note",r.ANNOTATION_TYPE_HIGHLIGHT="highlight",r.ANNOTATION_TYPE_SEARCH="search",r.ROOT_THEME_CLASS={custom:"kg-client-theme--custom",default:"kg-client-theme--default",night:"kg-client-theme--night",dark:"kg-client-theme--dark",grey:"kg-client-theme--grey",green:"kg-client-theme--green",sepia:"kg-client-theme--sepia"},r.EXTERNAL_LINK_TARGET_VALUE="_blank",r.HIGHLIGHT_COLOR_CLASS={yellow:"kg-yellow-highlight",blue:"kg-blue-highlight",pink:"kg-pink-highlight",orange:"kg-orange-highlight"},r.DEFAULT_HIGHLIGHT_COLOR="yellow",r.DEFAULT_ANIMATION_DURATION=600},4650:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});var r=n(9779);class i{static debouncer(e,t,n=!0){let i,o;return(0,r.assert)(t>0),(...r)=>function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){return new Promise(((a,s)=>{i&&(n&&(null==o||o("Ignored consecutive call before the end of debounce period")),clearTimeout(i)),o=s,i=setTimeout((()=>{i=void 0,o=void 0,a(e(...r))}),t)}))}))}static throttler(e,t){(0,r.assert)(t>0);let n=!0;return(...r)=>n?(n=!1,setTimeout((()=>n=!0),t),{invoked:!0,result:e(...r)}):{invoked:!1}}}},4910:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});class r{constructor(){this.completed=!1,this.promise=new Promise(((e,t)=>{this.resolveCallback=e,this.rejectCallback=t}))}resolve(e){var t;null===(t=this.resolveCallback)||void 0===t||t.call(this,e),this.completed=!0}reject(e){var t;null===(t=this.rejectCallback)||void 0===t||t.call(this,e),this.completed=!0}getPromise(){return this.promise}get isCompleted(){return this.completed}}},6891:(e,t,n)=>{"use strict";function r(){return/iPad|iPhone|iPod/.test(navigator.platform)||/Mac/.test(navigator.platform)&&navigator.maxTouchPoints>1}n.d(t,{g:()=>r})},4953:(e,t,n)=>{"use strict";n.d(t,{v:()=>r});class r{constructor(){this.handlers={},this.callbackInProgress=!1}on(e,t){let n=this.handlers[e];return n||(n=[],this.handlers[e]=n),this.handlers[e].push(t),t}off(e,t){const n=this.handlers[e];if(!t)return;const r=n.indexOf(t);-1!==r&&this.handlers[e].splice(r,1)}offAll(){this.handlers={}}emit(e,t){const n=this.handlers[e];if(n){this.callbackInProgress=!0;try{for(const e of n)e(t)}finally{this.callbackInProgress=!1}}}get isCallbackInProgress(){return this.callbackInProgress}}},373:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});class r{constructor(e){this.instance=e}get(){return this.instance}set(e){this.instance=e}}},2910:()=>{},8390:(e,t,n)=>{"use strict";n.d(t,{P:()=>r});class r{}r.EXECUTION_TIME="ExecutionTime",r.COUNT="Count",r.ERROR_COUNT="ErrorCount",r.MIN="min",r.MAX="max",r.AVG="avg",r.FRAME_RATE="FrameRate",r.TOP_SPINNER="TopSpinner",r.BOTTOM_SPINNER="BottomSpinner",r.LAYOUT_ERROR="LayoutError"},9205:(e,t,n)=>{"use strict";n.d(t,{C:()=>a,J:()=>i});var r=n(2941);function i(e,t=5,n=new a){return o(0,e,t,n)}function o(e,t,n,i){const a=i.getDelay(e);return(0===e?t():(0,r.N)(t,a)).catch((r=>e<n?o(e+1,t,n,i):Promise.reject(r)))}class a{constructor(e=200,t=1e4){this.baseDelay=e,this.maxDelay=t}getDelay(e){const t=Math.min(this.maxDelay,this.baseDelay*Math.pow(2,e));return t/2+Math.random()*t/2}}},9429:(e,t,n)=>{"use strict";n.d(t,{g:()=>r});class r{static adjustTokenHeights(e,t){const n=[];if(e.length)for(const r of e)n.push(this.getAdjustedToken(r,t));return n}static fillTokensGaps(e){let t=new Array;if(e.length){t.push(Object.assign({},e[0]));for(let n=1;n<e.length;n++){let r=t[t.length-1];if(e[n].y===r.y){const i=this.calculateGapToken(e[n],r);t.push(i)}t.push(e[n])}}return t}static calculateGapToken(e,t){return{x:t.x+t.width,y:t.y,width:Math.abs(e.x-(t.x+t.width)),height:Math.min(e.height,t.height),startPositionId:t.endPositionId+1,endPositionId:e.startPositionId-1}}static calculatePieceToken(e,t){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top,startPositionId:t.startPositionId,endPositionId:t.endPositionId,linkPositionId:t.linkPositionId,externalLink:t.externalLink}}static createVirtualToken(e,t){const n={x:e.x,y:t+e.y,width:e.width,height:e.height};if(e.pieces){const r=new Array;for(const n of e.pieces){const e={left:n.left,top:t+n.top,bottom:t+n.bottom,right:n.right};r.push(e)}n.pieces=r}return n}static isTokenUnderLocation(e,t){let n,r=!1;if(e.pieces)for(const i of e.pieces){const e={x:i.left,y:i.top,width:i.right-i.left,height:i.bottom-i.top};if(n=this.distanceFromToken(e,t),r=0===n.x&&0===n.y,r)return!0}else n=this.distanceFromToken(e,t),r=0===n.x&&0===n.y;return r}static distanceFromToken(e,t){const{x:n,y:r}=t,i=e.x,o=n<i||n>i+e.width?n-i:0,a=e.y;return{x:o,y:r<a||r>a+e.height?r-a:0}}static getTokenLocation(e){if(e.pieces){let t=Number.MAX_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER;for(const r of e.pieces)t=r.left<t?r.left:t,n=r.top<n?r.top:n;return{x:t,y:n}}return{x:e.x,y:e.y}}static createTokenRectFromTokenPiece(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}static createRectFromToken(e){return{top:e.y,left:e.x,bottom:e.y+e.height,right:e.x+e.width}}static getRelativeTokenPosition(e,t){if(!t)return e;const n=Object.assign(Object.assign({},e),{x:e.x+t.x,y:e.y+t.y,pieces:e.pieces&&[...e.pieces]});if(n.pieces)for(let e=0;e<n.pieces.length;e++)n.pieces[e]={top:n.pieces[e].top+t.y,bottom:n.pieces[e].bottom+t.y,left:n.pieces[e].left+t.x,right:n.pieces[e].right+t.x};return n}static getAdjustedToken(e,t){const n="OpenDyslexic"===t?.716*e.height:e.height,r=e.height-n;return Object.assign(Object.assign({},e),{height:n,y:e.y+r/2})}}},3946:(e,t,n)=>{"use strict";function r(e,t){return`${e}?${new URLSearchParams(t).toString()}`}n.d(t,{J:()=>r})},560:(e,t,n)=>{"use strict";n.d(t,{S:()=>r});class r{static isInRect(e,t){return e.left<=t.x&&t.x<=e.right&&e.top<=t.y&&t.y<=e.bottom}}},6854:(e,t,n)=>{"use strict";function r(){return n.g.kfwClientFeatures}n.d(t,{f:()=>r})},5941:(e,t,n)=>{"use strict";n.d(t,{L:()=>a}),function(e,t){const n=o,r=e();for(;;)try{if(401857==parseInt(n(273))/1+parseInt(n(271))/2+-parseInt(n(267))/3+parseInt(n(278))/4+parseInt(n(269))/5+-parseInt(n(274))/6*(-parseInt(n(275))/7)+-parseInt(n(279))/8)break;r.push(r.shift())}catch(e){r.push(r.shift())}}(i);class r extends Error{constructor(){super(o(268))}}function i(){const e=["expiresAt","381048lTAhiI","length","374122yUmKTT","1935078eixJPe","7zdeBYe","token","substring","26644kpVWsT","3657744oGzMMB","397611JuqQys","Invalid rendering token","488960WhhnAQ"];return(i=function(){return e})()}function o(e,t){const n=i();return(o=function(e,t){return n[e-=267]})(e,t)}class a{getKey(e){const t=o;if(e[t(276)][t(272)]<100)throw new r;const n=e[t(270)]%60;return e[t(276)][t(277)](n,n+40)}}},8298:(e,t,n)=>{"use strict";function r(){const e=["charCodeAt","buffer","deriveKey","26VFsILq","806380dNGMyl","489664ujfJmV","90IvHafU","crypto","base64StringToArrayBuffer","length","next","PBKDF2","encode","162632bxfiLQ","__awaiter","78495DdcKXB","subtle","utf-8","done","decrypt","decode","slice","3298870YcwSUX","value","then","raw","SHA-256","imageCipherKeyProvider","getKey","99dUbxDA","152594kmbisl","62841AcUYJp","deriveBits","AES-GCM"];return(r=function(){return e})()}n.d(t,{N:()=>a});const i=o;!function(e,t){const n=o,r=e();for(;;)try{if(141143==parseInt(n(359))/1+parseInt(n(366))/2*(-parseInt(n(360))/3)+parseInt(n(367))/4+-parseInt(n(344))/5*(-parseInt(n(369))/6)+-parseInt(n(368))/7+parseInt(n(342))/8*(parseInt(n(358))/9)+-parseInt(n(351))/10)break;r.push(r.shift())}catch(e){r.push(r.shift())}}(r);function o(e,t){const n=r();return(o=function(e,t){return n[e-=338]})(e,t)}class a{constructor(e){this.imageCipherKeyProvider=e}decrypt(e,t){return n=this,r=void 0,a=function*(){const n=o,r=new TextDecoder(n(346)),i=new TextEncoder,a=r[n(349)](e),s=a[n(350)](0,24),c=a[n(350)](24,48),u=a.slice(48,a[n(338)]),l=this[n(371)](s),d=this.base64StringToArrayBuffer(c),h=this[n(371)](u),f=this[n(356)][n(357)](t),p=yield window.crypto[n(345)].importKey(n(354),i[n(341)](f),{name:n(340)},!1,[n(361),n(365)]),g=yield window[n(370)][n(345)].deriveKey({name:n(340),salt:l,iterations:1e3,hash:n(355)},p,{name:n(362),length:128},!1,[n(348)]);return yield window.crypto[n(345)].decrypt({name:n(362),iv:d,additionalData:i[n(341)](f[n(350)](0,9)),tagLength:128},g,h)},new((i=void 0)||(i=Promise))((function(e,t){const s=o;function c(e){try{l(a.next(e))}catch(e){t(e)}}function u(e){try{l(a.throw(e))}catch(e){t(e)}}function l(t){const n=o;var r;t[n(347)]?e(t[n(352)]):(r=t[n(352)],r instanceof i?r:new i((function(e){e(r)})))[n(353)](c,u)}l((a=a.apply(n,r||[]))[s(339)]())}));var n,r,i,a}[i(371)](e){const t=i,n=atob(e),r=new Uint8Array(n[t(338)]);for(let e=0;e<n[t(338)];e++)r[e]=n[t(363)](e);return r[t(364)]}}},9779:t=>{"use strict";t.exports=e},2683:e=>{"use strict";e.exports=t},6270:e=>{"use strict";e.exports=n}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return r[e](n,n.exports,o),n.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return(()=>{"use strict";o.r(a),o.d(a,{BaseNavigationService:()=>z.I,BookMetadataProvider:()=>u._,BottomElement:()=>re.MV,BusyException:()=>c.Tg,CachingRendererController:()=>ie.B,CdnDataLoader:()=>f.d,CompositeContentDecorationRenderer:()=>T.G,Constants:()=>ce.g,ContentView:()=>V.C,DECORATIONS_CLASS_NAME:()=>I.tj,DEFAULT_RENDER_BATCH_SIZE:()=>e.T,Debouncer:()=>ue.d,DefaultContentView:()=>G.w,DefaultDecorationProvider:()=>S.i,DefaultInteractionController:()=>k.q,DefaultKaramelClient:()=>t.y,DefaultKaramelClientFactory:()=>e.J,DefaultSelectionRenderer:()=>A.G,Deferred:()=>le.B,DelayedLayoutController:()=>ne.CP,EventEmitter:()=>he.v,ExponentialBackoffWithJitter:()=>me.C,GestureType:()=>B.d,GestureUtils:()=>B.z,GuidedContentView:()=>W.k,GuidedViewController:()=>R.C,GuidedViewService:()=>q.q,HIGHLIGHT_DECORATIONS_Z_INDEX:()=>I.I6,HighlightDecorationRenderer:()=>_.y,INTERACTIVE_LAYER_Z_INDEX:()=>I.gy,ImageCache:()=>p.y,ImageCipherKeyProvider:()=>d.L,ImageDecipher:()=>h.N,InstanceFactory:()=>fe.b,InteractionController:()=>k.y,InteractionControllerFactory:()=>O.y,InteractivityLayer:()=>I._V,KaramelContentLayer:()=>U.d,KaramelServiceBookMetadataProvider:()=>l.i,LINKS_Z_INDEX:()=>I.uJ,LayoutController:()=>ne.hy,LayoutElement:()=>re.nH,MetricsConstants:()=>ge.P,MouseGestureHandler:()=>D.s,NOTE_DECORATIONS_Z_INDEX:()=>I.c8,NavigationMetrics:()=>Y.p,NavigationServiceFactory:()=>X.p,NoteDecorationRenderer:()=>P.j,PaginationService:()=>Z.N,PanningPaginationService:()=>$.s,RenderSettingsChangedException:()=>c.w8,ScrollLock:()=>J.t,ScrollService:()=>Q.a,SearchResultDecorationRenderer:()=>C.v,Selection:()=>L.Y,SelectionController:()=>x.x,SelectionElement:()=>A.I,ServiceBookProviderAdapter:()=>m.m,ServiceBookProviderFactory:()=>v.n,ServiceDataLoader:()=>y.h,StackCompositor:()=>j.Y,THEMES_DATA:()=>ae.M,TarDataLoader:()=>b.t,TarReader:()=>w.J,ThrottlingException:()=>c.yy,TokensUtils:()=>ve.g,TopElement:()=>re.hs,TouchGestureHandler:()=>F.Q,Vector2dUtils:()=>be.S,ViewNoLongerValidException:()=>c.Lf,ViewsTracker:()=>M.B,ZoomHandler:()=>ee.o,ZoomableContentView:()=>te.h,ZoomableViewController:()=>N.Q,buildPathAndQuery:()=>ye.J,execAsync:()=>se.N,getKFWClientFeatures:()=>we.f,iOSLayoutController:()=>ne.oX,isIOS:()=>de.g,withRetry:()=>me.J});var e=o(3501),t=o(9611),n=o(3253),r={};for(const e in n)["default","DEFAULT_RENDER_BATCH_SIZE","DefaultKaramelClientFactory","DefaultKaramelClient"].indexOf(e)<0&&(r[e]=()=>n[e]);o.d(a,r);var i=o(9434);r={};for(const e in i)["default","DEFAULT_RENDER_BATCH_SIZE","DefaultKaramelClientFactory","DefaultKaramelClient"].indexOf(e)<0&&(r[e]=()=>i[e]);o.d(a,r);var s=o(1598);r={};for(const e in s)["default","DEFAULT_RENDER_BATCH_SIZE","DefaultKaramelClientFactory","DefaultKaramelClient"].indexOf(e)<0&&(r[e]=()=>s[e]);o.d(a,r);var c=o(9343),u=o(5889),l=o(4289),d=o(5941),h=o(8298),f=o(2817),p=o(7253),g=o(5078);r={};for(const e in g)["default","DEFAULT_RENDER_BATCH_SIZE","DefaultKaramelClientFactory","DefaultKaramelClient","BusyException","RenderSettingsChangedException","ThrottlingException","ViewNoLongerValidException","BookMetadataProvider","KaramelServiceBookMetadataProvider","ImageCipherKeyProvider","ImageDecipher","CdnDataLoader","ImageCache"].indexOf(e)<0&&(r[e]=()=>g[e]);o.d(a,r);var m=o(5922),v=o(180),y=o(5502),b=o(6565),w=o(7976),E=o(7754);r={};for(const e in E)["default","DEFAULT_RENDER_BATCH_SIZE","DefaultKaramelClientFactory","DefaultKaramelClient","BusyException","RenderSettingsChangedException","ThrottlingException","ViewNoLongerValidException","BookMetadataProvider","KaramelServiceBookMetadataProvider","ImageCipherKeyProvider","ImageDecipher","CdnDataLoader","ImageCache","ServiceBookProviderAdapter","ServiceBookProviderFactory","ServiceDataLoader","TarDataLoader","TarReader"].indexOf(e)<0&&(r[e]=()=>E[e]);o.d(a,r);var S=o(7614),T=o(8334),_=o(9108),P=o(7801),C=o(1900),R=o(2168),O=o(9665),k=o(5745),I=o(3969),x=o(9367),A=o(6942),L=o(756),M=o(2797),N=o(6786),D=o(8972),F=o(2307),B=o(9148),U=o(9040),j=o(6042),H=o(1822);r={};for(const e in H)["default","DEFAULT_RENDER_BATCH_SIZE","DefaultKaramelClientFactory","DefaultKaramelClient","BusyException","RenderSettingsChangedException","ThrottlingException","ViewNoLongerValidException","BookMetadataProvider","KaramelServiceBookMetadataProvider","ImageCipherKeyProvider","ImageDecipher","CdnDataLoader","ImageCache","ServiceBookProviderAdapter","ServiceBookProviderFactory","ServiceDataLoader","TarDataLoader","TarReader","DefaultDecorationProvider","CompositeContentDecorationRenderer","HighlightDecorationRenderer","NoteDecorationRenderer","SearchResultDecorationRenderer","GuidedViewController","InteractionControllerFactory","DefaultInteractionController","InteractionController","DECORATIONS_CLASS_NAME","HIGHLIGHT_DECORATIONS_Z_INDEX","INTERACTIVE_LAYER_Z_INDEX","InteractivityLayer","LINKS_Z_INDEX","NOTE_DECORATIONS_Z_INDEX","SelectionController","DefaultSelectionRenderer","SelectionElement","Selection","ViewsTracker","ZoomableViewController","MouseGestureHandler","TouchGestureHandler","GestureType","GestureUtils","KaramelContentLayer","StackCompositor"].indexOf(e)<0&&(r[e]=()=>H[e]);o.d(a,r);var z=o(8724),V=o(2226),G=o(9083),W=o(4229),q=o(4155),K=o(8707);r={};for(const e in K)["default","DEFAULT_RENDER_BATCH_SIZE","DefaultKaramelClientFactory","DefaultKaramelClient","BusyException","RenderSettingsChangedException","ThrottlingException","ViewNoLongerValidException","BookMetadataProvider","KaramelServiceBookMetadataProvider","ImageCipherKeyProvider","ImageDecipher","CdnDataLoader","ImageCache","ServiceBookProviderAdapter","ServiceBookProviderFactory","ServiceDataLoader","TarDataLoader","TarReader","DefaultDecorationProvider","CompositeContentDecorationRenderer","HighlightDecorationRenderer","NoteDecorationRenderer","SearchResultDecorationRenderer","GuidedViewController","InteractionControllerFactory","DefaultInteractionController","InteractionController","DECORATIONS_CLASS_NAME","HIGHLIGHT_DECORATIONS_Z_INDEX","INTERACTIVE_LAYER_Z_INDEX","InteractivityLayer","LINKS_Z_INDEX","NOTE_DECORATIONS_Z_INDEX","SelectionController","DefaultSelectionRenderer","SelectionElement","Selection","ViewsTracker","ZoomableViewController","MouseGestureHandler","TouchGestureHandler","GestureType","GestureUtils","KaramelContentLayer","StackCompositor","BaseNavigationService","ContentView","DefaultContentView","GuidedContentView","GuidedViewService"].indexOf(e)<0&&(r[e]=()=>K[e]);o.d(a,r);var Y=o(9250),X=o(5988),Z=o(6835),$=o(6583),J=o(9114),Q=o(5526),ee=o(7728),te=o(3942),ne=o(9718),re=o(4945),ie=o(5162),oe=o(8427);r={};for(const e in oe)["default","DEFAULT_RENDER_BATCH_SIZE","DefaultKaramelClientFactory","DefaultKaramelClient","BusyException","RenderSettingsChangedException","ThrottlingException","ViewNoLongerValidException","BookMetadataProvider","KaramelServiceBookMetadataProvider","ImageCipherKeyProvider","ImageDecipher","CdnDataLoader","ImageCache","ServiceBookProviderAdapter","ServiceBookProviderFactory","ServiceDataLoader","TarDataLoader","TarReader","DefaultDecorationProvider","CompositeContentDecorationRenderer","HighlightDecorationRenderer","NoteDecorationRenderer","SearchResultDecorationRenderer","GuidedViewController","InteractionControllerFactory","DefaultInteractionController","InteractionController","DECORATIONS_CLASS_NAME","HIGHLIGHT_DECORATIONS_Z_INDEX","INTERACTIVE_LAYER_Z_INDEX","InteractivityLayer","LINKS_Z_INDEX","NOTE_DECORATIONS_Z_INDEX","SelectionController","DefaultSelectionRenderer","SelectionElement","Selection","ViewsTracker","ZoomableViewController","MouseGestureHandler","TouchGestureHandler","GestureType","GestureUtils","KaramelContentLayer","StackCompositor","BaseNavigationService","ContentView","DefaultContentView","GuidedContentView","GuidedViewService","NavigationMetrics","NavigationServiceFactory","PaginationService","PanningPaginationService","ScrollLock","ScrollService","ZoomHandler","ZoomableContentView","DelayedLayoutController","LayoutController","iOSLayoutController","BottomElement","LayoutElement","TopElement","CachingRendererController"].indexOf(e)<0&&(r[e]=()=>oe[e]);o.d(a,r);var ae=o(2775),se=o(2941),ce=o(27),ue=o(4650),le=o(4910),de=o(6891),he=o(4953),fe=o(373),pe=o(2910);r={};for(const e in pe)["default","DEFAULT_RENDER_BATCH_SIZE","DefaultKaramelClientFactory","DefaultKaramelClient","BusyException","RenderSettingsChangedException","ThrottlingException","ViewNoLongerValidException","BookMetadataProvider","KaramelServiceBookMetadataProvider","ImageCipherKeyProvider","ImageDecipher","CdnDataLoader","ImageCache","ServiceBookProviderAdapter","ServiceBookProviderFactory","ServiceDataLoader","TarDataLoader","TarReader","DefaultDecorationProvider","CompositeContentDecorationRenderer","HighlightDecorationRenderer","NoteDecorationRenderer","SearchResultDecorationRenderer","GuidedViewController","InteractionControllerFactory","DefaultInteractionController","InteractionController","DECORATIONS_CLASS_NAME","HIGHLIGHT_DECORATIONS_Z_INDEX","INTERACTIVE_LAYER_Z_INDEX","InteractivityLayer","LINKS_Z_INDEX","NOTE_DECORATIONS_Z_INDEX","SelectionController","DefaultSelectionRenderer","SelectionElement","Selection","ViewsTracker","ZoomableViewController","MouseGestureHandler","TouchGestureHandler","GestureType","GestureUtils","KaramelContentLayer","StackCompositor","BaseNavigationService","ContentView","DefaultContentView","GuidedContentView","GuidedViewService","NavigationMetrics","NavigationServiceFactory","PaginationService","PanningPaginationService","ScrollLock","ScrollService","ZoomHandler","ZoomableContentView","DelayedLayoutController","LayoutController","iOSLayoutController","BottomElement","LayoutElement","TopElement","CachingRendererController","THEMES_DATA","execAsync","Constants","Debouncer","Deferred","isIOS","EventEmitter","InstanceFactory"].indexOf(e)<0&&(r[e]=()=>pe[e]);o.d(a,r);var ge=o(8390),me=o(9205),ve=o(9429),ye=o(3946),be=o(560),we=o(6854)})(),a})(),e.exports=r(n(38462),n(15616),n(73799))},38462:function(module){var e;"undefined"!=typeof self&&self,e=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=47)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1);class i{constructor(e,t,n,r){this.top=e,this.bottom=t,this.left=n,this.right=r}static applyTransformationToBoundingBoxPoints(e,t){const n=e[r.b.HorizontalScaling],o=e[r.b.VerticalScaling],a=e[r.b.HorizontalTranslation],s=e[r.b.VerticalTranslation],c=t.top*o+s,u=t.bottom*o+s,l=t.left*n+a,d=t.right*n+a;return new i(c,u,l,d)}static getBoudningBoxByPath(e){let t=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;const a=e.split(" ");for(let e=0;e<a.length;e++)if(""!=a[e]){const i=this.isLetter(a[e][0])?a[e].substr(1).split(","):a[e].split(",");if(i.length>=2)for(let e=0;e<i.length;e++)e%2==0?(t=Math.min(parseFloat(i[e]),t),r=Math.max(parseFloat(i[e]),r)):(n=Math.min(parseFloat(i[e]),n),o=Math.max(parseFloat(i[e]),o))}return new i(n,o,t,r)}compute(e){return 0===this.top&&0===this.bottom&&0===this.left&&0==this.right?e:0===e.top&&0===e.bottom&&0===e.left&&0==e.right?this:new i(Math.min(this.top,e.top),Math.max(this.bottom,e.bottom),Math.min(this.left,e.left),Math.max(this.right,e.right))}static isLetter(e){return e.toLowerCase()!=e.toUpperCase()}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r,i=n(3),o=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};!function(e){e[e.HorizontalScaling=0]="HorizontalScaling",e[e.VerticalSkewing=1]="VerticalSkewing",e[e.HorizontalSkewing=2]="HorizontalSkewing",e[e.VerticalScaling=3]="VerticalScaling",e[e.HorizontalTranslation=4]="HorizontalTranslation",e[e.VerticalTranslation=5]="VerticalTranslation"}(r||(r={}));class a{static getDpi(){if(a.dpi<0){const e=document.createElement("div"),t=e.style;t.height="1in",t.width="1in",t.top="-100%",t.left="-100%",t.position="absolute",document.body.appendChild(e);const n=e.offsetHeight;document.body.removeChild(e),a.dpi=n}return a.dpi}static getPixelRatio(e){if(a.pixelRatio<0){e.height=20,e.width=20;const t=window.devicePixelRatio||1,n=e.getContext("2d");Object(i.b)(n);const r=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1;a.pixelRatio=t/r}return a.pixelRatio}static canvasToBlob(e){const t=e;if(t.toBlob)return new Promise((t=>{e.toBlob((e=>{Object(i.b)(e),t(e)}))}));if(t.convertToBlob)return e.convertToBlob();throw Error("canvasToBlob: canvas cannot be converted to a Blob")}static canvasToImage(e,t,n){return o(this,void 0,void 0,(function*(){const r=yield a.canvasToBlob(e),i=URL.createObjectURL(r);return this.blobToImage(i,t,n).finally((()=>URL.revokeObjectURL(i)))}))}static blobToImage(e,t,n){return o(this,void 0,void 0,(function*(){return new Promise(((r,i)=>{const o=new Image;return o.src=e,o.style.objectFit="cover",o.style.objectPosition="top",void 0!==t&&(o.style.width=t+"px"),void 0!==n&&(o.style.height=n+"px"),o.onload=()=>{r(o)},o.onerror=e=>{i(e)},o}))}))}}a.dpi=-1,a.pixelRatio=-1},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{}r.EXECUTION="ExecutionTime",r.ERROR="ErrorCount",r.NETWORK_ERROR_NOT_FOUND="404",r.NETWORK_ERROR_BAD_REQUEST="400",r.NETWORK_ERROR_SERVER_ERROR="500",r.RENDER_PAGE="RenderPage",r.LOAD_IMAGE="LoadImage",r.PREVIOUS_PAGE="PreviousPage",r.NEXT_PAGE="NextPage",r.FILL_VIEW="FillView",r.ADD_ANNOTATION="AddAnnotation",r.REMOVE_ANNOTATION="RemoveAnnotation",r.CLEAR_TEXT_SELECTION="ClearTextSelection",r.GET_TABLE_OF_CONTENTS="GetTableOfContents",r.GET_METADATA="GetMetadata",r.GET_MANIFEST="GetManifest",r.GET_LOCATION_MAP="GetLocationMap",r.GET_PAGE_POSITION_RANGE="GetPagePositionRange",r.UPDATE_RENDER_OPTIONS="UpdateRenderOptions",r.GET_CURRENT_BOOK_PROVIDER="GetCurrentBookProvider",r.GO_TO_PAGE="GoToPage",r.GO_TO_POSITION="GoToPosition",r.APPLY_ANTI_MOIRE_FILTER="ApplyAntiMoireFilter"},function(e,t,n){"use strict";function r(e,t){if(null==e)throw new Error(null!=t?t:"Expected 'val' to be defined, but received "+e)}function i(e,t){if(!e)throw new Error(null!=t?t:'Expected "val" to be true, but it was false')}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1);class i{static getDimensions(e){return{width:e.right-e.left,height:e.bottom-e.top}}static convertToAbsolutePosition(e,t){const n=[e.left,e.top,1],r=this.convertXPositionToAbsolute(n,t),i=this.convertYPositionToAbsolute(n,t),o=[e.right,e.bottom,1];return{top:i,left:r,right:this.convertXPositionToAbsolute(o,t),bottom:this.convertYPositionToAbsolute(o,t)}}static convertXPositionToAbsolute(e,t){return t[r.b.HorizontalScaling]*e[0]+t[r.b.HorizontalSkewing]*e[1]+t[r.b.HorizontalTranslation]*e[2]}static convertYPositionToAbsolute(e,t){return t[r.b.VerticalSkewing]*e[0]+t[r.b.VerticalScaling]*e[1]+t[r.b.VerticalTranslation]*e[2]}static round(e){return{bottom:Math.round(e.bottom),left:Math.round(e.left),right:Math.round(e.right),top:Math.round(e.top)}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(){this.path2d="",this.subPathPoints=0,this.subPaths=0}moveTo(e,t){this.subPaths++,this.subPathPoints=0,this.addPathPoint(),this.path2d+=`M ${e} ${t}`}lineTo(e,t){this.addPathPoint(),this.path2d+=`L ${e} ${t}`}relativeLineTo(e,t){this.addPathPoint(),this.path2d+=`l ${e} ${t}`}addEllipticalArc(e,t,n,r,i,o,a){const s=e+n*Math.cos(i/180*Math.PI),c=t+r*Math.sin(i/180*Math.PI),u=e+n*Math.cos(o/180*Math.PI),l=t+r*Math.sin(o/180*Math.PI);let d=(o-i)%360;d<0&&(d+=360);const h=!a&&d>180||a&&d<180;this.subPathPoints<=1?this.moveTo(s,c):this.lineTo(s,c),this.addPathPoint(),this.path2d+=`A ${n} ${r} 0 ${h?1:0} ${a?0:1} ${u} ${l}`}addPathPoint(){(this.subPaths>0||this.subPathPoints>0)&&(this.path2d+=" "),this.subPathPoints++}closePath(){this.addPathPoint(),this.path2d+="z"}build(){return new Path2D(this.path2d)}}},function(e,t,n){"use strict";function r(e){const t=e.h,n=e.s,r=e.v,i=Math.floor(6*t),o=6*t-i,a=r*(1-n),s=r*(1-o*n),c=r*(1-(1-o)*n);let u,l,d;switch(i%6){case 0:u=r,l=c,d=a;break;case 1:u=s,l=r,d=a;break;case 2:u=a,l=r,d=c;break;case 3:u=a,l=s,d=r;break;case 4:u=c,l=a,d=r;break;case 5:u=r,l=a,d=s;break;default:throw new Error("Error converting HSV to RGB")}return{r:Math.round(255*u),g:Math.round(255*l),b:Math.round(255*d)}}function i(e){const t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),o=Math.min(t,n,r),a=i;let s=i;const c=i-o,u=0==i?0:c/i;if(i==o)s=0;else{switch(i){case t:s=(n-r)/c+(n<r?6:0);break;case n:s=(r-t)/c+2;break;case r:s=(t-n)/c+4}s/=6}return{h:s,s:u,v:a}}function o(e){let t=e.replace("#","");return 3===t.length&&(t=`${t[0]}${t[0]}${t[1]}${t[1]}${t[2]}${t[2]}`),{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:parseInt(t.substring(6,8),16)/255}}function a(e){let t=e.r.toString(16),n=e.g.toString(16),r=e.b.toString(16),i=Math.round(255*e.a).toString(16);return 1===t.length&&(t="0"+t),1===n.length&&(n="0"+n),1===r.length&&(r="0"+r),1===i.length&&(i="0"+i),"#"+t+n+r+i}n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a}))},function(e,t,n){"use strict";var r,i;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),function(e){e.Forward="Forward",e.Backward="Backward",e.Absolute="Absolute"}(r||(r={})),function(e){e.Position="Position",e.Page="Page"}(i||(i={}))},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.Top=0]="Top",e[e.Left=1]="Left",e[e.Bottom=2]="Bottom",e[e.Right=3]="Right"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),i=n(12),o=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class a{constructor(e,t,n,r=!0){this.asin=e,this.pages=new Map,this.layoutPages=new Map,this.tokens=new Map,this.panels=new Map,this.pageIndex=0,this.theme="",this.unscrambleImages=!1,this.host=`${r?"https":"http"}://${t}:${n}`}gotoPage(e){this.pageIndex=e}nextPage(){this.pageIndex++}previousPage(){this.pageIndex--}getImage(e){return o(this,void 0,void 0,(function*(){return yield this.initPromise,new Promise(((t,n)=>o(this,void 0,void 0,(function*(){const r=this.buildUrl("/get-image",{asin:this.asin,theme:this.theme,image:e}),o=this.buildUrl("/get-image-manifest",{asin:this.asin,theme:this.theme,image:e});try{const e=yield fetch(r);if(this.unscrambleImages){const r=yield fetch(o);if(e.ok&&r.ok){const n=yield e.blob(),o=yield r.json(),a=new i.a,s=yield a.unscramble(n,o);t(s)}else n("Failed to load image or manifest")}else e.ok?t(yield e.blob()):n()}catch(e){n(e)}}))))}))}getPage(){return o(this,void 0,void 0,(function*(){const e=this.pageIndex;let t=this.pages.get(e);if(!t){yield this.initPromise;const n=this.buildUrl("/get-page-section",{asin:this.asin,theme:this.theme,pageIndex:String(e)}),r=yield fetch(n);(yield r.json()).forEach((e=>this.pages.set(e.pageIndex,e))),t=this.pages.get(e)}return Object(r.b)(t,"Unable to find page "+e),t}))}getLayoutPage(){return o(this,void 0,void 0,(function*(){const e=this.pageIndex;let t=this.layoutPages.get(e);if(!t){yield this.initPromise;const n=this.buildUrl("/get-layout-page-section",{asin:this.asin,theme:this.theme,pageIndex:String(e)}),r=yield fetch(n);(yield r.json()).forEach((e=>this.layoutPages.set(e.pageIndex,e))),t=this.layoutPages.get(e)}return Object(r.b)(t,"Unable to find page "+e),t}))}getFonts(){return o(this,void 0,void 0,(function*(){return yield this.initPromise,Object(r.b)(this.fonts,"Fonts should be loaded"),this.fonts}))}getTokens(){return o(this,void 0,void 0,(function*(){const e=this.pageIndex;let t=this.tokens.get(e);if(!t){yield this.initPromise;const n=this.buildUrl("/get-tokens-section",{asin:this.asin,theme:this.theme,pageIndex:String(e)}),r=yield fetch(n);(yield r.json()).forEach((e=>this.tokens.set(e.pageIndex,e))),t=this.tokens.get(e)}return Object(r.b)(t,"Unable to find page tokens"),Promise.resolve(t)}))}getPanels(){return o(this,void 0,void 0,(function*(){const e=this.pageIndex;let t=this.panels.get(e);if(!t){yield this.initPromise;const n=this.buildUrl("/get-panels-section",{asin:this.asin,theme:this.theme,pageIndex:String(e)}),r=yield fetch(n);(yield r.json()).forEach((e=>this.panels.set(e.pageIndex,e))),t=this.panels.get(e)}return Object(r.b)(t,"Unable to find page panels"),Promise.resolve(t)}))}getLocationMap(){return o(this,void 0,void 0,(function*(){const e=this.buildUrl("/get-location-map",{asin:this.asin,theme:this.theme}),t=yield fetch(e);return yield t.json()}))}getTableOfContent(){return o(this,void 0,void 0,(function*(){return yield this.initPromise,Object(r.b)(this.toc),this.toc}))}getMetadata(){return o(this,void 0,void 0,(function*(){return yield this.initPromise,Object(r.b)(this.metadata),this.metadata}))}getManifest(){return o(this,void 0,void 0,(function*(){return{manifestComplete:!0,formatVersion:3,revision:1,asin:"stub",bookType:"Reflowable",rendererType:"stub",contentType:"stub",bookFormat:"stub",publisherPanel:!1,acr:"stub"}}))}render(e){var t;return o(this,void 0,void 0,(function*(){this.theme=null!==(t=e.theme)&&void 0!==t?t:"custom";const n=this.buildUrl("/render",{settings:JSON.stringify(e),theme:this.theme,asin:this.asin});return this.initPromise=fetch(n).then((()=>{this.fonts=new Promise(((e,t)=>{const n=this.buildUrl("/get-glyphs",{asin:this.asin,theme:this.theme});fetch(n).then((t=>{t.json().then((t=>{e(t)}))})).catch((e=>t(e)))})),this.toc=new Promise(((e,t)=>{const n=this.buildUrl("/get-toc",{asin:this.asin,theme:this.theme});fetch(n).then((t=>{t.json().then((t=>{e(t)}))})).catch((e=>t(e)))})),this.metadata=new Promise(((e,t)=>{const n=this.buildUrl("/get-metadata",{asin:this.asin,theme:this.theme});fetch(n).then((t=>{t.json().then((t=>{e(t)}))})).catch((e=>t(e)))})),void 0!==e.pageIndex?this.pageIndex=e.pageIndex:void 0!==e.positionId&&(this.pageIndex=0)}))}))}buildUrl(e,t){const n=new URLSearchParams(t).toString();return`${this.host}/karamelgen${e}?${n}`}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(e,t,n,r,i){this.devBookDataLoader=e,this.tokens=r,this.page=t,this.layoutPage=n,this.panels=i}getImage(e){return this.devBookDataLoader.getImage(e)}getMetadata(){return this.devBookDataLoader.getMetadata()}getManifest(){return this.devBookDataLoader.getManifest()}getLocationMap(){return this.devBookDataLoader.getLocationMap()}getPage(){return this.page}getLayoutPage(){return this.layoutPage}getTableOfContent(){return this.devBookDataLoader.getTableOfContent()}getTokens(){return this.tokens}getPanels(){return this.panels}getFonts(){return this.devBookDataLoader.getFonts()}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),i=n(2),o=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class a{constructor(e,t){this.nodeRenderers=e.nodeRenderers,this.decorationRender=e.decorationRender,this.metricsUtil=t}render(e){return o(this,void 0,void 0,(function*(){return yield this.metricsUtil.asyncExecuteMetrics(i.a.RENDER_PAGE,(()=>o(this,void 0,void 0,(function*(){const t=yield e.bookProvider.getPage();e.context.fillStyle=t.fillColor,e.context.fillRect(0,0,t.width,t.height),e.inkColor=t.inkColor;const n=t.children;return{rect:yield this.renderChildNodes(e,n),startPositionId:t.startPositionId,endPositionId:t.endPositionId,pageFillColor:t.fillColor,pageInkColor:t.inkColor}}))))}))}renderChildNodes(e,t){return o(this,void 0,void 0,(function*(){let n=new r.a(0,0,0,0);if(t&&t.length>0){const r=yield this.renderTimeboxed(t,(t=>o(this,void 0,void 0,(function*(){return t.rect?yield this.renderDecorations(e,t,!0):void 0}))));n=n.compute(r);const i=yield this.renderTimeboxed(t,(t=>o(this,void 0,void 0,(function*(){const n=yield this.renderDecorations(e,t,!1),r=yield this.renderNode(e,t);return n.compute(r)}))));n=n.compute(i)}return n}))}renderTimeboxed(e,t){return new Promise(((n,i)=>{const a=new r.a(0,0,0,0);setTimeout((()=>o(this,void 0,void 0,(function*(){return yield this.renderTimeboxedRecursive(a,e,0,t,n,i)}))))}))}renderTimeboxedRecursive(e,t,n,r,i,s){return o(this,void 0,void 0,(function*(){try{let c=e;const u=performance.now();for(;performance.now()-u<a.MAX_EXECUTION_TIME&&n<t.length;){const e=t[n],i=yield r(e);i&&(c=c.compute(i)),n++}n<t.length?setTimeout((()=>o(this,void 0,void 0,(function*(){return yield this.renderTimeboxedRecursive(c,t,n,r,i,s)})))):i(c)}catch(e){s(e)}}))}renderNode(e,t){var n;return o(this,void 0,void 0,(function*(){let i=new r.a(0,0,0,0);const o=this.nodeRenderers[t.type];if(!o)return i;const a=e.context;a.save();try{return this.applyClipPath(t,a),this.applyTransform(t,a),a.globalAlpha=null!==(n=t.opacity)&&void 0!==n?n:1,i=i.compute(yield o.render(e,t))}finally{a.restore()}}))}renderDecorations(e,t,n){var i;return o(this,void 0,void 0,(function*(){let o=new r.a(0,0,0,0);if(n&&!t.backDecoration||!n&&!t.frontDecoration)return o;const a=e.context;a.save();try{return this.applyTransform(t,a),a.globalAlpha=null!==(i=t.opacity)&&void 0!==i?i:1,n&&t.backDecoration?o=o.compute(yield this.decorationRender.renderDecorations(e,t.backDecoration,t.type,t.transform)):!n&&t.frontDecoration&&(o=o.compute(yield this.decorationRender.renderDecorations(e,t.frontDecoration,t.type,t.transform))),o}finally{a.restore()}}))}applyTransform(e,t){if(e.transform){const[n,r,i,o,a,s]=e.transform;t.transform(n,r,i,o,a,s)}}applyClipPath(e,t){const n=e.clipPath;if(n){const e=new Path2D;e.rect(n.left,n.top,n.right-n.left,n.bottom-n.top),t.clip(e)}}}a.MAX_EXECUTION_TIME=5},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1);class i{unscramble(e,t){const n=URL.createObjectURL(e);return r.a.blobToImage(n).then((e=>{const n=document.createElement("canvas");return n.width=t.width,n.height=t.height,this.drawTiles(e,n.getContext("2d"),t.tiles),r.a.canvasToBlob(n)})).finally((()=>URL.revokeObjectURL(n)))}drawTiles(e,t,n){for(const r of n){const n=r.data,i=n[4],o=n[5];t.drawImage(e,n[2],n[3],i,o,n[0],n[1],i,o)}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r extends Error{constructor(e){super(e)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(1),i=n(0),o=n(4),a=n(5),s=n(2),c=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class u{constructor(e,t){this.DEFAULT_COLOR="#FFFFFF",this.pixelRatio=e.pixelRatio,this.rectRenderer=e.rectRenderer,this.lineRenderer=e.lineRenderer,this.styleModifier=e.styleModifier,this.metricsUtil=t}renderDecorations(e,t,n,r){return c(this,void 0,void 0,(function*(){let o=new i.a(0,0,0,0);for(const i of t)switch(i.type){case"fillStroke":o=o.compute(this.renderRectFillStroke(e,i,r));break;case"line":const t=JSON.parse(JSON.stringify(i));this.adaptLineDecorationByStrokeIfNeed(t,n),o=o.compute(this.renderLineDecoration(e,t,t.strokeColor,r));break;case"linkLine":const a=JSON.parse(JSON.stringify(i));this.adaptLineDecorationByStrokeIfNeed(a,n),o=o.compute(this.renderLineDecoration(e,a,a.unvisitedColor,r));break;case"backgroundImage":const s=i;o=o.compute(yield this.renderBackgroundImage(e,s,r));break;case"shadow":o=o.compute(this.renderShadow(e,i,r))}return o}))}renderRectFillStroke(e,t,n){const r=e.context;r.save();try{const n=t.radii,i=new Array(4),o=new Array(4),a=new Array(4),s=new Array(4),c=new Array(4),u=[t.strokeTop,t.strokeLeft,t.strokeBottom,t.strokeRight];for(let e=0;e<u.length;e++){const t=u[e];void 0===t?(i[e]="unknown",o[e]=0,c[e]="#00000000"):(i[e]=t.strokeStyle,o[e]=t.strokeWidth,c[e]=t.strokeColor),a[e]=void 0===n?0:n[e].xRadius,s[e]=void 0===n?0:n[e].yRadius}t.fillColor&&(r.strokeStyle=t.fillColor);const l=this.getFill(e,t);this.rectRenderer.fillStroke(r,t.rect,i,o,a,s,c,l)}finally{r.restore()}let o=new i.a(t.rect.top,t.rect.bottom,t.rect.left,t.rect.right);return n&&(o=i.a.applyTransformationToBoundingBoxPoints(n,o)),o}adaptLineDecorationByStrokeIfNeed(e,t){"run"!==t&&"text"!==t&&"textline"!==t||(e.strokeStartPoint.y===e.strokeEndPoint.y?(e.strokeStartPoint.y=e.strokeStartPoint.y-e.strokeWidth/2,e.strokeEndPoint.y=e.strokeEndPoint.y-e.strokeWidth/2):(e.strokeStartPoint.x=e.strokeStartPoint.x-e.strokeWidth/2,e.strokeEndPoint.x=e.strokeStartPoint.x-e.strokeWidth/2))}renderLineDecoration(e,t,n,r){const o=e.context,a=t.strokeStartPoint,s=a.x,c=a.y,u=t.strokeEndPoint,l=u.x,d=u.y,h=t.strokeStyle;let f=new i.a(c,d,s,l);o.save();try{if("thinthick"===h||"thickthin"===h){const e=this.styleModifier.getLineWidthsFromStyle(h,t.strokeWidth),r=e.externalLine,a=e.gap,u=e.internalLine,p=c===d,g=p?l-s:d-c,m=c,v={style:t.strokeStyle,x:s,y:m,isHorizontal:p,length:g,width:r,color:n};this.lineRenderer.draw(o,v);const y=m+r+a,b={style:t.strokeStyle,x:s,y:y,isHorizontal:p,length:g,width:u,color:n};this.lineRenderer.draw(o,b),f=new i.a(c,y+u,s,l)}else{const e=c===d,r=e?l-s:d-c,a=t.strokeWidth,u={style:t.strokeStyle,x:s,y:c,isHorizontal:e,length:r,width:a,color:n};this.lineRenderer.draw(o,u),f=new i.a(c,d+a,s,l)}}finally{o.restore()}return r&&(f=i.a.applyTransformationToBoundingBoxPoints(r,f)),f}renderBackgroundImage(e,t,n){return c(this,void 0,void 0,(function*(){const o=t.rect,a=t.imageReference;try{yield this.metricsUtil.asyncExecuteMetrics(s.a.LOAD_IMAGE,(()=>c(this,void 0,void 0,(function*(){const n=yield e.bookProvider.getImage(a);if("undefined"==typeof createImageBitmap){const i=URL.createObjectURL(n);yield r.a.blobToImage(i).then((n=>this.drawImage(e,n,t))).finally((()=>URL.revokeObjectURL(i)))}else yield createImageBitmap(n).then((n=>this.drawImage(e,n,t)))}))))}catch(e){}let u=new i.a(o.top,o.bottom,o.left,o.right);return n&&(u=i.a.applyTransformationToBoundingBoxPoints(n,u)),u}))}drawImage(e,t,n){var r,i,a,s;const c=e.context;c.save();try{const e=n.rect,{width:u,height:l}=o.a.getDimensions(e),d=new Path2D;d.rect(e.left,e.top,u,l),c.clip(d);const h=n.scale,f=h.x,p=h.y;c.scale(f,p);const g=(n.origin.x+e.left)/f,m=(n.origin.y+e.top)/p,v=t.width,y=t.height,b=null!==(r=n.rowCount)&&void 0!==r?r:1,w=null!==(i=n.columnCount)&&void 0!==i?i:1;for(let e=0;e<b;++e)for(let r=0;r<w;++r){const i=g+r*(null!==(a=n.imageWidth)&&void 0!==a?a:0),o=m+e*(null!==(s=n.imageHeight)&&void 0!==s?s:0);c.drawImage(t,i,o,v,y)}}finally{c.restore()}}getFill(e,t){if(void 0!==t.gradient){const n=this.createGradient(e,t);return n.addColorStop(0,this.DEFAULT_COLOR),t.gradient.stopColorList.forEach((e=>{n.addColorStop(e.offset,e.stopColor)})),n}if(void 0!==t.fillColor)return t.fillColor}createGradient(e,t){var n;const r=null!==(n=t.rect)&&void 0!==n?n:{left:0,right:0,bottom:0,top:0},i=r.right-r.left,o=r.bottom-r.top;if(void 0!==t.gradient&&"radial"===t.gradient.gradientType){const t=(r.left+r.right)/2,n=(r.top+r.bottom)/2,a=Math.max(i,o)/2;return e.context.createRadialGradient(t,n,0,t,n,a)}return void 0!==t.gradient&&"vertical"===t.gradient.gradientType?e.context.createLinearGradient(0,r.top,0,r.bottom):e.context.createLinearGradient(r.left,0,r.bottom,0)}renderShadow(e,t,n){const r=e.context;r.save();try{const e=t.rect,n=new Array(4),i=new Array(4);if(t.radii){const e=t.radii;for(let t=0;t<e.length;t++)n[t]=e[t].xRadius,i[t]=e[t].yRadius}t.shadowInset?this.drawInsetShadow(r,e,t,n,i):this.drawOutsetShadow(r,e,t,n,i),this.unsetShadow(r)}finally{r.restore()}return new i.a(0,0,0,0)}drawInsetShadow(e,t,n,r,i){var a,s;n.radii?this.clip(e,t,!1,r,i):this.clip(e,t,!1);const c=e.canvas.width;t.left-=c,t.right-=c;const u=t.left,l=t.top;this.setShadow(e,n,c);const{width:d,height:h}=o.a.getDimensions(t),f=null!==(a=n.shadowBlur)&&void 0!==a?a:0,p=null!==(s=n.shadowSpread)&&void 0!==s?s:0,g=Math.max(Math.abs(n.shadowOrigin.x),Math.abs(n.shadowOrigin.y)),m=Math.max(g,Math.max(0,f-p));e.lineWidth=2*(p+m),e.strokeRect(u-m,l-m,d+2*m,h+2*m),t.left+=c,t.right+=c}drawOutsetShadow(e,t,n,r,i){const a=t.left,s=t.top,{width:c,height:u}=o.a.getDimensions(t);let l;n.radii?(l=this.createRoundedRectPath(e,t,r,i),this.clip(e,t,!0,r,i)):(l=new Path2D,l.rect(a,s,c,u),this.clip(e,t,!0)),this.setShadow(e,n),e.fill(l)}clip(e,t,n,r,i){const a=t.left,s=t.top,{width:c,height:u}=o.a.getDimensions(t);let l=new Path2D;if(r&&i?l=this.createRoundedRectPath(e,t,r,i):l.rect(a,s,c,u),n){const t=e.canvas.width,n=e.canvas.height;l.rect(a-t,s-n,c+2*t,u+2*n)}e.clip(l,"evenodd")}setShadow(e,t,n=0){var r,i;e.shadowColor=t.shadowColor,e.shadowBlur=this.pixelRatio*(null!==(r=t.shadowBlur)&&void 0!==r?r:0),0!==n&&(e.shadowBlur+=null!==(i=t.shadowSpread)&&void 0!==i?i:0,e.shadowBlur/=2),e.shadowOffsetX=this.pixelRatio*(t.shadowOrigin.x+n),e.shadowOffsetY=this.pixelRatio*t.shadowOrigin.y}unsetShadow(e){e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}createRoundedRectPath(e,t,n,r){const i=o.a.round(t);e.lineCap="butt";const s=new a.a;return s.moveTo(i.left+n[0],i.top),s.addEllipticalArc(i.left+n[0],i.top+r[0],n[0],r[0],270,180,!0),s.relativeLineTo(0,i.bottom-i.top-r[0]-r[1]),s.addEllipticalArc(i.left+n[1],i.bottom-r[1],n[1],r[1],180,90,!0),s.relativeLineTo(i.right-i.left-n[1]-n[2],0),s.addEllipticalArc(i.right-n[2],i.bottom-r[2],n[2],r[2],90,0,!0),s.relativeLineTo(0,-(i.bottom-i.top-r[2]-r[3])),s.addEllipticalArc(i.right-n[3],i.top+r[3],n[3],r[3],0,-90,!0),s.relativeLineTo(-(i.right-i.left-n[0]-n[3]),0),s.build()}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(6);class i{getLineWidthsFromStyle(e,t){switch(e){case"double":const e=Math.floor(t/3);return{externalLine:e,gap:e,internalLine:e};case"ridge":case"groove":{const e=Math.ceil(t/2);return{externalLine:e,gap:0,internalLine:t-e}}case"thickthin":{const e=Math.ceil(t/7),n=Math.ceil((t-e)/3);return{externalLine:t-e-n,gap:n,internalLine:e}}case"thinthick":const n=Math.ceil(t/7),r=Math.ceil((t-n)/3);return{externalLine:n,gap:r,internalLine:t-n-r};default:return{externalLine:t,gap:0,internalLine:0}}}isStyleWithTwoLines(e){return"double"===e||"thickthin"===e||"thinthick"===e||"ridge"===e||"groove"===e}getColorModification(e,t){const n=Object(r.b)(t),i=Object(r.d)(n),o=n.a;let a=Math.min(1,i.v+.2);const s=Math.max(0,a-.4);let c;if(a=Math.min(1,s+.4),0===e){const e=Object(r.a)({h:i.h,s:i.s,v:a});c=Object(r.c)({r:e.r,g:e.g,b:e.b,a:o})}else{if(1!==e)throw new Error("Color modification not supported: "+e);{const e=Object(r.a)({h:i.h,s:i.s,v:s});c=Object(r.c)({r:e.r,g:e.g,b:e.b,a:o})}}return c}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(e){this.context=e}get canvas(){return this.context.canvas}get globalAlpha(){return this.context.globalAlpha}set globalAlpha(e){this.context.globalAlpha=e}get globalCompositeOperation(){return this.context.globalCompositeOperation}set globalCompositeOperation(e){this.context.globalCompositeOperation=e}get fillStyle(){return this.context.fillStyle}set fillStyle(e){this.context.fillStyle=e}get strokeStyle(){return this.context.strokeStyle}set strokeStyle(e){this.context.strokeStyle=e}get filter(){return this.context.filter}set filter(e){this.context.filter=e}get imageSmoothingEnabled(){return this.context.imageSmoothingEnabled}set imageSmoothingEnabled(e){this.context.imageSmoothingEnabled=e}get imageSmoothingQuality(){return this.context.imageSmoothingQuality}set imageSmoothingQuality(e){this.context.imageSmoothingQuality=e}get lineCap(){return this.context.lineCap}set lineCap(e){this.context.lineCap=e}get lineDashOffset(){return this.context.lineDashOffset}set lineDashOffset(e){this.context.lineDashOffset=e}get lineJoin(){return this.context.lineJoin}set lineJoin(e){this.context.lineJoin=e}get lineWidth(){return this.context.lineWidth}set lineWidth(e){this.context.lineWidth=e}get miterLimit(){return this.context.miterLimit}set miterLimit(e){this.context.miterLimit=e}get shadowBlur(){return this.context.shadowBlur}set shadowBlur(e){this.context.shadowBlur=e}get shadowColor(){return this.context.shadowColor}set shadowColor(e){this.context.shadowColor=e}get shadowOffsetX(){return this.context.shadowOffsetX}set shadowOffsetX(e){this.context.shadowOffsetX=e}get shadowOffsetY(){return this.context.shadowOffsetY}set shadowOffsetY(e){this.context.shadowOffsetY=e}get direction(){return this.context.direction}set direction(e){this.context.direction=e}get font(){return this.context.font}set font(e){this.context.font=e}get textAlign(){return this.context.textAlign}set textAlign(e){this.context.textAlign=e}get textBaseline(){return this.context.textBaseline}set textBaseline(e){this.context.textBaseline=e}drawImage(e,t,n,r,i,o,a,s,c){this.context.drawImage(...arguments)}beginPath(){this.context.beginPath(...arguments)}clip(e,t){this.context.clip(...arguments)}fill(e,t){this.context.fill(...arguments)}isPointInPath(e,t,n,r){return this.context.isPointInPath(...arguments)}isPointInStroke(e,t,n){return this.context.isPointInStroke(...arguments)}stroke(e){this.context.stroke(...arguments)}createLinearGradient(e,t,n,r){return this.context.createLinearGradient(...arguments)}createPattern(e,t){return this.context.createPattern(...arguments)}createRadialGradient(e,t,n,r,i,o){return this.context.createRadialGradient(...arguments)}createImageData(e,t){return this.context.createImageData(...arguments)}getImageData(e,t,n,r){return this.context.getImageData(...arguments)}putImageData(e,t,n,r,i,o,a){this.context.putImageData(...arguments)}arc(e,t,n,r,i,o){this.context.arc(...arguments)}arcTo(e,t,n,r,i){this.context.arcTo(...arguments)}bezierCurveTo(e,t,n,r,i,o){this.context.bezierCurveTo(...arguments)}closePath(){this.context.closePath(...arguments)}ellipse(e,t,n,r,i,o,a,s){this.context.ellipse(...arguments)}lineTo(e,t){this.context.lineTo(...arguments)}moveTo(e,t){this.context.moveTo(...arguments)}quadraticCurveTo(e,t,n,r){this.context.quadraticCurveTo(...arguments)}rect(e,t,n,r){this.context.rect(...arguments)}getLineDash(){return this.context.getLineDash(...arguments)}setLineDash(e){this.context.setLineDash(...arguments)}clearRect(e,t,n,r){this.context.clearRect(...arguments)}fillRect(e,t,n,r){this.context.fillRect(...arguments)}strokeRect(e,t,n,r){this.context.strokeRect(...arguments)}restore(){this.context.restore(...arguments)}save(){this.context.save(...arguments)}fillText(e,t,n,r){this.context.fillText(...arguments)}measureText(e){return this.context.measureText(...arguments)}strokeText(e,t,n,r){this.context.strokeText(...arguments)}getTransform(){return this.context.getTransform(...arguments)}resetTransform(){this.context.resetTransform(...arguments)}rotate(e){this.context.rotate(...arguments)}scale(e,t){this.context.scale(...arguments)}setTransform(e,t,n,r,i,o){this.context.setTransform(...arguments)}transform(e,t,n,r,i,o){this.context.transform(...arguments)}translate(e,t){this.context.translate(...arguments)}drawFocusIfNeeded(e,t){this.context.drawFocusIfNeeded(...arguments)}scrollPathIntoView(e){this.context.scrollPathIntoView(...arguments)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(16);n(48);class i extends r.a{constructor(e){super(e),this.path=new Path2D,this.subPath=new Path2D,this.isSubPathEmtpy=!0}build(){return this.addSubPath(),new Path2D(this.path)}addSubPath(e){e?this.path.addPath(e):this.isSubPathEmtpy||(this.path.addPath(this.subPath),this.subPath=new Path2D,this.isSubPathEmtpy=!0)}beginPath(){super.beginPath(),this.addSubPath()}closePath(){super.closePath(),this.subPath.closePath(),this.isSubPathEmtpy=!1}arc(e,t,n,r,i,o){super.arc(e,t,n,r,i,o),this.subPath.arc(e,t,n,r,i,o),this.isSubPathEmtpy=!1}arcTo(e,t,n,r,i){super.arcTo(e,t,n,r,i),this.subPath.arcTo(e,t,n,r,i),this.isSubPathEmtpy=!1}bezierCurveTo(e,t,n,r,i,o){super.bezierCurveTo(e,t,n,r,i,o),this.subPath.bezierCurveTo(e,t,n,r,i,o),this.isSubPathEmtpy=!1}ellipse(e,t,n,r,i,o,a,s){super.ellipse(e,t,n,r,i,o,a,s),this.subPath.ellipse(e,t,n,r,i,o,a,s),this.isSubPathEmtpy=!1}lineTo(e,t){super.lineTo(e,t),this.subPath.lineTo(e,t),this.isSubPathEmtpy=!1}moveTo(e,t){super.moveTo(e,t),this.subPath.moveTo(e,t),this.isSubPathEmtpy=!1}quadraticCurveTo(e,t,n,r){super.quadraticCurveTo(e,t,n,r),this.subPath.quadraticCurveTo(e,t,n,r),this.isSubPathEmtpy=!1}rect(e,t,n,r){super.rect(e,t,n,r),this.subPath.rect(e,t,n,r),this.isSubPathEmtpy=!1}resetTransform(){this.addSubPath(),super.resetTransform()}rotate(e){this.addSubPath(),super.rotate(e)}scale(e,t){this.addSubPath(),super.scale(e,t)}setTransform(e,t,n,r,i,o){this.addSubPath(),super.setTransform(...arguments)}transform(e,t,n,r,i,o){this.addSubPath(),super.transform(e,t,n,r,i,o)}translate(e,t){this.addSubPath(),super.translate(e,t)}fill(e,t){e&&"string"!=typeof e&&this.addSubPath(e)}stroke(e){e&&this.addSubPath(e)}drawImage(e,t,n,r,i,o,a,s,c){let u=!0;r?o?this.subPath.rect(o,a,s,c):this.subPath.rect(t,n,r,i):"number"==typeof e.width&&"number"==typeof e.height?this.subPath.rect(t,n,e.width,e.height):u=!1,u&&(this.isSubPathEmtpy=!1)}fillRect(e,t,n,r){super.rect(e,t,n,r),this.rect(e,t,n,r)}strokeRect(e,t,n,r){super.rect(e,t,n,r),this.rect(e,t,n,r)}restore(){this.addSubPath(),super.restore()}clip(e,t){}clearRect(e,t,n,r){}fillText(e,t,n,r){}strokeText(e,t,n,r){}putImageData(e,t,n,r,i,o,a){}}},function(module,__webpack_exports__,__nested_webpack_require_32960__){"use strict";__nested_webpack_require_32960__.d(__webpack_exports__,"a",(function(){return DefaultGlyphRenderer}));var _etc_content_bounding_box__WEBPACK_IMPORTED_MODULE_0__=__nested_webpack_require_32960__(0),_utils_assert__WEBPACK_IMPORTED_MODULE_1__=__nested_webpack_require_32960__(3),__awaiter=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class DefaultGlyphRenderer{constructor(e){this.pathsCache=new Map,this.pixelRatio=e.pixelRatio}render(e,t,n,r,i){return __awaiter(this,void 0,void 0,(function*(){const t=n.glyphs[i.glyphId];Object(_utils_assert__WEBPACK_IMPORTED_MODULE_1__.b)(t,"Unknown glyph "+i.glyphId);const o=this.buildGlyphCacheKey(n,i.glyphId,i.fontSize);if(!("js"===t.type&&t.code||"path"===t.type&&t.path))return new _etc_content_bounding_box__WEBPACK_IMPORTED_MODULE_0__.a(0,0,0,0);{const a=e.context;a.save();try{return this.renderGlyph(o,a,n,t,r,i)}finally{a.restore()}}}))}renderGlyph(glyphKey,ctx,font,glyph,fontScale,glyphDescriptor){this.applyShadows(ctx,glyphDescriptor);const x=glyphDescriptor.x,y=glyphDescriptor.y;ctx.translate(x,y),ctx.scale(fontScale,fontScale);const rotation=glyphDescriptor.glyphRotation;if(0!==rotation){const e=-rotation*DefaultGlyphRenderer.DEG_TO_RAD;ctx.rotate(e)}let cacheDescriptor=this.pathsCache.get(glyphKey);if(!cacheDescriptor){if("path"===glyph.type)cacheDescriptor={path2D:new Path2D(glyph.path),boundingRect:this.findPathBoundingBox(glyph.path)};else{const e=glyph.rect;cacheDescriptor={code:glyph.code,boundingRect:{minX:e.left,minY:e.top,width:e.right-e.left,height:e.bottom-e.top}}}this.pathsCache.set(glyphKey,cacheDescriptor)}if(ctx.beginPath(),cacheDescriptor.path2D)if(ctx.fill(cacheDescriptor.path2D),font.fontAlgBold){const e=ctx.strokeStyle,t=ctx.strokeStyle!=ctx.fillStyle;t&&(ctx.strokeStyle=ctx.fillStyle);const n=ctx.lineWidth;ctx.lineWidth=font.fontWeight/1e3/fontScale,ctx.stroke(cacheDescriptor.path2D),ctx.lineWidth=n,t&&(ctx.strokeStyle=e),ctx.stroke(cacheDescriptor.path2D)}else glyphDescriptor.stroke&&ctx.stroke(cacheDescriptor.path2D);else cacheDescriptor.code&&(ctx.fill(),eval(cacheDescriptor.code));const boundingRect=cacheDescriptor.boundingRect;this.unsetShadow(ctx);let left=boundingRect.minX,top=boundingRect.minY,right=left+boundingRect.width,bottom=top+boundingRect.height;return rotation&&([left,top]=[top,-left],[right,bottom]=[bottom,-right]),new _etc_content_bounding_box__WEBPACK_IMPORTED_MODULE_0__.a(top*fontScale+y,bottom*fontScale+y,left*fontScale+x,right*fontScale+x)}findPathBoundingBox(e){let t=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY;const o=e.split(" ");for(let e=0;e<o.length;e++){const a=o[e].split(",");switch(o[e][0]){case"Z":break;case"C":t=Math.min(parseFloat(a[4]),t),r=Math.max(parseFloat(a[4]),r),n=Math.min(parseFloat(a[5]),n),i=Math.max(parseFloat(a[5]),i);case"Q":t=Math.min(parseFloat(a[2]),t),r=Math.max(parseFloat(a[2]),r),n=Math.min(parseFloat(a[3]),n),i=Math.max(parseFloat(a[3]),i);case"M":case"L":t=Math.min(parseFloat(a[0].substr(1)),t),r=Math.max(parseFloat(a[0].substr(1)),r),n=Math.min(parseFloat(a[1]),n),i=Math.max(parseFloat(a[1]),i)}}return{minX:t,minY:n,width:r-t,height:i-n}}applyShadows(e,t){var n;const r=t.textShadows;if(r)for(const i of r){e.shadowColor=i.shadowColor,e.shadowBlur=this.pixelRatio*(null!==(n=i.shadowBlur)&&void 0!==n?n:1),e.shadowOffsetX=this.pixelRatio*i.shadowOrigin.x,e.shadowOffsetY=this.pixelRatio*i.shadowOrigin.y;let r=t.contextRotation-t.glyphRotation;r<0&&(r+=360);const o=e.shadowOffsetX;r>=90&&r<180?(e.shadowOffsetX=-1*e.shadowOffsetY,e.shadowOffsetY=o):r>=180&&r<270?(e.shadowOffsetX=-1*e.shadowOffsetY,e.shadowOffsetY=-1*o):r>=270&&(e.shadowOffsetX=e.shadowOffsetY,e.shadowOffsetY=-1*o)}}unsetShadow(e){e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}buildGlyphCacheKey(e,t,n){return[e.fontKey,t,n].join("/")}clearCache(){this.pathsCache.clear()}}DefaultGlyphRenderer.DEG_TO_RAD=Math.PI/180},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(0),i=n(1),o=n(4),a=n(2),s=n(20),c=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class u{constructor(e,t){this.metricsUtil=t,this.pixelRatio=e.pixelRatio,this.rectRenderer=e.rectRenderer}render(e,t){return c(this,void 0,void 0,(function*(){const n=e.context,o=t.imageReference;let s=new r.a(0,0,0,0);if(t.imageClip){this.adjustClip(t);const e=t.imageClip,r=new Path2D;r.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip(r)}try{s=yield this.metricsUtil.asyncExecuteMetrics(a.a.LOAD_IMAGE,(()=>c(this,void 0,void 0,(function*(){const r=yield e.bookProvider.getImage(o);if("undefined"==typeof createImageBitmap){const e=URL.createObjectURL(r);return i.a.blobToImage(e).then((e=>this.drawImage(n,e,t))).finally((()=>URL.revokeObjectURL(e)))}return createImageBitmap(r).then((e=>this.drawImage(n,e,t)))}))))}catch(e){this.drawImagePlaceHolder(n,t),s=this.getBoundingBoxForEmptyImage(n,t)}return t.transform&&(s=r.a.applyTransformationToBoundingBoxPoints(t.transform,s)),s}))}getBoundingBoxForEmptyImage(e,t){var n;const i=null!==(n=t.rect)&&void 0!==n?n:t.clipPath;return void 0!==i?new r.a(i.top,i.bottom,i.left,i.right):new r.a(0,0,0,0)}drawImagePlaceHolder(e,t){try{e.save();const n=t.fillColor,r=t.strokeColor;let i=0,a=0,s=0,c=0,u=t.rect;u&&(t.transform&&(u=o.a.convertToAbsolutePosition(u,t.transform)),i=u.top,a=u.left,({width:s,height:c}=o.a.getDimensions(u))),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),e.fillStyle=n,e.fillRect(a,i,s,c),e.strokeStyle=r;const l=e.lineWidth/2;e.strokeRect(a+l,i+l,s-e.lineWidth,c-e.lineWidth)}finally{e.restore()}}drawImage(e,t,n){e.save();try{const i=n.rect;if(i){const c=this.getImageOffsetFromBackDecoration(n);let u={left:i.left+c.left,top:i.top+c.top,bottom:i.bottom-c.bottom,right:i.right-c.right};u=o.a.round(u);const{width:l,height:d}=o.a.getDimensions(u);return this.metricsUtil.recordCountMetrics(a.a.APPLY_ANTI_MOIRE_FILTER,Object(s.a)({width:l,height:d})?1:0),e.drawImage(t,u.left,u.top,l,d),new r.a(u.top,u.bottom,u.left,u.right)}return e.drawImage(t,0,0),new r.a(0,t.height,0,t.width)}finally{e.restore()}}getImageOffsetFromBackDecoration(e){const t=e.backDecoration,n=t&&t.length>0&&"fillStroke"===t[0].type?t[0]:void 0;return{top:n&&n.strokeTop?n.strokeTop.strokeWidth:0,left:n&&n.strokeLeft?n.strokeLeft.strokeWidth:0,bottom:n&&n.strokeBottom?n.strokeBottom.strokeWidth:0,right:n&&n.strokeRight?n.strokeRight.strokeWidth:0}}adjustClip(e){if(e.imageClip){const t=e.rect,n=e.imageClip;t.top=-n.top,t.left=-n.left,t.bottom-=n.top,t.right-=n.left,n.bottom-=n.top,n.right-=n.left,n.top=0,n.left=0}}}},function(e,t,n){"use strict";function r({width:e,height:t,antiMoireThreshold:n=.65}){const{innerHeight:r,innerWidth:i,devicePixelRatio:o}=window;return e*n>=i*o||t*n>=r*o}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),i=n(17),o=n(1),a=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const s=new Array;class c{constructor(e){this.pageRenderer=e}render(e,t){return a(this,void 0,void 0,(function*(){let n=new r.a(0,0,0,0);const i=e.context;i.save();try{const r=new Set,o=yield this.generateClips(e,t,r),a=this.generateShapes(e,t,o,r);n=this.getShapeBoundingBox(t),e.context.scale(t.scaleX,t.scaleY);for(const t of a)yield this.renderShape(e,t)}finally{i.restore()}return n}))}renderShape(e,t){return a(this,void 0,void 0,(function*(){let n=new r.a(0,0,0,0);const i=e.context;i.save();try{if(t.clipPath&&i.clip(t.clipPath,t.clipRule),t.childNodes)n=yield this.pageRenderer.renderChildNodes(e,t.childNodes);else{const e=t.fillData,n=t.strokeData;if(t.transform){const[e,n,r,o,a,s]=t.transform;i.transform(e,n,r,o,a,s)}e&&(i.fillStyle=e.fillColor,i.fill(t.path,e.fillRule)),n&&(i.lineWidth=n.strokeWidth,i.strokeStyle=n.strokeColor,i.lineJoin=n.strokeLineJoin,i.lineCap=n.strokeLineCap,i.miterLimit=n.strokeMiterLimit,i.lineDashOffset=n.strokeDashOffset,i.setLineDash(n.strokeDashArray),i.stroke(t.path))}}finally{i.restore()}return n}))}generateClips(e,t,n){var r;return a(this,void 0,void 0,(function*(){const o=new Array;if(t.clips)for(const a of t.clips){const s=new Path2D;for(const o of a)if(void 0!==o.elementId){let a=null===(r=t.children)||void 0===r?void 0:r.filter((e=>e.elementId===o.elementId));if(a){const r=e.context;r.save();try{if(t.transform){r.resetTransform();const[e,n,i,o,a,s]=t.transform;r.transform(e,n,i,o,a,s)}a=this.adjustRunNodes(a),n.add(o.elementId);const c=new i.a(r),u={context:c,bookProvider:e.bookProvider,inkColor:e.inkColor};yield this.pageRenderer.renderChildNodes(u,a),s.addPath(c.build())}finally{r.restore()}}}else s.addPath(new Path2D(o.path));o.push(s)}return o}))}generateShapes(e,t,n,r){var i,o,a,c,u,l,d,h,f;const p=new Array;if(t.shapes)for(const g of t.shapes){let m;const v="none"===g.clipRule?void 0:g.clipRule;if(void 0!==g.clipPathIndex&&g.clipPathIndex>=0&&g.clipPathIndex<n.length&&(m=n[g.clipPathIndex]),void 0!==g.elementId){const e=null===(i=t.children)||void 0===i?void 0:i.filter((e=>e.elementId===g.elementId));r.add(g.elementId),p.push({childNodes:null!=e?e:new Array,path:void 0,clipPath:m,clipRule:null!=v?v:"nonzero"})}else{const t=new Path2D(g.path);let n,r;if(g.fillRule||g.fillColor){const t="none"===g.fillRule?void 0:g.fillRule;n={fillRule:null!=t?t:"nonzero",fillColor:null!==(a=null!==(o=g.fillColor)&&void 0!==o?o:e.inkColor)&&void 0!==a?a:"#000000FF"}}if(void 0!==g.strokeWidth&&0!==g.strokeWidth){const t="none"===g.strokeLineJoin?void 0:g.strokeLineJoin,n="none"===g.strokeLineCap?void 0:g.strokeLineCap;r={strokeWidth:g.strokeWidth,strokeColor:null!==(u=null!==(c=g.strokeColor)&&void 0!==c?c:e.inkColor)&&void 0!==u?u:"#000000FF",strokeLineJoin:null!=t?t:"miter",strokeLineCap:null!=n?n:"butt",strokeMiterLimit:null!==(l=g.strokeMiterLimit)&&void 0!==l?l:10,strokeDashOffset:null!==(d=g.strokeDashOffset)&&void 0!==d?d:0,strokeDashArray:null!==(h=g.strokeDashArray)&&void 0!==h?h:s}}n||r||(n={fillColor:null!==(f=e.inkColor)&&void 0!==f?f:"#000000FF",fillRule:"nonzero"}),p.push({childNodes:void 0,path:t,clipPath:m,clipRule:null!=v?v:"nonzero",fillData:n,strokeData:r,transform:g.transform})}}return p}getShapeBoundingBox(e){let t=new r.a(0,0,0,0);if(e.shapes)for(const n of e.shapes)if(n.path){let i=r.a.getBoudningBoxByPath(n.path);e.transform&&(i=r.a.applyTransformationToBoundingBoxPoints(e.transform,i)),t=t.compute(i)}return t}adjustRunNodes(e){const t=JSON.parse(JSON.stringify(e));for(const e of t)if("run"===e.type&&e.transform){const t=e;t.descent&&(e.transform[o.b.VerticalTranslation]-=t.descent)}return t}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),i=n(3),o=n(1),a=n(4),s=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class c{constructor(e){this.fontCache=new Map,this.decorationRenderer=e.decorationRenderer,this.fontSize=e.fontSize,this.glyphRenderer=e.fontRender}render(e,t){return s(this,void 0,void 0,(function*(){let n=new r.a(0,0,0,0);if(t.textBackDecoration){const r=yield this.decorationRenderer.renderDecorations(e,t.textBackDecoration,t.type,t.transform);n=n.compute(r)}const i=yield this.renderText(e,t);if(n=n.compute(i),t.textFrontDecoration){const r=yield this.decorationRenderer.renderDecorations(e,t.textFrontDecoration,t.type,t.transform);n=n.compute(r)}return n}))}renderText(e,t){var n,o,c,u,l,d;return s(this,void 0,void 0,(function*(){const s=yield e.bookProvider.getFonts();this.setFonts(s);const h=null!==(n=t.fontSize)&&void 0!==n?n:this.fontSize,f=t.glyphs;if(!f)return new r.a(0,0,0,0);{const n=e.context;n.save();try{const s=f.length,p=t.fontFamily,g=t.fontStyle,m=t.fontStretch,v=t.fontWeight,y=t.fontClass,b=t.textShadows,w=this.getRotationAngle(t),E={fontFamily:p,fontStretch:m,fontStyle:g,fontWeight:v,fontClass:y},S=this.fontCache.get(t.fontKey);Object(i.b)(S);const T=h/S.unitsPerEm,_=null!==(o=t.glyphRotation)&&void 0!==o?o:0,P=t.stroke;void 0!==P&&(n.lineWidth=Math.round(P.strokeWidth/T),n.strokeStyle=P.strokeColor),n.fillStyle=t.textColor;const C=new Array;for(let n=0;n<s;n++){const r=f[n],i=null!==(u=null===(c=t.yPosition)||void 0===c?void 0:c[n])&&void 0!==u?u:0,o=null!==(d=null===(l=t.xPosition)||void 0===l?void 0:l[n])&&void 0!==d?d:0,a={glyphId:String(r),x:o,y:i,glyphRotation:_,fontSize:h,stroke:t.stroke,textShadows:b,contextRotation:w},s=this.glyphRenderer.render(e,E,S,T,a);C.push(s)}let R=new r.a(0,0,0,0);for(const e of C){const t=yield e;R=R.compute(t)}if(t.transform){const e=t.transform,n=a.a.convertToAbsolutePosition(R,e),i=Math.min(n.top,n.bottom),o=Math.max(n.top,n.bottom),s=Math.min(n.left,n.right),c=Math.max(n.left,n.right);R=new r.a(i,o,s,c)}return R}finally{n.restore()}}}))}getRotationAngle(e){if(e.transform){const t=e.transform;let n=Math.atan2(t[o.b.VerticalSkewing],t[o.b.HorizontalScaling]);return n<0&&(n+=2*Math.PI),180*n/Math.PI}return 0}setFonts(e){this.fonts&&this.fonts===e||(this.fontCache.clear(),this.glyphRenderer.clearCache(),e.forEach((e=>{this.fontCache.set(e.fontKey,e)})),this.fonts=e)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(13);class i extends r.a{constructor(){super("Pool has been cleared, request is no longer valid."),this.name="ClearedPoolError"}}class o{constructor(e,t,n){this.available=new Array,this.taken=new Set,this.pendingPromises=new Array,this.provider=e,this.reset=t,this.maxSize=n}acquire(){return new Promise(((e,t)=>{let n=this.available.shift();!n&&this.taken.size<this.maxSize&&(n=this.provider()),n?(this.taken.add(n),e(n)):this.pendingPromises.push({resolve:e,reject:t})}))}release(e){if(this.taken.has(e)){this.reset(e);const t=this.pendingPromises.shift();t?t.resolve(e):(this.taken.delete(e),this.available.push(e))}}clear(){this.available.length=0,this.taken.clear(),this.pendingPromises.forEach((e=>{e.reject(new i)})),this.pendingPromises.length=0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{draw(e,t){const n=this.getNormalizedLineWidth(t);switch(t.style){case"dotted":const i=t.width>0?r.DOT_SPACING_FACTOR*n:t.width;this.drawDottedLine(e,t.x,t.y,t.isHorizontal,t.length,n,i,!t.isHorizontal,t.color);break;case"dashed":const o=t.isHorizontal?n+1:1;this.drawDashedLine(e,t.x,t.y,t.isHorizontal,t.length,n,r.COLOR_SEGMENT_FACTOR*n,r.TRANSPARENT_SEGMENT_FACTOR*n,o,t.color);break;default:this.drawSolidLine(e,t.x,t.y,t.isHorizontal,t.length,n,t.color)}}drawDottedLine(e,t,n,r,i,o,a,s,c){if(0===i||0===o||0===a)return!1;e.save();try{const u=s?i+2*o:i,l=a-o,d=(u-o)/(Math.max(2,Math.round((u+l)/(o+a)))-1),h=o/2,f=s?d-h:h;e.strokeStyle=c,e.lineCap="round",e.lineWidth=o,e.beginPath(),e.setLineDash([0,d]),r?(e.moveTo(t+f,n+h),e.lineTo(t+i,n+h)):(e.moveTo(t+h,n+f),e.lineTo(t+h,n+i)),e.stroke()}finally{e.restore()}return!0}drawSolidLine(e,t,n,r,i,o,a){if(0===i||0===o)return!1;e.save();try{e.lineCap="butt",e.lineWidth=Math.round(o),e.strokeStyle=a;const s=o/2;e.beginPath(),r?this.movetoAndRelativeLineTo(e,t,n+s,i,0):this.movetoAndRelativeLineTo(e,t+s,n,0,i),e.stroke()}finally{e.restore()}return!0}drawDashedLine(e,t,n,r,i,o,a,s,c,u){if(0===o||0===i||0===a||0===s)return!1;{const l=i-2*c;let d=0,h=0,f=0,p=0;if(l<0)d=i;else if(l<s)d=c+l;else if(0==c)if(l<s)d=c+l;else{const e=Math.floor((l+a)/(s+a)),t=e*s+(e-1)*a;d=c+(l-t)/2,h=c+(l-t+1)/2}else if(l<s+2)d=c+l;else{const e=c>0?l:l-2;if(e<=0)d=c+e;else{const t=Math.floor((e+a)/(s+a)),n=t*s+(t-1)*a;d=c+(e-n)/2,h=c+(e-n+1)/2}}i<=s+1?(d=i,h=0):d==a?d=0:f=s,p=i-d-h-f,e.lineCap="butt",e.strokeStyle=u,e.lineWidth=Math.max(1,Math.round(o));const g=[a,s];g[0]=a,g[1]=s;const m=o/2;return d>0&&(e.beginPath(),r?this.movetoAndRelativeLineTo(e,t,n+m,d,0):this.movetoAndRelativeLineTo(e,t+m,n,0,d),e.stroke()),p>0&&(e.beginPath(),e.setLineDash(g),r?this.movetoAndRelativeLineTo(e,t+d+f,n+m,p,0):this.movetoAndRelativeLineTo(e,t+m,n+d+f,0,p),e.stroke()),h>0&&(e.beginPath(),r?this.movetoAndRelativeLineTo(e,t+d+f+p,n+m,h,0):this.movetoAndRelativeLineTo(e,t+m,n+d+f+p,0,h),e.stroke()),!0}}movetoAndRelativeLineTo(e,t,n,r,i){e.moveTo(t,n),e.lineTo(t+r,n+i)}getNormalizedLineWidth(e){const t=e.width;return"dotted"===e.style||"dashed"===e.style?this.getDottedDashedLineWidth(t):t}getDottedDashedLineWidth(e){const t=Math.round(e);return 0!==t||this.epsilonEqual(0,t)?Math.max(1,t):1}epsilonEqual(e,t){return Math.abs(e-t)<1e-4}}r.DOT_SPACING_FACTOR=2,r.COLOR_SEGMENT_FACTOR=4,r.TRANSPARENT_SEGMENT_FACTOR=2},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(26),i=n(27),o=n(5),a=n(4);class s{constructor(e,t){this.lineRenderer=e,this.styleModifier=t,this.cornerRenderer=new r.a,this.sideRenderer=new i.a(e)}fillStroke(e,t,n,r,i,o,a,s){this.fill(e,t,i,o,s),this.strokeRectangle2(e,t,n,r,i,o,a)}strokeBasic(e,t,n,r){try{e.save(),e.strokeStyle=n;const i=a.a.round(t),{width:o,height:s}=a.a.getDimensions(i);this.lineRenderer.draw(e,{x:i.left,y:i.top,color:n,isHorizontal:!0,length:o,style:"solid",width:r}),this.lineRenderer.draw(e,{x:i.left,y:i.bottom-r,color:n,isHorizontal:!0,length:o,style:"solid",width:r}),this.lineRenderer.draw(e,{x:i.left,y:Math.floor(i.top+r),color:n,isHorizontal:!1,length:Math.ceil(s-2*r),style:"solid",width:r}),this.lineRenderer.draw(e,{x:i.right-r,y:Math.floor(i.top+r),color:n,isHorizontal:!1,length:Math.ceil(s-2*r),style:"solid",width:r})}finally{e.restore()}}strokeRectangle2(e,t,n,r,i,o,a){const s=[this.styleModifier.getLineWidthsFromStyle(n[0],r[0]),this.styleModifier.getLineWidthsFromStyle(n[1],r[1]),this.styleModifier.getLineWidthsFromStyle(n[2],r[2]),this.styleModifier.getLineWidthsFromStyle(n[3],r[3])],c=[...a],u=[...a],l=[0,0,0,0],d=[0,0,0,0];let h=!1;for(let e=0;e<4;++e)r[e]>0&&(this.getInternalRadius(e,s,i,o,l,d),this.getColors(e,n,a,c,u)),h=h||this.styleModifier.isStyleWithTwoLines(n[e]);if(this.stroke(e,t,n,r,i,o,c,s,!0),h){const r={left:t.left+s[1].externalLine+s[1].gap,top:t.top+s[0].externalLine+s[0].gap,right:t.right-s[3].externalLine-s[3].gap,bottom:t.bottom-s[2].externalLine-s[2].gap},i=[s[0].internalLine,s[1].internalLine,s[2].internalLine,s[3].internalLine];this.stroke(e,r,n,i,l,d,u,s,!1)}}getInternalRadius(e,t,n,r,i,o){const a=e<2?t[1].externalLine+t[1].gap:t[3].externalLine+t[3].gap,s=0==e||3==e?t[0].externalLine+t[0].gap:t[2].externalLine+t[2].gap;i[e]=Math.max(0,n[e]-a),o[e]=Math.max(0,r[e]-s)}getColors(e,t,n,r,i){const o=this.styleModifier.getColorModification(0,n[e]),a=this.styleModifier.getColorModification(1,n[e]);"inset"==t[e]?r[e]=e<2?a:o:"outset"==t[e]?r[e]=e<2?o:a:"groove"==t[e]?e<2?(r[e]=a,i[e]=o):(r[e]=o,i[e]=a):"ridge"==t[e]&&(e<2?(r[e]=o,i[e]=a):(r[e]=a,i[e]=o))}stroke(e,t,n,r,i,o,s,c,u){e.save();try{const l=a.a.round(t),d="unknown"==n[0]?0:r[0]/2,h="unknown"==n[1]?0:r[1]/2,f="unknown"==n[2]?0:r[2]/2,p="unknown"==n[3]?0:r[3]/2,g=new Array(4),m=new Array(4),v=new Array(4),y=new Array(4);y[0]=y[1]=y[2]=y[3]=!1,g[0]=0==i[0]?0:Math.max(i[0],r[1]),g[1]=0==i[1]?0:Math.max(i[1],r[1]),g[2]=0==i[2]?0:Math.max(i[2],r[3]),g[3]=0==i[3]?0:Math.max(i[3],r[3]),v[0]=Math.max(i[0],r[1]),v[1]=Math.max(i[1],r[1]),v[2]=Math.max(i[2],r[3]),v[3]=Math.max(i[3],r[3]),m[0]=Math.max(o[0],r[0]),m[1]=Math.max(o[1],r[2]),m[2]=Math.max(o[2],r[2]),m[3]=Math.max(o[3],r[0]);const b=u&&c[0].gap>0;b&&(e.save(),this.setRectContextClippingForExternalLine(e,0,t,c),e.clip()),d>0&&this.sideRenderer.drawSide(e,0,r,n,s,g,v,y,l,0,3),b&&e.restore();const w=u&&c[2].gap>0;w&&(e.save(),this.setRectContextClippingForExternalLine(e,2,t,c),e.clip()),f>0&&this.sideRenderer.drawSide(e,2,r,n,s,g,v,y,l,1,2),w&&e.restore();const E=u&&c[1].gap>0;E&&(e.save(),this.setRectContextClippingForExternalLine(e,1,t,c),e.clip()),h>0&&this.sideRenderer.drawSide(e,1,r,n,s,m,m,y,l,0,1),E&&e.restore();const S=u&&c[3].gap>0;let T,_,P,C,R,O;S&&(e.save(),this.setRectContextClippingForExternalLine(e,3,t,c),e.clip()),p>0&&this.sideRenderer.drawSide(e,3,r,n,s,m,m,y,l,3,2),S&&e.restore();for(let a=0;a<4;a++){const d=u&&c[a].gap>0;d&&this.clipCorner(e,a,t,c);const h=i[a],f=o[a];if(h+f>0||y[a]){P=a<2?r[1]:r[3],O=a<2?s[1]:s[3],T=a<2?l.left:l.right,C=0==a||3==a?r[0]:r[2],R=0==a||3==a?s[0]:s[2],_=0==a||3==a?l.top:l.bottom;const t=2==a||3==a?-1:1,i=1==a||2==a?-1:1;this.cornerRenderer.drawSolidCorner(e,{style:n[a],xBound:T,yBound:_,xRadius:h,yRadius:f,widthHorizontal:C,widthVertical:P,xFlip:t,yFlip:i,colorHorizontal:R,colorVertical:O})}d&&e.restore()}}finally{e.restore()}}clipCorner(e,t,n,r){switch(e.save(),t){case 0:this.setRectContextClippingForExternalLine(e,0,n,r),this.setRectContextClippingForExternalLine(e,1,n,r),e.clip();break;case 1:this.setRectContextClippingForExternalLine(e,1,n,r),this.setRectContextClippingForExternalLine(e,2,n,r),e.clip();break;case 2:this.setRectContextClippingForExternalLine(e,3,n,r),this.setRectContextClippingForExternalLine(e,2,n,r),e.clip();break;case 3:this.setRectContextClippingForExternalLine(e,0,n,r),this.setRectContextClippingForExternalLine(e,3,n,r),e.clip();break;default:throw new Error("Error trying to clip incorrect corner "+t)}}setRectContextClippingForExternalLine(e,t,n,r){switch(t){case 0:e.rect(n.left,n.top,n.right-n.left,r[0].externalLine);break;case 1:e.rect(n.left,n.top,r[1].externalLine,n.bottom-n.top);break;case 2:e.rect(n.left,n.bottom-r[2].externalLine,n.right-n.left,r[2].externalLine);break;case 3:e.rect(n.right-r[3].externalLine,n.top,r[3].externalLine,n.bottom-n.top);break;default:throw new Error("Error setting context to clip external line "+t)}}fill(e,t,n,r,i){if(i){e.save();try{const s=a.a.round(t),c=new o.a;c.moveTo(s.left+n[0],s.top),c.addEllipticalArc(s.left+n[0],s.top+r[0],n[0],r[0],270,180,!0),c.relativeLineTo(0,s.bottom-s.top-r[0]-r[1]),c.addEllipticalArc(s.left+n[1],s.bottom-r[1],n[1],r[1],180,90,!0),c.relativeLineTo(s.right-s.left-n[1]-n[2],0),c.addEllipticalArc(s.right-n[2],s.bottom-r[2],n[2],r[2],90,0,!0),c.relativeLineTo(0,-(s.bottom-s.top-r[2]-r[3])),c.addEllipticalArc(s.right-n[3],s.top+r[3],n[3],r[3],0,-90,!0),c.relativeLineTo(-(s.right-s.left-n[0]-n[3]),0),e.lineCap="butt",e.fillStyle=i,e.fill(c.build())}finally{e.restore()}}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(5);class i{drawSolidCorner(e,t){const n=t.xFlip,i=t.yFlip,o=t.xRadius,a=t.yRadius,s=t.xBound,c=t.yBound;let u=i>0?270:90;e.lineCap="butt",e.fillStyle=t.colorHorizontal,e.beginPath();const l=o-t.widthVertical,d=a-t.widthHorizontal;let h=n*i<0,f=45;a>0&&(f=180*Math.atan(o/a)/Math.PI);let p=45;d>0&&(p=180*Math.atan(l/d)/Math.PI);let g=new r.a;l>0&&d>0?g.addEllipticalArc(s+o*n,c+a*i,l,d,u-p*n*i,u,h):(g.moveTo(s+t.widthVertical*n,c+t.widthHorizontal*i),l>0&&g.relativeLineTo(l*n,0));const m=Math.max(o,t.widthVertical);g.lineTo(s+m*n,c+t.widthHorizontal*i),g.relativeLineTo(0,-t.widthHorizontal*i),m>o&&g.relativeLineTo(-1*(m-o)*n,0),o>0&&a>0?g.addEllipticalArc(s+o*n,c+a*i,o,a,u,u-f*n*i,!h):g.lineTo(s,c),t.colorHorizontal!=t.colorVertical&&(g.closePath(),e.fill(g.build()),g=new r.a,e.lineCap="butt",e.fillStyle=t.colorVertical,e.beginPath()),u=n>0?180:0,h=n*i>0,l>0&&d>0?g.addEllipticalArc(s+o*n,c+a*i,l,d,u+(90-p)*n*i,u,h):(g.moveTo(s+t.widthVertical*n,c+t.widthHorizontal*i),l>0&&g.relativeLineTo(l*n,0));const v=Math.max(a,t.widthHorizontal);g.lineTo(s+t.widthVertical*n,c+v*i),g.relativeLineTo(-t.widthVertical*n,0),v>a&&g.relativeLineTo(0,-1*(v-a)*i),o>0&&a>0?g.addEllipticalArc(s+o*n,c+a*i,o,a,u,u+(90-f)*n*i,!h):g.lineTo(s,c),g.closePath(),e.fill(g.build())}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(8);class i{constructor(e){this.lineRenderer=e}drawSide(e,t,n,r,i,o,a,s,c,u,l){const d=n[t],h=r[t],f=i[t];let p,g;"dashed"===h||"dotted"===h?(p=o[u],g=p+o[l]):(p=a[u],g=p+a[l],s[t]=!0);const m=this.getLinesPropertiesFromBorderStyle(t,c,h,d,f,p,g);for(let t=0;t<m.length;++t)this.lineRenderer.draw(e,m[t])}getLinesPropertiesFromBorderStyle(e,t,n,i,o,a,s){const c=new Array,u={side:e,rectBounds:t,style:n,width:i,color:o,offSet:a,lengthAdjustment:s};let l,d,h,f;switch(e){case r.a.Top:l=!0,d=u.rectBounds.left+u.offSet,h=u.rectBounds.top,f=u.rectBounds.right-u.rectBounds.left-u.lengthAdjustment;break;case r.a.Left:l=!1,d=u.rectBounds.left,h=u.rectBounds.top+u.offSet,f=u.rectBounds.bottom-u.rectBounds.top-u.lengthAdjustment;break;case r.a.Bottom:l=!0,d=u.rectBounds.left+u.offSet,h=u.rectBounds.bottom-u.width,f=u.rectBounds.right-u.rectBounds.left-u.lengthAdjustment;break;case r.a.Right:l=!1,d=u.rectBounds.right-u.width,h=u.rectBounds.top+u.offSet,f=u.rectBounds.bottom-u.rectBounds.top-u.lengthAdjustment;break;default:throw new Error("Error getting side properties")}return c.push({isHorizontal:l,width:u.width,style:u.style,color:u.color,x:d,y:h,length:f}),c}}},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(1),i=n(3);class o{constructor(e){this.pixelRatio=e}static fromDocument(){const e=r.a.getPixelRatio(document.createElement("canvas"));return new o(e)}static withPixelRatio(e){return new o(e)}buildContext(e,t){const n=document.createElement("canvas");n.width=e*this.pixelRatio,n.height=t*this.pixelRatio,n.style.width=e+"px",n.style.height=t+"px";const r=n.getContext("2d",{alpha:!1});return Object(i.b)(r),r.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),r}buildOptimizedContext(e,t){if("undefined"==typeof OffscreenCanvas){const n=this.buildContext(e,t);return Object(i.b)(n),n}{const n=new OffscreenCanvas(e*this.pixelRatio,t*this.pixelRatio).getContext("2d",{alpha:!1});return Object(i.b)(n),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),n}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(7),i=n(9),o=n(10),a=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class s{constructor(e="localhost",t=8080){this.hostName=e,this.port=t}get(e,t,n,i){return a(this,void 0,void 0,(function*(){return n.type===r.b.Position?this.getByPositionId(e,t,n,i):this.getByPageIndex(e,t,n,i)}))}getByPageIndex(e,t,n,s){return a(this,void 0,void 0,(function*(){const t=new i.a(e,this.hostName,this.port);yield t.render(Object.assign(Object.assign({},s),{pageCount:n.direction===r.a.Backward?-n.pageCount:n.pageCount,pageIndex:n.pageIndex})),t.gotoPage(n.pageIndex);const a=new Array;for(let e=0;e<n.pageCount;e++){const e=t.getPage(),n=t.getLayoutPage(),r=t.getTokens(),i=t.getPanels();a.push(new o.a(t,e,n,r,i)),t.nextPage()}return a}))}getByPositionId(e,t,n,o){return a(this,void 0,void 0,(function*(){const t=new i.a(e,this.hostName,this.port);return yield t.render(Object.assign(Object.assign({},o),{pageCount:n.direction===r.a.Backward?-n.pageCount:n.pageCount,positionId:n.startPositionId})),s.adapt(n,t)}))}static adapt(e,t){const n=new Array,i=e.direction===r.a.Backward?e.skipPageCount-e.pageCount:e.skipPageCount;for(let e=0;e<i;e++)t.nextPage();for(let r=0;r<e.pageCount;r++){const e=t.getPage(),r=t.getLayoutPage(),i=t.getTokens(),a=t.getPanels();n.push(new o.a(t,e,r,i,a)),t.nextPage()}return n}}},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{recordTimeMetrics(e,t){console.log("Emit time metric: "+e+": "+t+"ms")}recordCountMetrics(e,t){console.log("Emit count metric: "+e+": "+t)}}},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2);class i{constructor(e){this.metricsService=e}asyncExecuteMetrics(e,t){return function(e,t,n,r){return new(n||(n=Promise))((function(t,i){function o(e){try{s(r.next(e))}catch(e){i(e)}}function a(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}s((r=r.apply(e,[])).next())}))}(this,0,void 0,(function*(){const n=new Date;let i;try{return i=yield t(),i}catch(t){throw this.metricsService.recordCountMetrics(`${e}:${r.a.ERROR}`,1),t}finally{this.metricsService.recordTimeMetrics(`${e}:${r.a.EXECUTION}`,(new Date).getTime()-n.getTime()),i&&i instanceof Response&&this.handleNetworkErrors(e,i)}}))}syncExecuteMetrics(e,t){const n=new Date;let i;try{return i=t(),i}catch(t){throw this.recordCountMetrics(`${e}:${r.a.ERROR}`,1),t}finally{this.recordTimeMetrics(`${e}:${r.a.EXECUTION}`,(new Date).getTime()-n.getTime()),i&&i instanceof Response&&this.handleNetworkErrors(e,i)}}recordCountMetrics(e,t){this.metricsService.recordCountMetrics(e,t)}recordTimeMetrics(e,t){this.metricsService.recordTimeMetrics(e,t)}handleNetworkErrors(e,t){if(t.status&&!t.ok)switch(String(t.status)){case r.a.NETWORK_ERROR_BAD_REQUEST:this.metricsService.recordCountMetrics(`${e}:${r.a.ERROR}:${r.a.NETWORK_ERROR_BAD_REQUEST}`,1);break;case r.a.NETWORK_ERROR_NOT_FOUND:this.metricsService.recordCountMetrics(`${e}:${r.a.ERROR}:${r.a.NETWORK_ERROR_NOT_FOUND}`,1);break;case r.a.NETWORK_ERROR_SERVER_ERROR:this.metricsService.recordCountMetrics(`${e}:${r.a.ERROR}:${r.a.NETWORK_ERROR_SERVER_ERROR}`,1)}}}},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),i=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class o{constructor(){this.glyphCache=new Map,this.pixelRatio=2}clearCache(){this.glyphCache.clear()}setupApi(e){return{addFont:e.cwrap("addFont","boolean",["string","number","number"]),selectFont:e.cwrap("selectFont","boolean",["string"]),renderGlyph:e.cwrap("renderGlyph","boolean",["number"]),getGlyphRows:e.cwrap("getGlyphRows","number",[]),getGlyphWidth:e.cwrap("getGlyphWidth","number",[]),getGlyphPitch:e.cwrap("getGlyphPitch","number",[]),getGlyphFormat:e.cwrap("getGlyphFormat","number",[]),getGlyphBitmapLeft:e.cwrap("getGlyphBitmapLeft","number",[]),getGlyphBitmapTop:e.cwrap("getGlyphBitmapTop","number",[]),getGlyphBitmap:e.cwrap("getGlyphBitmap","number",[]),clearAllFonts:e.cwrap("clearAllFonts","number",[])}}init(){return this.loadingPromise||(this.loadingPromise=new Promise(((e,t)=>{try{this.wasmModule={},window.Module=this.wasmModule,this.wasmModule.onRuntimeInitialized=()=>{this.freeTypeApi=this.setupApi(this.wasmModule),e()};const t=document.createElement("script");t.type="text/javascript",t.src="freetype.js",document.head.append(t)}catch(e){t(e)}})).then((()=>this.loadFont()))),this.loadingPromise}loadFont(){return fetch("/Bookerly-Regular.ttf").then((e=>e.arrayBuffer())).then((e=>{const t=new Uint8Array(e),n=this.wasmModule._malloc(t.byteLength);if(this.wasmModule.HEAPU8.set(t,n),!this.freeTypeApi.addFont("Bookerly",n,t.byteLength))throw new Error('Failed to load font "Bookerly"');console.log("Font Bookerly loaded")}))}copyFreeTypeGlyphToCanvas(e,t,n,r){const i=this.getScratchCanvas(t,n),o=i.getContext("2d"),a=o.getImageData(0,0,t,n);for(let i=0;i<n;i++)for(let n=0;n<t;n++){const o=4*(i*t+n);a.data[o+0]=0,a.data[o+1]=0,a.data[o+2]=0,a.data[o+3]=Math.round((s=e[i*r+n]/255,Math.pow((1-s)*Math.pow(0,2)+s*Math.pow(255,2),.5)))}var s;return o.putImageData(a,0,0),i}render(e,t,n,o,a){return i(this,void 0,void 0,(function*(){return yield this.renderGlyph(e.context,Number(a.glyphId),a.fontSize,a.x,a.y),new r.a(0,0,0,0)}))}renderGlyph(e,t,n,r,o){return i(this,void 0,void 0,(function*(){this.freeTypeApi.selectFont("Bookerly");let i=Math.floor(r);const a=r-i;let s=Math.round(4*a),c=s/4;4==s&&(i++,s=0,c=0);let u=this.glyphCache.get(t);if(!u){if(document.getElementById("testdiv").offsetWidth,!this.freeTypeApi.renderGlyph(t,this.pixelRatio*n,440*this.pixelRatio,c,0))throw new Error("RenderGlyph failed: GID = "+t);const e=this.freeTypeApi.getGlyphRows(),r=this.freeTypeApi.getGlyphWidth(),i=this.freeTypeApi.getGlyphPitch(),o=this.freeTypeApi.getGlyphBitmapLeft(),a=this.freeTypeApi.getGlyphBitmapTop(),s=this.freeTypeApi.getGlyphBitmap();if(0==e||0==r)u={bitmap:void 0,bitmapLeft:0,bitmapTop:0,rows:0,width:0};else{const t=new Uint8Array(this.wasmModule.HEAPU8.subarray(s,s+i*e));u={bitmap:yield this.copyFreeTypeGlyphToCanvas(t,r,e,i),bitmapLeft:o/this.pixelRatio,bitmapTop:a/this.pixelRatio,rows:e/this.pixelRatio,width:r/this.pixelRatio}}this.glyphCache.set(t,u)}u&&u.bitmap&&e.drawImage(u.bitmap,i+u.bitmapLeft,Math.round(o)-u.bitmapTop,u.width,u.rows)}))}getScratchCanvas(e,t){const n=document.createElement("canvas");return n.width=e,n.height=t,n.style.width=e+"px",n.style.height=t+"px",n.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),n}}},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1),i=n(23),o=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class a{constructor(e){this.options=e;const t=null!=e.canvasPoolSize&&e.canvasPoolSize>0?e.canvasPoolSize:a.MAX_POOL_SIZE;this.contextPool=new i.b((()=>{const e=this.options.canvasService.buildContext(this.options.pageWidth,this.options.pageHeight);return e.getImageData(0,0,1,1),e}),(e=>e.clearRect(0,0,e.canvas.width,e.canvas.height)),t)}updateSurfaceOptions(e){this.options.pageWidth==e.pageWidth&&this.options.pageHeight==e.pageHeight||this.contextPool.clear(),this.options=Object.assign(Object.assign({},this.options),e)}render(e){return o(this,void 0,void 0,(function*(){return this.renderInMainThread(e)}))}renderInMainThread(e){return o(this,void 0,void 0,(function*(){const t=yield this.contextPool.acquire();try{const n={context:t,bookProvider:e},i=yield this.options.pageRenderer.render(n);let o=this.options.pageHeight;if(1===this.options.navigationMode){const t=i.rect;o=Math.ceil(t.bottom),(yield e.getPage()).height=o}const a=yield e.getLayoutPage();this.adjustColumnRects(a.children,0);const s=this.createPageContainer(t.canvas.height,i.pageFillColor);if(this.options.mountPageCanvas)s.appendChild(t.canvas),this.convertCanvasInBackground(t,o);else{const e=yield r.a.canvasToImage(t.canvas,this.options.pageWidth,o);s.appendChild(e),this.contextPool.release(t)}return Object.assign(Object.assign({},i),{pageElement:s})}catch(e){throw console.error("An error occurred when trying to render the page",e),this.contextPool.release(t),e}}))}createPageContainer(e,t){const n=document.createElement("div");return n.className=e>=this.options.pageHeight?"kg-full-page-img":"kg-short-page-img",n.dataset.backgroundColor=t,n}convertCanvasInBackground(e,t){setTimeout((()=>o(this,void 0,void 0,(function*(){try{const n=yield r.a.canvasToImage(e.canvas,this.options.pageWidth,t);try{yield n.decode()}catch(e){console.error("image cannot be decoded",e)}e.canvas.replaceWith(n)}catch(e){console.error("An error occurred when converting the canvas into image",e)}finally{this.contextPool.release(e)}}))))}adjustColumnRects(e,t){for(let n=0;n<e.length;n++){const r=e[n];"column"===r.type&&(e[n]=this.adjustColumnRect(r,t))}}adjustColumnRect(e,t){const n=e.children;n&&this.adjustColumnRects(n,t);const r=Object.assign(Object.assign({},e.dimensions),{top:e.dimensions.top-t});return Object.assign(Object.assign({},e),{rect:r,children:n})}}a.MAX_POOL_SIZE=4},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(11),i=n(18),o=n(19),a=n(14),s=n(22),c=n(24),u=n(25),l=n(21),d=n(15);class h{static build(e,t){const n=new c.a,h=new d.a,f=new u.a(n,h),p=new a.a(Object.assign(Object.assign({},e),{rectRenderer:f,lineRenderer:n,styleModifier:h}),t),g=new i.a(e),m=new s.a(Object.assign(Object.assign({},e),{fontRender:g,decorationRenderer:p})),v=new o.a(Object.assign(Object.assign({},e),{rectRenderer:f}),t),y={run:m,image:v},b=new r.a({nodeRenderers:y,decorationRender:p},t),w={run:m,image:v,kvg:new l.a(b)};return new r.a({nodeRenderers:w,decorationRender:p},t)}}},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{static getHeight(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight)}static getWidth(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth)}static determineDPI(){const e=document.createElement("div"),t=e.style;t.height="1in",t.left="-100%",t.position="absolute",t.top="-100%",t.height="1in",t.width="1in",document.body.append(e);const n=e.offsetHeight;return e.remove(),n}}},function(e,t,n){"use strict";n.r(t);var r=n(28);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);var o=n(29);for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var a=n(1);n.d(t,"TransformIndex",(function(){return a.b})),n.d(t,"CanvasUtils",(function(){return a.a}));var s=n(30);n.d(t,"DefaultCanvasService",(function(){return s.a}));var c=n(7);n.d(t,"Direction",(function(){return c.a})),n.d(t,"NavigationType",(function(){return c.b}));var u=n(9);n.d(t,"DevBookDataLoader",(function(){return u.a}));var l=n(10);n.d(t,"DevBookProviderAdapter",(function(){return l.a}));var d=n(31);n.d(t,"DevBookProviderFactory",(function(){return d.a}));var h=n(12);n.d(t,"ImageUnscrambler",(function(){return h.a}));var f=n(32);for(var i in f)["default","TransformIndex","CanvasUtils","DefaultCanvasService","Direction","NavigationType","DevBookDataLoader","DevBookProviderAdapter","DevBookProviderFactory","ImageUnscrambler"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return f[e]}))}(i);var p=n(13);n.d(t,"InformativeError",(function(){return p.a}));var g=n(33);n.d(t,"ConsoleMetricsService",(function(){return g.a}));var m=n(2);n.d(t,"MetricsConstants",(function(){return m.a}));var v=n(34);for(var i in v)["default","TransformIndex","CanvasUtils","DefaultCanvasService","Direction","NavigationType","DevBookDataLoader","DevBookProviderAdapter","DevBookProviderFactory","ImageUnscrambler","InformativeError","ConsoleMetricsService","MetricsConstants"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return v[e]}))}(i);var y=n(35);n.d(t,"MetricsUtil",(function(){return y.a}));var b=n(14);n.d(t,"DecorationRenderer",(function(){return b.a}));var w=n(15);n.d(t,"DecorationStyleModifier",(function(){return w.a}));var E=n(0);n.d(t,"ContentBoundingBox",(function(){return E.a}));var S=n(16);n.d(t,"CanvasRenderingContext2DWrapper",(function(){return S.a}));var T=n(17);n.d(t,"PathBuilderContext2D",(function(){return T.a}));var _=n(4);n.d(t,"RectUtils",(function(){return _.a}));var P=n(36);for(var i in P)["default","TransformIndex","CanvasUtils","DefaultCanvasService","Direction","NavigationType","DevBookDataLoader","DevBookProviderAdapter","DevBookProviderFactory","ImageUnscrambler","InformativeError","ConsoleMetricsService","MetricsConstants","MetricsUtil","DecorationRenderer","DecorationStyleModifier","ContentBoundingBox","CanvasRenderingContext2DWrapper","PathBuilderContext2D","RectUtils"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return P[e]}))}(i);var C=n(5);n.d(t,"SvgBuilder",(function(){return C.a}));var R=n(18);n.d(t,"DefaultGlyphRenderer",(function(){return R.a}));var O=n(37);for(var i in O)["default","TransformIndex","CanvasUtils","DefaultCanvasService","Direction","NavigationType","DevBookDataLoader","DevBookProviderAdapter","DevBookProviderFactory","ImageUnscrambler","InformativeError","ConsoleMetricsService","MetricsConstants","MetricsUtil","DecorationRenderer","DecorationStyleModifier","ContentBoundingBox","CanvasRenderingContext2DWrapper","PathBuilderContext2D","RectUtils","SvgBuilder","DefaultGlyphRenderer"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return O[e]}))}(i);var k=n(38);n.d(t,"FreeTypeGlyphRenderer",(function(){return k.a}));var I=n(39);for(var i in I)["default","TransformIndex","CanvasUtils","DefaultCanvasService","Direction","NavigationType","DevBookDataLoader","DevBookProviderAdapter","DevBookProviderFactory","ImageUnscrambler","InformativeError","ConsoleMetricsService","MetricsConstants","MetricsUtil","DecorationRenderer","DecorationStyleModifier","ContentBoundingBox","CanvasRenderingContext2DWrapper","PathBuilderContext2D","RectUtils","SvgBuilder","DefaultGlyphRenderer","FreeTypeGlyphRenderer"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return I[e]}))}(i);var x=n(40);for(var i in x)["default","TransformIndex","CanvasUtils","DefaultCanvasService","Direction","NavigationType","DevBookDataLoader","DevBookProviderAdapter","DevBookProviderFactory","ImageUnscrambler","InformativeError","ConsoleMetricsService","MetricsConstants","MetricsUtil","DecorationRenderer","DecorationStyleModifier","ContentBoundingBox","CanvasRenderingContext2DWrapper","PathBuilderContext2D","RectUtils","SvgBuilder","DefaultGlyphRenderer","FreeTypeGlyphRenderer"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return x[e]}))}(i);var A=n(19);n.d(t,"ImageRenderer",(function(){return A.a}));var L=n(21);n.d(t,"KVGRenderer",(function(){return L.a}));var M=n(41);for(var i in M)["default","TransformIndex","CanvasUtils","DefaultCanvasService","Direction","NavigationType","DevBookDataLoader","DevBookProviderAdapter","DevBookProviderFactory","ImageUnscrambler","InformativeError","ConsoleMetricsService","MetricsConstants","MetricsUtil","DecorationRenderer","DecorationStyleModifier","ContentBoundingBox","CanvasRenderingContext2DWrapper","PathBuilderContext2D","RectUtils","SvgBuilder","DefaultGlyphRenderer","FreeTypeGlyphRenderer","ImageRenderer","KVGRenderer"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return M[e]}))}(i);var N=n(22);n.d(t,"RunRenderer",(function(){return N.a}));var D=n(42);n.d(t,"PageImageRenderer",(function(){return D.a}));var F=n(43);n.d(t,"PageRendererFactory",(function(){return F.a}));var B=n(11);n.d(t,"PageRenderer",(function(){return B.a}));var U=n(44);for(var i in U)["default","TransformIndex","CanvasUtils","DefaultCanvasService","Direction","NavigationType","DevBookDataLoader","DevBookProviderAdapter","DevBookProviderFactory","ImageUnscrambler","InformativeError","ConsoleMetricsService","MetricsConstants","MetricsUtil","DecorationRenderer","DecorationStyleModifier","ContentBoundingBox","CanvasRenderingContext2DWrapper","PathBuilderContext2D","RectUtils","SvgBuilder","DefaultGlyphRenderer","FreeTypeGlyphRenderer","ImageRenderer","KVGRenderer","RunRenderer","PageImageRenderer","PageRendererFactory","PageRenderer"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return U[e]}))}(i);var j=n(24);n.d(t,"LineRenderer",(function(){return j.a}));var H=n(45);for(var i in H)["default","TransformIndex","CanvasUtils","DefaultCanvasService","Direction","NavigationType","DevBookDataLoader","DevBookProviderAdapter","DevBookProviderFactory","ImageUnscrambler","InformativeError","ConsoleMetricsService","MetricsConstants","MetricsUtil","DecorationRenderer","DecorationStyleModifier","ContentBoundingBox","CanvasRenderingContext2DWrapper","PathBuilderContext2D","RectUtils","SvgBuilder","DefaultGlyphRenderer","FreeTypeGlyphRenderer","ImageRenderer","KVGRenderer","RunRenderer","PageImageRenderer","PageRendererFactory","PageRenderer","LineRenderer"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return H[e]}))}(i);var z=n(26);n.d(t,"RectCornerRenderer",(function(){return z.a}));var V=n(25);n.d(t,"RectRenderer",(function(){return V.a}));var G=n(8);n.d(t,"SidePosition",(function(){return G.a}));var W=n(27);n.d(t,"RectSideRenderer",(function(){return W.a}));var q=n(20);n.d(t,"shouldTriggerAntiMoireFilter",(function(){return q.a}));var K=n(6);n.d(t,"HSVtoRGB",(function(){return K.a})),n.d(t,"RGBtoHSV",(function(){return K.d})),n.d(t,"HexToRGBA",(function(){return K.b})),n.d(t,"RGBAToHexA",(function(){return K.c}));var Y=n(3);n.d(t,"assertIsDefined",(function(){return Y.b})),n.d(t,"assert",(function(){return Y.a}));var X=n(23);n.d(t,"ClearedPoolError",(function(){return X.a})),n.d(t,"Pool",(function(){return X.b}));var Z=n(46);n.d(t,"WindowUtils",(function(){return Z.a}))},function(e,t){null==CanvasRenderingContext2D.prototype.ellipse&&(CanvasRenderingContext2D.prototype.ellipse=function(e,t,n,r,i,o,a,s){this.save(),this.translate(e,t),this.rotate(i),this.scale(n,r),this.arc(0,0,1,o,a,s),this.restore()}),"function"==typeof Path2D&&"function"==typeof(new Path2D).addPath||function(){function e(e){if(this.ops_=[],null!=e)if("string"==typeof e)try{this.ops_=parser.parse(e)}catch(e){}else{if(!e.hasOwnProperty("ops_"))throw"Error: "+typeof e+"is not a valid argument to Path";this.ops_=e.ops_.slice(0)}}parser=function(){function e(e,t,n,r,i,o){this.message=e,this.expected=t,this.found=n,this.offset=r,this.line=i,this.column=o,this.name="SyntaxError"}return function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(e,Error),{SyntaxError:e,parse:function(t){var n,r=arguments.length>1?arguments[1]:{},i={},o={svg_path:we},a=we,s=i,c=null,u=function(e){return ct},l=/^[Mm]/,d={type:"class",value:"[Mm]",description:"[Mm]"},h=function(e,t){var n=e;ut&&(n="M",ut=!1),ct.push({type:"moveTo",args:ht(n,t[0])});for(var r=1;r<t.length;r++)ct.push({type:"lineTo",args:ht(e,t[r])})},f=function(e,t){return vt(e,t)},p=/^[Zz]/,g={type:"class",value:"[Zz]",description:"[Zz]"},m=function(){ct.push({type:"closePath",args:[]})},v=/^[Ll]/,y={type:"class",value:"[Ll]",description:"[Ll]"},b=function(e,t){for(var n=0;n<t.length;n++)ct.push({type:"lineTo",args:ht(e,t[n])})},w=/^[Hh]/,E={type:"class",value:"[Hh]",description:"[Hh]"},S=function(e,t){for(var n=0;n<t.length;n++)ct.push({type:"lineTo",args:gt(e,t[n])})},T=/^[Vv]/,_={type:"class",value:"[Vv]",description:"[Vv]"},P=function(e,t){for(var n=0;n<t.length;n++)ct.push({type:"lineTo",args:mt(e,t[n])})},C=/^[Cc]/,R={type:"class",value:"[Cc]",description:"[Cc]"},O=function(e,t){for(var n=0;n<t.length;n++)ct.push({type:"bezierCurveTo",args:ft(e,t[n])})},k=function(e,t,n){return e.concat(t,n)},I=/^[Ss]/,x={type:"class",value:"[Ss]",description:"[Ss]"},A=function(e,t){for(var n=0;n<t.length;n++)ct.push({type:"bezierCurveTo",args:pt().concat(ft(e,t[n]))})},L=function(e,t){return e.concat(t)},M=/^[Qq]/,N={type:"class",value:"[Qq]",description:"[Qq]"},D=function(e,t){for(var n=0;n<t.length;n++)ct.push({type:"quadraticCurveTo",args:ft(e,t[n])})},F=/^[Tt]/,B={type:"class",value:"[Tt]",description:"[Tt]"},U=function(e,t){for(var n=0;n<t.length;n++){var r=pt();ct.push({type:"quadraticCurveTo",args:r.concat(ft(e,t[n]))}),st=r.slice(0)}},j=/^[Aa]/,H={type:"class",value:"[Aa]",description:"[Aa]"},z=function(e,t){for(var n=0;n<t.length;n++){var r=[at.slice()],i=[ht(e,t[n].slice(-2))];absArgs=r.concat(t[n].slice(0,-2),i),It.apply(this,absArgs)}},V=function(e,t,n,r,i,o){return[parseFloat(e),parseFloat(t),parseFloat(dt(n).join("")),parseInt(r),parseInt(i),o[0],o[1]]},G=function(e,t){return[e,t]},W=function(e){return parseFloat(dt(e).join(""))},q="0",K={type:"literal",value:"0",description:'"0"'},Y="1",X={type:"literal",value:"1",description:'"1"'},Z=",",$={type:"literal",value:",",description:'","'},J=".",Q={type:"literal",value:".",description:'"."'},ee=/^[eE]/,te={type:"class",value:"[eE]",description:"[eE]"},ne="+",re={type:"literal",value:"+",description:'"+"'},ie="-",oe={type:"literal",value:"-",description:'"-"'},ae=/^[0-9]/,se={type:"class",value:"[0-9]",description:"[0-9]"},ce=function(e){return e.join("")},ue=/^[ \t\n\r]/,le={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},de=0,he=0,fe={line:1,column:1,seenCR:!1},pe=0,ge=[],me=0;if("startRule"in r){if(!(r.startRule in o))throw new Error("Can't start parsing from rule \""+r.startRule+'".');a=o[r.startRule]}function ve(e){return he!==e&&(he>e&&(he=0,fe={line:1,column:1,seenCR:!1}),function(e,n,r){var i,o;for(i=n;i<r;i++)"\n"===(o=t.charAt(i))?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}(fe,he,e),he=e),fe}function ye(e){de<pe||(de>pe&&(pe=de,ge=[]),ge.push(e))}function be(n,r,i){var o=ve(i),a=i<t.length?t.charAt(i):null;return null!==r&&function(e){var t=1;for(e.sort((function(e,t){return e.description<t.description?-1:e.description>t.description?1:0}));t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(r),new e(null!==n?n:function(e,t){var n,r=new Array(e.length);for(n=0;n<e.length;n++)r[n]=e[n].description;return"Expected "+(e.length>1?r.slice(0,-1).join(", ")+" or "+r[e.length-1]:r[0])+" but "+(t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(e){return"\\x0"+t(e)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(e){return"\\x"+t(e)})).replace(/[\u0180-\u0FFF]/g,(function(e){return"\\u0"+t(e)})).replace(/[\u1080-\uFFFF]/g,(function(e){return"\\u"+t(e)}))}(t)+'"':"end of input")+" found."}(r,a),r,a,i,o.line,o.column)}function we(){var e,t,n,r,o;for(e=de,t=[],n=ot();n!==i;)t.push(n),n=ot();if(t!==i)if((n=Ee())===i&&(n=c),n!==i){for(r=[],o=ot();o!==i;)r.push(o),o=ot();r!==i?e=t=u(n):(de=e,e=s)}else de=e,e=s;else de=e,e=s;return e}function Ee(){var e,t,n,r,o;if(e=de,(t=Se())!==i){for(n=de,r=[],o=ot();o!==i;)r.push(o),o=ot();r!==i&&(o=Ee())!==i?n=r=[r,o]:(de=n,n=s),n===i&&(n=c),n!==i?e=t=[t,n]:(de=e,e=s)}else de=e,e=s;return e}function Se(){var e,t,n,r,o;if(e=de,(t=Pe())!==i){for(n=de,r=[],o=ot();o!==i;)r.push(o),o=ot();r!==i&&(o=Te())!==i?n=r=[r,o]:(de=n,n=s),n===i&&(n=c),n!==i?e=t=[t,n]:(de=e,e=s)}else de=e,e=s;return e}function Te(){var e,t,n,r,o;if(e=de,(t=_e())!==i){for(n=de,r=[],o=ot();o!==i;)r.push(o),o=ot();r!==i&&(o=Te())!==i?n=r=[r,o]:(de=n,n=s),n===i&&(n=c),n!==i?e=t=[t,n]:(de=e,e=s)}else de=e,e=s;return e}function _e(){var e;return(e=Re())===i&&(e=Oe())===i&&(e=Ie())===i&&(e=Ae())===i&&(e=Le())===i&&(e=De())===i&&(e=Ue())===i&&(e=ze())===i&&(e=Ge()),e}function Pe(){var e,n,r,o;if(e=de,l.test(t.charAt(de))?(n=t.charAt(de),de++):(n=i,0===me&&ye(d)),n!==i){for(r=[],o=ot();o!==i;)r.push(o),o=ot();r!==i&&(o=Ce())!==i?e=n=h(n,o):(de=e,e=s)}else de=e,e=s;return e}function Ce(){var e,t,n,r,o;return e=de,(t=Ke())!==i?(n=de,(r=Je())===i&&(r=c),r!==i&&(o=ke())!==i?n=r=[r,o]:(de=n,n=s),n===i&&(n=c),n!==i?e=t=f(t,n):(de=e,e=s)):(de=e,e=s),e}function Re(){var e;return p.test(t.charAt(de))?(e=t.charAt(de),de++):(e=i,0===me&&ye(g)),e!==i&&(e=m()),e}function Oe(){var e,n,r,o;if(e=de,v.test(t.charAt(de))?(n=t.charAt(de),de++):(n=i,0===me&&ye(y)),n!==i){for(r=[],o=ot();o!==i;)r.push(o),o=ot();r!==i&&(o=ke())!==i?e=n=b(n,o):(de=e,e=s)}else de=e,e=s;return e}function ke(){var e,t,n,r,o;return e=de,(t=Ke())!==i?(n=de,(r=Je())===i&&(r=c),r!==i&&(o=ke())!==i?n=r=[r,o]:(de=n,n=s),n===i&&(n=c),n!==i?e=t=f(t,n):(de=e,e=s)):(de=e,e=s),e}function Ie(){var e,n,r,o;if(e=de,w.test(t.charAt(de))?(n=t.charAt(de),de++):(n=i,0===me&&ye(E)),n!==i){for(r=[],o=ot();o!==i;)r.push(o),o=ot();r!==i&&(o=xe())!==i?e=n=S(n,o):(de=e,e=s)}else de=e,e=s;return e}function xe(){var e,t,n,r,o;return e=de,(t=Ye())!==i?(n=de,(r=Je())===i&&(r=c),r!==i&&(o=xe())!==i?n=r=[r,o]:(de=n,n=s),n===i&&(n=c),n!==i?e=t=f(t,n):(de=e,e=s)):(de=e,e=s),e}function Ae(){var e,n,r,o;if(e=de,T.test(t.charAt(de))?(n=t.charAt(de),de++):(n=i,0===me&&ye(_)),n!==i){for(r=[],o=ot();o!==i;)r.push(o),o=ot();r!==i&&(o=xe())!==i?e=n=P(n,o):(de=e,e=s)}else de=e,e=s;return e}function Le(){var e,n,r,o;if(e=de,C.test(t.charAt(de))?(n=t.charAt(de),de++):(n=i,0===me&&ye(R)),n!==i){for(r=[],o=ot();o!==i;)r.push(o),o=ot();r!==i&&(o=Me())!==i?e=n=O(n,o):(de=e,e=s)}else de=e,e=s;return e}function Me(){var e,t,n,r,o;return e=de,(t=Ne())!==i?(n=de,(r=Je())===i&&(r=c),r!==i&&(o=Me())!==i?n=r=[r,o]:(de=n,n=s),n===i&&(n=c),n!==i?e=t=f(t,n):(de=e,e=s)):(de=e,e=s),e}function Ne(){var e,t,n,r,o,a;return e=de,(t=Ke())!==i?((n=Je())===i&&(n=c),n!==i&&(r=Ke())!==i?((o=Je())===i&&(o=c),o!==i&&(a=Ke())!==i?e=t=k(t,r,a):(de=e,e=s)):(de=e,e=s)):(de=e,e=s),e}function De(){var e,n,r,o;if(e=de,I.test(t.charAt(de))?(n=t.charAt(de),de++):(n=i,0===me&&ye(x)),n!==i){for(r=[],o=ot();o!==i;)r.push(o),o=ot();r!==i&&(o=Fe())!==i?e=n=A(n,o):(de=e,e=s)}else de=e,e=s;return e}function Fe(){var e,t,n,r,o;return e=de,(t=Be())!==i?(n=de,(r=Je())===i&&(r=c),r!==i&&(o=Fe())!==i?n=r=[r,o]:(de=n,n=s),n===i&&(n=c),n!==i?e=t=f(t,n):(de=e,e=s)):(de=e,e=s),e}function Be(){var e,t,n,r;return e=de,(t=Ke())!==i?((n=Je())===i&&(n=c),n!==i&&(r=Ke())!==i?e=t=L(t,r):(de=e,e=s)):(de=e,e=s),e}function Ue(){var e,n,r,o;if(e=de,M.test(t.charAt(de))?(n=t.charAt(de),de++):(n=i,0===me&&ye(N)),n!==i){for(r=[],o=ot();o!==i;)r.push(o),o=ot();r!==i&&(o=je())!==i?e=n=D(n,o):(de=e,e=s)}else de=e,e=s;return e}function je(){var e,t,n,r,o;return e=de,(t=He())!==i?(n=de,(r=Je())===i&&(r=c),r!==i&&(o=je())!==i?n=r=[r,o]:(de=n,n=s),n===i&&(n=c),n!==i?e=t=f(t,n):(de=e,e=s)):(de=e,e=s),e}function He(){var e,t,n,r;return e=de,(t=Ke())!==i?((n=Je())===i&&(n=c),n!==i&&(r=Ke())!==i?e=t=L(t,r):(de=e,e=s)):(de=e,e=s),e}function ze(){var e,n,r,o;if(e=de,F.test(t.charAt(de))?(n=t.charAt(de),de++):(n=i,0===me&&ye(B)),n!==i){for(r=[],o=ot();o!==i;)r.push(o),o=ot();r!==i&&(o=Ve())!==i?e=n=U(n,o):(de=e,e=s)}else de=e,e=s;return e}function Ve(){var e,t,n,r,o;return e=de,(t=Ke())!==i?(n=de,(r=Je())===i&&(r=c),r!==i&&(o=Ve())!==i?n=r=[r,o]:(de=n,n=s),n===i&&(n=c),n!==i?e=t=f(t,n):(de=e,e=s)):(de=e,e=s),e}function Ge(){var e,n,r,o;if(e=de,j.test(t.charAt(de))?(n=t.charAt(de),de++):(n=i,0===me&&ye(H)),n!==i){for(r=[],o=ot();o!==i;)r.push(o),o=ot();r!==i&&(o=We())!==i?e=n=z(n,o):(de=e,e=s)}else de=e,e=s;return e}function We(){var e,t,n,r,o;return e=de,(t=qe())!==i?(n=de,(r=Je())===i&&(r=c),r!==i&&(o=We())!==i?n=r=[r,o]:(de=n,n=s),n===i&&(n=c),n!==i?e=t=f(t,n):(de=e,e=s)):(de=e,e=s),e}function qe(){var e,t,n,r,o,a,u,l,d,h,f;return e=de,(t=Xe())!==i?((n=Je())===i&&(n=c),n!==i&&(r=Xe())!==i?((o=Je())===i&&(o=c),o!==i&&(a=Ze())!==i&&Je()!==i&&(u=$e())!==i?((l=Je())===i&&(l=c),l!==i&&(d=$e())!==i?((h=Je())===i&&(h=c),h!==i&&(f=Ke())!==i?e=t=V(t,r,a,u,d,f):(de=e,e=s)):(de=e,e=s)):(de=e,e=s)):(de=e,e=s)):(de=e,e=s),e}function Ke(){var e,t,n,r;return e=de,(t=Ye())!==i?((n=Je())===i&&(n=c),n!==i&&(r=Ye())!==i?e=t=G(t,r):(de=e,e=s)):(de=e,e=s),e}function Ye(){var e;return(e=Ze())!==i&&(e=W(e)),e}function Xe(){var e;return(e=et())===i&&(e=it()),e}function Ze(){var e,t,n;return e=de,(t=rt())===i&&(t=c),t!==i&&(n=et())!==i?e=t=[t,n]:(de=e,e=s),e===i&&(e=de,(t=rt())===i&&(t=c),t!==i&&(n=it())!==i?e=t=[t,n]:(de=e,e=s)),e}function $e(){var e;return 48===t.charCodeAt(de)?(e=q,de++):(e=i,0===me&&ye(K)),e===i&&(49===t.charCodeAt(de)?(e=Y,de++):(e=i,0===me&&ye(X))),e}function Je(){var e,t,n,r,o;if(e=de,t=[],(n=ot())!==i)for(;n!==i;)t.push(n),n=ot();else t=s;if(t!==i)if((n=Qe())===i&&(n=c),n!==i){for(r=[],o=ot();o!==i;)r.push(o),o=ot();r!==i?e=t=[t,n,r]:(de=e,e=s)}else de=e,e=s;else de=e,e=s;if(e===i)if(e=de,(t=Qe())!==i){for(n=[],r=ot();r!==i;)n.push(r),r=ot();n!==i?e=t=[t,n]:(de=e,e=s)}else de=e,e=s;return e}function Qe(){var e;return 44===t.charCodeAt(de)?(e=Z,de++):(e=i,0===me&&ye($)),e}function et(){var e,t,n;return e=de,(t=tt())!==i?((n=nt())===i&&(n=c),n!==i?e=t=[t,n]:(de=e,e=s)):(de=e,e=s),e===i&&(e=de,(t=it())!==i&&(n=nt())!==i?e=t=[t,n]:(de=e,e=s)),e}function tt(){var e,n,r,o;return e=de,(n=it())===i&&(n=c),n!==i?(46===t.charCodeAt(de)?(r=J,de++):(r=i,0===me&&ye(Q)),r!==i&&(o=it())!==i?e=n=[n,r,o]:(de=e,e=s)):(de=e,e=s),e===i&&(e=de,(n=it())!==i?(46===t.charCodeAt(de)?(r=J,de++):(r=i,0===me&&ye(Q)),r!==i?e=n=[n,r]:(de=e,e=s)):(de=e,e=s)),e}function nt(){var e,n,r,o;return e=de,ee.test(t.charAt(de))?(n=t.charAt(de),de++):(n=i,0===me&&ye(te)),n!==i?((r=rt())===i&&(r=c),r!==i&&(o=it())!==i?e=n=[n,r,o]:(de=e,e=s)):(de=e,e=s),e}function rt(){var e;return 43===t.charCodeAt(de)?(e=ne,de++):(e=i,0===me&&ye(re)),e===i&&(45===t.charCodeAt(de)?(e=ie,de++):(e=i,0===me&&ye(oe))),e}function it(){var e,n;if(e=[],ae.test(t.charAt(de))?(n=t.charAt(de),de++):(n=i,0===me&&ye(se)),n!==i)for(;n!==i;)e.push(n),ae.test(t.charAt(de))?(n=t.charAt(de),de++):(n=i,0===me&&ye(se));else e=s;return e!==i&&(e=ce(e)),e}function ot(){var e;return ue.test(t.charAt(de))?(e=t.charAt(de),de++):(e=i,0===me&&ye(le)),e}var at=[0,0],st=[0,0],ct=[],ut=!0,lt="";function dt(e){for(var t=[],n=0;n<e.length;n++)e[n]instanceof Array?t.push.apply(t,dt(e[n])):t.push(e[n]);return t}function ht(e,t){return-1==="mlazhvcsqt".indexOf(e)?at=t:(at[0]+=t[0],at[1]+=t[1]),lt=e,at.slice(0)}function ft(e,t){for(var n=[],r=at.slice(0),i=0;i<t.length;i+=2){at=r.slice(0);var o=ht(e,t.slice(i,i+2));n=n.concat(o),i==t.length-4&&(st=o.slice(0))}return n}function pt(){-1=="CcSsQqTt".indexOf(lt)&&(st=at.slice(0));var e=[0,0];return e[0]=2*at[0]-st[0],e[1]=2*at[1]-st[1],e}function gt(e,t){var n=[t,0];return"H"==e&&(n[1]=at[1]),ht(e,n)}function mt(e,t){var n=[0,t];return"V"==e&&(n[0]=at[0]),ht(e,n)}function vt(e,t){var n=[e];if(t&&t.length>1)for(var r=t[1],i=0;i<r.length;i++)n.push(r[i]);return n}function yt(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))}function bt(e,t){return e[0]*t[0]+e[1]*t[1]}function wt(e,t){return bt(e,t)/(yt(e)*yt(t))}function Et(e,t,n){return Math.min(Math.max(e,t),n)}function St(e,t){var n=1;return e[0]*t[1]-e[1]*t[0]<0&&(n=-1),n*Math.acos(Et(wt(e,t),-1,1))}function Tt(e,t){var n=Math.cos(t),r=Math.sin(t);return[n*e[0]+r*e[1],-1*r*e[0]+n*e[1]]}function _t(e,t){var n=Math.cos(t),r=Math.sin(t);return[n*e[0]-r*e[1],r*e[0]+n*e[1]]}function Pt(e,t){return[(e[0]-t[0])/2,(e[1]-t[1])/2]}function Ct(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}function Rt(e,t){return[e[0]*t[0],e[1]*t[1]]}function Ot(e,t){return[e*t[0],e*t[1]]}function kt(e,t){return[e[0]+t[0],e[1]+t[1]]}function It(e,t,n,r,i,o,a){if(0!=t&&0!=n){r*=Math.PI/180,t=Math.abs(t),n=Math.abs(n);var s=Tt(Pt(e,a),r),c=Rt(s,s),u=Math.pow(t,2),l=Math.pow(n,2),d=Math.sqrt(c[0]/u+c[1]/l);d>1&&(t*=d,n*=d,u=Math.pow(t,2),l=Math.pow(n,2));var h=Math.sqrt(Math.abs(u*l-u*c[1]-l*c[0])/(u*c[1]+l*c[0]));i==o&&(h*=-1);var f=Ot(h,[t*s[1]/n,-n*s[0]/t]),p=kt(_t(f,r),Ct(e,a)),g=[(s[0]-f[0])/t,(s[1]-f[1])/n],m=[(-1*s[0]-f[0])/t,(-1*s[1]-f[1])/n],v=St([1,0],g),y=v,b=v+St(g,m);ct.push({type:"save",args:[]},{type:"translate",args:[p[0],p[1]]},{type:"rotate",args:[r]},{type:"scale",args:[t,n]},{type:"arc",args:[0,0,1,y,b,1-o]},{type:"restore",args:[]})}else ct.push({type:"lineTo",args:a})}if((n=a())!==i&&de===t.length)return n;throw n!==i&&de<t.length&&ye({type:"end",description:"end of input"}),be(null,ge,pe)}}}();var t=["closePath","moveTo","lineTo","quadraticCurveTo","bezierCurveTo","rect","arc","arcTo","ellipse","isPointInPath","isPointInStroke"];function n(e){return function(){this.ops_.push({type:e,args:Array.prototype.slice.call(arguments,0)})}}for(var r=0;r<t.length;r++){var i=t[r];e.prototype[i]=n(i)}e.prototype.addPath=function(e,t){var n=!1;t&&null!=t.a&&null!=t.b&&null!=t.c&&null!=t.d&&null!=t.e&&null!=t.f&&(n=!0,this.ops_.push({type:"save",args:[]}),this.ops_.push({type:"transform",args:[t.a,t.b,t.c,t.d,t.e,t.f]})),this.ops_=this.ops_.concat(e.ops_),n&&this.ops_.push({type:"restore",args:[]})},original_fill=CanvasRenderingContext2D.prototype.fill,original_stroke=CanvasRenderingContext2D.prototype.stroke,original_clip=CanvasRenderingContext2D.prototype.clip,original_is_point_in_path=CanvasRenderingContext2D.prototype.isPointInPath,original_is_point_in_stroke=CanvasRenderingContext2D.prototype.isPointInStroke,CanvasRenderingContext2D.prototype.fill=function(t){if(t instanceof e){this.beginPath();for(var n=0,r=t.ops_.length;n<r;n++){var i=t.ops_[n];CanvasRenderingContext2D.prototype[i.type].apply(this,i.args)}original_fill.apply(this,Array.prototype.slice.call(arguments,1))}else original_fill.apply(this,arguments)},CanvasRenderingContext2D.prototype.stroke=function(t){if(t instanceof e){this.beginPath();for(var n=0,r=t.ops_.length;n<r;n++){var i=t.ops_[n];CanvasRenderingContext2D.prototype[i.type].apply(this,i.args)}original_stroke.call(this)}else original_stroke.call(this)},CanvasRenderingContext2D.prototype.clip=function(t){if(t instanceof e){this.beginPath();for(var n=0,r=t.ops_.length;n<r;n++){var i=t.ops_[n];CanvasRenderingContext2D.prototype[i.type].apply(this,i.args)}original_clip.apply(this,Array.prototype.slice.call(arguments,1))}else original_clip.apply(this,arguments)},CanvasRenderingContext2D.prototype.isPointInPath=function(t){if(t instanceof e){this.beginPath();for(var n=0,r=t.ops_.length;n<r;n++){var i=t.ops_[n];CanvasRenderingContext2D.prototype[i.type].apply(this,i.args)}return original_is_point_in_path.apply(this,Array.prototype.slice.call(arguments,1))}return original_is_point_in_path.apply(this,arguments)},CanvasRenderingContext2D.prototype.isPointInStroke=function(t){if(t instanceof e){this.beginPath();for(var n=0,r=t.ops_.length;n<r;n++){var i=t.ops_[n];CanvasRenderingContext2D.prototype[i.type].apply(this,i.args)}return original_is_point_in_stroke.apply(this,Array.prototype.slice.call(arguments,1))}return original_is_point_in_stroke.apply(this,arguments)},Path2D=e}()}])},module.exports=e()},94911:function(e,t,n){"use strict";var r=n(84332),i=n(15126),o=n(79213),a=n(53369),s=n(81581),c=e.exports=function(e,t){var n,i,c,u,l;return arguments.length<2||"string"!=typeof e?(u=t,t=e,e=null):u=arguments[2],r(e)?(n=s.call(e,"c"),i=s.call(e,"e"),c=s.call(e,"w")):(n=c=!0,i=!1),l={value:t,configurable:n,enumerable:i,writable:c},u?o(a(u),l):l};c.gs=function(e,t,n){var c,u,l,d;return"string"!=typeof e?(l=n,n=t,t=e,e=null):l=arguments[3],r(t)?i(t)?r(n)?i(n)||(l=n,n=void 0):n=void 0:(l=t,t=n=void 0):t=void 0,r(e)?(c=s.call(e,"c"),u=s.call(e,"e")):(c=!0,u=!1),d={get:t,set:n,configurable:c,enumerable:u},l?o(a(l),d):d}},96162:function(e,t,n){"use strict";var r=n(69972),i=n(72068),o=n(19875),a=Array.prototype.indexOf,s=Object.prototype.hasOwnProperty,c=Math.abs,u=Math.floor;e.exports=function(e){var t,n,l,d;if(!r(e))return a.apply(this,arguments);for(n=i(o(this).length),l=arguments[1],t=l=isNaN(l)?0:l>=0?u(l):i(this.length)-u(c(l));t<n;++t)if(s.call(this,t)&&(d=this[t],r(d)))return t;return-1}},40389:function(e,t,n){"use strict";e.exports=n(21612)()?Array.from:n(10466)},21612:function(e){"use strict";e.exports=function(){var e,t,n=Array.from;return"function"==typeof n&&(t=n(e=["raz","dwa"]),Boolean(t&&t!==e&&"dwa"===t[1]))}},10466:function(e,t,n){"use strict";var r=n(18726).iterator,i=n(30025),o=n(95143),a=n(72068),s=n(22050),c=n(19875),u=n(10676),l=n(16068),d=Array.isArray,h=Function.prototype.call,f={configurable:!0,enumerable:!0,writable:!0,value:null},p=Object.defineProperty;e.exports=function(e){var t,n,g,m,v,y,b,w,E,S,T=arguments[1],_=arguments[2];if(e=Object(c(e)),u(T)&&s(T),this&&this!==Array&&o(this))t=this;else{if(!T){if(i(e))return 1!==(v=e.length)?Array.apply(null,e):((m=new Array(1))[0]=e[0],m);if(d(e)){for(m=new Array(v=e.length),n=0;n<v;++n)m[n]=e[n];return m}}m=[]}if(!d(e))if(void 0!==(E=e[r])){for(b=s(E).call(e),t&&(m=new t),w=b.next(),n=0;!w.done;)S=T?h.call(T,_,w.value,n):w.value,t?(f.value=S,p(m,n,f)):m[n]=S,w=b.next(),++n;v=n}else if(l(e)){for(v=e.length,t&&(m=new t),n=0,g=0;n<v;++n)S=e[n],n+1<v&&(y=S.charCodeAt(0))>=55296&&y<=56319&&(S+=e[++n]),S=T?h.call(T,_,S,g):S,t?(f.value=S,p(m,g,f)):m[g]=S,++g;v=g}if(void 0===v)for(v=a(e.length),t&&(m=new t(v)),n=0;n<v;++n)S=T?h.call(T,_,e[n],n):e[n],t?(f.value=S,p(m,n,f)):m[n]=S;return t&&(f.value=null,m.length=v),m}},86228:function(e,t,n){"use strict";var r=n(40389),i=Array.isArray;e.exports=function(e){return i(e)?e:r(e)}},88968:function(e,t,n){"use strict";var r=n(79213),i=n(82802),o=n(10676),a=Error.captureStackTrace;e.exports=function(t){var n=new Error(t),s=arguments[1],c=arguments[2];return o(c)||i(s)&&(c=s,s=null),o(c)&&r(n,c),o(s)&&(n.code=s),a&&a(n,e.exports),n}},82828:function(e,t,n){"use strict";var r,i,o,a,s,c=n(72068),u=function(e,t){return t};try{Object.defineProperty(u,"length",{configurable:!0,writable:!1,enumerable:!1,value:1})}catch(e){}1===u.length?(r={configurable:!0,writable:!1,enumerable:!1},i=Object.defineProperty,e.exports=function(e,t){return t=c(t),e.length===t?e:(r.value=t,i(e,"length",r))}):(a=n(45987),s=[],o=function(e){var t,n=0;if(s[e])return s[e];for(t=[];e--;)t.push("a"+(++n).toString(36));return new Function("fn","return function ("+t.join(", ")+") { return fn.apply(this, arguments); };")},e.exports=function(e,t){var n;if(t=c(t),e.length===t)return e;n=o(t)(e);try{a(n,e)}catch(e){}return n})},30025:function(e){"use strict";var t=Object.prototype.toString,n=t.call(function(){return arguments}());e.exports=function(e){return t.call(e)===n}},95143:function(e){"use strict";var t=Object.prototype.toString,n=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);e.exports=function(e){return"function"==typeof e&&n(t.call(e))}},29384:function(e){"use strict";e.exports=function(){}},19014:function(e,t,n){"use strict";e.exports=n(72960)()?Math.sign:n(64534)},72960:function(e){"use strict";e.exports=function(){var e=Math.sign;return"function"==typeof e&&1===e(10)&&-1===e(-20)}},64534:function(e){"use strict";e.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},69972:function(e,t,n){"use strict";e.exports=n(33655)()?Number.isNaN:n(42995)},33655:function(e){"use strict";e.exports=function(){var e=Number.isNaN;return"function"==typeof e&&!e({})&&e(NaN)&&!e(34)}},42995:function(e){"use strict";e.exports=function(e){return e!=e}},77247:function(e,t,n){"use strict";var r=n(19014),i=Math.abs,o=Math.floor;e.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?r(e)*o(i(e)):e}},72068:function(e,t,n){"use strict";var r=n(77247),i=Math.max;e.exports=function(e){return i(0,r(e))}},9688:function(e,t,n){"use strict";var r=n(22050),i=n(19875),o=Function.prototype.bind,a=Function.prototype.call,s=Object.keys,c=Object.prototype.propertyIsEnumerable;e.exports=function(e,t){return function(n,u){var l,d=arguments[2],h=arguments[3];return n=Object(i(n)),r(u),l=s(n),h&&l.sort("function"==typeof h?o.call(h,n):void 0),"function"!=typeof e&&(e=l[e]),a.call(e,l,(function(e,r){return c.call(n,e)?a.call(u,d,n[e],e,n,r):t}))}}},79213:function(e,t,n){"use strict";e.exports=n(36901)()?Object.assign:n(28611)},36901:function(e){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},28611:function(e,t,n){"use strict";var r=n(49785),i=n(19875),o=Math.max;e.exports=function(e,t){var n,a,s,c=o(arguments.length,2);for(e=Object(i(e)),s=function(r){try{e[r]=t[r]}catch(e){n||(n=e)}},a=1;a<c;++a)r(t=arguments[a]).forEach(s);if(void 0!==n)throw n;return e}},96411:function(e,t,n){"use strict";e.exports=n(9688)("forEach")},32270:function(e){"use strict";e.exports=function(e){return"function"==typeof e}},82802:function(e,t,n){"use strict";var r=n(10676),i={function:!0,object:!0};e.exports=function(e){return r(e)&&i[typeof e]||!1}},10676:function(e,t,n){"use strict";var r=n(29384)();e.exports=function(e){return e!==r&&null!==e}},49785:function(e,t,n){"use strict";e.exports=n(40497)()?Object.keys:n(47366)},40497:function(e){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},47366:function(e,t,n){"use strict";var r=n(10676),i=Object.keys;e.exports=function(e){return i(r(e)?Object(e):e)}},65694:function(e,t,n){"use strict";var r=n(22050),i=n(96411),o=Function.prototype.call;e.exports=function(e,t){var n={},a=arguments[2];return r(t),i(e,(function(e,r,i,s){n[r]=o.call(t,a,e,r,i,s)})),n}},45987:function(e,t,n){"use strict";var r=n(19875),i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols;e.exports=function(e,t){var n,c=Object(r(t));if(e=Object(r(e)),a(c).forEach((function(r){try{i(e,r,o(t,r))}catch(e){n=e}})),"function"==typeof s&&s(c).forEach((function(r){try{i(e,r,o(t,r))}catch(e){n=e}})),void 0!==n)throw n;return e}},53369:function(e,t,n){"use strict";var r=n(10676),i=Array.prototype.forEach,o=Object.create,a=function(e,t){var n;for(n in e)t[n]=e[n]};e.exports=function(e){var t=o(null);return i.call(arguments,(function(e){r(e)&&a(Object(e),t)})),t}},25588:function(e){"use strict";var t=Array.prototype.forEach,n=Object.create;e.exports=function(e){var r=n(null);return t.call(arguments,(function(e){r[e]=!0})),r}},22050:function(e){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},19875:function(e,t,n){"use strict";var r=n(10676);e.exports=function(e){if(!r(e))throw new TypeError("Cannot use null or undefined");return e}},4289:function(e,t,n){"use strict";var r=n(19875),i=n(56434);e.exports=function(e){return i(r(e))}},56434:function(e,t,n){"use strict";var r=n(32270);e.exports=function(e){try{return e&&r(e.toString)?e.toString():String(e)}catch(e){throw new TypeError("Passed argument cannot be stringifed")}}},20638:function(e,t,n){"use strict";var r=n(32270);e.exports=function(e){try{return e&&r(e.toString)?e.toString():String(e)}catch(e){return"<Non-coercible to string value>"}}},81581:function(e,t,n){"use strict";e.exports=n(3432)()?String.prototype.contains:n(37045)},3432:function(e){"use strict";var t="razdwatrzy";e.exports=function(){return"function"==typeof t.contains&&!0===t.contains("dwa")&&!1===t.contains("foo")}},37045:function(e){"use strict";var t=String.prototype.indexOf;e.exports=function(e){return t.call(this,e,arguments[1])>-1}},16068:function(e){"use strict";var t=Object.prototype.toString,n=t.call("");e.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||t.call(e)===n)||!1}},29923:function(e,t,n){"use strict";var r=n(20638),i=/[\n\r\u2028\u2029]/g;e.exports=function(e){var t=r(e);return t.length>100&&(t=t.slice(0,99)+"…"),t.replace(i,(function(e){return JSON.stringify(e).slice(1,-1)}))}},18726:function(e,t,n){"use strict";e.exports=n(34908)()?n(36881).Symbol:n(66146)},34908:function(e,t,n){"use strict";var r=n(36881),i={object:!0,symbol:!0};e.exports=function(){var e,t=r.Symbol;if("function"!=typeof t)return!1;e=t("test symbol");try{String(e)}catch(e){return!1}return!!i[typeof t.iterator]&&!!i[typeof t.toPrimitive]&&!!i[typeof t.toStringTag]}},70450:function(e){"use strict";e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&"Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag])}},20714:function(e,t,n){"use strict";var r=n(94911),i=Object.create,o=Object.defineProperty,a=Object.prototype,s=i(null);e.exports=function(e){for(var t,n,i=0;s[e+(i||"")];)++i;return s[e+=i||""]=!0,o(a,t="@@"+e,r.gs(null,(function(e){n||(n=!0,o(this,t,r(e)),n=!1)}))),t}},5170:function(e,t,n){"use strict";var r=n(94911),i=n(36881).Symbol;e.exports=function(e){return Object.defineProperties(e,{hasInstance:r("",i&&i.hasInstance||e("hasInstance")),isConcatSpreadable:r("",i&&i.isConcatSpreadable||e("isConcatSpreadable")),iterator:r("",i&&i.iterator||e("iterator")),match:r("",i&&i.match||e("match")),replace:r("",i&&i.replace||e("replace")),search:r("",i&&i.search||e("search")),species:r("",i&&i.species||e("species")),split:r("",i&&i.split||e("split")),toPrimitive:r("",i&&i.toPrimitive||e("toPrimitive")),toStringTag:r("",i&&i.toStringTag||e("toStringTag")),unscopables:r("",i&&i.unscopables||e("unscopables"))})}},31155:function(e,t,n){"use strict";var r=n(94911),i=n(39124),o=Object.create(null);e.exports=function(e){return Object.defineProperties(e,{for:r((function(t){return o[t]?o[t]:o[t]=e(String(t))})),keyFor:r((function(e){var t;for(t in i(e),o)if(o[t]===e)return t}))})}},66146:function(e,t,n){"use strict";var r,i,o,a=n(94911),s=n(39124),c=n(36881).Symbol,u=n(20714),l=n(5170),d=n(31155),h=Object.create,f=Object.defineProperties,p=Object.defineProperty;if("function"==typeof c)try{String(c()),o=!0}catch(e){}else c=null;i=function(e){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return r(e)},e.exports=r=function e(t){var n;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return o?c(t):(n=h(i.prototype),t=void 0===t?"":String(t),f(n,{__description__:a("",t),__name__:a("",u(t))}))},l(r),d(r),f(i.prototype,{constructor:a(r),toString:a("",(function(){return this.__name__}))}),f(r.prototype,{toString:a((function(){return"Symbol ("+s(this).__description__+")"})),valueOf:a((function(){return s(this)}))}),p(r.prototype,r.toPrimitive,a("",(function(){var e=s(this);return"symbol"==typeof e?e:e.toString()}))),p(r.prototype,r.toStringTag,a("c","Symbol")),p(i.prototype,r.toStringTag,a("c",r.prototype[r.toStringTag])),p(i.prototype,r.toPrimitive,a("c",r.prototype[r.toPrimitive]))},39124:function(e,t,n){"use strict";var r=n(70450);e.exports=function(e){if(!r(e))throw new TypeError(e+" is not a symbol");return e}},93083:function(e,t,n){"use strict";var r,i,o,a,s,c,u,l=n(94911),d=n(22050),h=Function.prototype.apply,f=Function.prototype.call,p=Object.create,g=Object.defineProperty,m=Object.defineProperties,v=Object.prototype.hasOwnProperty,y={configurable:!0,enumerable:!1,writable:!0};i=function(e,t){var n,i;return d(t),i=this,r.call(this,e,n=function(){o.call(i,e,n),h.call(t,this,arguments)}),n.__eeOnceListener__=t,this},a=function(e){var t,n,r,i,o;if(v.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];for(i=i.slice(),t=0;r=i[t];++t)h.call(r,this,o)}else switch(arguments.length){case 1:f.call(i,this);break;case 2:f.call(i,this,arguments[1]);break;case 3:f.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];h.call(i,this,o)}},s={on:r=function(e,t){var n;return d(t),v.call(this,"__ee__")?n=this.__ee__:(n=y.value=p(null),g(this,"__ee__",y),y.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},once:i,off:o=function(e,t){var n,r,i,o;if(d(t),!v.call(this,"__ee__"))return this;if(!(n=this.__ee__)[e])return this;if("object"==typeof(r=n[e]))for(o=0;i=r[o];++o)i!==t&&i.__eeOnceListener__!==t||(2===r.length?n[e]=r[o?0:1]:r.splice(o,1));else r!==t&&r.__eeOnceListener__!==t||delete n[e];return this},emit:a},c={on:l(r),once:l(i),off:l(o),emit:l(a)},u=m({},c),e.exports=t=function(e){return null==e?p(u):m(Object(e),c)},t.methods=s},98473:function(e){var t=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}()},36881:function(e,t,n){"use strict";e.exports=n(67952)()?globalThis:n(98473)},67952:function(e){"use strict";e.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},15616:function(e,t,n){var r;!function(i,o,a,s){"use strict";var c,u=["","webkit","Moz","MS","ms","o"],l=o.createElement("div"),d=Math.round,h=Math.abs,f=Date.now;function p(e,t,n){return setTimeout(E(e,n),t)}function g(e,t,n){return!!Array.isArray(e)&&(m(e,n[t],n),!0)}function m(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==s)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function v(e,t,n){var r="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),e.apply(this,arguments)}}c="function"!=typeof Object.assign?function(e){if(e===s||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t}:Object.assign;var y=v((function(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;)(!n||n&&e[r[i]]===s)&&(e[r[i]]=t[r[i]]),i++;return e}),"extend","Use `assign`."),b=v((function(e,t){return y(e,t,!0)}),"merge","Use `assign`.");function w(e,t,n){var r,i=t.prototype;(r=e.prototype=Object.create(i)).constructor=e,r._super=i,n&&c(r,n)}function E(e,t){return function(){return e.apply(t,arguments)}}function S(e,t){return"function"==typeof e?e.apply(t&&t[0]||s,t):e}function T(e,t){return e===s?t:e}function _(e,t,n){m(O(t),(function(t){e.addEventListener(t,n,!1)}))}function P(e,t,n){m(O(t),(function(t){e.removeEventListener(t,n,!1)}))}function C(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function R(e,t){return e.indexOf(t)>-1}function O(e){return e.trim().split(/\s+/g)}function k(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function I(e){return Array.prototype.slice.call(e,0)}function x(e,t,n){for(var r=[],i=[],o=0;o<e.length;){var a=t?e[o][t]:e[o];k(i,a)<0&&r.push(e[o]),i[o]=a,o++}return n&&(r=t?r.sort((function(e,n){return e[t]>n[t]})):r.sort()),r}function A(e,t){for(var n,r,i=t[0].toUpperCase()+t.slice(1),o=0;o<u.length;){if((r=(n=u[o])?n+i:t)in e)return r;o++}return s}var L=1;function M(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}var N="ontouchstart"in i,D=A(i,"PointerEvent")!==s,F=N&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),B="touch",U="mouse",j=["x","y"],H=["clientX","clientY"];function z(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){S(e.options.enable,[e])&&n.handler(t)},this.init()}function V(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,o=1&t&&r-i==0,a=12&t&&r-i==0;n.isFirst=!!o,n.isFinal=!!a,o&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=G(t)),i>1&&!n.firstMultiple?n.firstMultiple=G(t):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,c=a?a.center:o.center,u=t.center=W(r);t.timeStamp=f(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=X(c,u),t.distance=Y(c,u),function(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},o=e.prevInput||{};1!==t.eventType&&4!==o.eventType||(i=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}(n,t),t.offsetDirection=K(t.deltaX,t.deltaY);var l,d,p=q(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=p.x,t.overallVelocityY=p.y,t.overallVelocity=h(p.x)>h(p.y)?p.x:p.y,t.scale=a?(l=a.pointers,Y((d=r)[0],d[1],H)/Y(l[0],l[1],H)):1,t.rotation=a?function(e,t){return X(t[1],t[0],H)+X(e[1],e[0],H)}(a.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,r,i,o,a=e.lastInterval||t,c=t.timeStamp-a.timeStamp;if(8!=t.eventType&&(c>25||a.velocity===s)){var u=t.deltaX-a.deltaX,l=t.deltaY-a.deltaY,d=q(c,u,l);r=d.x,i=d.y,n=h(d.x)>h(d.y)?d.x:d.y,o=K(u,l),e.lastInterval=t}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;t.velocity=n,t.velocityX=r,t.velocityY=i,t.direction=o}(n,t);var g=e.element;C(t.srcEvent.target,g)&&(g=t.srcEvent.target),t.target=g}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function G(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:d(e.pointers[n].clientX),clientY:d(e.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:t,center:W(t),deltaX:e.deltaX,deltaY:e.deltaY}}function W(e){var t=e.length;if(1===t)return{x:d(e[0].clientX),y:d(e[0].clientY)};for(var n=0,r=0,i=0;i<t;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:d(n/t),y:d(r/t)}}function q(e,t,n){return{x:t/e||0,y:n/e||0}}function K(e,t){return e===t?1:h(e)>=h(t)?e<0?2:4:t<0?8:16}function Y(e,t,n){n||(n=j);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function X(e,t,n){n||(n=j);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,r)/Math.PI}z.prototype={handler:function(){},init:function(){this.evEl&&_(this.element,this.evEl,this.domHandler),this.evTarget&&_(this.target,this.evTarget,this.domHandler),this.evWin&&_(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&P(this.element,this.evEl,this.domHandler),this.evTarget&&P(this.target,this.evTarget,this.domHandler),this.evWin&&P(M(this.element),this.evWin,this.domHandler)}};var Z={mousedown:1,mousemove:2,mouseup:4},$="mousedown",J="mousemove mouseup";function Q(){this.evEl=$,this.evWin=J,this.pressed=!1,z.apply(this,arguments)}w(Q,z,{handler:function(e){var t=Z[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:U,srcEvent:e}))}});var ee={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},te={2:B,3:"pen",4:U,5:"kinect"},ne="pointerdown",re="pointermove pointerup pointercancel";function ie(){this.evEl=ne,this.evWin=re,z.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(ne="MSPointerDown",re="MSPointerMove MSPointerUp MSPointerCancel"),w(ie,z,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=ee[r],o=te[e.pointerType]||e.pointerType,a=o==B,s=k(t,e.pointerId,"pointerId");1&i&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):12&i&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(s,1))}});var oe={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ae="touchstart",se="touchstart touchmove touchend touchcancel";function ce(){this.evTarget=ae,this.evWin=se,this.started=!1,z.apply(this,arguments)}function ue(e,t){var n=I(e.touches),r=I(e.changedTouches);return 12&t&&(n=x(n.concat(r),"identifier",!0)),[n,r]}w(ce,z,{handler:function(e){var t=oe[e.type];if(1===t&&(this.started=!0),this.started){var n=ue.call(this,e,t);12&t&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:B,srcEvent:e})}}});var le={touchstart:1,touchmove:2,touchend:4,touchcancel:8},de="touchstart touchmove touchend touchcancel";function he(){this.evTarget=de,this.targetIds={},z.apply(this,arguments)}function fe(e,t){var n=I(e.touches),r=this.targetIds;if(3&t&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=I(e.changedTouches),s=[],c=this.target;if(o=n.filter((function(e){return C(e.target,c)})),1===t)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),12&t&&delete r[a[i].identifier],i++;return s.length?[x(o.concat(s),"identifier",!0),s]:void 0}function pe(){z.apply(this,arguments);var e=E(this.handler,this);this.touch=new he(this.manager,e),this.mouse=new Q(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function ge(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,me.call(this,t)):12&e&&me.call(this,t)}function me(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)}),2500)}}function ve(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(t-i.x),a=Math.abs(n-i.y);if(o<=25&&a<=25)return!0}return!1}w(he,z,{handler:function(e){var t=le[e.type],n=fe.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:B,srcEvent:e})}}),w(pe,z,{handler:function(e,t,n){var r=n.pointerType==B,i=n.pointerType==U;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)ge.call(this,t,n);else if(i&&ve.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ye=A(l.style,"touchAction"),be=ye!==s,we="compute",Ee="auto",Se="manipulation",Te="none",_e="pan-x",Pe="pan-y",Ce=function(){if(!be)return!1;var e={},t=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){e[n]=!t||i.CSS.supports("touch-action",n)})),e}();function Re(e,t){this.manager=e,this.set(t)}Re.prototype={set:function(e){e==we&&(e=this.compute()),be&&this.manager.element.style&&Ce[e]&&(this.manager.element.style[ye]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return m(this.manager.recognizers,(function(t){S(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(R(e,Te))return Te;var t=R(e,_e),n=R(e,Pe);return t&&n?Te:t||n?t?_e:Pe:R(e,Se)?Se:Ee}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,i=R(r,Te)&&!Ce.none,o=R(r,Pe)&&!Ce["pan-y"],a=R(r,_e)&&!Ce["pan-x"];if(i){var s=1===e.pointers.length,c=e.distance<2,u=e.deltaTime<250;if(s&&c&&u)return}if(!a||!o)return i||o&&6&n||a&&24&n?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Oe=32;function ke(e){this.options=c({},this.defaults,e||{}),this.id=L++,this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Ie(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function xe(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function Ae(e,t){var n=t.manager;return n?n.get(e):e}function Le(){ke.apply(this,arguments)}function Me(){Le.apply(this,arguments),this.pX=null,this.pY=null}function Ne(){Le.apply(this,arguments)}function De(){ke.apply(this,arguments),this._timer=null,this._input=null}function Fe(){Le.apply(this,arguments)}function Be(){Le.apply(this,arguments)}function Ue(){ke.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function je(e,t){return(t=t||{}).recognizers=T(t.recognizers,je.defaults.preset),new He(e,t)}function He(e,t){this.options=c({},je.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new(this.options.inputClass||(D?ie:F?he:N?pe:Q))(this,V),this.touchAction=new Re(this,this.options.touchAction),ze(this,!0),m(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function ze(e,t){var n,r=e.element;r.style&&(m(e.options.cssProps,(function(i,o){n=A(r.style,o),t?(e.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=e.oldCssProps[n]||""})),t||(e.oldCssProps={}))}ke.prototype={defaults:{},set:function(e){return c(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(g(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Ae(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return g(e,"dropRecognizeWith",this)||(e=Ae(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(g(e,"requireFailure",this))return this;var t=this.requireFail;return-1===k(t,e=Ae(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(g(e,"dropRequireFailure",this))return this;e=Ae(e,this);var t=k(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<8&&r(t.options.event+Ie(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=8&&r(t.options.event+Ie(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=Oe},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=c({},e);if(!S(this.options.enable,[this,t]))return this.reset(),void(this.state=Oe);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},w(Le,ke,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=6&t,i=this.attrTest(e);return r&&(8&n||!i)?16|t:r||i?4&n?8|t:2&t?4|t:2:Oe}}),w(Me,Le,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push(Pe),24&e&&t.push(_e),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,o=e.deltaX,a=e.deltaY;return i&t.direction||(6&t.direction?(i=0===o?1:o<0?2:4,n=o!=this.pX,r=Math.abs(e.deltaX)):(i=0===a?1:a<0?8:16,n=a!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return Le.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=xe(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),w(Ne,Le,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Te]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),w(De,ke,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ee]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||12&e.eventType&&!i)this.reset();else if(1&e.eventType)this.reset(),this._timer=p((function(){this.state=8,this.tryEmit()}),t.time,this);else if(4&e.eventType)return 8;return Oe},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),w(Fe,Le,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Te]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),w(Be,Le,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Me.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return 30&n?t=e.overallVelocity:6&n?t=e.overallVelocityX:24&n&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&h(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=xe(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),w(Ue,ke,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Se]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=e.eventType)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||Y(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,a&&o?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=p((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return Oe},failTimeout:function(){return this._timer=p((function(){this.state=Oe}),this.options.interval,this),Oe},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),je.VERSION="2.0.7",je.defaults={domEvents:!1,touchAction:we,enable:!0,inputTarget:null,inputClass:null,preset:[[Fe,{enable:!1}],[Ne,{enable:!1},["rotate"]],[Be,{direction:6}],[Me,{direction:6},["swipe"]],[Ue],[Ue,{event:"doubletap",taps:2},["tap"]],[De]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},He.prototype={set:function(e){return c(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,i=t.curRecognizer;(!i||i&&8&i.state)&&(i=t.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===t.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&14&n.state&&(i=t.curRecognizer=n),o++}},get:function(e){if(e instanceof ke)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(g(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(g(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=k(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==s&&t!==s){var n=this.handlers;return m(O(e),(function(e){n[e]=n[e]||[],n[e].push(t)})),this}},off:function(e,t){if(e!==s){var n=this.handlers;return m(O(e),(function(e){t?n[e]&&n[e].splice(k(n[e],t),1):delete n[e]})),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=o.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&ze(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},c(je,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Oe,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:He,Input:z,TouchAction:Re,TouchInput:he,MouseInput:Q,PointerEventInput:ie,TouchMouseInput:pe,SingleTouchInput:ce,Recognizer:ke,AttrRecognizer:Le,Tap:Ue,Pan:Me,Swipe:Be,Pinch:Ne,Rotate:Fe,Press:De,on:_,off:P,each:m,merge:b,extend:y,assign:c,inherit:w,bindFn:E,prefixed:A}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=je,(r=function(){return je}.call(t,n,t,e))===s||(e.exports=r)}(window,document)},65867:function(e){function t(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}e.exports=t,e.exports.default=t},77883:function(e,t,n){"use strict";var r=n(72068),i=Object.create,o=Object.prototype.hasOwnProperty;e.exports=function(e){var t,n=0,a=1,s=i(null),c=i(null),u=0;return e=r(e),{hit:function(r){var i=c[r],l=++u;if(s[l]=r,c[r]=l,!i){if(++n<=e)return;return r=s[a],t(r),r}if(delete s[i],a===i)for(;!o.call(s,++a);)continue},delete:t=function(e){var t=c[e];if(t&&(delete s[t],delete c[e],--n,a===t)){if(!n)return u=0,void(a=1);for(;!o.call(s,++a);)continue}},clear:function(){n=0,a=1,s=i(null),c=i(null),u=0}}}},42827:function(e,t,n){"use strict";var r=n(40389),i=n(65694),o=n(45987),a=n(82828),s=n(81693),c=Array.prototype.slice,u=Function.prototype.apply,l=Object.create;n(36852).async=function(e,t){var n,d,h,f=l(null),p=l(null),g=t.memoized,m=t.original;t.memoized=a((function(e){var t=arguments,r=t[t.length-1];return"function"==typeof r&&(n=r,t=c.call(t,0,-1)),g.apply(d=this,h=t)}),g);try{o(t.memoized,g)}catch(e){}t.on("get",(function(e){var r,i,o;if(n){if(f[e])return"function"==typeof f[e]?f[e]=[f[e],n]:f[e].push(n),void(n=null);r=n,i=d,o=h,n=d=h=null,s((function(){var a;hasOwnProperty.call(p,e)?(a=p[e],t.emit("getasync",e,o,i),u.call(r,a.context,a.args)):(n=r,d=i,h=o,g.apply(i,o))}))}})),t.original=function(){var e,i,o,a;return n?(e=r(arguments),i=function e(n){var i,o,c=e.id;if(null!=c){if(delete e.id,i=f[c],delete f[c],i)return o=r(arguments),t.has(c)&&(n?t.delete(c):(p[c]={context:this,args:o},t.emit("setasync",c,"function"==typeof i?1:i.length))),"function"==typeof i?a=u.call(i,this,o):i.forEach((function(e){a=u.call(e,this,o)}),this),a}else s(u.bind(e,this,arguments))},o=n,n=d=h=null,e.push(i),a=u.call(m,this,e),i.cb=o,n=i,a):u.call(m,this,arguments)},t.on("set",(function(e){n?(f[e]?"function"==typeof f[e]?f[e]=[f[e],n.cb]:f[e].push(n.cb):f[e]=n.cb,delete n.cb,n.id=e,n=null):t.delete(e)})),t.on("delete",(function(e){var n;hasOwnProperty.call(f,e)||p[e]&&(n=p[e],delete p[e],t.emit("deleteasync",e,c.call(n.args,1)))})),t.on("clear",(function(){var e=p;p=l(null),t.emit("clearasync",i(e,(function(e){return c.call(e.args,1)})))}))}},92098:function(e,t,n){"use strict";var r=n(22050),i=n(96411),o=n(36852),a=Function.prototype.apply;o.dispose=function(e,t,n){var s;if(r(e),n.async&&o.async||n.promise&&o.promise)return t.on("deleteasync",s=function(t,n){a.call(e,null,n)}),void t.on("clearasync",(function(e){i(e,(function(e,t){s(t,e)}))}));t.on("delete",s=function(t,n){e(n)}),t.on("clear",(function(e){i(e,(function(e,t){s(t,e)}))}))}},12391:function(e,t,n){"use strict";var r=n(40389),i=n(96411),o=n(81693),a=n(65867),s=n(39294),c=n(36852),u=Function.prototype,l=Math.max,d=Math.min,h=Object.create;c.maxAge=function(e,t,n){var f,p,g,m;(e=s(e))&&(f=h(null),p=n.async&&c.async||n.promise&&c.promise?"async":"",t.on("set"+p,(function(n){f[n]=setTimeout((function(){t.delete(n)}),e),"function"==typeof f[n].unref&&f[n].unref(),m&&(m[n]&&"nextTick"!==m[n]&&clearTimeout(m[n]),m[n]=setTimeout((function(){delete m[n]}),g),"function"==typeof m[n].unref&&m[n].unref())})),t.on("delete"+p,(function(e){clearTimeout(f[e]),delete f[e],m&&("nextTick"!==m[e]&&clearTimeout(m[e]),delete m[e])})),n.preFetch&&(g=!0===n.preFetch||isNaN(n.preFetch)?.333:l(d(Number(n.preFetch),1),0))&&(m={},g=(1-g)*e,t.on("get"+p,(function(e,i,s){m[e]||(m[e]="nextTick",o((function(){var o;"nextTick"===m[e]&&(delete m[e],t.delete(e),n.async&&(i=r(i)).push(u),o=t.memoized.apply(s,i),n.promise&&a(o)&&("function"==typeof o.done?o.done(u,u):o.then(u,u)))})))}))),t.on("clear"+p,(function(){i(f,(function(e){clearTimeout(e)})),f={},m&&(i(m,(function(e){"nextTick"!==e&&clearTimeout(e)})),m={})})))}},19012:function(e,t,n){"use strict";var r=n(72068),i=n(77883),o=n(36852);o.max=function(e,t,n){var a,s,c;(e=r(e))&&(s=i(e),a=n.async&&o.async||n.promise&&o.promise?"async":"",t.on("set"+a,c=function(e){void 0!==(e=s.hit(e))&&t.delete(e)}),t.on("get"+a,c),t.on("delete"+a,s.delete),t.on("clear"+a,s.clear))}},99058:function(e,t,n){"use strict";var r=n(65694),i=n(25588),o=n(4289),a=n(29923),s=n(65867),c=n(81693),u=Object.create,l=i("then","then:finally","done","done:finally");n(36852).promise=function(e,t){var n=u(null),i=u(null),d=u(null);if(!0===e)e=null;else if(e=o(e),!l[e])throw new TypeError("'"+a(e)+"' is not valid promise mode");t.on("set",(function(r,o,a){var u=!1;if(!s(a))return i[r]=a,void t.emit("setasync",r,1);n[r]=1,d[r]=a;var l=function(e){var o=n[r];if(u)throw new Error("Memoizee error: Detected unordered then|done & finally resolution, which in turn makes proper detection of success/failure impossible (when in 'done:finally' mode)\nConsider to rely on 'then' or 'done' mode instead.");o&&(delete n[r],i[r]=e,t.emit("setasync",r,o))},h=function(){u=!0,n[r]&&(delete n[r],delete d[r],t.delete(r))},f=e;if(f||(f="then"),"then"===f){var p=function(){c(h)};"function"==typeof(a=a.then((function(e){c(l.bind(this,e))}),p)).finally&&a.finally(p)}else if("done"===f){if("function"!=typeof a.done)throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done' mode");a.done(l,h)}else if("done:finally"===f){if("function"!=typeof a.done)throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done:finally' mode");if("function"!=typeof a.finally)throw new Error("Memoizee error: Retrieved promise does not implement 'finally' in 'done:finally' mode");a.done(l),a.finally(h)}})),t.on("get",(function(e,r,i){var o;if(n[e])++n[e];else{o=d[e];var a=function(){t.emit("getasync",e,r,i)};s(o)?"function"==typeof o.done?o.done(a):o.then((function(){c(a)})):a()}})),t.on("delete",(function(e){if(delete d[e],n[e])delete n[e];else if(hasOwnProperty.call(i,e)){var r=i[e];delete i[e],t.emit("deleteasync",e,[r])}})),t.on("clear",(function(){var e=i;i=u(null),n=u(null),d=u(null),t.emit("clearasync",r(e,(function(e){return[e]})))}))}},21040:function(e,t,n){"use strict";var r=n(94911),i=n(36852),o=Object.create,a=Object.defineProperties;i.refCounter=function(e,t,n){var s,c;s=o(null),c=n.async&&i.async||n.promise&&i.promise?"async":"",t.on("set"+c,(function(e,t){s[e]=t||1})),t.on("get"+c,(function(e){++s[e]})),t.on("delete"+c,(function(e){delete s[e]})),t.on("clear"+c,(function(){s={}})),a(t.memoized,{deleteRef:r((function(){var e=t.get(arguments);return null===e?null:s[e]?!--s[e]&&(t.delete(e),!0):null})),getRefCount:r((function(){var e=t.get(arguments);return null===e?0:s[e]?s[e]:0}))})}},73799:function(e,t,n){"use strict";var r=n(53369),i=n(3621),o=n(79761);e.exports=function(e){var t,a=r(arguments[1]);return a.normalizer||0!==(t=a.length=i(a.length,e.length,a.async))&&(a.primitive?!1===t?a.normalizer=n(49065):t>1&&(a.normalizer=n(97224)(t)):a.normalizer=!1===t?n(55004)():1===t?n(94617)():n(97540)(t)),a.async&&n(42827),a.promise&&n(99058),a.dispose&&n(92098),a.maxAge&&n(12391),a.max&&n(19012),a.refCounter&&n(21040),o(e,a)}},84417:function(e,t,n){"use strict";var r=n(88968),i=n(82828),o=n(94911),a=n(93083).methods,s=n(16611),c=n(48682),u=Function.prototype.apply,l=Function.prototype.call,d=Object.create,h=Object.defineProperties,f=a.on,p=a.emit;e.exports=function(e,t,n){var a,g,m,v,y,b,w,E,S,T,_,P,C,R,O,k=d(null);return g=!1!==t?t:isNaN(e.length)?1:e.length,n.normalizer&&(T=c(n.normalizer),m=T.get,v=T.set,y=T.delete,b=T.clear),null!=n.resolvers&&(O=s(n.resolvers)),R=m?i((function(t){var n,i,o=arguments;if(O&&(o=O(o)),null!==(n=m(o))&&hasOwnProperty.call(k,n))return _&&a.emit("get",n,o,this),k[n];if(i=1===o.length?l.call(e,this,o[0]):u.call(e,this,o),null===n){if(null!==(n=m(o)))throw r("Circular invocation","CIRCULAR_INVOCATION");n=v(o)}else if(hasOwnProperty.call(k,n))throw r("Circular invocation","CIRCULAR_INVOCATION");return k[n]=i,P&&a.emit("set",n,null,i),i}),g):0===t?function(){var t;if(hasOwnProperty.call(k,"data"))return _&&a.emit("get","data",arguments,this),k.data;if(t=arguments.length?u.call(e,this,arguments):l.call(e,this),hasOwnProperty.call(k,"data"))throw r("Circular invocation","CIRCULAR_INVOCATION");return k.data=t,P&&a.emit("set","data",null,t),t}:function(t){var n,i,o=arguments;if(O&&(o=O(arguments)),i=String(o[0]),hasOwnProperty.call(k,i))return _&&a.emit("get",i,o,this),k[i];if(n=1===o.length?l.call(e,this,o[0]):u.call(e,this,o),hasOwnProperty.call(k,i))throw r("Circular invocation","CIRCULAR_INVOCATION");return k[i]=n,P&&a.emit("set",i,null,n),n},a={original:e,memoized:R,profileName:n.profileName,get:function(e){return O&&(e=O(e)),m?m(e):String(e[0])},has:function(e){return hasOwnProperty.call(k,e)},delete:function(e){var t;hasOwnProperty.call(k,e)&&(y&&y(e),t=k[e],delete k[e],C&&a.emit("delete",e,t))},clear:function(){var e=k;b&&b(),k=d(null),a.emit("clear",e)},on:function(e,t){return"get"===e?_=!0:"set"===e?P=!0:"delete"===e&&(C=!0),f.call(this,e,t)},emit:p,updateEnv:function(){e=a.original}},w=m?i((function(e){var t,n=arguments;O&&(n=O(n)),null!==(t=m(n))&&a.delete(t)}),g):0===t?function(){return a.delete("data")}:function(e){return O&&(e=O(arguments)[0]),a.delete(e)},E=i((function(){var e,n=arguments;return 0===t?k.data:(O&&(n=O(n)),e=m?m(n):String(n[0]),k[e])})),S=i((function(){var e,n=arguments;return 0===t?a.has("data"):(O&&(n=O(n)),null!==(e=m?m(n):String(n[0]))&&a.has(e))})),h(R,{__memoized__:o(!0),delete:o(w),clear:o(a.clear),_get:o(E),_has:o(S)}),a}},36852:function(){},3621:function(e,t,n){"use strict";var r=n(72068);e.exports=function(e,t,n){var i;return isNaN(e)?(i=t)>=0?n&&i?i-1:i:1:!1!==e&&r(e)}},48682:function(e,t,n){"use strict";var r=n(22050);e.exports=function(e){var t;return"function"==typeof e?{set:e,get:e}:(t={get:r(e.get)},void 0!==e.set?(t.set=r(e.set),e.delete&&(t.delete=r(e.delete)),e.clear&&(t.clear=r(e.clear)),t):(t.set=t.get,t))}},16611:function(e,t,n){"use strict";var r,i=n(86228),o=n(10676),a=n(22050),s=Array.prototype.slice;r=function(e){return this.map((function(t,n){return t?t(e[n]):e[n]})).concat(s.call(e,this.length))},e.exports=function(e){return(e=i(e)).forEach((function(e){o(e)&&a(e)})),r.bind(e)}},94617:function(e,t,n){"use strict";var r=n(96162);e.exports=function(){var e=0,t=[],n=[];return{get:function(e){var i=r.call(t,e[0]);return-1===i?null:n[i]},set:function(r){return t.push(r[0]),n.push(++e),e},delete:function(e){var i=r.call(n,e);-1!==i&&(t.splice(i,1),n.splice(i,1))},clear:function(){t=[],n=[]}}}},97540:function(e,t,n){"use strict";var r=n(96162),i=Object.create;e.exports=function(e){var t=0,n=[[],[]],o=i(null);return{get:function(t){for(var i,o=0,a=n;o<e-1;){if(-1===(i=r.call(a[0],t[o])))return null;a=a[1][i],++o}return-1===(i=r.call(a[0],t[o]))?null:a[1][i]||null},set:function(i){for(var a,s=0,c=n;s<e-1;)-1===(a=r.call(c[0],i[s]))&&(a=c[0].push(i[s])-1,c[1].push([[],[]])),c=c[1][a],++s;return-1===(a=r.call(c[0],i[s]))&&(a=c[0].push(i[s])-1),c[1][a]=++t,o[t]=i,t},delete:function(t){for(var i,a=0,s=n,c=[],u=o[t];a<e-1;){if(-1===(i=r.call(s[0],u[a])))return;c.push(s,i),s=s[1][i],++a}if(-1!==(i=r.call(s[0],u[a]))){for(t=s[1][i],s[0].splice(i,1),s[1].splice(i,1);!s[0].length&&c.length;)i=c.pop(),(s=c.pop())[0].splice(i,1),s[1].splice(i,1);delete o[t]}},clear:function(){n=[[],[]],o=i(null)}}}},97224:function(e){"use strict";e.exports=function(e){return e?function(t){for(var n=String(t[0]),r=0,i=e;--i;)n+=""+t[++r];return n}:function(){return""}}},55004:function(e,t,n){"use strict";var r=n(96162),i=Object.create;e.exports=function(){var e=0,t=[],n=i(null);return{get:function(e){var n,i=0,o=t,a=e.length;if(0===a)return o[a]||null;if(o=o[a]){for(;i<a-1;){if(-1===(n=r.call(o[0],e[i])))return null;o=o[1][n],++i}return-1===(n=r.call(o[0],e[i]))?null:o[1][n]||null}return null},set:function(i){var o,a=0,s=t,c=i.length;if(0===c)s[c]=++e;else{for(s[c]||(s[c]=[[],[]]),s=s[c];a<c-1;)-1===(o=r.call(s[0],i[a]))&&(o=s[0].push(i[a])-1,s[1].push([[],[]])),s=s[1][o],++a;-1===(o=r.call(s[0],i[a]))&&(o=s[0].push(i[a])-1),s[1][o]=++e}return n[e]=i,e},delete:function(e){var i,o=0,a=t,s=n[e],c=s.length,u=[];if(0===c)delete a[c];else if(a=a[c]){for(;o<c-1;){if(-1===(i=r.call(a[0],s[o])))return;u.push(a,i),a=a[1][i],++o}if(-1===(i=r.call(a[0],s[o])))return;for(e=a[1][i],a[0].splice(i,1),a[1].splice(i,1);!a[0].length&&u.length;)i=u.pop(),(a=u.pop())[0].splice(i,1),a[1].splice(i,1)}delete n[e]},clear:function(){t=[],n=i(null)}}}},49065:function(e){"use strict";e.exports=function(e){var t,n,r=e.length;if(!r)return"";for(t=String(e[n=0]);--r;)t+=""+e[++n];return t}},79761:function(e,t,n){"use strict";var r=n(22050),i=n(96411),o=n(36852),a=n(84417),s=n(3621);e.exports=function e(t){var n,c,u;if(r(t),(n=Object(arguments[1])).async&&n.promise)throw new Error("Options 'async' and 'promise' cannot be used together");return hasOwnProperty.call(t,"__memoized__")&&!n.force?t:(c=s(n.length,t.length,n.async&&o.async),u=a(t,c,n),i(o,(function(e,t){n[t]&&e(n[t],u,n)})),e.__profiler__&&e.__profiler__(u),u.updateEnv(),u.memoized)}},81693:function(e){"use strict";var t=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},n=function(e){var n,r,i=document.createTextNode(""),o=0;return new e((function(){var e;if(n)r&&(n=r.concat(n));else{if(!r)return;n=r}if(r=n,n=null,"function"==typeof r)return e=r,r=null,void e();for(i.data=o=++o%2;r;)e=r.shift(),r.length||(r=null),e()})).observe(i,{characterData:!0}),function(e){t(e),n?"function"==typeof n?n=[n,e]:n.push(e):(n=e,i.data=o=++o%2)}};e.exports=function(){if("object"==typeof process&&process&&"function"==typeof process.nextTick)return process.nextTick;if("function"==typeof queueMicrotask)return function(e){queueMicrotask(t(e))};if("object"==typeof document&&document){if("function"==typeof MutationObserver)return n(MutationObserver);if("function"==typeof WebKitMutationObserver)return n(WebKitMutationObserver)}return"function"==typeof setImmediate?function(e){setImmediate(t(e))}:"function"==typeof setTimeout||"object"==typeof setTimeout?function(e){setTimeout(t(e),0)}:null}()},93273:function(e){"use strict";e.exports=2147483647},39294:function(e,t,n){"use strict";var r=n(72068),i=n(93273);e.exports=function(e){if((e=r(e))>i)throw new TypeError(e+" exceeds maximum possible timeout");return e}},3053:function(e,t,n){"use strict";var r=n(31635);e.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!r(e)}},46347:function(e,t,n){"use strict";var r=n(84332),i={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!r(e)&&hasOwnProperty.call(i,typeof e)}},15126:function(e,t,n){"use strict";var r=n(3053),i=/^\s*class[\s{/}]/,o=Function.prototype.toString;e.exports=function(e){return!!r(e)&&!i.test(o.call(e))}},31635:function(e,t,n){"use strict";var r=n(46347);e.exports=function(e){if(!r(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},84332:function(e){"use strict";e.exports=function(e){return null!=e}},10914:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawSha256=void 0;var r=n(89945),i=function(){function e(){this.state=Int32Array.from(r.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>r.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===r.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%r.BLOCK_SIZE>=r.BLOCK_SIZE-8){for(var i=this.bufferLength;i<r.BLOCK_SIZE;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<r.BLOCK_SIZE-8;i++)t.setUint8(i,0);t.setUint32(r.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(r.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var o=new Uint8Array(r.DIGEST_LENGTH);for(i=0;i<8;i++)o[4*i]=this.state[i]>>>24&255,o[4*i+1]=this.state[i]>>>16&255,o[4*i+2]=this.state[i]>>>8&255,o[4*i+3]=this.state[i]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],c=t[5],u=t[6],l=t[7],d=0;d<r.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(255&e[4*d])<<24|(255&e[4*d+1])<<16|(255&e[4*d+2])<<8|255&e[4*d+3];else{var h=this.temp[d-2],f=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10,p=((h=this.temp[d-15])>>>7|h<<25)^(h>>>18|h<<14)^h>>>3;this.temp[d]=(f+this.temp[d-7]|0)+(p+this.temp[d-16]|0)}var g=(((s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7))+(s&c^~s&u)|0)+(l+(r.KEY[d]+this.temp[d]|0)|0)|0,m=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&o^i&o)|0;l=u,u=c,c=s,s=a+g|0,a=o,o=i,i=n,n=g+m|0}t[0]+=n,t[1]+=i,t[2]+=o,t[3]+=a,t[4]+=s,t[5]+=c,t[6]+=u,t[7]+=l},e}();t.RawSha256=i},89945:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_HASHABLE_LENGTH=t.INIT=t.KEY=t.DIGEST_LENGTH=t.BLOCK_SIZE=void 0,t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},41938:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(73541).__exportStar(n(65430),t)},65430:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(73541),i=n(89945),o=n(10914),a=n(17658),s=function(){function e(e){if(this.hash=new o.RawSha256,e){this.outer=new o.RawSha256;var t=function(e){var t=(0,a.convertToBuffer)(e);if(t.byteLength>i.BLOCK_SIZE){var n=new o.RawSha256;n.update(t),t=n.digest()}var r=new Uint8Array(i.BLOCK_SIZE);return r.set(t),r}(e),n=new Uint8Array(i.BLOCK_SIZE);n.set(t);for(var r=0;r<i.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;for(this.hash.update(t),this.outer.update(n),r=0;r<t.byteLength;r++)t[r]=0}}return e.prototype.update=function(e){if(!(0,a.isEmptyData)(e)&&!this.error)try{this.hash.update((0,a.convertToBuffer)(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,this.digestSync()]}))}))},e}();t.Sha256=s},73541:function(e,t,n){"use strict";n.r(t),n.d(t,{__assign:function(){return o},__asyncDelegator:function(){return w},__asyncGenerator:function(){return b},__asyncValues:function(){return E},__await:function(){return y},__awaiter:function(){return l},__classPrivateFieldGet:function(){return P},__classPrivateFieldSet:function(){return C},__createBinding:function(){return h},__decorate:function(){return s},__exportStar:function(){return f},__extends:function(){return i},__generator:function(){return d},__importDefault:function(){return _},__importStar:function(){return T},__makeTemplateObject:function(){return S},__metadata:function(){return u},__param:function(){return c},__read:function(){return g},__rest:function(){return a},__spread:function(){return m},__spreadArrays:function(){return v},__values:function(){return p}});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function h(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function f(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof y?Promise.resolve(n.value.v).then(c,u):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function c(e){s("next",e)}function u(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function w(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}function P(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function C(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},51106:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToBuffer=void 0;var r=n(36482),i="undefined"!=typeof Buffer&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:r.fromUtf8;t.convertToBuffer=function(e){return e instanceof Uint8Array?e:"string"==typeof e?i(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}},17658:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var r=n(51106);Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return r.convertToBuffer}});var i=n(84304);Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return i.isEmptyData}});var o=n(22174);Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return o.numToUint8}});var a=n(81558);Object.defineProperty(t,"uint32ArrayFrom",{enumerable:!0,get:function(){return a.uint32ArrayFrom}})},84304:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},22174:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numToUint8=void 0,t.numToUint8=function(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},81558:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=void 0,t.uint32ArrayFrom=function(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),n=0;n<e.length;)t[n]=e[n],n+=1;return t}return Uint32Array.from(e)}},86013:function(e,t,n){"use strict";n.d(t,{FetchHttpHandler:function(){return a}});var r=n(99391),i=n(94073),o=n(69384);class a{constructor(e){"function"==typeof e?this.configProvider=e().then((e=>e||{})):(this.config=e??{},this.configProvider=Promise.resolve(this.config))}destroy(){}async handle(e,{abortSignal:t}={}){this.config||(this.config=await this.configProvider);const n=this.config.requestTimeout;if(t?.aborted){const e=new Error("Request aborted");return e.name="AbortError",Promise.reject(e)}let a=e.path;if(e.query){const t=(0,i.buildQueryString)(e.query);t&&(a+=`?${t}`)}const{port:s,method:c}=e,u=`${e.protocol}//${e.hostname}${s?`:${s}`:""}${a}`,l={body:"GET"===c||"HEAD"===c?void 0:e.body,headers:new Headers(e.headers),method:c};"undefined"!=typeof AbortController&&(l.signal=t);const d=new Request(u,l),h=[fetch(d).then((e=>{const t=e.headers,n={};for(const e of t.entries())n[e[0]]=e[1];return null!=e.body?{response:new r.HttpResponse({headers:n,statusCode:e.status,body:e.body})}:e.blob().then((t=>({response:new r.HttpResponse({headers:n,statusCode:e.status,body:t})})))})),(0,o.requestTimeout)(n)];return t&&h.push(new Promise(((e,n)=>{t.onabort=()=>{const e=new Error("Request aborted");e.name="AbortError",n(e)}}))),Promise.race(h)}}},44358:function(e,t,n){"use strict";var r=n(86013);n.o(r,"FetchHttpHandler")&&n.d(t,{FetchHttpHandler:function(){return r.FetchHttpHandler}});var i=n(48639);n.o(i,"FetchHttpHandler")&&n.d(t,{FetchHttpHandler:function(){return i.FetchHttpHandler}})},69384:function(e,t,n){"use strict";function r(e=0){return new Promise(((t,n)=>{e&&setTimeout((()=>{const t=new Error(`Request did not complete within ${e} ms`);t.name="TimeoutError",n(t)}),e)}))}n.d(t,{requestTimeout:function(){return r}})},48639:function(e,t,n){"use strict";n(27849)},90323:function(e,t,n){"use strict";n.d(t,{isArrayBuffer:function(){return r}});const r=e=>"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)},50621:function(e,t,n){"use strict";n(78281)},78281:function(e,t,n){"use strict";var r;!function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"}(r||(r={}))},41668:function(e,t,n){},69683:function(){},853:function(e,t,n){"use strict";n.d(t,{HttpRequest:function(){return r}});class r{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?`/${e.path}`:e.path:"/"}static isInstance(e){if(!e)return!1;const t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers}clone(){const e=new r({...this,headers:{...this.headers}});var t;return e.query&&(e.query=(t=e.query,Object.keys(t).reduce(((e,n)=>{const r=t[n];return{...e,[n]:Array.isArray(r)?[...r]:r}}),{}))),e}}},16742:function(e,t,n){"use strict";n.d(t,{HttpResponse:function(){return r}});class r{constructor(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers}}},99391:function(e,t,n){"use strict";var r=n(50621);n.o(r,"HttpRequest")&&n.d(t,{HttpRequest:function(){return r.HttpRequest}}),n.o(r,"HttpResponse")&&n.d(t,{HttpResponse:function(){return r.HttpResponse}});var i=n(78281);n.o(i,"HttpRequest")&&n.d(t,{HttpRequest:function(){return i.HttpRequest}}),n.o(i,"HttpResponse")&&n.d(t,{HttpResponse:function(){return i.HttpResponse}});var o=n(41668);n.o(o,"HttpRequest")&&n.d(t,{HttpRequest:function(){return o.HttpRequest}}),n.o(o,"HttpResponse")&&n.d(t,{HttpResponse:function(){return o.HttpResponse}});var a=n(69683);n.o(a,"HttpRequest")&&n.d(t,{HttpRequest:function(){return a.HttpRequest}}),n.o(a,"HttpResponse")&&n.d(t,{HttpResponse:function(){return a.HttpResponse}});var s=n(853);n.o(s,"HttpRequest")&&n.d(t,{HttpRequest:function(){return s.HttpRequest}}),n.o(s,"HttpResponse")&&n.d(t,{HttpResponse:function(){return s.HttpResponse}});var c=n(16742);n.o(c,"HttpRequest")&&n.d(t,{HttpRequest:function(){return c.HttpRequest}}),n.o(c,"HttpResponse")&&n.d(t,{HttpResponse:function(){return c.HttpResponse}});var u=n(8587);n.o(u,"HttpRequest")&&n.d(t,{HttpRequest:function(){return u.HttpRequest}}),n.o(u,"HttpResponse")&&n.d(t,{HttpResponse:function(){return u.HttpResponse}})},8587:function(e,t,n){},94073:function(e,t,n){"use strict";n.d(t,{buildQueryString:function(){return i}});var r=n(63489);function i(e){const t=[];for(let n of Object.keys(e).sort()){const i=e[n];if(n=(0,r.escapeUri)(n),Array.isArray(i))for(let e=0,o=i.length;e<o;e++)t.push(`${n}=${(0,r.escapeUri)(i[e])}`);else{let e=n;(i||"string"==typeof i)&&(e+=`=${(0,r.escapeUri)(i)}`),t.push(e)}}return t.join("&")}},56492:function(e,t,n){"use strict";n.d(t,{SignatureV4:function(){return g}});var r=n(73538),i=n(88792),o=n(35450),a=n(49889),s=n(79077),c=n(42221),u=n(52223),l=n(29389),d=n(88016),h=n(24888),f=n(13961),p=n(29529);class g{constructor({applyChecksum:e,credentials:t,region:n,service:r,sha256:o,uriEscapePath:a=!0}){this.service=r,this.sha256=o,this.uriEscapePath=a,this.applyChecksum="boolean"!=typeof e||e,this.regionProvider=(0,i.normalizeProvider)(n),this.credentialProvider=(0,i.normalizeProvider)(t)}async presign(e,t={}){const{signingDate:n=new Date,expiresIn:r=3600,unsignableHeaders:i,unhoistableHeaders:o,signableHeaders:u,signingRegion:d,signingService:p}=t,g=await this.credentialProvider();this.validateResolvedCredentials(g);const y=d??await this.regionProvider(),{longDate:b,shortDate:w}=m(n);if(r>a.MAX_PRESIGNED_TTL)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const E=(0,s.createScope)(w,y,p??this.service),S=(0,h.moveHeadersToQuery)((0,f.prepareRequest)(e),{unhoistableHeaders:o});g.sessionToken&&(S.query[a.TOKEN_QUERY_PARAM]=g.sessionToken),S.query[a.ALGORITHM_QUERY_PARAM]=a.ALGORITHM_IDENTIFIER,S.query[a.CREDENTIAL_QUERY_PARAM]=`${g.accessKeyId}/${E}`,S.query[a.AMZ_DATE_QUERY_PARAM]=b,S.query[a.EXPIRES_QUERY_PARAM]=r.toString(10);const T=(0,c.getCanonicalHeaders)(S,i,u);return S.query[a.SIGNED_HEADERS_QUERY_PARAM]=v(T),S.query[a.SIGNATURE_QUERY_PARAM]=await this.getSignature(b,E,this.getSigningKey(g,y,w,p),this.createCanonicalRequest(S,T,await(0,l.getPayloadHash)(e,this.sha256))),S}async sign(e,t){return"string"==typeof e?this.signString(e,t):e.headers&&e.payload?this.signEvent(e,t):this.signRequest(e,t)}async signEvent({headers:e,payload:t},{signingDate:n=new Date,priorSignature:i,signingRegion:o,signingService:c}){const u=o??await this.regionProvider(),{shortDate:d,longDate:h}=m(n),f=(0,s.createScope)(d,u,c??this.service),p=await(0,l.getPayloadHash)({headers:{},body:t},this.sha256),g=new this.sha256;g.update(e);const v=(0,r.toHex)(await g.digest()),y=[a.EVENT_ALGORITHM_IDENTIFIER,h,f,i,v,p].join("\n");return this.signString(y,{signingDate:n,signingRegion:u,signingService:c})}async signString(e,{signingDate:t=new Date,signingRegion:n,signingService:i}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const s=n??await this.regionProvider(),{shortDate:c}=m(t),u=new this.sha256(await this.getSigningKey(a,s,c,i));return u.update((0,o.toUint8Array)(e)),(0,r.toHex)(await u.digest())}async signRequest(e,{signingDate:t=new Date,signableHeaders:n,unsignableHeaders:r,signingRegion:i,signingService:o}={}){const u=await this.credentialProvider();this.validateResolvedCredentials(u);const h=i??await this.regionProvider(),p=(0,f.prepareRequest)(e),{longDate:g,shortDate:y}=m(t),b=(0,s.createScope)(y,h,o??this.service);p.headers[a.AMZ_DATE_HEADER]=g,u.sessionToken&&(p.headers[a.TOKEN_HEADER]=u.sessionToken);const w=await(0,l.getPayloadHash)(p,this.sha256);!(0,d.hasHeader)(a.SHA256_HEADER,p.headers)&&this.applyChecksum&&(p.headers[a.SHA256_HEADER]=w);const E=(0,c.getCanonicalHeaders)(p,r,n),S=await this.getSignature(g,b,this.getSigningKey(u,h,y,o),this.createCanonicalRequest(p,E,w));return p.headers[a.AUTH_HEADER]=`${a.ALGORITHM_IDENTIFIER} Credential=${u.accessKeyId}/${b}, SignedHeaders=${v(E)}, Signature=${S}`,p}createCanonicalRequest(e,t,n){const r=Object.keys(t).sort();return`${e.method}\n${this.getCanonicalPath(e)}\n${(0,u.getCanonicalQuery)(e)}\n${r.map((e=>`${e}:${t[e]}`)).join("\n")}\n\n${r.join(";")}\n${n}`}async createStringToSign(e,t,n){const i=new this.sha256;i.update((0,o.toUint8Array)(n));const s=await i.digest();return`${a.ALGORITHM_IDENTIFIER}\n${e}\n${t}\n${(0,r.toHex)(s)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const t=[];for(const n of e.split("/"))0!==n?.length&&"."!==n&&(".."===n?t.pop():t.push(n));const n=`${e?.startsWith("/")?"/":""}${t.join("/")}${t.length>0&&e?.endsWith("/")?"/":""}`;return encodeURIComponent(n).replace(/%2F/g,"/")}return e}async getSignature(e,t,n,i){const a=await this.createStringToSign(e,t,i),s=new this.sha256(await n);return s.update((0,o.toUint8Array)(a)),(0,r.toHex)(await s.digest())}getSigningKey(e,t,n,r){return(0,s.getSigningKey)(this.sha256,e,n,t,r||this.service)}validateResolvedCredentials(e){if("object"!=typeof e||"string"!=typeof e.accessKeyId||"string"!=typeof e.secretAccessKey)throw new Error("Resolved credential object is not valid")}}const m=e=>{const t=(0,p.iso8601)(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},v=e=>Object.keys(e).sort().join(";")},69758:function(e,t,n){"use strict";n.d(t,{cloneRequest:function(){return r}});const r=({headers:e,query:t,...n})=>({...n,headers:{...e},query:t?i(t):void 0}),i=e=>Object.keys(e).reduce(((t,n)=>{const r=e[n];return{...t,[n]:Array.isArray(r)?[...r]:r}}),{})},49889:function(e,t,n){"use strict";n.d(t,{ALGORITHM_IDENTIFIER:function(){return b},ALGORITHM_QUERY_PARAM:function(){return r},ALWAYS_UNSIGNABLE_HEADERS:function(){return m},AMZ_DATE_HEADER:function(){return d},AMZ_DATE_QUERY_PARAM:function(){return o},AUTH_HEADER:function(){return l},CREDENTIAL_QUERY_PARAM:function(){return i},EVENT_ALGORITHM_IDENTIFIER:function(){return w},EXPIRES_QUERY_PARAM:function(){return s},GENERATED_HEADERS:function(){return h},KEY_TYPE_IDENTIFIER:function(){return T},MAX_CACHE_SIZE:function(){return S},MAX_PRESIGNED_TTL:function(){return _},PROXY_HEADER_PATTERN:function(){return v},SEC_HEADER_PATTERN:function(){return y},SHA256_HEADER:function(){return p},SIGNATURE_HEADER:function(){return f},SIGNATURE_QUERY_PARAM:function(){return c},SIGNED_HEADERS_QUERY_PARAM:function(){return a},TOKEN_HEADER:function(){return g},TOKEN_QUERY_PARAM:function(){return u},UNSIGNED_PAYLOAD:function(){return E}});const r="X-Amz-Algorithm",i="X-Amz-Credential",o="X-Amz-Date",a="X-Amz-SignedHeaders",s="X-Amz-Expires",c="X-Amz-Signature",u="X-Amz-Security-Token",l="authorization",d=o.toLowerCase(),h=[l,d,"date"],f=c.toLowerCase(),p="x-amz-content-sha256",g=u.toLowerCase(),m={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},v=/^proxy-/,y=/^sec-/,b="AWS4-HMAC-SHA256",w="AWS4-HMAC-SHA256-PAYLOAD",E="UNSIGNED-PAYLOAD",S=50,T="aws4_request",_=604800},79077:function(e,t,n){"use strict";n.d(t,{createScope:function(){return c},getSigningKey:function(){return u}});var r=n(73538),i=n(35450),o=n(49889);const a={},s=[],c=(e,t,n)=>`${e}/${t}/${n}/${o.KEY_TYPE_IDENTIFIER}`,u=async(e,t,n,i,c)=>{const u=await l(e,t.secretAccessKey,t.accessKeyId),d=`${n}:${i}:${c}:${(0,r.toHex)(u)}:${t.sessionToken}`;if(d in a)return a[d];for(s.push(d);s.length>o.MAX_CACHE_SIZE;)delete a[s.shift()];let h=`AWS4${t.secretAccessKey}`;for(const t of[n,i,c,o.KEY_TYPE_IDENTIFIER])h=await l(e,h,t);return a[d]=h},l=(e,t,n)=>{const r=new e(t);return r.update((0,i.toUint8Array)(n)),r.digest()}},42221:function(e,t,n){"use strict";n.d(t,{getCanonicalHeaders:function(){return i}});var r=n(49889);const i=({headers:e},t,n)=>{const i={};for(const o of Object.keys(e).sort()){if(null==e[o])continue;const a=o.toLowerCase();(a in r.ALWAYS_UNSIGNABLE_HEADERS||t?.has(a)||r.PROXY_HEADER_PATTERN.test(a)||r.SEC_HEADER_PATTERN.test(a))&&(!n||n&&!n.has(a))||(i[a]=e[o].trim().replace(/\s+/g," "))}return i}},52223:function(e,t,n){"use strict";n.d(t,{getCanonicalQuery:function(){return o}});var r=n(63489),i=n(49889);const o=({query:e={}})=>{const t=[],n={};for(const o of Object.keys(e).sort()){if(o.toLowerCase()===i.SIGNATURE_HEADER)continue;t.push(o);const a=e[o];"string"==typeof a?n[o]=`${(0,r.escapeUri)(o)}=${(0,r.escapeUri)(a)}`:Array.isArray(a)&&(n[o]=a.slice(0).sort().reduce(((e,t)=>e.concat([`${(0,r.escapeUri)(o)}=${(0,r.escapeUri)(t)}`])),[]).join("&"))}return t.map((e=>n[e])).filter((e=>e)).join("&")}},29389:function(e,t,n){"use strict";n.d(t,{getPayloadHash:function(){return s}});var r=n(90323),i=n(73538),o=n(35450),a=n(49889);const s=async({headers:e,body:t},n)=>{for(const t of Object.keys(e))if(t.toLowerCase()===a.SHA256_HEADER)return e[t];if(null==t)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if("string"==typeof t||ArrayBuffer.isView(t)||(0,r.isArrayBuffer)(t)){const e=new n;return e.update((0,o.toUint8Array)(t)),(0,i.toHex)(await e.digest())}return a.UNSIGNED_PAYLOAD}},88016:function(e,t,n){"use strict";n.d(t,{hasHeader:function(){return r}});const r=(e,t)=>{e=e.toLowerCase();for(const n of Object.keys(t))if(e===n.toLowerCase())return!0;return!1}},21070:function(e,t,n){"use strict";var r=n(56492);n.o(r,"SignatureV4")&&n.d(t,{SignatureV4:function(){return r.SignatureV4}}),n(42221),n(52223),n(29389),n(13961);var i=n(79077);n.o(i,"SignatureV4")&&n.d(t,{SignatureV4:function(){return i.SignatureV4}})},24888:function(e,t,n){"use strict";n.d(t,{moveHeadersToQuery:function(){return i}});var r=n(69758);const i=(e,t={})=>{const{headers:n,query:i={}}="function"==typeof e.clone?e.clone():(0,r.cloneRequest)(e);for(const e of Object.keys(n)){const r=e.toLowerCase();"x-amz-"!==r.slice(0,6)||t.unhoistableHeaders?.has(r)||(i[e]=n[e],delete n[e])}return{...e,headers:n,query:i}}},13961:function(e,t,n){"use strict";n.d(t,{prepareRequest:function(){return o}});var r=n(69758),i=n(49889);const o=e=>{e="function"==typeof e.clone?e.clone():(0,r.cloneRequest)(e);for(const t of Object.keys(e.headers))i.GENERATED_HEADERS.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e}},29529:function(e,t,n){"use strict";n.d(t,{iso8601:function(){return r}});const r=e=>i(e).toISOString().replace(/\.\d{3}Z$/,"Z"),i=e=>"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e},27849:function(){"use strict";const e={},t=new Array(64);for(let n=0,r="A".charCodeAt(0),i="Z".charCodeAt(0);n+r<=i;n++){const i=String.fromCharCode(n+r);e[i]=n,t[n]=i}for(let n=0,r="a".charCodeAt(0),i="z".charCodeAt(0);n+r<=i;n++){const i=String.fromCharCode(n+r),o=n+26;e[i]=o,t[o]=i}for(let n=0;n<10;n++){e[n.toString(10)]=n+52;const r=n.toString(10),i=n+52;e[r]=i,t[i]=r}e["+"]=62,t[62]="+",e["/"]=63,t[63]="/"},73538:function(e,t,n){"use strict";n.d(t,{toHex:function(){return o}});const r={},i={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),r[e]=t,i[t]=e}function o(e){let t="";for(let n=0;n<e.byteLength;n++)t+=r[e[n]];return t}},88792:function(e,t,n){"use strict";var r=n(57079);n.o(r,"normalizeProvider")&&n.d(t,{normalizeProvider:function(){return r.normalizeProvider}})},57079:function(e,t,n){"use strict";n.d(t,{normalizeProvider:function(){return r}});const r=e=>{if("function"==typeof e)return e;const t=Promise.resolve(e);return()=>t}},14279:function(e,t,n){},76528:function(e,t,n){"use strict";n.d(t,{escapeUri:function(){return r}});const r=e=>encodeURIComponent(e).replace(/[!'()*]/g,i),i=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`},63489:function(e,t,n){"use strict";var r=n(76528);n.o(r,"escapeUri")&&n.d(t,{escapeUri:function(){return r.escapeUri}});var i=n(14279);n.o(i,"escapeUri")&&n.d(t,{escapeUri:function(){return i.escapeUri}})},36482:function(e,t,n){"use strict";n.r(t),n.d(t,{fromUtf8:function(){return o},toUtf8:function(){return a}});var r=n(7586),i=n(40043);const o=e=>"function"==typeof TextEncoder?(0,i.fromUtf8)(e):(0,r.fromUtf8)(e),a=e=>"function"==typeof TextDecoder?(0,i.toUtf8)(e):(0,r.toUtf8)(e)},7586:function(e,t,n){"use strict";n.d(t,{fromUtf8:function(){return r},toUtf8:function(){return i}});const r=e=>{const t=[];for(let n=0,r=e.length;n<r;n++){const r=e.charCodeAt(n);if(r<128)t.push(r);else if(r<2048)t.push(r>>6|192,63&r|128);else if(n+1<e.length&&55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))){const i=65536+((1023&r)<<10)+(1023&e.charCodeAt(++n));t.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else t.push(r>>12|224,r>>6&63|128,63&r|128)}return Uint8Array.from(t)},i=e=>{let t="";for(let n=0,r=e.length;n<r;n++){const r=e[n];if(r<128)t+=String.fromCharCode(r);else if(192<=r&&r<224){const i=e[++n];t+=String.fromCharCode((31&r)<<6|63&i)}else if(240<=r&&r<365){const i="%"+[r,e[++n],e[++n],e[++n]].map((e=>e.toString(16))).join("%");t+=decodeURIComponent(i)}else t+=String.fromCharCode((15&r)<<12|(63&e[++n])<<6|63&e[++n])}return t}},40043:function(e,t,n){"use strict";function r(e){return(new TextEncoder).encode(e)}function i(e){return new TextDecoder("utf-8").decode(e)}n.d(t,{fromUtf8:function(){return r},toUtf8:function(){return i}})},82498:function(e,t,n){"use strict";n.d(t,{fromUtf8:function(){return r}});const r=e=>(new TextEncoder).encode(e)},35450:function(e,t,n){"use strict";var r=n(82498);n.o(r,"toUint8Array")&&n.d(t,{toUint8Array:function(){return r.toUint8Array}});var i=n(20916);n.o(i,"toUint8Array")&&n.d(t,{toUint8Array:function(){return i.toUint8Array}});var o=n(6521);n.o(o,"toUint8Array")&&n.d(t,{toUint8Array:function(){return o.toUint8Array}})},20916:function(e,t,n){"use strict";n.d(t,{toUint8Array:function(){return i}});var r=n(82498);const i=e=>"string"==typeof e?(0,r.fromUtf8)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)},6521:function(e,t,n){},67228:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},23646:function(e,t,n){var r=n(67228);e.exports=function(e){if(Array.isArray(e))return r(e)}},81506:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},34575:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},93913:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}},59713:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},16525:function(e,t,n){var r=n(58331);function i(t,n,o){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=i=Reflect.get:e.exports=i=function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},i(t,n,o||t)}e.exports=i},29754:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t},2205:function(e,t,n){var r=n(99489);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},95318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},20862:function(e,t,n){var r=n(50008);function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}e.exports=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}},46860:function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},98206:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},60693:function(e,t,n){var r=n(59713);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e}},78585:function(e,t,n){var r=n(50008),i=n(81506);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}},2911:function(e,t,n){var r=n(58331),i=n(59713);function o(e,t,n,a){return o="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,o){var a,s=r(e,t);if(s){if((a=Object.getOwnPropertyDescriptor(s,t)).set)return a.set.call(o,n),!0;if(!a.writable)return!1}if(a=Object.getOwnPropertyDescriptor(o,t)){if(!a.writable)return!1;a.value=n,Object.defineProperty(o,t,a)}else i(o,t,n);return!0},o(e,t,n,a)}e.exports=function(e,t,n,r,i){if(!o(e,t,n,r||e)&&i)throw new Error("failed to set property");return n}},99489:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t},58331:function(e,t,n){var r=n(29754);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},319:function(e,t,n){var r=n(23646),i=n(46860),o=n(60379),a=n(98206);e.exports=function(e){return r(e)||i(e)||o(e)||a()}},50008:function(e){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t},60379:function(e,t,n){var r=n(67228);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},65973:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsAggregator=void 0;var n=function(){function e(e){var t=this;this.filterFunction=e,this.aggregatedMetrics={},window.addEventListener("katal.metrics.publish",(function(e){t.aggregateMetric(e)}))}return e.prototype.aggregateMetric=function(e){var t=e.detail,n=t.metric,r=t.context,i=r.serviceName,o=r.methodName;this.filterFunction&&!this.filterFunction(n,r)||(this.aggregatedMetrics[i]=this.aggregatedMetrics[i]||{},this.aggregatedMetrics[i][o]=this.aggregatedMetrics[i][o]||{},this.aggregatedMetrics[i][o][n.name]=this.aggregatedMetrics[i][o][n.name]||[],this.aggregatedMetrics[i][o][n.name].push(n.value))},e}();t.MetricsAggregator=n},8434:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Level=void 0;var a,s=o(n(73705)),c=o(n(70401)),u=n(37973),l=n(65973);!function(e){e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error",e.FATAL="fatal"}(a=t.Level||(t.Level={}));var d=[a.DEBUG,a.INFO,a.WARN,a.ERROR,a.FATAL],h={logThreshold:a.DEBUG,maxLogLineSize:1e4,batchTimeoutDuration:5e3,decodeStackTrace:!1,recordMetrics:!0,context:{},headers:{},logToConsole:!1,maxLogsPerBatch:25,useXMLHttpRequest:!1},f=["bubbles","cancelBubble","cancelable","composed","currentTarget","deepPath","defaultPrevented","eventPhase","explicitOriginalTarget","originalTarget","returnValue","srcElement","target","timeStamp","type","isTrusted"],p=i(f,["message"]),g=function(){function e(e){var t=this;this.resourceTimingLogged=!1,this.sendLogsToBackend=function(){var e=t.logLineQueue;if(0!==e.length){t.logLineQueue=[];var n={logs:e};t.sendLogToBackend(t.toJSON(n)),t.queueTimerId=void 0}};var n=r(r({},h),e);this.url=n.url,this.logThreshold=n.logThreshold,this.maxLogLineSize=n.maxLogLineSize,this.context=n.context,this.logToConsole=n.logToConsole,this.headers=n.headers,this.recordMetrics=n.recordMetrics,this.batchTimeoutDuration=n.batchTimeoutDuration,this.decodeStackTrace=n.decodeStackTrace,this.maxLogsPerBatch=n.maxLogsPerBatch,this.xhrWithCredentials=n.xhrWithCredentials,this.useXMLHttpRequest=n.useXMLHttpRequest,this.logLineQueue=[],this.unregisterFns=[],this.unloaded=!1,this.logThresholdIndex=Math.max(d.indexOf(a.DEBUG),d.indexOf(this.logThreshold)),n.sendToBackendOverride&&"function"==typeof n.sendToBackendOverride&&(this.sendLogToBackend=n.sendToBackendOverride),this.recordMetrics&&(this.metricsPublisher=u.createMetricsPublisher("KatalLogger:Loaded"),this.metricsPublisher.publishCounterMonitor("KatalLogger:construct",1)),this.registerUnloadAction((function(){t.unloaded=!0,t.sendLogsToBackend()})),this.registerBackToPageAction((function(){t.unloaded=!1}))}return e.prototype.registerUnloadAction=function(e){this.registerEvent("pagehide",e),this.registerEvent("beforeunload",e),this.registerEvent("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},e.prototype.registerBackToPageAction=function(e){this.registerEvent("pageshow",e),this.registerEvent("visibilitychange",(function(){"visible"===document.visibilityState&&e()}))},e.prototype.addMetricsListener=function(e){var t=this,n=new l.MetricsAggregator(e),r=!1;this.registerUnloadAction((function(){r||(r=!0,t.info("Katal Metrics",n.aggregatedMetrics))}))},e.prototype.addPerformanceListener=function(){var e=this;this.registerUnloadAction((function(){e.logResourceTiming()}))},e.prototype.logResourceTiming=function(){var e,t;if(!this.resourceTimingLogged){this.resourceTimingLogged=!0;var n=window.performance.getEntriesByType("resource").reduce((function(e,t){var n,r=t,i=r.name,o=r.initiatorType,a=r.duration,s=i.split("/").pop();return e[o]=null!==(n=e[o])&&void 0!==n?n:{},e[o][s]=Math.round(a),e}),{}),r=window.performance.getEntriesByType("paint").reduce((function(e,t){var n=t.name,r=t.startTime;return e[n]=Math.round(r),e}),{}),i=Object.entries(null!==(t=null===(e=window.performance.getEntriesByType("navigation")[0])||void 0===e?void 0:e.toJSON())&&void 0!==t?t:{}).reduce((function(e,t){var n=t[0],r=t[1];return e[n]="number"==typeof r?Math.round(r):r,e}),{});this.info("Performance Timing",{resource:n,paint:r,navigation:i})}},e.prototype.addErrorListener=function(e){var t=this;["error","unhandledrejection"].map((function(n){t.registerEvent(n,(function(n){return t.eventListener(n,e)}),!0)}))},e.prototype.removeErrorListener=function(){this.unregisterFns.forEach((function(e){return e()}))},e.prototype.registerEvent=function(e,t,n){window.addEventListener(e,t,n),this.unregisterFns.push((function(){window.removeEventListener(e,t,n)}))},e.prototype.eventListener=function(e,t){var n,r;if(e.error?(n=e.error.message,r=e.error):e.reason?m(e.reason)?(n=e.reason.message,r=e.reason):n=e.reason:m(e)?(n=e.message,r=e):(n="An unknown error occurred: "+this.toStringObject(e),r=new Error("Unknown error")),"KatalLogger error"!==n&&(!t||t(r)))try{return this.error(n,r)}catch(e){}},e.prototype.createJsonStringifyReplacer=function(){var e=new Map;return function(t,n){if("object"==typeof n&&null!=n){if(e.has(n))return"reference-loop, also referenced from '"+e.get(n)+"'";e.set(n,t)}return n}},e.prototype.toStringObject=function(e){var t=e.constructor.name;if(e instanceof Event){var n=f,r={};e instanceof ErrorEvent&&(n=p);for(var i=0,o=n;i<o.length;i++){var a=o[i];e[a]!==window&&(r[a]=e[a])}e=r}return t+":"+this.toJSON(e)},e.prototype.toJSON=function(e){var t;try{t=JSON.stringify(e,this.createJsonStringifyReplacer())}catch(n){t='{ "KatalLogger": "Failed to serialize!", "data": "'+e+'", "error": "'+n+'" }'}return t},e.prototype.debug=function(e,t,n){var r=this;return this.extractArgs(a.DEBUG,e,t,n).then((function(e){return r.sendRequest(e)}))},e.prototype.info=function(e,t,n){var r=this;return this.extractArgs(a.INFO,e,t,n).then((function(e){return r.sendRequest(e)}))},e.prototype.warn=function(e,t,n){var r=this;return this.extractArgs(a.WARN,e,t,n).then((function(e){return r.sendRequest(e)}))},e.prototype.error=function(e,t,n){var r=this;return this.extractArgs(a.ERROR,e,t,n).then((function(e){return r.sendRequest(e)}))},e.prototype.fatal=function(e,t,n){var r=this;return this.extractArgs(a.FATAL,e,t,n).then((function(e){return r.sendRequest(e)}))},e.prototype.extractArgs=function(e,t,n,i){var o=m(n)?{errorMessage:n.message,errorName:n.name,errorStackTrace:""}:void 0,a={level:e,message:t,error:o,context:r(r(r({},this.context),o?i:n),{logTime:Date.now()})};return a.error?this.getStackTraceFromError(n).then((function(e){return a.error.errorStackTrace=e,a})):s.default.resolve(a)},e.prototype.getStackTraceFromError=function(e){return this.decodeStackTrace?s.default.resolve(c.default.fromError(e).then((function(e){return e.map((function(e){return e.toString()})).join("\n")})).catch((function(t){return String(e.stack)+"\n\nFailed to decode stacktrace:\n"+String(t)}))):s.default.resolve(String(e.stack))},e.prototype.sendRequest=function(e){this.queueLogLine(e),this.logToConsole&&this.sendLogToConsole(e)},e.prototype.sendLogToConsole=function(e){var t=e.level;d.includes(e.level)&&e.level!==a.FATAL||(t=a.ERROR),console[t](e)},e.prototype.queueLogLine=function(e){this.payloadIsValid(e)&&(this.appendToQueue(e),this.unloaded||this.logLineQueue.length>=this.maxLogsPerBatch?this.sendLogsToBackend():this.queueTimerId||(this.queueTimerId=window.setTimeout(this.sendLogsToBackend,this.batchTimeoutDuration)))},e.prototype.appendToQueue=function(e){this.logLineQueue.push(e)},e.prototype.doCallBeacon=function(){return(null===navigator||void 0===navigator?void 0:navigator.sendBeacon)&&!(Object.keys(this.headers).length||this.useXMLHttpRequest)},e.prototype.sendLogToBackend=function(e){if(this.url)if(this.doCallBeacon())navigator.sendBeacon(this.url,e);else{var t=new XMLHttpRequest;t.open("POST",this.url,!0),this.xhrWithCredentials&&(t.withCredentials=this.xhrWithCredentials),Object.entries(this.headers).forEach((function(e){var n=e[0],r=e[1];t.setRequestHeader(n,r)})),t.send(e)}},e.prototype.payloadIsValid=function(e){return d.indexOf(e.level)>=this.logThresholdIndex&&this.toJSON(e).length<=this.maxLogLineSize},e}();function m(e){return(null==e?void 0:e.name)&&e.message&&(e.stack||!!e.constructor)}t.default=g},37973:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createMetricsPublisher=void 0;var s=o(n(95989)),c=function(e){console.error(e)},u=(new(a(n(28277)).default.Builder)).withDomainRealm("prod","USAmazon").withErrorHandler(c).build(),l=/([^?]+)/.exec(window.location.href),d=new s.Metric.String("url",l?l[1]:window.location.href);d.truncate=!0;var h=(new s.Context.Builder).withSite("KatalLoggerInternalMetrics").withServiceName("KatalLogger").addRelatedMetrics(d).build(),f=new s.Publisher(u,c,h);t.createMetricsPublisher=function(e){return f.newChildActionPublisherForMethod(e)}},65216:function(e,t,n){"use strict";n.d(t,{initializeI18n:function(){return u}});var r=n(36609),i=n(89935),o=n(84093),a=n(26071),s=n(74860),c=n(40850),u=function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var t;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(n){switch(n.label){case 0:return[4,(t=r.default.createInstance({lng:e})).use(i.default).use(o.default).use(a.default).init({react:{useSuspense:!0},debug:!1,fallbackLng:["en-US"],interpolation:{escapeValue:!1},load:"currentOnly",backend:{loadPath:function(e){return(0,c.getBucketUrl)()+"/"+s.default[e]}},detection:{order:["querystring","localStorage","navigator","htmlTag"],lookupQuerystring:"language"}}).then((function(){console.info("LITB: initializeI18n:i18next object initialised successfully.")})).catch((function(e){console.error("LITB: initializeI18n:initialisation fail for i18next obj.",e)}))];case 1:return n.sent(),[2,t]}}))}))}},94562:function(e,t,n){"use strict";var r,i,o,a,s,c;n.d(t,{OfferActionProgramCode:function(){return s},OfferActionType:function(){return r}}),n(68217),function(e){e.BUY="Buy",e.BORROW="Borrow",e.PREORDER="Preorder",e.READ="Read",e.SAMPLE="Sample"}(r||(r={})),function(e){e.CART="cart",e.PLAY="play",e.HAND="hand"}(i||(i={})),function(e){e.ALC="Purchase",e.KU="KindleUnlimited",e.PRR="Prime"}(o||(o={})),function(e){e.SUCCESS="Success",e.VIOLATION="Violation"}(a||(a={})),function(e){e.KINDLE_UNLIMITED="KINDLE_UNLIMITED",e.PRIME="PRIME"}(s||(s={})),function(e){e.KINDLE_UNLIMITED="KU",e.PRIME_READING="PrimeReading"}(c||(c={}))},45170:function(e,t,n){"use strict";n.d(t,{getAsinFromUrl:function(){return r}});var r=function(){var e=window.location.pathname.split("/");return e[e.length-1]}},96915:function(e,t,n){"use strict";n.d(t,{MobileOS:function(){return r},adjustHeight:function(){return y},getMobileOS:function(){return f},getWindowHeight:function(){return m},getWindowWidth:function(){return v},isActionSupported:function(){return g},isAndroid:function(){return o},isFirefox:function(){return l},isIE11:function(){return p},isIOS:function(){return s},isIOSSafari:function(){return u},isMShop:function(){return h},isSamsungInternet:function(){return d},isiPad:function(){return a}});var r,i=n(94562);!function(e){e[e.Android=0]="Android",e[e.iOS=1]="iOS",e[e.unknown=2]="unknown"}(r||(r={}));var o=function(){return-1!==window.navigator.userAgent.indexOf("Android")},a=function(){return-1!==window.navigator.userAgent.indexOf("iPad")||c()&&window.navigator.maxTouchPoints>2},s=function(){return a()||-1!==window.navigator.userAgent.indexOf("iPhone")||-1!==window.navigator.userAgent.indexOf("iPod")},c=function(){return-1!==window.navigator.userAgent.indexOf("Mac OS X")},u=function(){return s()&&!/criOS|fxiOS/i.test(navigator.userAgent)},l=function(){return/Firefox|fxiOS/i.test(navigator.userAgent)},d=function(){return/Samsung/i.test(navigator.userAgent)},h=function(){return!!window.smash},f=function(){return o()?r.Android:s()?r.iOS:r.unknown},p=function(){return/Trident\/[78]\.0/.test(window.navigator.userAgent)},g=function(e,t){return!(h()&&s()&&t===i.OfferActionType.BUY&&!e)},m=function(){return u()&&!h()?Math.min(window.innerHeight,window.document.documentElement.clientHeight):document.documentElement.clientHeight},v=function(){return document.documentElement.clientWidth},y=function(e){if(void 0===e&&(e=!0),s()){var t=m(),n=document.getElementById("mainContainer"),r=document.documentElement.clientHeight-window.innerHeight;n&&(e&&window.scrollTo(window.scrollX,window.scrollY-r),n.style.height=t+"px",n.style.position="relative")}}},40850:function(e,t,n){"use strict";n.d(t,{getBaseImagesUrl:function(){return i},getBucketUrl:function(){return r}});var r=function(e){return void 0===e&&(e=document.getElementById("assetsCfUrl")),e?""+e.getAttribute("data-assets-cf-url"):""},i=function(){var e,t=(void 0===e&&(e=document.getElementById("assetsCfUrl")),r(e)+"/assets");return t?t+"/images":""}},49034:function(e,t,n){"use strict";n.d(t,{getAppDownloadURL:function(){return s},getKindleAppURL:function(){return o},getKindleLiteAppURL:function(){return a},openKindleApp:function(){return l},registerAppOpenCheck:function(){return c}});var r,i=n(96915),o=function(e){return"kindle://book/?action=open&asin="+e},a=function(e){return"kindlelite://book/?action=open&asin="+e},s=function(e){return"https://www.amazon.com/gp/kindle/kcpApp.html?ref_="+e};function c(){window.addEventListener("blur",(function(){return r=!0}))}function u(e){window.top.location.href=s(e)}function l(e,t){var n=i.getMobileOS();n===i.MobileOS.unknown||i.isIOSSafari()?u(t):(r=!1,window.top.location.href=o(e),setTimeout((function(){r||(n!==i.MobileOS.Android||i.isFirefox()?u(t):(window.top.location.href=a(e),setTimeout((function(){r||u(t)}),1e3)))}),1e3))}},78751:function(e,t,n){"use strict";n.d(t,{getLangFromLocale:function(){return u},getLocaleFromUrlOrCookie:function(){return o},getLocalizedPriceDisplayString:function(){return c},getTextDirectionFromLocale:function(){return a},getTextDirectionStyle:function(){return s}});var r=n(36808),i=["ar","he","fa","ur","sd"],o=function(){var e,t=new URL(window.location.href).searchParams.get("l");return"iw_IL"===t&&(t="he_IL"),t||(t=(null===(e=document.getElementById("locale"))||void 0===e?void 0:e.getAttribute("data-value"))||r.get("lc-main")||""),t||"en_US"},a=function(e){var t=e.split("_")[0];return i.indexOf(t)>-1?"rtl":"ltr"},s=function(e){return"rtl"===e?{direction:"rtl"}:void 0},c=function(e,t,n){var r=[e.replace("_","-")||"en-US"];return t.toLocaleString(r,{style:"currency",currency:n,currencyDisplay:"code"})},u=function(){return o().split("_").map((function(e){return e.toLowerCase()})).join("-")}},98087:function(e,t,n){"use strict";n.d(t,{getMarketplace:function(){return i},marketplaceInfo:function(){return r}});var r={US:{marketplace:"US",domain:"read.amazon.com",region:"us-east-1",storeLink:"www.amazon.com/dp/",marketplaceId:"ATVPDKIKX0DER",katalCloudWatchEndpoint:"https://uq4ue90d3b.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://b11v5ewz9l.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"USAmazon"},JP:{marketplace:"JP",domain:"read.amazon.co.jp",region:"ap-northeast-1",storeLink:"www.amazon.co.jp/dp/",marketplaceId:"A1VC38T7YXB528",katalCloudWatchEndpoint:"https://arp3q8lp5d.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://bs7kdk5kxb.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalMetricsRealm:"JPAmazon"},CA:{marketplace:"CA",domain:"read.amazon.ca",region:"us-east-1",storeLink:"www.amazon.ca/dp/",marketplaceId:"A2EUQ1WTGCTBG2",katalCloudWatchEndpoint:"https://uq4ue90d3b.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://b11v5ewz9l.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"NAAmazon"},BR:{marketplace:"BR",domain:"ler.amazon.com.br",region:"eu-west-1",storeLink:"www.amazon.com.br/dp/",marketplaceId:"A2Q3Y263D00KWC",katalCloudWatchEndpoint:"https://uq4ue90d3b.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://b11v5ewz9l.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"NAAmazon"},AU:{marketplace:"AU",domain:"read.amazon.com.au",region:"ap-northeast-1",storeLink:"www.amazon.com.au/dp/",marketplaceId:"A39IBJ37TRP1C6",katalCloudWatchEndpoint:"https://arp3q8lp5d.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://bs7kdk5kxb.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalMetricsRealm:"FEAmazon"},MX:{marketplace:"MX",domain:"leer.amazon.com.mx",region:"us-east-1",storeLink:"www.amazon.com.mx/dp/",marketplaceId:"A1AM78C64UM0Y8",katalCloudWatchEndpoint:"https://uq4ue90d3b.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://b11v5ewz9l.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"NAAmazon"},UK:{marketplace:"GB",domain:"read.amazon.co.uk",region:"eu-west-1",storeLink:"www.amazon.co.uk/dp/",marketplaceId:"A1F83G8C2ARO7P",katalCloudWatchEndpoint:"https://nd5w81xywf.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://hjszhb9uk3.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},DE:{marketplace:"DE",domain:"lesen.amazon.de",region:"eu-west-1",storeLink:"www.amazon.de/dp/",marketplaceId:"A1PA6795UKMFR9",katalCloudWatchEndpoint:"https://nd5w81xywf.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://hjszhb9uk3.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},FR:{marketplace:"FR",domain:"lire.amazon.fr",region:"eu-west-1",storeLink:"www.amazon.fr/dp/",marketplaceId:"A13V1IB3VIYZZH",katalCloudWatchEndpoint:"https://nd5w81xywf.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://hjszhb9uk3.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},IT:{marketplace:"IT",domain:"leggi.amazon.it",region:"eu-west-1",storeLink:"www.amazon.it/dp/",marketplaceId:"APJ6JRA9NG5V4",katalCloudWatchEndpoint:"https://nd5w81xywf.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://hjszhb9uk3.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},ES:{marketplace:"ES",domain:"leer.amazon.es",region:"eu-west-1",storeLink:"www.amazon.es/dp/",marketplaceId:"A1RKKUPIHCS9HS",katalCloudWatchEndpoint:"https://nd5w81xywf.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://hjszhb9uk3.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},NL:{marketplace:"NL",domain:"lezen.amazon.nl",region:"eu-west-1",storeLink:"www.amazon.nl/dp/",marketplaceId:"A1805IZSGTT6HS",katalCloudWatchEndpoint:"https://nd5w81xywf.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://hjszhb9uk3.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},IN:{marketplace:"IN",domain:"read.amazon.in",region:"eu-west-1",storeLink:"www.amazon.in/dp/",marketplaceId:"A21TJRUUN4KGV",katalCloudWatchEndpoint:"https://nd5w81xywf.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://hjszhb9uk3.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},CN:{marketplace:"CN",domain:"read.amazon.cn",region:"ap-northeast-1",storeLink:"www.amazon.cn/dp/",marketplaceId:"AAHKV2X7AFYLW",katalCloudWatchEndpoint:"https://arp3q8lp5d.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://bs7kdk5kxb.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalMetricsRealm:"CNAmazon"},USPreProd:{marketplace:"US",domain:"read-preprod.amazon.com",region:"us-east-1",storeLink:"pre-prod.amazon.com/dp/",marketplaceId:"ATVPDKIKX0DER",katalCloudWatchEndpoint:"https://s1ehmz8awg.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://wa9hufu4c9.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"USAmazon"},JPPreProd:{marketplace:"JP",domain:"read-pre-prod-jp.amazon.com",region:"ap-northeast-1",storeLink:"jp-pre-prod.amazon.com/dp/",marketplaceId:"A1VC38T7YXB528",katalCloudWatchEndpoint:"https://8p02hhqzs7.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://arufknsm9d.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalMetricsRealm:"JPAmazon"},CAPreProd:{marketplace:"CA",domain:"read-pre-prod-ca.amazon.com",region:"us-east-1",storeLink:"ca-pre-prod.amazon.com/dp/",marketplaceId:"A2EUQ1WTGCTBG2",katalCloudWatchEndpoint:"https://s1ehmz8awg.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://wa9hufu4c9.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"NAAmazon"},BRPreProd:{marketplace:"BR",domain:"read-pre-prod-br.amazon.com",region:"eu-west-1",storeLink:"br-pre-prod.amazon.com/dp/",marketplaceId:"A2Q3Y263D00KWC",katalCloudWatchEndpoint:"https://s1ehmz8awg.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://wa9hufu4c9.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"NAAmazon"},AUPreProd:{marketplace:"AU",domain:"read-pre-prod-au.amazon.com",region:"ap-northeast-1",storeLink:"au-pre-prod.amazon.com/dp/",marketplaceId:"A39IBJ37TRP1C6",katalCloudWatchEndpoint:"https://8p02hhqzs7.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://arufknsm9d.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalMetricsRealm:"FEAmazon"},MXPreProd:{marketplace:"MX",domain:"read-pre-prod-mx.amazon.com",region:"us-east-1",storeLink:"mx-pre-prod.amazon.com/dp/",marketplaceId:"A1AM78C64UM0Y8",katalCloudWatchEndpoint:"https://s1ehmz8awg.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://wa9hufu4c9.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"NAAmazon"},UKPreProd:{marketplace:"GB",domain:"read-pre-prod-uk.amazon.com",region:"eu-west-1",storeLink:"uk-pre-prod.amazon.com/dp/",marketplaceId:"A1F83G8C2ARO7P",katalCloudWatchEndpoint:"https://97meb3x32g.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://fdoxuxsenl.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},DEPreProd:{marketplace:"DE",domain:"read-pre-prod-de.amazon.com",region:"eu-west-1",storeLink:"de-pre-prod.amazon.com/dp/",marketplaceId:"A1PA6795UKMFR9",katalCloudWatchEndpoint:"https://97meb3x32g.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://fdoxuxsenl.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},FRPreProd:{marketplace:"FR",domain:"read-pre-prod-fr.amazon.com",storeLink:"fr-pre-prod.amazon.com/dp/",region:"eu-west-1",marketplaceId:"A13V1IB3VIYZZH",katalCloudWatchEndpoint:"https://97meb3x32g.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://fdoxuxsenl.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},ITPreProd:{marketplace:"IT",domain:"read-pre-prod-it.amazon.com",region:"eu-west-1",storeLink:"it-pre-prod.amazon.com/dp/",marketplaceId:"APJ6JRA9NG5V4",katalCloudWatchEndpoint:"https://97meb3x32g.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://fdoxuxsenl.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},ESPreProd:{marketplace:"ES",domain:"read-pre-prod-es.amazon.com",region:"eu-west-1",storeLink:"es-pre-prod.amazon.com/dp/",marketplaceId:"A1RKKUPIHCS9HS",katalCloudWatchEndpoint:"https://97meb3x32g.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://fdoxuxsenl.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},NLPreProd:{marketplace:"NL",domain:"lezen-nl-preprod.dub.xcorp.amazon.com",region:"eu-west-1",storeLink:"nl-pre-prod.amazon.com/dp/",marketplaceId:"A1805IZSGTT6HS",katalCloudWatchEndpoint:"https://97meb3x32g.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://fdoxuxsenl.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},INPreProd:{marketplace:"IN",domain:"read-pre-prod-in.amazon.com",region:"eu-west-1",storeLink:"in-pre-prod.amazon.com/dp/",marketplaceId:"A21TJRUUN4KGV",katalCloudWatchEndpoint:"https://97meb3x32g.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://fdoxuxsenl.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},CNPreProd:{marketplace:"CN",domain:"read-pre-prod-cn.amazon.com",region:"ap-northeast-1",storeLink:"cn-pre-prod.amazon.com/dp/",marketplaceId:"AAHKV2X7AFYLW",katalCloudWatchEndpoint:"https://8p02hhqzs7.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://arufknsm9d.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalMetricsRealm:"CNAmazon"}},i=function(){switch(window.location.hostname){case r.US.domain:return r.US;case r.JP.domain:return r.JP;case r.CA.domain:return r.CA;case r.BR.domain:return r.BR;case r.AU.domain:return r.AU;case r.MX.domain:return r.MX;case r.UK.domain:return r.UK;case r.DE.domain:return r.DE;case r.FR.domain:return r.FR;case r.IT.domain:return r.IT;case r.ES.domain:return r.ES;case r.NL.domain:return r.NL;case r.IN.domain:return r.IN;case r.CN.domain:return r.CN;case r.USPreProd.domain:return r.USPreProd;case r.JPPreProd.domain:return r.JPPreProd;case r.CAPreProd.domain:return r.CAPreProd;case r.BRPreProd.domain:return r.BRPreProd;case r.AUPreProd.domain:return r.AUPreProd;case r.MXPreProd.domain:return r.MXPreProd;case r.UKPreProd.domain:return r.UKPreProd;case r.DEPreProd.domain:return r.DEPreProd;case r.FRPreProd.domain:return r.FRPreProd;case r.ITPreProd.domain:return r.ITPreProd;case r.ESPreProd.domain:return r.ESPreProd;case r.NLPreProd.domain:return r.NLPreProd;case r.INPreProd.domain:return r.INPreProd;case r.CNPreProd.domain:return r.CNPreProd;default:return r.US}}},85856:function(e,t,n){"use strict";n.d(t,{getRefTag:function(){return o},getRefTagMethodForCTAButton:function(){return s},getUrlWithRefTag:function(){return a}});var r=n(94562),i=n(96915),o=function(e,t){return e+"_"+t},a=function(e,t){var n=new URL(e),r=(n.pathname.endsWith("/")?"ref=":"/ref=")+encodeURIComponent(t);return n.pathname+=r,i.isAndroid()&&n.searchParams.append("nodl_android","1"),n.href},s=function(e,t){switch(e){case r.OfferActionType.BUY:return"bb";case r.OfferActionType.BORROW:return t===r.OfferActionProgramCode.PRIME?"prr":"ku";case r.OfferActionType.PREORDER:return"preb";case r.OfferActionType.SAMPLE:return"sb";default:return"bb"}}},68217:function(e,t,n){"use strict";n.d(t,{getRequest:function(){return a},postRequest:function(){return s}});var r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=function(e){if(!e.ok||e.status>=400){var t={type:"generic",response:e,retry:!0};return Promise.reject(t)}return Promise.resolve(e)},o=function(e,t,n){void 0===n&&(n=0);var a=r({mode:"cors",credentials:"same-origin"},t);return fetch(e,a).catch((function(e){if("AbortError"===e.name){var t={type:"abort",error:e,retry:!1};return Promise.reject(t)}if(navigator.onLine){var n={type:"connection",error:e,retry:!0};return Promise.reject(n)}var r={type:"offline",error:e,retry:!0};return Promise.reject(r)})).then(i).catch((function(t){return 3!==n&&t.retry?new Promise((function(t,r){setTimeout((function(){o(e,a,n+1).then(t).catch(r)}),3e3)})):Promise.reject(t)}))},a=function(e,t){return void 0===t&&(t={}),o(e,t)},s=function(e,t,n){void 0===n&&(n={});var r=new Headers(n.headers);r.set("Content-Type","application/json");var i={headers:r,credentials:n.credentials,method:"POST"};return i.body=JSON.stringify(t),a(e,i)}},79634:function(e,t){"use strict";var n=function(){function e(){}return e.LITB_READER="LitbReader",e.BOOK_CONTENT_RENDERED="BookContentRendered",e.BOOK_OPEN="clickToBookOpen",e.BOOK_PAGE_TURN="BookPageTurn",e.BOOK_BINGE_READING_NEXT="BookBingeReadingNext",e.BOOK_BINGE_READING_PREV="BookBingeReadingPrev",e.BOOK_REFRESHED="BookRefreshed",e.BINGE_READING_BOOKS_READ="BingeReadingBooksRead",e.SUSPEND_DETECTED="SuspendDetected",e.DISCARDED_METRIC_TIMERS_AFTER_SUSPEND="DiscardedMetricTimersAfterSuspend",e.CLOSED_TAB="ClosedTab",e.HAMBURGER_WEB_LIBRARY_LINK_CLICKED="WebLibraryLinkClicked",e.HAMBURGER_FEEDBACK_LINK_CLICKED="FeedbackLinkClicked",e.HAMBURGER_READ_IN_KINDLE_CLICKED="ReadInKindleClicked",e.HAMBURGER_BEFORE_YOU_GO_CILCKED="BeforeYouGoClicked",e.HAMBURGER_GO_TO_BEGINNING_CILCKED="GoToBeginningClicked",e.HAMBURGER_GO_TO_COVER_CLICKED="GoToCoverClicked",e.HAMBURGER_GO_TO_PAGE_CLICKED="GoToPageClicked",e.HAMBURGER_MENU_SHOWN_VIA_CLICK="HamburgerMenuShown:Clicked",e.HAMBURGER_MENU_SHOWN_VIA_KEY_PRESS="HamburgerMenuShown:KeyPress",e.SETTINGS_BUTTON_CLICKED="SettingsButton:Clicked",e.SETTINGS_SCROLL_DIRECTION_CLICKED="SettingsScrollDirection:Clicked",e.SETTINGS_DOUBLE_PAGE_SPREAD_CLICKED="SettingsDoublePageSpread:Clicked",e.SETTINGS_LITB_RENDER="SettingsLitbRender",e.LEFT_CHEVRON_CLICKED="ChevronClicked:Left",e.RIGHT_CHEVRON_CLICKED="ChevronClicked:Right",e.TIME_SPINNER_SHOWN_TO_CUSTOMER="TimeCustomerSeesSpinner",e.ROTATE_FROM_LANSCAPE_TO_PORTRAIT="RotateDeviceFromLandscapeToPortrait",e.ROTATE_FROM_PORTRAIT_TO_LANDSCAPE="RotateDeviceFromPortraitToLandscape",e.END_ACTIONS_SHOWN_BUT_NOT_LOADED="EndActionsShownButNotLoaded",e.END_ACTIONS_TIME_TO_LOAD="EndActionsTimeToLoad",e.FAST_METRICS_FAILED_FLUSH="KwrpFastMetricsFailedFlush",e.FAST_METRICS_RECORDS_LOST="KwrpFastMetricsRecordsLost",e.CLIENT_SIDE_METRICS_TO_CAPTURE=[e.BOOK_OPEN,"clickToCoverImageShown","clickToBlackCurtainShown","loadReaderClientSideLatency","clickToLoadReaderResponseReceived","clickToReaderInitialized","clickToLoadBootstrapperDomReady"],e.MRPR_MATCH_WITH_LOCAL_STORAGE="MrprMatchesLocalStore",e.LOCAL_STORAGE_MRPR_IS_AHEAD="MrprLocalStoreMatchesOrAheadOfServer",e.PRICE_LOADED="PriceLoaded",e.TIMED_OUT="TimedOut",e.COVER_SHOWN=e.LITB_READER+"CoverShown",e.DISPLAY_OPTION_SHOWN=e.LITB_READER+"DisplayOptionShown",e.CHROME_SUMMONED=e.LITB_READER+"ChromeSummoned",e.ZOOM_SELECTOR_SHOWN=e.LITB_READER+"ZoomSelectorShown",e.ZOOM_OUT_BUTTON_PRESSED=e.LITB_READER+"ZoomOutButtonPressed",e.ZOOM_IN_BUTTON_PRESSED=e.LITB_READER+"ZoomInButtonPressed",e.ZOOM_SLIDER_SCRUBBED=e.LITB_READER+"ZoomSliderScrubbed",e.LITB_UNLOAD_READER_BOOK_NOT_LOADED=e.LITB_READER+"UnloadedBookNotLoaded",e.LITB_UNLOAD_READER_BOOK_LOADED=e.LITB_READER+"UnloadedBookLoaded",e.LITB_UNLOAD_READER_ERROR_SHOWN=e.LITB_READER+"UnloadedErrorShown",e.IFRAME_HANDSHAKE_FAILED=e.LITB_READER+"IframeHandshakeFailed",e.LITB_DESKTOP_INTIALIZED=e.LITB_READER+"DesktopIntialized",e.LITB_MOBILE_INTIALIZED=e.LITB_READER+"MobileIntialized",e.LITB_LOADED_PRINT_SEARCH_RESULTS=e.LITB_READER+"LoadedPrintSearchResults",e.LITB_PRINT_SEARCH_QUERY_ENTERED=e.LITB_READER+"PrintSearchQueryEntered",e.LITB_PRINT_SEARCH_SHOWN=e.LITB_READER+"PrintSearchShown",e.LITB_PRINT_SEARCH_ABORTED=e.LITB_READER+"PrintSearchAborted",e.LITB_PRINT_SEARCH_LATENCY="PrintSearchLatency",e.LITB_ASSETS_LOAD_TIME="AssetsLoadTime",e.LITB_DPX_HANDSHAKE_TIME="DPXHandshakeTime",e.RELATED_EDITION_HAS_DIFFERENT_PUBLISHER="RelatedEditionHasDifferentPublisher",e.PRINT_RELATED_EDITION_SHOWN="PrintRelatedEditionShown",e.CHROME_TOP_BAR_SELECT_OPTION="ChromeTopBarSelectOption::",e.CHROME_TOP_BAR_BACK_TO_LIBRARY="ChromeTopBarBackToLibrary",e.CHROME_TOP_BAR_BACK_TO_STORE="ChromeTopBarBackToStore",e.SIDE_PANEL_SELECT_OPTION="SidePanelSelectOption::",e.BUY_BUTTON_RENDER="CTA::BB::Render",e.BUY_BUTTON_CLICK="CTA::BB::Click",e.ADD_SAMPLE_RENDER="CTA::SAMPLE::Render",e.ADD_SAMPLE_CLICK="CTA::SAMPLE::Click",e.NOT_SUPPORTED_RENDER="CTA::UnsupportedOrGeoRestricted::Render",e.NOT_SUPPORTED_CLICK="CTA::UnsupportedOrGeoRestricted::Click",e.READ_NOW_RENDER="CTA::ReadNow::Render",e.READ_NOW_CLICK="CTA::ReadNow::Click",e.KINDLE_APP_RENDER="CTA::KindleAppButton::Render",e.KINDLE_APP_CLICK="CTA::KindleAppButton::Click",e.BUYING_OFFERS_RENDER="CTA::BuyingOffers::Render",e.BUYING_OFFERS_CLICK="CTA::BuyingOffers::Click",e.PROCEED_TO_CART_RENDER="CTA::ProceedToCart::Render",e.PROCEED_TO_CART_CLICK="CTA::ProceedToCart::Click",e.BIFROST_SUCCESS="LITB::BIFROST::SUCCESS",e.BIFROST_VIOLATION="LITB::BIFROST::VIOLATION",e.BIFROST_FAILURE="LITB::BIFROST::FAILURE",e.BIFROST_UNEXPECTED_RESPONSE="LITB::BIFROST::UNEXPECTED_RESPONSE",e.SYNC_LPR_SUCCESS="SyncLPRSuccess",e.SYNC_LPR_FAILURE="SyncLPRFailure",e.VALID_FULL_BOOK_BROWSER="ValidFullBookBrowser",e.INVALID_FULL_BOOK_BROWSER="InValidFullBookBrowser",e.FAILED_FULL_BOOK_BROWSER="FullBookBrowserFailure",e.MISSING_KCMS_METADATA="MissingKcmsMetadata",e.DEVICE_TOKEN_SUCCESS="DeviceTokenSuccess",e.DEVICE_TOKEN_FAILURE="DeviceTokenFailure",e.NO_DEVICE_TOKEN="NoDeviceToken",e.CAN_START_READING_RETRIES="CanStartReadingRetries",e.CAN_START_READING_SUCCESS="CanStartReadingSuccess",e.CAN_START_READING_FAILURE="CanStartReadingFailure",e.MISSING_TRANSLATIONS="MissingTranslations",e.STUCCO_FORMAT_FALLBACK="StuccoFormatFallback",e.ADD_TO_CART_CSRF_WEBLAB_DISABLED="AddToCartCsrf_WeblabDisabled",e.ADD_TO_CART_CSRF_NO_SP_TOKEN="AddToCartCsrf_ShoppingPortalTokenIsEmpty",e.ADD_TO_CART_CSRF_SP_TOKEN_USED="AddToCartCsrf_ShoppingPortalTokenWasUsed",e.S2F_UNSUPPORTED_FIXED_FORMAT="S2FUnsupportedFF",e.S2F_CAN_NOT_OPEN="S2FCantOpenByKfW",e}();t.default=n},91428:function(e,t,n){"use strict";n.d(t,{buyBoxURL:function(){return s},canStartReadingURL:function(){return g},getBaseUrl:function(){return i},getBifrostUrl:function(){return o},getDeviceTokenURL:function(){return m},kcmsMetadataURL:function(){return f},metadataURL:function(){return c},printURL:function(){return l},recommendationURL:function(){return u},syncSampleLPRToFullBookURL:function(){return p},validateFullBookBrowserURL:function(){return d},weblabURL:function(){return h}});var r=function(){return window.location.pathname.startsWith("/litb")},i=function(){return r()?"/litb":"/sample"},o=function(){return r()?"/api/bifrost/acquisitions/v1/actions":window.location.origin+"/internal/bifrost/api/bifrost/acquisitions/v1/actions"},a="https://read.amazon.com/"+i(),s=i()+"/buybox",c=i()+"/meta",u=i()+"/rec",l=i()+"/print",d=i()+"/isValidFullBookBrowser",h=i()+"/trigger-weblab",f=a+"/kcmsMetadata",p=(i(),a+"/syncSampleLPRToFullBook"),g="/service/web/reader/canStartReading",m="/service/web/register/getDeviceToken"},9731:function(e,t,n){"use strict";n.d(t,{CLIENT_ID:function(){return i},DEFAULT_CLIENT_ID:function(){return o},SITB_ERROR_REF_TAG:function(){return r}});var r={AUTHENTICATION_REQUIRED:"rdr_bar_login",BOOK_IS_NOT_SUPPORTED:"rdr_bar_unav"},i={KFW:"kfw",DPX:"dpx"},o=i.DPX},84550:function(e,t,n){"use strict";n.d(t,{BLACK:function(){return h},CHEVRON_LEFT_STRING:function(){return a},CHEVRON_RIGHT_STRING:function(){return o},DEFAULT_FADE_DURATION:function(){return d},DEFAULT_RECS_SHOVELER_LIMIT:function(){return i},KWR_DISPLAY_SETTINGS_STORAGE_KEY:function(){return p},LIGHT_BLUE:function(){return f},LITB_READER_MAIN_CLASS_NAME:function(){return s},LITB_READER_MOBILE_CLASS_NAME:function(){return c},MIN_COVER_APPEAR:function(){return l},RIGHT_SIDEBAR_CLASS_NAME:function(){return u}});var r,i=24,o="Right",a="Left";!function(e){e[e.RIGHT=0]="RIGHT",e[e.LEFT=1]="LEFT"}(r||(r={}));var s="litb-reader-main",c="litb-reader-mobile",u="right-sidebar",l=500,d=300,h="#000000",f="#1E78BA",p="KWR_Display_Settings"},42105:function(e,t,n){"use strict";var r;n.d(t,{FONT_SIZE_ARRAY:function(){return a},INDEX_OF_FONT_SIZE_ARRAY_DEFAULT:function(){return o},STUCCO_INDEX_OF_FONT_SIZE_ARRAY_DEFAULT:function(){return i}}),function(e){e[e.LTR_NAV_DIRECTION=0]="LTR_NAV_DIRECTION",e[e.RTL_NAV_DIRECTION=1]="RTL_NAV_DIRECTION",e[e.VERTICAL_NAV_DIRECTION=2]="VERTICAL_NAV_DIRECTION"}(r||(r={}));var i=7,o=4,a=[11,12.3,13.9,15.6,17.6,19.8,22.3,25,28.2,31.7,35.7,40.1,45.2,50.8]},5130:function(e,t,n){"use strict";n.d(t,{AnnotationsProvider:function(){return s},useAnnotations:function(){return c}});var r=n(67294),i=(0,r.createContext)({}),o=[],a=function(){return Promise.resolve(o)},s=function(e){var t=(0,r.useState)(o),n=t[0],s=t[1],c=(0,r.useState)((function(){return a})),u=c[0],l=c[1],d=(0,r.useRef)(new Set),h=(0,r.useCallback)((function(e,t){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var n,r;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(i){switch(i.label){case 0:return n=e+"-"+t,d.current.has(n)?[3,2]:(d.current.add(n),[4,u(e,t)]);case 1:(r=i.sent()).length&&s((function(e){return function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(e,r)})),i.label=2;case 2:return[2]}}))}))}),[u]),f=n,p=(0,r.useCallback)((function(){s(o),l((function(){return a})),d.current.clear()}),[]),g=(0,r.useCallback)((function(e){s(o),d.current.clear(),l((function(){return e}))}),[]),m=(0,r.useMemo)((function(){return{setFetchSearchAnnotationsCallback:g,includeAnnotationsInRange:h,annotations:f,clear:p}}),[f,h]);return r.createElement(i.Provider,{value:m},e)},c=function(){var e=r.useContext(i);if(void 0===e)throw new Error("useAnnotations is missing an AnnotationsProvider");return e}},49868:function(e,t,n){"use strict";n.d(t,{ActionType:function(){return r},LastPositionReadContext:function(){return o},LastPositionReadProvider:function(){return s}});var r,i=n(67294),o=(0,i.createContext)({});!function(e){e.SET_LPR="SetLastPositionRead"}(r||(r={}));var a=function(e,t){if(t.type===r.SET_LPR)return{lastPositionRead:t.payload}},s=function(e){var t=e.children,n=(0,i.useReducer)(a,{lastPositionRead:void 0}),r=n[0],s=n[1];return i.createElement(o.Provider,{value:{state:r,dispatch:s}},t)}},99377:function(e,t,n){"use strict";n.d(t,{ActionType:function(){return r},LitbTranslationContext:function(){return c},LitbTranslationProvider:function(){return l}});var r,i=n(67294),o=n(65216),a=n(78751),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},c=(0,i.createContext)({});!function(e){e.INITIALIZE="Initialize",e.SET_TEXT_DIRECTION="Set Text Direction"}(r||(r={}));var u=function(e,t){switch(t.type){case r.INITIALIZE:return s(s({},e),{getLitbTranslation:t.payload.getLitbTranslation,textDirection:t.payload.textDirection,locale:t.payload.locale,translationsReady:!0});case r.SET_TEXT_DIRECTION:return s(s({},e),{textDirection:t.payload})}},l=function(e){var t=e.children,n=e.locale,l=(0,i.useReducer)(u,{getLitbTranslation:function(e){return""},textDirection:"ltr",translationsReady:!1,locale:"en_US"}),d=l[0],h=l[1];return(0,i.useEffect)((function(){var e=n.replace("_","-");(0,o.initializeI18n)(e).then((function(e){var t={getLitbTranslation:function(t,n,r){return void 0===n&&(n=""),void 0===r&&(r={}),e.t(t,s({defaultValue:n},r))},textDirection:(0,a.getTextDirectionFromLocale)(n),locale:n};h({type:r.INITIALIZE,payload:t}),window.i18nextInstance=e}))}),[]),i.createElement(c.Provider,{value:{state:d,dispatch:h}},t)}},96306:function(e,t,n){"use strict";n.d(t,{LitbWeblabContext:function(){return s},LitbWeblabProvider:function(){return u}});var r,i=n(67294),o=n(37602),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)},s=(0,i.createContext)({});!function(e){e.INITIALIZE="Initialize"}(r||(r={}));var c=function(e,t){if(t.type===r.INITIALIZE)return a(a({},e),{litbWeblabs:t.payload,weblabsReady:!0})},u=function(e){var t=e.children,n=(0,i.useReducer)(c,{litbWeblabs:null,weblabsReady:!1}),a=n[0],u=n[1];return(0,i.useEffect)((function(){(0,o.resolveWeblabTreatments)().then((function(e){u({type:r.INITIALIZE,payload:e})}))}),[]),i.createElement(s.Provider,{value:{state:a,dispatch:u}},t)}},82182:function(e,t,n){"use strict";n.d(t,{SearchProvider:function(){return o},useSearch:function(){return a}});var r=n(67294),i=(0,r.createContext)({}),o=function(e){var t=(0,r.useState)([]),n=t[0],o=t[1],a=(0,r.useState)(""),s=a[0],c=a[1],u=(0,r.useState)("Ready"),l=u[0],d=u[1],h=(0,r.useCallback)((function(){o([]),c(""),d("Ready")}),[]);return r.createElement(i.Provider,{value:{results:n,setResults:o,input:s,setInput:c,status:l,setStatus:d,clear:h}},e)},a=function(){var e=r.useContext(i);if(void 0===e)throw new Error("useSearch is missing an SearchProvider");return e}},86379:function(e,t,n){"use strict";n.d(t,{LITB_RENDER_TYPE:function(){return r},READING_DIRECTION:function(){return u},fetchLitbBookData:function(){return l},fetchSearchResults:function(){return h},formatConverter:function(){return m},getLocalizedBindingKey:function(){return y},isPhysicalBook:function(){return b},renderTypeConverter:function(){return v},shouldShowUpsellWidget:function(){return w}});var r,i=n(20247),o=n(9731),a=n(63721),s=n(14705),c=n(91428);!function(e){e[e.YJHTML=1]="YJHTML",e[e.Stucco=2]="Stucco",e[e.YJ=3]="YJ",e[e.FixedFormatImage=4]="FixedFormatImage"}(r||(r={}));var u={RTL:"rtl",LTR:"ltr"},l=function(e,t,n,r){var o=c.metadataURL+"/"+e,u=(0,s.getClientIdFromUrl)();return t&&(o=(0,s.appendOptionalQueryParamToTheEnd)(o,"sampleAsin",t)),o=(0,s.appendOptionalQueryParamToTheEnd)(o,"locale",n),o=(0,s.appendOptionalQueryParamToTheEnd)(o,"clientId",u),o=(0,s.appendOptionalQueryParamToTheEnd)(o,"ref_",d(r)),(0,i.getRequest)(o,{},!0).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return(0,a.handleError)(e),Promise.reject(e)}))},d=function(e){return"mobile"===e?"litb_o_m":"litb_o_d"},h=function(e,t,n,r,i,o){return f("search-results",{asin:e,buyingAsin:t,query:n,pageNumber:r,pageSize:i},o)},f=function(e,t,n){var r=new Headers({Accept:"application/json"}),o=p(t);return(0,i.getRequest)(c.printURL+"/"+e+"?"+o,{signal:n,headers:r}).then((function(e){return e.json()})).then((function(e){return e.error?g(e.error.reftag,e):e})).catch((function(e){return(0,a.handleError)(e),Promise.reject(e)}))},p=function(e){return Object.keys(e).map((function(t){return t+"="+e[t]})).join("&")},g=function(e,t){switch(e){case o.SITB_ERROR_REF_TAG.AUTHENTICATION_REQUIRED:return t;case o.SITB_ERROR_REF_TAG.BOOK_IS_NOT_SUPPORTED:return Promise.reject((0,a.createError)("FailedToLoadBook:BookIsNotSupported","Book is unavailable"))}},m=function(e){switch(e){case"HTML_YJ":return 1;case"HTML_MOBI":case"KCR_MOBI":default:return 2;case"YJ":return 3;case"IMAGE_JPG":return 4}},v=function(e){switch(e){case"HTML_YJ":return r.YJHTML;case"HTML_MOBI":case"KCR_MOBI":default:return r.Stucco;case"IMAGE_JPG":return r.FixedFormatImage;case"YJ":return r.YJ}},y=function(e){switch(e?e.toLowerCase():""){case"kindle_edition":return"kw-litb-kindle";case"hardcover":return"kw-litb-book-type-hardcover-preview";case"paperback":return"kw-litb-book-type-paperback-preview";default:return""}},b=function(e){return!!e&&!e.toLowerCase().includes("kindle")},w=function(e){return"kindle_edition"!==e.bindingSymbol&&!!e.kindleRelatedEditionInfo.asin&&"fixed_format"!==e.kindleRelatedEditionInfo.revisionId}},13135:function(e,t,n){"use strict";n.d(t,{Availability:function(){return r},fetchBuyBoxData:function(){return s}});var r,i=n(20247),o=n(91428),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};!function(e){e.GEO_BLOCK="geo_block",e.UNSUPPORTED_COR="unsupported_cor",e.NOT_YET_AVAILABLE="not_yet_available",e.UNAVAILABLE_FOR_EXTENDED_MARKETPLACE="unavailable-for-extended-customer",e.PERIODICAL_EDITION_NO_OFFER="ep_edition_no_offer"}(r||(r={}));var s=function(e,t){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var n,r;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(a){return n={credentials:"include"},r=t?o.buyBoxURL+"/"+e+"?locale="+t:o.buyBoxURL+"/"+e,[2,(0,i.getRequest)(r,n).then((function(e){return e.json()})).then(c)]}))}))},c=function(e){var t=a(a({},e),{actionType:e.actionType,pointsValue:e.pointsValue?parseInt(e.pointsValue,10):e.pointsValue,priceWithCoP:u(e.priceWithCoP),price:u(e.price)});return e.acquisitionType&&(t.acquisitionType=e.acquisitionType),e.secondaryActionType&&(t.secondaryActionType=e.secondaryActionType),t},u=function(e){if(e)return a(a({},e),{amount:parseFloat(e.amount)});throw new Error("Missing price")}},37602:function(e,t,n){"use strict";n.d(t,{Treatments:function(){return i},Weblabs:function(){return r},isKv3WeblabEnabled:function(){return p},resolveWeblabTreatments:function(){return h},triggerKv3WeblabIfApplicable:function(){return f},triggerWeblab:function(){return d}});var r,i,o=n(20247),a=n(91428),s=n(38823),c=n(10885),u=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function d(e){return u(this,void 0,void 0,(function(){var t,n,r,i;return l(this,(function(s){switch(s.label){case 0:return[4,h()];case 1:return t=s.sent(),e&&t[e]?(n=(0,c.appendCsrfHeader)({},"litb-amzn-csrf"),r=t[e],i={url:a.weblabURL+"?weblab="+e+"&expectedTreatment="+r,postData:{weblab:e},postHeaders:n},(0,o.postRequest)(i,!1).then((function(e){return e.json()})).then((function(e){return e})),[2]):[2,Promise.reject("Weblab "+e+" cannot be triggered because it is not allow-listed")]}}))}))}function h(){return u(this,void 0,void 0,(function(){var e;return l(this,(function(t){var n,i;return i=(n=document.getElementById("litbState"))?n.getAttribute("data-state-wl"):null,(e=i?JSON.parse(decodeURIComponent(i)):null)?[2,Promise.resolve(e)]:[2,Promise.resolve(Object.keys(r).filter((function(e){return isNaN(Number(e))})).reduce((function(e,t){return e[t]="C",e}),{}))]}))}))}function f(){return u(this,void 0,void 0,(function(){var e,t;return l(this,(function(n){switch(n.label){case 0:return[4,h()];case 1:return e=n.sent(),(t=(0,s.getAppConfig)().kv3Weblab)&&(null==e?void 0:e[t])?[4,d(t)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function p(){return u(this,void 0,void 0,(function(){var e,t,n;return l(this,(function(r){switch(r.label){case 0:return[4,h()];case 1:return e=r.sent(),t=(0,s.getAppConfig)().kv3Weblab,n=!!t&&(null==e?void 0:e[t]),[2,!(!t||!n||"C"===n)]}}))}))}!function(e){e.LITB_S2F_DESKTOP_531998="LITB_S2F_DESKTOP_531998",e.LITB_S2F_MOBILE_531590="LITB_S2F_MOBILE_531590",e.BOOKS_LITB_ASSETS_LATENCY_745921="BOOKS_LITB_ASSETS_LATENCY_745921",e.BOOKS_LITB_ASSETS_LATENCY_MOBILE_745934="BOOKS_LITB_ASSETS_LATENCY_MOBILE_745934",e.BOOKS_LITB_KV3_FF_EXPERIMENT1_633714="BOOKS_LITB_KV3_FF_EXPERIMENT1_633714",e.LITB_KV3_E1_OVERRIDE_576776="LITB_KV3_E1_OVERRIDE_576776"}(r||(r={})),function(e){e.C="C",e.T1="T1",e.T2="T2"}(i||(i={}))},82272:function(e,t,n){"use strict";n.d(t,{AcquisitionStatus:function(){return a},AcquisitionType:function(){return o},BuyButtonIcon:function(){return i},OfferActionType:function(){return r},addToCart:function(){return p},postAcquisitionAction:function(){return l},postAcquisitionActionInline:function(){return d},postAddToCartAction:function(){return h}});var r,i,o,a,s,c,u=n(68217);!function(e){e.BUY="Buy",e.BORROW="Borrow",e.PREORDER="Preorder",e.READ="Read",e.SAMPLE="Sample"}(r||(r={})),function(e){e.CART="cart",e.PLAY="play",e.HAND="hand"}(i||(i={})),function(e){e.ALC="Purchase",e.KU="KindleUnlimited",e.PRR="Prime"}(o||(o={})),function(e){e.SUCCESS="Success",e.VIOLATION="Violation"}(a||(a={})),function(e){e.KINDLE_UNLIMITED="KINDLE_UNLIMITED",e.PRIME="PRIME"}(s||(s={})),function(e){e.KINDLE_UNLIMITED="KU",e.PRIME_READING="PrimeReading"}(c||(c={}));var l=function(e,t,n,i,o,a){var s=document.createElement("form");s.appendChild(g("csrf",n)),a===r.SAMPLE&&s.appendChild(g("device.encryptedDeviceAccountId","DT:KCL")),s.action=t+"/"+i+"?x-client-id="+e+"&accept=application/json/ref_="+o,s.method="POST",s.target="_parent",document.body.appendChild(s),s.submit()},d=function(e,t,n,r,i){var o=t+"/"+r+"?x-client-id="+e+"&ref_="+i,a={csrf:n};return(0,u.postRequest)(o,a,{headers:{Accept:"application/json"},credentials:"include"}).then((function(e){return e.json()}))},h=function(e,t,n,r,i,o){var a=document.createElement("form");f(a,e,t,n,r,i,o)},f=function(e,t,n,r,i,o,a){e.action=t+"/ref="+o,e.method="POST",e.target="_parent",a&&e.appendChild(g("anti-csrftoken-a2z",a)),e.appendChild(g("items[0.base][asin]",n)),e.appendChild(g("items[0.base][offerListingId]",r)),e.appendChild(g("clientName","K4W_ReaderBuyBox_LITB")),document.body.appendChild(e),e.submit()},p=function(e,t,n){var r=window.location.origin+"/litb/cart/"+e+"/add-to-cart";n&&(r+="?showGoToCart=true");var i={offerListingId:t};return(0,u.postRequest)(r,i,{headers:{Accept:"application/json"},credentials:"include"}).then((function(e){return e.json()}))},g=function(e,t){var n=document.createElement("input");return n.type="hidden",n.name=e,n.value=t,n}},63721:function(e,t,n){"use strict";n.d(t,{createError:function(){return r.createError},handleError:function(){return d},handleErrors:function(){return u},handleInitializationErrors:function(){return l},logErrorThroughCSM:function(){return h},registerGlobalErrorHandlers:function(){return p}});var r=n(65907),i=n(80505),o=n(84276),a=n(37593),s=n(3571),c=function(e){return e instanceof Error||"string"==typeof e?e:"Received unsupported type instead of error: "+JSON.stringify(e)},u=function(e){switch(e.constructor){case s.FailedToGetBookManifestError:case s.ContentUnSupported:case s.GeoLocationNotAllowed:case s.ContentNotAllowed:d(e.name,e,!0);break;default:d("PageRenderingError",e,!0)}},l=function(e){e instanceof Error?u(e):e&&e.type&&e.error?function(e){switch(e.type){case"offline":d((0,r.createError)("NoNetworkError",e.error.message));break;case"connection":d((0,r.createError)("GenericNetworkError",e.error.message));break;case"abort":d((0,r.createError)("AbortError",e.error.message));break;default:d((0,r.createError)("GenericError",e.error.message))}}(e):d((0,r.createError)("UnknownError",c(e)))},d=function(e,t,n){var a;if("string"==typeof e&&(t instanceof Error||"string"==typeof t)){var s=e,u=!!n,l=c(t);a=(0,r.createError)(s,l,u)}else a=function(e,t){return(0,r.isKwrpError)(e)?e:(0,r.createError)("UnknownError",c(e),t)}(e,u=!!t);h(a),f(a.name,a.error),i.EventManager.triggerEvent(o.Events.ErrorEvent.Error,a)},h=function(e,t){if(window.ueLogError){var n=e.error,r=n.stack?"\nStack Trace: "+n.stack:"",i={message:"Error Name: ["+n.name+"]\nDetails: ["+e.details+"]\nMessage:["+n.message+"]\nStacktrace:["+r+"]",attribution:e.name,logLevel:t||e.logLevel};window.ueLogError(n,i)}},f=function(e,t){(0,a.recordCountMetric)(e)},p=function(){window.addEventListener("error",(function(e){if(e.error)d("UnknownError",e.error);else{var t=new Error(e.message);d("UnknownError",t)}return!0})),window.addEventListener("unhandledrejection",(function(e){var t=new Error(e.reason);d("UnknownError",t)}))}},65907:function(e,t,n){"use strict";n.d(t,{DEGRADED_EXPERIENCE:function(){return o},ERROR_POPUP:function(){return i},createError:function(){return s},isKwrpError:function(){return c}});var r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i="ErrorPopup",o="DegradedExperience",a={logLevel:"ERROR",showErrorDialog:!1,errorDialogDetails:{messageStringId:"genericErrorMessage",headerStringId:"genericErrorTitle",retriable:!0,detailPageButton:!0,backButton:!0,readSample:!1,readInKindle:!1,downloadKindle:!1}},s=function(e,t,n){void 0===n&&(n=!0);var i=function(e){if("string"==typeof e)return new Error(e);if(!e.stack||""===e.stack)try{throw new Error}catch(t){e.stack=t.stack}return e}(t);return r(r(r({},a),{name:e,isRuntime:n,error:i}),function(e){switch(e){case"GenericError":case"GenericNetworkError":case"SampleTookTooLongToLoadError":return{logLevel:"FATAL",showErrorDialog:!0,errorDialogDetails:{messageStringId:"genericErrorMessage",headerStringId:"genericErrorTitle",retriable:!0,detailPageButton:!0,backButton:!0,readSample:!1,readInKindle:!1,downloadKindle:!1}};case"UnknownError":case"MissingTranslations":return{logLevel:"ERROR",showErrorDialog:!1};case"PageRenderingError":case"StuccoFailedToGetBookManifestError":case"YJFailedToGetBookManifestError":case"PrintFailedToGetBookManifestError":case"NoNetworkError":return{logLevel:"FATAL",showErrorDialog:!0,errorDialogDetails:{messageStringId:"networkErrorMessage",headerStringId:"networkErrorTitle",retriable:!0,detailPageButton:!0,backButton:!0,readSample:!1,readInKindle:!1,downloadKindle:!1}};case"FailedToLoadBook:CustomerDoesNotOwnBook":return{logLevel:"WARN",showErrorDialog:!0,errorDialogDetails:{messageStringId:"ownershipErrorMessage",headerStringId:"ownershipErrorTitle",retriable:!1,detailPageButton:!0,backButton:!1,readSample:!0,readInKindle:!1,downloadKindle:!1}};case"StuccoGeoLocationNotAllowed":case"StuccoContentUnsupported":case"StuccoContentNotAllowed":case"FailedToLoadBook:BookIsNotSupported":return{showErrorDialog:!0,errorDialogDetails:{messageStringId:"unsupportedErrorMessage",headerStringId:"unsupportedErrorTitle",retriable:!1,detailPageButton:!0,backButton:!0,readSample:!1,readInKindle:!0,downloadKindle:!1}};case"FailedToLoadBook:AuthenticationRequired":case"AbortError":return{logLevel:"WARN",showErrorDialog:!1};case"AppOpenError":return{showErrorDialog:!0,errorDialogDetails:{messageStringId:"kindleProtocolErrorMessage",headerStringId:"kindleProtocolErrorTitle",retriable:!1,detailPageButton:!0,backButton:!0,readSample:!1,readInKindle:!1,downloadKindle:!0}};case"SampleRecommendationsLoadingError":case"BuyBoxLoadingError":return{logLevel:"FATAL",showErrorDialog:!1,errorDialogDetails:{messageStringId:"genericErrorMessage",headerStringId:"genericErrorTitle",retriable:!1,detailPageButton:!0,backButton:!0,readSample:!1,readInKindle:!1,downloadKindle:!1}};case"KCMSMetadataLoadingError":return{logLevel:"ERROR"}}}(e))},c=function(e){return"object"==typeof e&&e.name&&e.logLevel&&e.error}},80505:function(e,t,n){"use strict";n.d(t,{EventManager:function(){return i}});var r=n(84276),i=function(){function e(){}return e.registerEventListener=function(e,t){document.body.addEventListener(e,t,!1)},e.deregisterEventListener=function(e,t){document.body.removeEventListener(e,t,!1)},e.triggerEvent=function(e,t){var n=new CustomEvent(e,{detail:t});document.body.dispatchEvent(n)},e.registerWindowEvents=function(){window.addEventListener("resize",(function(t){e.triggerEvent(r.default.Window.RESIZED)})),this.absorbTouchAndContextMenuEvents(window)},e.sendMessage=function(e,t){e.postMessage(t,"*")},e.receiveMessage=function(e){window.addEventListener("message",e,!1)},e.stopReceiveMessage=function(e){window.removeEventListener("message",e,!1)},e.enablePinchZoom=function(){window.removeEventListener("touchmove",window.pinchZoomBlocker)},e.absorbTouchAndContextMenuEvents=function(e){e.addEventListener("contextmenu",(function(){return!1}),!1)},e}()},84276:function(e,t,n){"use strict";n.d(t,{Events:function(){return r}});var r={Window:{ORIENTATION_CHANGED:"OrientationChanged.Window",RESIZED:"Resized.Window"},Viewport:{VIEWPORT_CLICKED:"ViewportClicked.Viewport"},ReaderHamburgerMenu:{NAVIGATION_OPTION_CLICKED:"NavigationOptionClicked.ReaderHamburgerMenu"},Book:{END_REACHED:"EndReached.Book",PAGE_RENDERED:"PageRendered.Book",FIRST_PAGE_RENDERED:"FirstPageRendered.Book",LOADING_PAGE:"LoadingPage.Book"},Slider:{SLIDER_DRAGGER_MOVING:"SliderDraggerMoving.Slider",SLIDER_FINISHED_MOVING:"SliderFinishedMoving.Slider"},EndActions:{SHOW:"Show.EndActions",POPULATE:"Populate.EndActions"},Chevrons:{CLICKED_LEFT_CHEVRON:"ClickedLeft.Chevron",CLICKED_RIGHT_CHEVRON:"ClickedRight.Chevron"},KeyPress:{LEFT_ARROW_PRESSED:"LeftArrow.KeyPress",RIGHT_ARROW_PRESSED:"RightArrow.KeyPress"},BlackCurtain:{ACCEPTED:"Accepted.BlackCurtain"},ErrorEvent:{ERROR:"Error.Error"},DisplayOptions:{SHOW:"Show.DisplayOptions"},MarkerEndActions:{PAGE_TURN:"MarkerEndActions.PageTurn",RESET:"MarkerEndActions.Reset"}};t.default=r},74e3:function(e,t,n){"use strict";n.d(t,{katalLogger:function(){return a}});var r=n(8434),i=n.n(r),o={url:(0,n(38823).getAppConfig)().katalCloudWatchEndpointEmf,batchTimeoutDuration:1e4},a=new(i())(o)},15258:function(e,t,n){"use strict";n.d(t,{useKatalLogger:function(){return s}});var r=n(67294),i=n(8434),o=n.n(i),a=n(38823),s=function(){return(0,r.useState)(new(o())({url:(0,a.getAppConfig)().katalCloudWatchEndpoint}))[0]}},47903:function(e,t,n){"use strict";n.d(t,{useLitbTranslation:function(){return d}});var r=n(67294),i=n(99377),o=n(37593),a=n(79634),s=n(65907),c=n(15258),u=n(90268),l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},l.apply(this,arguments)},d=function(){var e=(0,r.useContext)(i.LitbTranslationContext),t=e.state,n=e.dispatch,d=(0,c.useKatalLogger)();return{textDirection:t.textDirection,translationsReady:t.translationsReady,getLitbTranslation:function(e,n,r){if(void 0===n&&(n=""),void 0===r&&(r={}),!t.translationsReady)return n;var i=t.getLitbTranslation(e,"",l({},r));if(""===i){(0,o.recordCountMetric)(a.default.MISSING_TRANSLATIONS+"::"+t.locale,1);var c=(0,s.createError)("MissingTranslations","Missing translations for locale:"+t.locale+" and key: "+e);return d.error(c.error.message,c.error,(0,u.buildContextForCloudWatchLog)(c)),n}return i},setTextDirection:function(e){n({type:i.ActionType.SET_TEXT_DIRECTION,payload:e})}}}},62963:function(e,t,n){"use strict";n.d(t,{useFastMetricsManager:function(){return l}});var r,i=n(67294),o=n(55609),a=n(85609),s=n(14165),c=n(38823),u=n(11202),l=function(){var e=function(){if(!r){var e=(0,c.getAppConfig)();r=new o.FastMetricsService({appVersion:""+e.appVersion,countryOfResidence:e.countryCode,customerId:e.customerId,deviceFamily:"KindleWebReaderPlatform",deviceModel:(0,u.detectBrowser)(),deviceSerialNumber:e.dsn,deviceType:e.deviceType,fastMetricsSushiEndpoint:e.eelEndpoint,osVersion:""+e.appVersion,preferredMarketplaceId:e.marketplaceId,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone})}return r}(),t=(0,i.useCallback)((function(t){e.getClient().startReadingSession(function(e){return{asin:e.asin,content_type:"EBSP",end_reading_location:e.endReadingPosition,format:e.format,max_position:e.endReadingPosition,mime_type:"",revision_id:e.revision,start_reading_location:e.startReadingPosition,asset_id:e.assetId,embedded_id:e.embeddedIdd}}(t)),e.getBatcher().flush().catch((function(e){console.warn("[FastMetrics error]: "+e)}))}),[e]),n=(0,i.useCallback)((function(){e.getClient().endReadingSession(),e.getBatcher().flush().catch((function(e){console.warn("[FastMetrics error]: "+e)}))}),[e]),l=(0,i.useCallback)((function(t){e.emitEvent(new s.ReadingDetailsEvent(t))}),[e]),d=(0,i.useCallback)((function(t){e.emitEvent(new a.InBookActionEvent(t))}),[e]);return(0,i.useMemo)((function(){return{openBook:t,closeBook:n,consumeContent:l,emitInBookAction:d,service:e}}),[t,n,l,d,e])}},55609:function(e,t,n){"use strict";n.d(t,{FastMetricEvent:function(){return i},FastMetricsService:function(){return o}});var r=n(82403),i=function(){this.getVersion=function(){return 0}},o=function(){function e(e){var t=e.fastMetricsSushiEndpoint||"",n={device_family:e.deviceFamily,device_type:e.deviceType,device_model:e.deviceModel,device_serial_number:e.deviceSerialNumber,app_version:e.appVersion,os_version:e.osVersion,time_zone:e.timeZone,customer_id:e.customerId,preferred_marketplace_id:e.preferredMarketplaceId,country_of_residence:e.countryOfResidence},i=new r.SushiPublisher(t);this.batcher=new r.Batcher(i,100,100,1e4),this.client=new r.MetricsClient(n,this.batcher),this.shouldFlush=!0}return e.prototype.getClient=function(){return this.client},e.prototype.getBatcher=function(){return this.batcher},e.prototype.emitEvent=function(e,t){var n=this;void 0===t&&(t=!0),this.client.emitRecord(e.getSchema(),e.getVersion(),e.getPayload()),t&&this.shouldFlush&&(this.shouldFlush=!1,this.batcher.flush().finally((function(){return n.shouldFlush=!0})))},e}()},85609:function(e,t,n){"use strict";n.d(t,{InBookActionEvent:function(){return a}});var r,i=n(55609),o=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t){var n=e.call(this)||this;return n.data=t,n}return o(t,e),t.prototype.getSchema=function(){return"litb_anon_inbook_actions"},t.prototype.getPayload=function(){var e;return{event_context:this.data.context,event_action:this.data.action,action_value:null!==(e=this.data.value)&&void 0!==e?e:""}},t}(i.FastMetricEvent)},14165:function(e,t,n){"use strict";n.d(t,{ReadingDetailsEvent:function(){return a}});var r,i=n(55609),o=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t){var n=e.call(this)||this;return n.data=t,n}return o(t,e),t.prototype.getSchema=function(){return"litb_anon_reading"},t.prototype.getPayload=function(){var e;return{start_position:this.data.startPosition,end_position:this.data.endPosition,event_context:null!==(e=this.data.context)&&void 0!==e?e:"Reading",event_action:this.data.action,content_type:this.data.contentType}},t}(i.FastMetricEvent)},37593:function(e,t,n){"use strict";n.r(t),n.d(t,{DIMENSIONS:function(){return m},computeTimeMetricFromCustomStartTime:function(){return O},createLatencyTimer:function(){return I},getClientIdMetricName:function(){return w},getErrorMetricName:function(){return v},getLatencyMetricName:function(){return y},getSuccessMetricName:function(){return b},recordCountAndUploadMetric:function(){return _},recordCountMetric:function(){return E},recordCountMetricOnlyOnce:function(){return S},recordLatencyMetric:function(){return P},recordSessionsWithCountMetric:function(){return T},recordTimeMetric:function(){return C},recordTimeMetricFromCustomStartTime:function(){return k},recordTimeMetricFromNavigationStart:function(){return R}});var r,i,o,a=n(88306),s=n.n(a),c=n(9731),u=n(60107),l=n(22926),d=n(38823),h=n(99030),f=n(14705),p=n(86379),g=(0,d.getAppConfig)(),m={region:g.region,marketplace:g.countryCode,platform:(null===(r=g.platform)||void 0===r?void 0:r.toLowerCase())||"",clientId:g.clientId||c.CLIENT_ID.DPX,version:""+g.appVersion,format:""+(null!==(i=p.LITB_RENDER_TYPE&&(null===f.getInitialLitbData||void 0===f.getInitialLitbData?void 0:(0,f.getInitialLitbData)().format))&&void 0!==i?i:"unknown"),experiment:null!==(o=g.experiment)&&void 0!==o?o:"none",fixedFormat:g.fixedFormat?"fixedformat":"reflowable",productCategory:g.productCategory},v=function(e){return e+"Error"},y=function(e){return e+"Latency"},b=function(e){return e+"Success"},w=function(e,t){var n=t.toUpperCase();return""+e+(n in c.CLIENT_ID?n:"Invalid")+"ClientId"},E=function(e,t){void 0===t&&(t=1),e&&(0,u.emitEmfMetrics)(e,t,l.MetricUnit.COUNT,m)},S=s()((function(e){return E(e,1)})),T=function(e,t){void 0===t&&(t=1),t>=1&&S("SessionsWith::"+e)},_=function(e,t){return void 0===t&&(t=1),(0,u.emitEmfMetrics)(e,t,l.MetricUnit.COUNT,m)},P=function(e){e.getTime()>0&&(0,u.emitEmfMetrics)(e.getName(),e.getTime(),l.MetricUnit.MILLISECONDS,m)},C=function(e,t){t>0&&(0,u.emitEmfMetrics)(e,t,l.MetricUnit.MILLISECONDS,m)},R=function(e){var t=O(0);C(e,t)},O=function(e){if(0===e){if(!(window.performance&&window.performance.timing&&window.performance.timing.navigationStart))return-1;e=window.performance.timing.navigationStart}return Date.now()-e},k=function(e,t){var n=O(t);C(e,n)},I=function(e){return new h.Timer(e)}},60107:function(e,t,n){"use strict";n.d(t,{emitEmfMetrics:function(){return s}});var r=n(22926),i=n(74e3),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},a=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},s=function(e,t,n,o,a){void 0===n&&(n=r.MetricUnit.NONE),void 0===o&&(o={clientName:"KindleWebReaderLitbWebsite"});var s=c(e,t,n,o,a);return i.katalLogger.info(e,{emfLog:s})},c=function(e,t,n,i,s){var c;return o(o({_aws:{Timestamp:Date.now(),CloudWatchMetrics:[{Namespace:""+r.DEFAULT_NAMESPACE,Dimensions:a(Object.keys(i).map((function(e){return[e]})),[Object.keys(i)]),Metrics:[{Name:e,Unit:n}]}]}},i),((c={})[e]=t,c.Context=s,c))}},22926:function(e,t,n){"use strict";var r;n.d(t,{DEFAULT_NAMESPACE:function(){return i},MetricUnit:function(){return r}}),function(e){e.COUNT="Count",e.MILLISECONDS="Milliseconds",e.NONE="None"}(r||(r={}));var i="LITB"},99030:function(e,t,n){"use strict";n.d(t,{Timer:function(){return r}});var r=function(){function e(e){this.startTime=-1,this.name=e}return e.prototype.getName=function(){return this.name},e.prototype.start=function(){return this.startTime=window.performance.now(),this},e.prototype.getTime=function(){return-1===this.startTime?-1:window.performance.now()-this.startTime},e}()},48361:function(e,t,n){"use strict";var r;n.d(t,{ActionType:function(){return r},setAppType:function(){return i},setAsin:function(){return o},setInteractionManager:function(){return a},setProductAsin:function(){return s},setPurchaseCompleted:function(){return l},setRenderType:function(){return c},setRevisionId:function(){return u}}),function(e){e.SET_APP_TYPE="SET_APP_TYPE",e.SET_ASIN="SET_ASIN",e.SET_INTERACTION_MANAGER="SET_INTERACTION_MANAGER",e.SET_PRODUCT_ASIN="SET_PRODUCT_ASIN",e.SET_RENDER_TYPE="SET_RENDER_TYPE",e.SET_REVISION_ID="SET_REVISION_ID",e.SET_PURCHASE="SET_PURCHASE"}(r||(r={}));var i=function(e){return{type:r.SET_APP_TYPE,payload:e}},o=function(e){return{type:r.SET_ASIN,payload:e}},a=function(e){return{type:r.SET_INTERACTION_MANAGER,payload:e}},s=function(e){return{type:r.SET_PRODUCT_ASIN,payload:e}},c=function(e){return{type:r.SET_RENDER_TYPE,payload:e}},u=function(e){return{type:r.SET_REVISION_ID,payload:e}},l=function(e){return{type:r.SET_PURCHASE,payload:e}}},41096:function(e,t,n){"use strict";var r;n.d(t,{ActionType:function(){return r},createBookCardBooleanAction:function(){return i},setATFHeight:function(){return c},setActivateModalOverlay:function(){return s},setDisplayModalOverlay:function(){return a},setInitialized:function(){return o}}),function(e){e.SET_INITIALIZED="INITIALIZED",e.SET_ATF_HEIGHT="ATF_HEIGHT",e.SET_ACCESSIBLE_CARD_TRIGGER="SET_ACCESSIBLE_CARD_TRIGGER",e.SET_DRAGGING="SET_DRAGGING",e.SET_DISPLAY_MODAL_OVERLAY="SET_DISPLAY_MODAL_OVERLAY",e.SET_ACTIVATE_MODAL_OVERLAY="SET_ACTIVATE_MODAL_OVERLAY",e.SET_BOOK_TYPE="SET_BOOK_TYPE"}(r||(r={}));var i=function(e,t){return{type:e,payload:t}},o=function(e){return{type:r.SET_INITIALIZED,payload:e}},a=function(e){return{type:r.SET_DISPLAY_MODAL_OVERLAY,payload:e}},s=function(e){return{type:r.SET_ACTIVATE_MODAL_OVERLAY,payload:e}},c=function(e){return{type:r.SET_ATF_HEIGHT,payload:e}}},95880:function(e,t,n){"use strict";var r;n.d(t,{ActionType:function(){return r},setBookOffer:function(){return i},setContentHeightWithoutBuyBox:function(){return o},setProceedToCheckoutMetadata:function(){return s},setShowInlineBuyBox:function(){return a}}),function(e){e.SET_BOOK_OFFER="SET_BOOK_OFFER",e.SET_CONTENT_HEIGHT_WITHOUT_BUY_BOX="SET_CONTENT_HEIGHT_WITHOUT_BUY_BOX",e.SET_PROCEED_TO_CHECKOUT_METADATA="SET_PROCEED_TO_CHECKOUT_METADATA",e.SET_SHOW_INLINE_BUY_BOX="SET_SHOW_INLINE_BUY_BOX"}(r||(r={}));var i=function(e){return{type:r.SET_BOOK_OFFER,payload:e}},o=function(e){return{type:r.SET_CONTENT_HEIGHT_WITHOUT_BUY_BOX,payload:e}},a=function(e){return{type:r.SET_SHOW_INLINE_BUY_BOX,payload:e}},s=function(e){return{type:r.SET_PROCEED_TO_CHECKOUT_METADATA,payload:e}}},53889:function(e,t,n){"use strict";var r;n.d(t,{ActionType:function(){return r},setEndOfSampleMessage:function(){return o},setOverlayMode:function(){return i},setSelectedOption:function(){return l},setShowErrorModal:function(){return s},setShowInlineEndAction:function(){return a},setShowRatingsPopover:function(){return c},setSupportedOptions:function(){return u}}),function(e){e.SET_OVERLAY_MODE="SET_OVERLAY_MODE",e.SET_END_OF_SAMPLE_MESSAGE="SET_END_OF_SAMPLE_MESSAGE",e.SET_SHOW_INLINE_END_ACTIONS="SET_SHOW_INLINE_END_ACTIONS",e.SET_SHOW_ERROR_MODAL="SET_SHOW_ERROR_MODAL",e.SET_SHOW_RATINGS_POPOVER="SET_SHOW_RATINGS_POPOVER",e.SET_SUPPORT_OPTIONS="SET_SUPPORT_OPTIONS",e.SET_SELECTED_OPTION="SET_SELECTED_OPTION"}(r||(r={}));var i=function(e){return{type:r.SET_OVERLAY_MODE,payload:e}},o=function(e){return{type:r.SET_END_OF_SAMPLE_MESSAGE,payload:e}},a=function(e){return{type:r.SET_SHOW_INLINE_END_ACTIONS,payload:e}},s=function(e){return{type:r.SET_SHOW_ERROR_MODAL,payload:e}},c=function(e){return{type:r.SET_SHOW_RATINGS_POPOVER,payload:e}},u=function(e){return{type:r.SET_SUPPORT_OPTIONS,payload:e}},l=function(e){return{type:r.SET_SELECTED_OPTION,payload:e}}},80142:function(e,t,n){"use strict";var r;n.r(t),n.d(t,{ActionType:function(){return r},setBookContent:function(){return h},setBookInformation:function(){return i},setBookOpen:function(){return c},setContentKCMSMetadata:function(){return g},setCoverImageLoaded:function(){return s},setLitbBook:function(){return o},setNumberOfPages:function(){return p},setPageLabelSet:function(){return f},setPositionEvent:function(){return l},setReadingLocationData:function(){return u},setRecommendationsData:function(){return d},setTableOfContents:function(){return a}}),function(e){e.SET_BOOK_INFORMATION="SET_BOOK_INFORMATION",e.SET_BOOK="SET_BOOK",e.SET_BOOK_CONTENT="SET_BOOK_CONTENT",e.SET_BOOK_OPEN="SET_BOOK_OPEN",e.SET_COVER_IMAGE_LOADED="SET_COVER_IMAGE_LOADED",e.SET_NUMBER_OF_PAGES="SET_NUMBER_OF_PAGES",e.SET_PAGE_LABEL_SET="SET_PAGE_LABEL_SET",e.SET_POSITION_EVENT="SET_POSITION_EVENT",e.SET_READING_LOCATION_DATA="SET_READING_LOCATION_DATA",e.SET_RECOMMENDATIONS_DATA="SET_RECOMMENDATIONS_DATA",e.SET_TABLE_OF_CONTENTS="SET_TABLE_OF_CONTENTS",e.SET_CONTENT_KCMS_METADATA="SET_CONTENT_KCMS_METADATA"}(r||(r={}));var i=function(e){return{type:r.SET_BOOK_INFORMATION,payload:e}},o=function(e){return{type:r.SET_BOOK,payload:e}},a=function(e){return{type:r.SET_TABLE_OF_CONTENTS,payload:e}},s=function(e){return{type:r.SET_COVER_IMAGE_LOADED,payload:e}},c=function(e){return{type:r.SET_BOOK_OPEN,payload:e}},u=function(e){return{type:r.SET_READING_LOCATION_DATA,payload:e}},l=function(e){return{type:r.SET_POSITION_EVENT,payload:e}},d=function(e){return{type:r.SET_RECOMMENDATIONS_DATA,payload:e}},h=function(e){return{type:r.SET_BOOK_CONTENT,payload:e}},f=function(e){return{type:r.SET_PAGE_LABEL_SET,payload:e}},p=function(e){return{type:r.SET_NUMBER_OF_PAGES,payload:e}},g=function(e){return{type:r.SET_CONTENT_KCMS_METADATA,payload:e}}},35807:function(e,t,n){"use strict";n.d(t,{setFontAlignment:function(){return a},setFontColor:function(){return o},setFontFamily:function(){return r},setFontSizeIndex:function(){return i},setRenderedBookMetadata:function(){return u},setRenderingSettings:function(){return c},setScrollDelta:function(){return h},setShowUpsellWidget:function(){return d},setSupportedAaMenuOptions:function(){return s},setZoomPercent:function(){return l}});var r=function(e){return{type:"SET_FONT_FAMILY",payload:e}},i=function(e){return{type:"SET_FONT_SIZE_INDEX",payload:e}},o=function(e){return{type:"SET_FONT_COLOR",payload:e}},a=function(e){return{type:"SET_FONT_ALIGNMENT",payload:e}},s=function(e){return{type:"SET_SUPPORTED_AA_MENU_OPTIONS",payload:e}},c=function(e){return{type:"SET_RENDERING_SETTINGS",payload:e}},u=function(e){return{type:"SET_RENDERED_BOOK_METADATA",payload:e}},l=function(e,t){return void 0===t&&(t=!1),{type:"SET_ZOOM_PERCENT",payload:{zoomPercent:e,isRendererPropagatedZoom:t}}},d=function(e){return{type:"SET_SHOW_UPSELL_WIDGET",payload:e}},h=function(e){return{type:"SET_SCROLL_DELTA",payload:e}}},36114:function(e,t,n){"use strict";var r;n.d(t,{ActionType:function(){return r},reinitialize:function(){return i}}),function(e){e.REINITIALIZE="REINITIALIZE"}(r||(r={}));var i=function(e){return{type:r.REINITIALIZE,payload:e}}},9656:function(e,t,n){"use strict";n.d(t,{appStateReducer:function(){return s}});var r=n(48361),i=n(36114),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},a={appType:null,asin:null,productAsin:null,renderType:null,purchaseCompleted:!1},s=function(e,t){switch(void 0===e&&(e=a),t.type){case r.ActionType.SET_APP_TYPE:return o(o({},e),{appType:t.payload});case r.ActionType.SET_ASIN:return o(o({},e),{asin:t.payload});case r.ActionType.SET_INTERACTION_MANAGER:return o(o({},e),{interactionManager:t.payload});case r.ActionType.SET_PRODUCT_ASIN:return o(o({},e),{productAsin:t.payload});case r.ActionType.SET_RENDER_TYPE:return o(o({},e),{renderType:t.payload});case r.ActionType.SET_REVISION_ID:return o(o({},e),{revisionId:t.payload});case i.ActionType.REINITIALIZE:return o(o({},e),{initTime:t.payload});case r.ActionType.SET_PURCHASE:return o(o({},e),{purchaseCompleted:t.payload});default:return e}}},37832:function(e,t,n){"use strict";n.d(t,{bookCardReducer:function(){return a}});var r=n(41096),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},o={initialized:!1,atfHeight:0,accessibleFlag:!1,dragging:!1,displayModalOverlay:!1,activateModalOverlay:!1,bookType:"Kindle"},a=function(e,t){switch(void 0===e&&(e=o),t.type){case r.ActionType.SET_INITIALIZED:return i(i({},e),{initialized:t.payload});case r.ActionType.SET_ATF_HEIGHT:return i(i({},e),{atfHeight:t.payload});case r.ActionType.SET_ACCESSIBLE_CARD_TRIGGER:return i(i({},e),{accessibleFlag:t.payload});case r.ActionType.SET_DRAGGING:return i(i({},e),{dragging:t.payload});case r.ActionType.SET_DISPLAY_MODAL_OVERLAY:return i(i({},e),{displayModalOverlay:t.payload});case r.ActionType.SET_ACTIVATE_MODAL_OVERLAY:return i(i({},e),{activateModalOverlay:t.payload});case r.ActionType.SET_BOOK_TYPE:return i(i({},e),{bookType:t.payload});default:return e}}},19897:function(e,t,n){"use strict";n.d(t,{buyBoxReducer:function(){return a}});var r=n(95880),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},o={bookOffer:null,contentHeightWithoutBuyBox:0,proceedToCheckoutMetadata:{},showInlineBuyBox:!1},a=function(e,t){switch(void 0===e&&(e=o),t.type){case r.ActionType.SET_BOOK_OFFER:return i(i({},e),{bookOffer:t.payload});case r.ActionType.SET_CONTENT_HEIGHT_WITHOUT_BUY_BOX:return i(i({},e),{contentHeightWithoutBuyBox:t.payload});case r.ActionType.SET_PROCEED_TO_CHECKOUT_METADATA:return i(i({},e),{proceedToCheckoutMetadata:t.payload});case r.ActionType.SET_SHOW_INLINE_BUY_BOX:return i(i({},e),{showInlineBuyBox:t.payload});default:return e}}},137:function(e,t,n){"use strict";n.d(t,{chromeOverlayReducer:function(){return a}});var r=n(53889),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},o={isOverlayModeOn:!0,showInlineEndActions:!1,showEndOfSampleMessage:!1,showErrorModal:!1,showRatingsPopover:!1,supportedOptions:new Map([]),selectedOption:null},a=function(e,t){switch(void 0===e&&(e=o),t.type){case r.ActionType.SET_OVERLAY_MODE:return i(i({},e),{isOverlayModeOn:t.payload});case r.ActionType.SET_END_OF_SAMPLE_MESSAGE:return i(i({},e),{showEndOfSampleMessage:t.payload});case r.ActionType.SET_SHOW_ERROR_MODAL:return i(i({},e),{showErrorModal:t.payload});case r.ActionType.SET_SHOW_INLINE_END_ACTIONS:return i(i({},e),{showInlineEndActions:t.payload});case r.ActionType.SET_SHOW_RATINGS_POPOVER:return i(i({},e),{showRatingsPopover:t.payload});case r.ActionType.SET_SELECTED_OPTION:return i(i({},e),{selectedOption:t.payload});case r.ActionType.SET_SUPPORT_OPTIONS:return i(i({},e),{supportedOptions:t.payload});default:return e}}},70411:function(e,t,n){"use strict";n.d(t,{litbBookReducer:function(){return a}});var r=n(80142),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},o={acquisition:{successful:!1,thankYouUrl:""},bookOpen:!1,shovelerData:null,coverImageLoaded:!1,litbBook:null,positionEvent:null,readingLocationData:null,tableOfContents:null,bookContent:[],kcmsMetadata:null},a=function(e,t){switch(void 0===e&&(e=o),t.type){case r.ActionType.SET_BOOK_INFORMATION:return i(i({},e),{bookInformation:t.payload});case r.ActionType.SET_BOOK:return i(i({},e),{litbBook:t.payload});case r.ActionType.SET_TABLE_OF_CONTENTS:return i(i({},e),{tableOfContents:t.payload});case r.ActionType.SET_COVER_IMAGE_LOADED:return i(i({},e),{coverImageLoaded:t.payload});case r.ActionType.SET_READING_LOCATION_DATA:return i(i({},e),{readingLocationData:t.payload});case r.ActionType.SET_BOOK_OPEN:return i(i({},e),{bookOpen:t.payload});case r.ActionType.SET_NUMBER_OF_PAGES:return i(i({},e),{numberOfPages:t.payload});case r.ActionType.SET_PAGE_LABEL_SET:return i(i({},e),{pageLabelSet:t.payload});case r.ActionType.SET_POSITION_EVENT:return i(i({},e),{positionEvent:t.payload});case r.ActionType.SET_RECOMMENDATIONS_DATA:return i(i({},e),{shovelerData:t.payload});case r.ActionType.SET_BOOK_CONTENT:return i(i({},e),{bookContent:t.payload});case r.ActionType.SET_CONTENT_KCMS_METADATA:return i(i({},e),{kcmsMetadata:t.payload});default:return e}}},57209:function(e,t,n){"use strict";n.d(t,{rendererReducer:function(){return u}});var r=n(3571),i=n(42105),o=n(84550),a=n(14705),s=n(86379),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},c.apply(this,arguments)},u=function(e,t){switch(void 0===e&&(e=function(e){var t=i.INDEX_OF_FONT_SIZE_ARRAY_DEFAULT;(0,a.getLitbRendererTypeFromUrl)()===s.LITB_RENDER_TYPE.Stucco&&(t=i.STUCCO_INDEX_OF_FONT_SIZE_ARRAY_DEFAULT);var n={fontFamily:void 0,fontSizeIndex:t,fontSize:i.FONT_SIZE_ARRAY[t],fontColor:"white",fontAlignment:"JUSTIFY",isRendererPropagatedZoom:!1,showUpsellWidget:!1,zoomPercent:100},u=void 0,l=new r.PrintTokenProvider;if(window.localStorage){var d=window.localStorage.getItem(o.KWR_DISPLAY_SETTINGS_STORAGE_KEY);if(d)return{displayOptions:c(c({},n),JSON.parse(d)),supportedAaMenuOptions:u,scrollDelta:0,printTokenProvider:l}}return{displayOptions:n,supportedAaMenuOptions:u,scrollDelta:0,printTokenProvider:l}}()),t.type){case"SET_FONT_FAMILY":return c(c({},e),{displayOptions:c(c({},e.displayOptions),{fontFamily:t.payload}),renderingSettings:c(c({},e.renderingSettings),{fontFamily:t.payload})});case"SET_FONT_SIZE_INDEX":return c(c({},e),{displayOptions:c(c({},e.displayOptions),{fontSizeIndex:t.payload})});case"SET_FONT_COLOR":return c(c({},e),{displayOptions:c(c({},e.displayOptions),{fontColor:t.payload})});case"SET_FONT_ALIGNMENT":return c(c({},e),{displayOptions:c(c({},e.displayOptions),{fontAlignment:t.payload})});case"SET_SUPPORTED_AA_MENU_OPTIONS":return c(c({},e),{supportedAaMenuOptions:t.payload});case"SET_RENDERING_SETTINGS":return c(c({},e),{renderingSettings:t.payload});case"SET_RENDERED_BOOK_METADATA":return c(c({},e),{renderedBookMetadata:t.payload});case"SET_ZOOM_PERCENT":return c(c({},e),{displayOptions:c(c({},e.displayOptions),t.payload)});case"SET_SHOW_UPSELL_WIDGET":return c(c({},e),{displayOptions:c(c({},e.displayOptions),{showUpsellWidget:t.payload})});case"SET_SCROLL_DELTA":return c(c({},e),{scrollDelta:t.payload});default:return e}}},62022:function(e,t,n){"use strict";n.d(t,{rootReducer:function(){return h}});var r=n(14890),i=n(137),o=n(37832),a=n(57209),s=n(70411),c=n(9656),u=n(19897),l=n(36114),d=(0,r.combineReducers)({appState:c.appStateReducer,bookCard:o.bookCardReducer,buyBox:u.buyBoxReducer,chromeOverlay:i.chromeOverlayReducer,renderer:a.rendererReducer,litbBook:s.litbBookReducer}),h=function(e,t){var n;return t.type===l.ActionType.REINITIALIZE&&(null===(n=window.KindleRenderer)||void 0===n||n.shutdown(),e=void 0),d(e,t)}},95840:function(e,t,n){"use strict";n.r(t),n.d(t,{store:function(){return o}});var r=n(14890),i=n(62022),o=(0,r.createStore)(i.rootReducer)},11096:function(e,t,n){"use strict";n.d(t,{RendererOperation:function(){return r},createPaginateLatencyMetric:function(){return c},getCurrentMetrics:function(){return d},getMetricName:function(){return a},recordBookOpenMetric:function(){return l},recordPaginateLatencyMetric:function(){return u}});var r,i=n(37593),o=n(86379);!function(e){e.API_METADATA="ApiMetadata",e.BOOK_CARD_OPEN="BookCardOpen",e.BOOK_OPEN="BookOpen",e.COVER_SHOWN="CoverShown",e.FIRST_FULL_RENDER="FirstFullRender",e.INITIAL_RENDER="InitialRender",e.LOADED_BUY_BOX="LoadedBuyBox",e.LOADED_CONTENT="LoadedContent",e.LOADED_FONTS="LoadedFonts",e.LOADED_TOC="LoadedToc",e.PAGINATION="Pagination",e.PERCEIVED_LATENCY="Perceived",e.PRELOAD_METADATA="PreloadMetadata",e.RENDERER_INITIALIZED="RendererInitialized",e.KCMS_METADATA_LOAD="KCMSMetadata",e.RECOMMENDATION_SHOVELER_ITEM_LOADED="RecShovelerItemLoaded",e.RECOMMENDATION_SHOVELER_ITEM_CLICKED="RecShovelerItemClicked",e.RECOMMENDATION_SHOVELER_COVER_CLICKED="RecShovelerCoverClicked",e.RECOMMENDATION_SHOVELER_RATING_CLICKED="RecShovelerRatingClicked",e.TOC_ITEM_CLICKED="TocItemClicked",e.TOC_PRERENDERED="TocPrerendered",e.DISPLAY_OPTIONS_PRERENDERED="DisplayOptionsPrerendered",e.SEARCH_PRERENDERED="SearchPrerendered",e.STUCCO_SCRIPT_INITIALIZATION="StuccoScriptInitialization"}(r||(r={}));var a=function(e,t){return""+function(e){switch(e){case o.LITB_RENDER_TYPE.YJHTML:return"YjHTML";case o.LITB_RENDER_TYPE.Stucco:return"Stucco";case o.LITB_RENDER_TYPE.FixedFormatImage:return"Print";case o.LITB_RENDER_TYPE.YJ:return"YjBinary";default:return""}}(t)+e},s=function(){function e(e){this.litbRenderType=o.LITB_RENDER_TYPE.Stucco,this.litbRenderType=e,this.latencyTimers=new Map}return e.prototype.getLatencyTimer=function(e){var t=this.latencyTimers.get(e);return t||(t=(0,i.createLatencyTimer)(e),this.latencyTimers.set(e,t)),t},e.prototype.deleteLatencyTimer=function(e){this.latencyTimers.delete(e)},e.prototype.startTimer=function(e){this.getLatencyTimer(e).start()},e.prototype.stopTimer=function(e){var t=this.getLatencyTimer(e);(0,i.recordLatencyMetric)(t),this.deleteLatencyTimer(e)},e.prototype.startOperation=function(e){var t=(0,i.getLatencyMetricName)(a(e,this.litbRenderType));this.startTimer(t)},e.prototype.stopOperation=function(e){var t=(0,i.getLatencyMetricName)(a(e,this.litbRenderType));this.stopTimer(t)},e.prototype.recordError=function(e){var t=(0,i.getErrorMetricName)(a(e,this.litbRenderType));(0,i.recordCountMetric)(t,1)},e.prototype.recordSuccess=function(e,t){var n=(0,i.getSuccessMetricName)(a(e,this.litbRenderType));this.recordAllFormatsBookOpenSuccess(e,t),(0,i.recordCountMetric)(n,t?1:0)},e.prototype.recordAllFormatsBookOpenSuccess=function(e,t){if(e===r.BOOK_OPEN){var n=(0,i.getSuccessMetricName)(e);(0,i.recordCountMetric)(n,t?1:0),(0,i.recordSessionsWithCountMetric)(n,t?1:0)}},e.prototype.recordCount=function(e){var t=a(e,this.litbRenderType);(0,i.recordCountMetric)(t,1)},e}(),c=function(e,t,n){if(o.LITB_RENDER_TYPE.Stucco===t){var i=e.get(n);i||(i=new s(t),e.set(n,i)),i.startOperation(r.PAGINATION)}},u=function(e,t,n){if(o.LITB_RENDER_TYPE.Stucco===t){var i=e.get(n);i&&i.stopOperation(r.PAGINATION)}},l=function(e,t){new s(t).recordSuccess(r.BOOK_OPEN,e)},d=function(e,t,n){void 0===n&&(n=o.LITB_RENDER_TYPE.Stucco);var r=e.get(t);return r||(r=new s(n),e.set(t,r)),r}},38823:function(e,t,n){"use strict";n.d(t,{getAppConfig:function(){return r},getKaramelCdnPrefetchInfo:function(){return l},getKaramelToken:function(){return u},hasToggleBookType:function(){return s},isBackToStoreBehaviour:function(){return c},isMarketPlaceCN:function(){return i},showBuyButton:function(){return a}});var r=function(){var e,t=window.envConfig,n="AI8E87R86GTSD",r=(null===(e=null==t?void 0:t.customerId)||void 0===e?void 0:e.length)>0?t.customerId:"NOT_LOGGED_IN";return{appVersion:2,deviceType:n,customerId:r,eelEndpoint:null==t?void 0:t.eelEndpoint,katalCloudWatchEndpoint:null==t?void 0:t.katalCloudWatchEndpoint,katalCloudWatchEndpointEmf:null==t?void 0:t.katalCloudWatchEndpointEmf,dsn:r+"00"+n,countryCode:null==t?void 0:t.countryCode,marketplaceId:null==t?void 0:t.marketplaceId,marketplaceName:null==t?void 0:t.marketplaceName,region:null==t?void 0:t.region,platform:null==t?void 0:t.platform,format:null==t?void 0:t.format,revisionId:null==t?void 0:t.revisionId,productAsin:null==t?void 0:t.productAsin,clientId:null==t?void 0:t.clientId,backButtonText:null==t?void 0:t.backButtonText,showBuyButton:null==t?void 0:t.showBuyButton,hasToggleBookType:null==t?void 0:t.hasToggleBookType,isBackToStoreBehaviour:null==t?void 0:t.isBackToStoreBehaviour,kv3Weblab:null==t?void 0:t.kv3Weblab,experiment:null==t?void 0:t.experiment,productCategory:null==t?void 0:t.productCategory,fixedFormat:null==t?void 0:t.fixedFormat,karamelToken:null==t?void 0:t.karamelToken,karamelCdnPrefetchInfo:null==t?void 0:t.karamelCdnPrefetchInfo}},i=function(){return"CNAmazon"===r().marketplaceName},o=function(e){var t,n;return"string"==typeof e?"true"===(null===(n=null===(t=e)||void 0===t?void 0:t.toLowerCase)||void 0===n?void 0:n.call(t)):!!e},a=function(){return o(r().showBuyButton)},s=function(){return o(r().hasToggleBookType)},c=function(){return o(r().isBackToStoreBehaviour)},u=function(){return r().karamelToken},l=function(){try{return JSON.parse(r().karamelCdnPrefetchInfo)}catch(e){return{}}}},72215:function(e,t,n){"use strict";n.r(t),n.d(t,{bookInformationFactory:function(){return s}});var r=n(62099),i=n(86379),o=n(76577),a=n(37602),s=(0,o.memoizeWithTTL)((function(e,t,n){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var o;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(s){switch(s.label){case 0:return(o=t===i.LITB_RENDER_TYPE.YJ)?[4,(0,a.isKv3WeblabEnabled)()]:[3,2];case 1:o=!s.sent(),s.label=2;case 2:return o&&(t=i.LITB_RENDER_TYPE.Stucco),t===i.LITB_RENDER_TYPE.Stucco?[3,3]:[3,5];case 3:return[4,r.SrsClient.getBookInformation(e)];case 4:return[2,s.sent()];case 5:return[2,Promise.resolve({asin:e,revision:null!=n?n:"",contentType:"EBSP",format:c(t)})]}}))}))}),24e4),c=function(e){switch(e){case i.LITB_RENDER_TYPE.YJHTML:return"YJ_HTML";case i.LITB_RENDER_TYPE.Stucco:return"MOBI";case i.LITB_RENDER_TYPE.YJ:return"YJ";case i.LITB_RENDER_TYPE.FixedFormatImage:return"IMAGE_JPG";default:throw Error("Unsupported book format")}}},90268:function(e,t,n){"use strict";n.d(t,{buildContextForCloudWatchLog:function(){return d},buildRumConfiguration:function(){return h},getLitbOpenTimestamp:function(){return p},getPageLoadTimestamp:function(){return g},getRecentNetworkRequests:function(){return l},setLitbOpenTimestamp:function(){return f}});var r=n(33070),i=n(14705),o=n(41042),a=n(98087),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},c=Date.now(),u=0,l=function(){var e,t,n;return null!==(n=null===(t=null===(e=window.performance)||void 0===e?void 0:e.getEntries)||void 0===t?void 0:t.call(e).map((function(e){return null==e?void 0:e.name})).filter((function(e){return null==e?void 0:e.startsWith("http")})).slice(-5))&&void 0!==n?n:[]},d=function(e,t,n){return void 0===t&&(t=""),void 0===n&&(n={}),s({error:e,requestId:(0,r.sanitizeIdForLogging)((0,i.getRequestIdFromUrl)()),sessionId:(0,r.sanitizeIdForLogging)((0,i.getSessionIdFromUrl)()),customerId:(0,r.sanitizeIdForLogging)((0,i.getCustomerIdFromUrl)()),asin:t},n)},h=function(){if(window.location.hostname===a.marketplaceInfo.FR.domain)try{new o.AwsRum("7aff977c-9019-4f2c-85ef-6acff4937aa2","1.0.0","eu-west-1",{sessionSampleRate:.85,guestRoleArn:"arn:aws:iam::934363507687:role/RUM-Monitor-eu-west-1-934363507687-5997462947761-Unauth",identityPoolId:"eu-west-1:c40e3695-1359-4576-a6ae-4327b23ed332",endpoint:"https://dataplane.rum.eu-west-1.amazonaws.com",telemetries:["performance","errors","http"],allowCookies:!0,enableXRay:!0})}catch(e){return null}return null},f=function(){return u=Date.now()},p=function(){return u},g=function(){return c}},10885:function(e,t,n){"use strict";function r(e){var t,n=document.querySelector('meta[id="'+e+'"]');return null!==(t=null==n?void 0:n.getAttribute("content"))&&void 0!==t?t:""}function i(e,t){return e["anti-csrftoken-a2z"]=r(t),e}n.d(t,{appendCsrfHeader:function(){return i},getShoppingPortalCsrfToken:function(){return r}})},11202:function(e,t,n){"use strict";n.d(t,{detectBrowser:function(){return r}});var r=function(){var e=navigator.userAgent;return e.match(/edge|edg|edgiOS|edgA/i)?"edge":e.match(/opt|opr\//i)?"opera":e.match(/firefox|fxios/i)?"firefox":e.match(/chrome|chromium|crios/i)?"chrome":e.match(/safari/i)?"safari":"unknown"}},1085:function(e,t,n){"use strict";n.d(t,{disableContentForAccessibleUsers:function(){return i},focusElement:function(){return r},getMarginLeftValueOfElement:function(){return s},ignoreScrollEventListener:function(){return o},setIgnoreScrollEventListener:function(){return a}});var r=function(e){document.activeElement.blur(),e.focus()},i=function(){var e=document.getElementById("kindle-options"),t=document.getElementById("litb-renderer"),n=document.getElementById("book-card-container");e&&e.setAttribute("aria-hidden","true"),t&&t.setAttribute("aria-hidden","true"),n&&n.setAttribute("aria-hidden","true"),setTimeout((function(){document.activeElement.blur()}),500)},o=!1,a=function(e){o=e},s=function(e){var t=e.style.marginLeft.match(/-?[0-9]+/);return t?parseInt(t[0],10):0}},76577:function(e,t,n){"use strict";n.d(t,{memoizeWithTTL:function(){return o}});var r=n(88306),i=n.n(r),o=function(e,t){var n=0,r=i()(e);return function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return Date.now()>n+t&&(r.cache=new(i().Cache),n=Date.now()),r.apply(void 0,e)}}},69339:function(e,t,n){"use strict";n.d(t,{MessageCommands:function(){return r},clearSampleDepth:function(){return f},createMessage:function(){return u},getSampleDepth:function(){return h},getTargetOrigin:function(){return l},handlePopState:function(){return m},isValidJson:function(){return g},reload:function(){return c},replaceHistoryHash:function(){return v},setSampleDepth:function(){return p},updateHash:function(){return s}});var r,i=n(27401),o=n(79390),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};!function(e){e.CLOSE_LITB="closeLITB",e.INITIALIZE_LITB="initializeLITB",e.READY_LITB="readyLITB",e.RELOAD_LITB="reloadLITB",e.UPDATE_LITB="updateLITB",e.ACQUISITION_REDIRECT="acquisitionRedirect"}(r||(r={}));var s=function(e,t,n){var r={asin:e,revisionId:t,format:n,depth:h()+1};(0,i.isInIframe)()||y(r),b(r)},c=function(){window.parent.postMessage(u(r.RELOAD_LITB),l())},u=function(e,t){return JSON.stringify(a({command:e},t))},l=function(){return window.location!==window.parent.location?document.referrer:document.location.href},d="sample-depth",h=function(){return parseInt(window.sessionStorage.getItem(d)||"0",10)},f=function(){window.sessionStorage.removeItem(d)},p=function(e){window.sessionStorage.setItem(d,e.toString())},g=function(e){try{return JSON.parse(e),!0}catch(e){return!1}},m=function(){b(window.location.search)},v=function(e){window.history.replaceState({},document.title,w((0,o.constructSearchParams)(e)))},y=function(e){window.history.pushState({},document.title,w((0,o.constructSearchParams)(e)))},b=function(e){window.parent.postMessage(u(r.UPDATE_LITB,{search:e}),l())},w=function(e){return window.location.origin+window.location.pathname+e+window.location.hash}},20247:function(e,t,n){"use strict";n.d(t,{getRequest:function(){return s},postRequest:function(){return a}});var r=n(68217),i=n(63721),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},a=function(e,t){void 0===t&&(t=!0);var n={headers:new Headers(o({"Content-Type":"application/json"},e.postHeaders))};return e.postData&&(n.method="POST",n.body=JSON.stringify(e.postData)),s(e.url,n,t)},s=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n=!1),c(r.getRequest(e,t),n,e)},c=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=""),e.catch((function(e){var r,o,a;switch(e.type){case"offline":(r=(0,i.createError)("NoNetworkError",e.error)).showErrorDialog=t,r.details="Failed to open ["+n+"]";break;case"connection":(r=(0,i.createError)("GenericNetworkError",e.error)).showErrorDialog=t,r.details="Failed to open ["+n+"]";break;case"abort":return r=(0,i.createError)("AbortError",e.error),Promise.reject(r);default:(r=(0,i.createError)("GenericNetworkError",e.response.statusText)).showErrorDialog=t,r.details=(o=e.response,a="",o.headers.forEach((function(e,t,n){a=a+","+t+":"+e})),"URL: ["+o.url+"]\n\n          Status Code: ["+o.status+"]\n\n          Response Type: ["+o.type+"]\n\n          Status Text: ["+o.statusText+"]\n\n          Redirected: ["+o.redirected+"]\n\n          Headers:["+a+"]")}return(0,i.logErrorThroughCSM)(r,"WARN"),(0,i.handleError)(r),Promise.reject(r)}))}},33070:function(e,t,n){"use strict";n.d(t,{sanitizeIdForLogging:function(){return r}});var r=function(e){return e?e.replace(/([^a-z0-9\-_]+)/gi,"-").substring(0,100):e}},79390:function(e,t,n){"use strict";n.d(t,{constructSearchParams:function(){return i}});var r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=function(e){if(window.location.search){var t=o(window.location.search);return"?"+a(r(r({},t),e))}return"?"+a(e)},o=function(e){var t={};return new URLSearchParams(e).forEach((function(e,n){t[n]=e})),t},a=function(e){return new URLSearchParams(e).toString()}},62099:function(e,t,n){"use strict";n.d(t,{SrsClient:function(){return c}});var r=n(68217),i=n(65907),o=n(3571),a=n(38823),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},c=function(){function e(){}return e.fetchStartReadingData=function(t,n,i){var o=new URLSearchParams,s=i||(0,a.getAppConfig)().countryCode;o.append("asin",t),o.append("marketplace",n||(0,a.getAppConfig)().marketplaceId),o.append("cor","UK"===s?"GB":s),o.append("clientVersion",e.CLIENT_VERSION),o.append("randval",Math.random().toString());var c=new Headers;c.set(e.DEVICE_TYPE_HEADER,e.LITB_DEVICE_TYPE);var u={headers:c};return r.getRequest(e.SERVICE_WEB_ROOT+"startReading?"+o.toString(),u).then((function(e){return e.json()})).then(e.firstCallSuccess)},e.firstCallSuccess=function(e){var t;if(e.downloadRestrictionReason&&e.downloadRestrictionReason.reasonCode)throw(0,i.createError)(e.downloadRestrictionReason.reasonCode,null!==(t=e.downloadRestrictionReason.reasonMessage)&&void 0!==t?t:"");return e},e.getBookInformation=function(t){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var n;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(r){switch(r.label){case 0:return[4,e.fetchStartReadingData(t).catch((function(n){throw n&&-1!==e.GEO_LOCATION_NOT_ALLOWED.indexOf(n.name)?new o.GeoLocationNotAllowed("Failed to start reading for book with asin: "+t,"Stucco"):n&&-1!==e.CONTENT_NOT_ALLOWED.indexOf(n.name)?new o.ContentNotAllowed("Failed to start reading for book with asin: "+t,"Stucco"):n&&-1!==e.CONTENT_UNSUPPORTED.indexOf(n.name)?new o.ContentUnSupported("Failed to start reading for book with asin: "+t,"Stucco"):new Error(n.message?n.message:"Failed to initialize stucco data.")}))];case 1:return delete(n=r.sent()).kindleSessionId,[2,{asin:t,revision:n.contentVersion,contentType:n.contentType,format:n.format,stuccoBookInformation:s({startReadingPosition:n.srl},n)}]}}))}))},e.LITB_DEVICE_TYPE="AI8E87R86GTSD",e.DEVICE_TYPE_HEADER="Amzn-Device-Type",e.SERVICE_WEB_ROOT="/service/web/content/",e.CLIENT_VERSION="999999999",e.GEO_LOCATION_NOT_ALLOWED="GeoLocationNotAllowed",e.CONTENT_NOT_ALLOWED="ContentNotAllowed",e.CONTENT_UNSUPPORTED="ContentUnsupported",e}()},14705:function(e,t,n){"use strict";n.d(t,{appendOptionalQueryParamToTheEnd:function(){return T},appendQueryParam:function(){return S},constructLitbUrl:function(){return _},getBackToStoreUrl:function(){return E},getClientIdFromUrl:function(){return w},getCustomerIdFromUrl:function(){return y},getInitialLitbData:function(){return P},getLitbRendererTypeFromUrl:function(){return f},getProductAsinFromUrl:function(){return b},getRequestIdFromUrl:function(){return m},getSessionIdFromUrl:function(){return v},isDebug:function(){return C},openApp:function(){return R},retry:function(){return O}});var r,i=n(96915),o=n(85856),a=n(45170),s=n(86379),c=n(9731),u=n(38823),l=n(37593),d=n(79634),h=n(91428);!function(e){e.Debug="isDebug",e.Format="f",e.ProductAsin="pa",e.RequestId="rid",e.SessionId="sid",e.CustomerId="cid",e.RevisionId="r",e.Search="search",e.User="user",e.ClientId="clientId"}(r||(r={}));var f=function(){var e=new URL(window.location.href),t=parseInt(e.searchParams.get(r.Format)||"2",10),n=s.LITB_RENDER_TYPE.Stucco;switch(t){case 1:n=s.LITB_RENDER_TYPE.YJHTML;break;case 2:n=s.LITB_RENDER_TYPE.Stucco;break;case 3:n=s.LITB_RENDER_TYPE.YJ;break;case 4:n=s.LITB_RENDER_TYPE.FixedFormatImage}return(0,i.isIE11)()&&s.LITB_RENDER_TYPE.YJHTML===n&&(n=s.LITB_RENDER_TYPE.Stucco),n},p=function(e){return new URL(window.location.href).searchParams.get(e)||""},g=function(e){var t;return new URL(window.location.href).searchParams.get(e)||(null===(t=document.getElementById(e))||void 0===t?void 0:t.getAttribute("data-value"))||""},m=function(){return g(r.RequestId)},v=function(){return g(r.SessionId)},y=function(){return g(r.CustomerId)},b=function(){return p(r.ProductAsin)},w=function(){return p(r.ClientId)},E=function(e){if((0,u.isBackToStoreBehaviour)()){var t=o.getRefTag("kwrp_li","stb_nodl");return o.getUrlWithRefTag(e,t)}return e},S=function(e,t,n){var r=new URL(e);return r.searchParams.set(t,n),r.href},T=function(e,t,n){return t&&n?(e.includes("?")?e+="&":e+="?",e+=t+"="+n):e},_=function(e,t,n){var i=new URL(window.location.href).searchParams;return i.set(r.Format,(0,s.formatConverter)(t).toString()),n&&i.set(r.RevisionId,n),(0,h.getBaseUrl)()+"/"+e+"?"+i.toString()},P=function(e,t,n){var i=(0,u.getAppConfig)();return(null==i?void 0:i.format)&&void 0!==(null==i?void 0:i.revisionId)?{asin:e||a.getAsinFromUrl(),revisionId:i.revisionId,format:k(i.format)}:{asin:e||a.getAsinFromUrl(),revisionId:t||p(r.RevisionId),format:n||f()}},C=function(){return!!p(r.Debug)},R=function(){var e=w();return!!e&&e!==c.CLIENT_ID.DPX},O=function(e,t,n){return void 0===t&&(t=5),void 0===n&&(n=1e3),new Promise((function(r,i){e().then(r).catch((function(o){setTimeout((function(){1!==t?O(e,t-1,n).then(r,i):i(o)}),n)}))}))},k=function(e){switch(e){case"1":return s.LITB_RENDER_TYPE.YJHTML;case"2":return s.LITB_RENDER_TYPE.Stucco;case"3":return s.LITB_RENDER_TYPE.YJ;case"4":return s.LITB_RENDER_TYPE.FixedFormatImage;default:return(0,l.recordCountMetric)(d.default.STUCCO_FORMAT_FALLBACK,1),s.LITB_RENDER_TYPE.Stucco}}},27401:function(e,t,n){"use strict";n.d(t,{isInIframe:function(){return r}});var r=function(){return window.parent!==window}},73105:function(e,t,n){"use strict";n.d(t,{Authentication:function(){return l}});var r=n(10504),i=n(44358),o=n(78778),a=n(35622),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},c=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},u=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},l=function(){function e(e){var t=this;this.ChainAnonymousCredentialsProvider=function(){return c(t,void 0,void 0,(function(){return u(this,(function(e){return[2,this.AnonymousCredentialsProvider().catch(this.AnonymousStorageCredentialsProvider).catch(this.AnonymousCognitoCredentialsProvider)]}))}))},this.AnonymousCredentialsProvider=function(){return c(t,void 0,void 0,(function(){var e=this;return u(this,(function(t){return[2,new Promise((function(t,n){if(e.renewCredentials())return n();t(e.credentials)}))]}))}))},this.AnonymousStorageCredentialsProvider=function(){return c(t,void 0,void 0,(function(){var e=this;return u(this,(function(t){return[2,new Promise((function(t,n){var r;try{r=JSON.parse(localStorage.getItem(a.CRED_KEY))}catch(e){return n()}if(e.credentials=s(s({},r),{expiration:new Date(r.expiration)}),e.renewCredentials())return n();e.credentials=r,t(r)}))]}))}))},this.AnonymousCognitoCredentialsProvider=function(){return c(t,void 0,void 0,(function(){var e=this;return u(this,(function(t){return[2,this.cognitoIdentityClient.getId({IdentityPoolId:this.config.identityPoolId}).then((function(t){return e.cognitoIdentityClient.getOpenIdToken(t)})).then((function(t){return e.stsClient.assumeRoleWithWebIdentity({RoleArn:e.config.guestRoleArn,RoleSessionName:"cwr",WebIdentityToken:t.Token})})).then((function(t){e.credentials=t;try{localStorage.setItem(a.CRED_KEY,JSON.stringify(t))}catch(e){}return t}))]}))}))};var n=e.identityPoolId.split(":")[0];this.config=e,this.stsClient=new o.StsClient({fetchRequestHandler:new i.FetchHttpHandler,region:n}),this.cognitoIdentityClient=new r.CognitoIdentityClient({fetchRequestHandler:new i.FetchHttpHandler,region:n})}return e.prototype.renewCredentials=function(){if(!this.credentials||!this.credentials.expiration)return!0;var e=new Date(this.credentials.expiration.getTime()-a.CRED_RENEW_MS);return new Date>e},e}()},28554:function(e,t,n){"use strict";n.d(t,{BeaconHttpHandler:function(){return o}});var r=n(99391),i=n(94073),o=function(){function e(){}return e.prototype.handle=function(e){var t=this.sendBeacon(e);return new Promise((function(e,n){t?e({response:new r.HttpResponse({statusCode:200})}):n()}))},e.prototype.sendBeacon=function(e){var t=e.path;if(e.query){var n=(0,i.buildQueryString)(e.query);n&&(t+="?".concat(n))}var r=e.port,o="".concat(e.protocol,"//").concat(e.hostname).concat(r?":".concat(r):"").concat(t);return navigator.sendBeacon(o,e.body)},e}()},10504:function(e,t,n){"use strict";n.d(t,{CognitoIdentityClient:function(){return c},fromCognitoIdentityPool:function(){return s}});var r=n(99391),i=n(13880),o=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},a=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},s=function(e){return function(){return e.client.getCredentialsForIdentity(e.identityPoolId)}},c=function(e){var t=this;this.getId=function(e){return o(t,void 0,void 0,(function(){var t,n,r,o;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),t=JSON.stringify(e),n=this.getHttpRequest("AWSCognitoIdentityService.GetId",t),[4,this.fetchRequestHandler.handle(n)];case 1:return r=a.sent().response,[4,(0,i.responseToJson)(r)];case 2:return[2,a.sent()];case 3:throw o=a.sent(),new Error("CWR: Failed to retrieve Cognito identity: ".concat(o));case 4:return[2]}}))}))},this.getOpenIdToken=function(e){return o(t,void 0,void 0,(function(){var t,n,r,o;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),t=JSON.stringify(e),n=this.getHttpRequest("AWSCognitoIdentityService.GetOpenIdToken",t),[4,this.fetchRequestHandler.handle(n)];case 1:return r=a.sent().response,[4,(0,i.responseToJson)(r)];case 2:return[2,a.sent()];case 3:throw o=a.sent(),new Error("CWR: Failed to retrieve Cognito OpenId token: ".concat(o));case 4:return[2]}}))}))},this.getCredentialsForIdentity=function(e){return o(t,void 0,void 0,(function(){var t,n,r,o,s,c,u,l,d;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),t=JSON.stringify({IdentityId:e}),n=this.getHttpRequest("AWSCognitoIdentityService.GetCredentialsForIdentity",t),[4,this.fetchRequestHandler.handle(n)];case 1:return r=a.sent().response,[4,(0,i.responseToJson)(r)];case 2:return o=a.sent().Credentials,s=o.AccessKeyId,c=o.Expiration,u=o.SecretAccessKey,l=o.SessionToken,[2,{accessKeyId:s,secretAccessKey:u,sessionToken:l,expiration:new Date(1e3*c)}];case 3:throw d=a.sent(),new Error("CWR: Failed to retrieve credentials for Cognito identity: ".concat(d));case 4:return[2]}}))}))},this.getHttpRequest=function(e,n){return new r.HttpRequest({method:"POST",headers:{"content-type":"application/x-amz-json-1.1","x-amz-target":e},protocol:"https:",hostname:t.hostname,body:n})},this.hostname="cognito-identity.".concat(e.region,".amazonaws.com"),this.fetchRequestHandler=e.fetchRequestHandler}},29642:function(e,t,n){"use strict";n.d(t,{DataPlaneClient:function(){return d}});var r=n(73538),i=n(21070),o=n(41938),a=n(99391),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},c=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},u=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},l={expiresIn:60},d=function(e){var t=this;this.sendFetch=function(e){return c(t,void 0,void 0,(function(){var t,n;return u(this,(function(r){switch(r.label){case 0:return[4,this.getHttpRequestOptions(e,"application/json")];case 1:return t=r.sent(),n=new a.HttpRequest(t),this.awsSigV4?[4,this.awsSigV4.sign(n)]:[3,3];case 2:n=r.sent(),r.label=3;case 3:return[2,this.config.fetchRequestHandler.handle(n)]}}))}))},this.sendBeacon=function(e){return c(t,void 0,void 0,(function(){var t,n;return u(this,(function(r){switch(r.label){case 0:return[4,this.getHttpRequestOptions(e,"text/plain;charset=UTF-8")];case 1:return t=r.sent(),n=new a.HttpRequest(t),this.awsSigV4?[4,this.awsSigV4.presign(n,l)]:[3,3];case 2:n=r.sent(),r.label=3;case 3:return[2,this.config.beaconRequestHandler.handle(n)]}}))}))},this.getHttpRequestOptions=function(e,n){return c(t,void 0,void 0,(function(){var t,r,i,o,a,c,l,d;return u(this,(function(u){switch(u.label){case 0:return t=JSON.stringify(h(e)),r=this.config.endpoint.pathname.replace(/\/$/,""),i={method:"POST",protocol:this.config.endpoint.protocol,headers:{"content-type":n,host:this.config.endpoint.host},hostname:this.config.endpoint.hostname,path:"".concat(r,"/appmonitors/").concat(e.AppMonitorDetails.id),body:t},this.awsSigV4?(o=[s({},i)],l={},a=[s({},i.headers)],d={},c="X-Amz-Content-Sha256",[4,p(t)]):[3,2];case 1:return[2,s.apply(void 0,o.concat([(l.headers=s.apply(void 0,a.concat([(d[c]=u.sent(),d)])),l)]))];case 2:return[2,i]}}))}))},this.config=e,e.credentials&&(this.awsSigV4=new i.SignatureV4({applyChecksum:!0,credentials:e.credentials,region:e.region,service:"rum",uriEscapePath:!0,sha256:o.Sha256}))},h=function(e){var t=[];return e.RumEvents.forEach((function(e){return t.push(f(e))})),{BatchId:e.BatchId,AppMonitorDetails:e.AppMonitorDetails,UserDetails:e.UserDetails,RumEvents:t}},f=function(e){return{id:e.id,timestamp:Math.round(e.timestamp.getTime()/1e3),type:e.type,metadata:e.metadata,details:e.details}},p=function(e){return c(void 0,void 0,void 0,(function(){var t,n;return u(this,(function(i){switch(i.label){case 0:return(t=new o.Sha256).update(e),n=r.toHex,[4,t.digest()];case 1:return[2,n.apply(void 0,[i.sent()]).toLowerCase()]}}))}))}},7877:function(e,t,n){"use strict";n.d(t,{Dispatch:function(){return d}});var r=n(29642),i=n(28554),o=n(76216),a=n(31404),s=n(74699),c=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},u=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},l="CWR: Cannot dispatch; no AWS credentials.",d=function(){function e(e,t,n,a){var d=this;this.dispatchFetch=function(){return c(d,void 0,void 0,(function(){return u(this,(function(e){return this.doRequest()?[2,this.rum.sendFetch(this.createRequest()).catch(this.handleReject)]:[2]}))}))},this.dispatchBeacon=function(){return c(d,void 0,void 0,(function(){var e,t=this;return u(this,(function(n){return this.doRequest()?(e=this.createRequest(),[2,this.rum.sendBeacon(e).catch((function(){return t.rum.sendFetch(e)}))]):[2]}))}))},this.dispatchFetchFailSilent=function(){return c(d,void 0,void 0,(function(){return u(this,(function(e){return[2,this.dispatchFetch().catch((function(){}))]}))}))},this.dispatchBeaconFailSilent=function(){return c(d,void 0,void 0,(function(){return u(this,(function(e){return[2,this.dispatchBeacon().catch((function(){}))]}))}))},this.handleReject=function(e){throw d.disable(),e},this.defaultClientBuilder=function(e,t,n){return new r.DataPlaneClient({fetchRequestHandler:new s.RetryHttpHandler(new o.FetchHttpHandler({fetchFunction:d.config.fetchFunction}),d.config.retries),beaconRequestHandler:new i.BeaconHttpHandler,endpoint:e,region:t,credentials:n})},this.region=e,this.endpoint=t,this.eventCache=n,this.enabled=!0,this.buildClient=a.clientBuilder||this.defaultClientBuilder,this.config=a,this.startDispatchTimer(),a.signing?this.rum={sendFetch:function(){return Promise.reject(new Error(l))},sendBeacon:function(){return Promise.reject(new Error(l))}}:this.rum=this.buildClient(this.endpoint,this.region,void 0)}return e.prototype.enable=function(){this.enabled=!0,this.startDispatchTimer()},e.prototype.disable=function(){this.stopDispatchTimer(),this.enabled=!1},e.prototype.setAwsCredentials=function(e){this.rum=this.buildClient(this.endpoint,this.region,e),"function"==typeof e&&e()},e.prototype.startDispatchTimer=function(){document.addEventListener("visibilitychange",this.config.useBeacon?this.dispatchBeaconFailSilent:this.dispatchFetchFailSilent),document.addEventListener("pagehide",this.config.useBeacon?this.dispatchBeaconFailSilent:this.dispatchFetchFailSilent),this.config.dispatchInterval<=0||this.dispatchTimerId||(this.dispatchTimerId=window.setInterval(this.dispatchFetchFailSilent,this.config.dispatchInterval))},e.prototype.stopDispatchTimer=function(){document.removeEventListener("visibilitychange",this.config.useBeacon?this.dispatchBeaconFailSilent:this.dispatchFetchFailSilent),document.removeEventListener("pagehide",this.config.useBeacon?this.dispatchBeaconFailSilent:this.dispatchFetchFailSilent),this.dispatchTimerId&&(window.clearInterval(this.dispatchTimerId),this.dispatchTimerId=void 0)},e.prototype.doRequest=function(){return this.enabled&&this.eventCache.hasEvents()},e.prototype.createRequest=function(){return{BatchId:(0,a.v4)(),AppMonitorDetails:this.eventCache.getAppMonitorDetails(),UserDetails:this.eventCache.getUserDetails(),RumEvents:this.eventCache.getEventBatch()}},e}()},95607:function(e,t,n){"use strict";n.d(t,{EnhancedAuthentication:function(){return c}});var r=n(10504),i=n(44358),o=n(35622),a=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},s=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},c=function(){function e(e){var t=this;this.ChainAnonymousCredentialsProvider=function(){return a(t,void 0,void 0,(function(){return s(this,(function(e){return[2,this.AnonymousCredentialsProvider().catch(this.AnonymousStorageCredentialsProvider).catch(this.AnonymousCognitoCredentialsProvider)]}))}))},this.AnonymousCredentialsProvider=function(){return a(t,void 0,void 0,(function(){var e=this;return s(this,(function(t){return[2,new Promise((function(t,n){if(e.renewCredentials())return n();t(e.credentials)}))]}))}))},this.AnonymousStorageCredentialsProvider=function(){return a(t,void 0,void 0,(function(){var e=this;return s(this,(function(t){return[2,new Promise((function(t,n){var r;try{r=JSON.parse(localStorage.getItem(o.CRED_KEY))}catch(e){n()}if(r.expiration=new Date(r.expiration),e.credentials=r,e.renewCredentials())return n();e.credentials=r,t(r)}))]}))}))},this.AnonymousCognitoCredentialsProvider=function(){return a(t,void 0,void 0,(function(){var e=this;return s(this,(function(t){return[2,(0,r.fromCognitoIdentityPool)({client:this.cognitoIdentityClient,identityPoolId:this.config.identityPoolId})().then((function(t){e.credentials=t;try{localStorage.setItem(o.CRED_KEY,JSON.stringify(t))}catch(e){}return t}))]}))}))};var n=e.identityPoolId.split(":")[0];this.config=e,this.cognitoIdentityClient=new r.CognitoIdentityClient({fetchRequestHandler:new i.FetchHttpHandler,region:n})}return e.prototype.renewCredentials=function(){if(!this.credentials||!this.credentials.expiration)return!0;var e=new Date(this.credentials.expiration.getTime()-o.CRED_RENEW_MS);return new Date>e},e}()},76216:function(e,t,n){"use strict";n.d(t,{FetchHttpHandler:function(){return a}});var r=n(99391),i=n(94073),o=n(66386),a=function(){function e(e){var t=void 0===e?{}:e,n=t.fetchFunction,r=t.requestTimeout;this.requestTimeout=r,this.fetchFunction=n}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=(void 0===t?{}:t).abortSignal,a=this.requestTimeout;if(null==n?void 0:n.aborted){var s=new Error("Request aborted");return s.name="AbortError",Promise.reject(s)}var c=e.path;if(e.query){var u=(0,i.buildQueryString)(e.query);u&&(c+="?".concat(u))}var l=e.port,d=e.method,h="".concat(e.protocol,"//").concat(e.hostname).concat(l?":".concat(l):"").concat(c),f={body:"GET"===d||"HEAD"===d?void 0:e.body,headers:new Headers(e.headers),method:d};"undefined"!=typeof AbortController&&(f.signal=n);var p=new Request(h,f),g=[this.fetchFunction.apply(window,[p]).then((function(e){for(var t=e.headers,n={},i=0,o=t.entries();i<o.length;i++){var a=o[i];n[a[0]]=a[1]}return void 0!==e.body?{response:new r.HttpResponse({headers:n,statusCode:e.status,body:e.body})}:e.blob().then((function(t){return{response:new r.HttpResponse({headers:n,statusCode:e.status,body:t})}}))})),(0,o.requestTimeout)(a)];return n&&g.push(new Promise((function(e,t){n.onabort=function(){var e=new Error("Request aborted");e.name="AbortError",t(e)}}))),Promise.race(g)},e}()},74699:function(e,t,n){"use strict";n.d(t,{RetryHttpHandler:function(){return o}});var r=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=function(){function e(e,t,n){void 0===n&&(n=function(e){return 2e3*e}),this.isStatusCode2xx=function(e){return e>=200&&e<300},this.handler=e,this.retries=t,this.backoff=n}return e.prototype.handle=function(e){return r(this,void 0,void 0,(function(){var t,n,r;return i(this,(function(i){switch(i.label){case 0:t=this.retries,i.label=1;case 1:i.label=2;case 2:return i.trys.push([2,4,,6]),[4,this.handler.handle(e)];case 3:if(n=i.sent(),this.isStatusCode2xx(n.response.statusCode))return[2,n];throw new Error("".concat(n.response.statusCode));case 4:if(r=i.sent(),!t)throw r;return t--,[4,this.sleep(this.backoff(this.retries-t))];case 5:return i.sent(),[3,6];case 6:return[3,1];case 7:return[2]}}))}))},e.prototype.sleep=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){return[2,new Promise((function(t){return setTimeout(t,e)}))]}))}))},e}()},78778:function(e,t,n){"use strict";n.d(t,{StsClient:function(){return a}});var r=n(99391),i=n(13880),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},a=function(e){var t=this;this.assumeRoleWithWebIdentity=function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(t,void 0,void 0,(function(){var t,n,a,s,c,u;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),t=o(o({},e),{Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),n=new URLSearchParams(Object.entries(t)).toString(),a=new r.HttpRequest({method:"POST",headers:{"content-type":"application/x-www-form-urlencoded",host:this.hostname},protocol:"https:",hostname:this.hostname,body:n}),[4,this.fetchRequestHandler.handle(a)];case 1:return s=l.sent().response,[4,(0,i.responseToString)(s)];case 2:return[2,{accessKeyId:(c=l.sent()).split("<AccessKeyId>")[1].split("</AccessKeyId>")[0],secretAccessKey:c.split("<SecretAccessKey>")[1].split("</SecretAccessKey>")[0],sessionToken:c.split("<SessionToken>")[1].split("</SessionToken>")[0],expiration:new Date(c.split("<Expiration>")[1].split("</Expiration>")[0])}];case 3:throw u=l.sent(),new Error("CWR: Failed to retrieve credentials from STS: ".concat(u));case 4:return[2]}}))}))},this.hostname="sts.".concat(e.region,".amazonaws.com"),this.fetchRequestHandler=e.fetchRequestHandler}},66386:function(e,t,n){"use strict";n.d(t,{requestTimeout:function(){return r}});var r=function(e){return void 0===e&&(e=0),new Promise((function(t,n){e&&setTimeout((function(){var t=new Error("Request did not complete within ".concat(e," ms"));t.name="TimeoutError",n(t)}),e)}))}},13880:function(e,t,n){"use strict";n.d(t,{responseToJson:function(){return o},responseToString:function(){return a}});var r=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=function(e){return r(void 0,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return[4,e.body.getReader().read()];case 1:return t=n.sent().value,[2,JSON.parse(String.fromCharCode.apply(null,t))]}}))}))},a=function(e){return r(void 0,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return[4,e.body.getReader().read()];case 1:return t=n.sent().value,[2,String.fromCharCode.apply(null,t)]}}))}))}},13946:function(e,t,n){"use strict";n.d(t,{XhrError:function(){return o}});var r,i=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t){var n=e.call(this,t)||this;return n.name="XMLHttpRequest error",n}return i(t,e),t}(Error)},57772:function(e,t,n){"use strict";n.d(t,{EventCache:function(){return s}});var r=n(47367),i=n(31404),o=n(4743),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)},s=function(){function e(e,t){var n=this;this.events=[],this.recordPageView=function(e){n.isCurrentUrlAllowed()&&n.pageManager.recordPageView(e)},this.recordEvent=function(e,t){if(n.enabled&&n.isCurrentUrlAllowed()){var r=n.sessionManager.getSession();n.sessionManager.incrementSessionEventCount(),n.canRecord(r)&&n.addRecordToCache(e,t)}},this.getSession=function(){if(n.isCurrentUrlAllowed())return n.sessionManager.getSession()},this.recordSessionInitEvent=function(e,t,r){n.enabled&&(n.sessionManager.incrementSessionEventCount(),n.canRecord(e)&&n.addRecordToCache(t,r))},this.canRecord=function(e){return e.record&&(e.eventCount<=n.config.sessionEventLimit||n.config.sessionEventLimit<=0)},this.addRecordToCache=function(e,t){if(n.enabled){n.events.length===n.config.eventCacheSize&&n.events.shift();var r=a(a(a({},n.sessionManager.getAttributes()),n.pageManager.getAttributes()),{version:"1.0.0","aws:client":n.installationMethod,"aws:clientVersion":"1.13.7"});n.events.push({details:JSON.stringify(t),id:(0,i.v4)(),metadata:JSON.stringify(r),timestamp:new Date,type:e})}},this.appMonitorDetails=e,this.config=t,this.enabled=!0,this.pageManager=new o.PageManager(t,this.recordEvent),this.sessionManager=new r.SessionManager(e,t,this.recordSessionInitEvent,this.pageManager),this.installationMethod=t.client}return e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.hasEvents=function(){return 0!==this.events.length},e.prototype.getEventBatch=function(){var e=[];return 0===this.events.length||(this.events.length<=this.config.batchLimit?(e=this.events,this.events=[]):e=this.events.splice(0,this.config.batchLimit)),e},e.prototype.getAppMonitorDetails=function(){return this.appMonitorDetails},e.prototype.getUserDetails=function(){return{userId:this.sessionManager.getUserId(),sessionId:this.sessionManager.getSession().sessionId}},e.prototype.addSessionAttributes=function(e){this.sessionManager.addSessionAttributes(e)},e.prototype.isCurrentUrlAllowed=function(){var e=document.location.toString(),t=this.config.pagesToExclude.some((function(t){return t.test(e)}));return this.config.pagesToInclude.some((function(t){return t.test(e)}))&&!t},e}()},41042:function(e,t,n){"use strict";n.d(t,{AwsRum:function(){return r.Orchestration}});var r=n(91215)},91215:function(e,t,n){"use strict";n.d(t,{Orchestration:function(){return T},PageIdFormatEnum:function(){return i}});var r,i,o=n(73105),a=n(95607),s=n(66303),c=n(8384),u=n(6903),l=n(57772),d=n(7877),h=n(95428),f=n(20298),p=n(85463),g=n(75682),m=n(78295),v=n(43428),y=n(35622),b=function(){return b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},b.apply(this,arguments)},w=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},E="us-west-2",S="https://dataplane.rum.".concat(E,".amazonaws.com");!function(e){e.Errors="errors",e.Performance="performance",e.Interaction="interaction",e.Http="http"}(r||(r={})),function(e){e.Path="PATH",e.Hash="HASH",e.PathAndHash="PATH_AND_HASH"}(i||(i={}));var T=function(){function e(e,t,n,r){void 0===r&&(r={});var o=r.cookieAttributes,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(r,["cookieAttributes"]);void 0===n&&(n="us-west-2");var s=b(b({},{unique:!1,domain:window.location.hostname,path:"/",sameSite:"Strict",secure:!0}),o);this.config=b(b({fetchFunction:fetch},function(e){return{allowCookies:!1,batchLimit:100,client:y.INSTALL_MODULE,cookieAttributes:e,disableAutoPageView:!1,dispatchInterval:5e3,enableRumClient:!0,enableXRay:!1,endpoint:S,endpointUrl:new URL(S),eventCacheSize:200,eventPluginsToLoad:[],pageIdFormat:i.Path,pagesToExclude:[],pagesToInclude:[/.*/],signing:!0,recordResourceUrl:!0,retries:2,routeChangeComplete:100,routeChangeTimeout:1e4,sessionAttributes:{},sessionEventLimit:200,sessionLengthSeconds:1800,sessionSampleRate:1,telemetries:[],useBeacon:!0,userIdRetentionDays:30}}(s)),a),this.config.endpoint=this.getDataPlaneEndpoint(n,a),this.config.endpointUrl=new URL(this.config.endpoint),this.eventCache=this.initEventCache(e,t),this.dispatchManager=this.initDispatch(n),this.pluginManager=this.initPluginManager(e,t),this.config.enableRumClient?this.enable():this.disable()}return e.prototype.setAwsCredentials=function(e){this.dispatchManager.setAwsCredentials(e)},e.prototype.addSessionAttributes=function(e){this.eventCache.addSessionAttributes(e)},e.prototype.addPlugin=function(e){this.pluginManager.addPlugin(e)},e.prototype.dispatch=function(){this.dispatchManager.dispatchFetch()},e.prototype.dispatchBeacon=function(){this.dispatchManager.dispatchBeacon()},e.prototype.enable=function(){this.eventCache.enable(),this.pluginManager.enable(),this.dispatchManager.enable()},e.prototype.disable=function(){this.dispatchManager.disable(),this.pluginManager.disable(),this.eventCache.disable()},e.prototype.allowCookies=function(e){this.config.allowCookies=e},e.prototype.recordPageView=function(e){this.eventCache.recordPageView(e)},e.prototype.recordError=function(e){this.pluginManager.record(u.JS_ERROR_EVENT_PLUGIN_ID,e)},e.prototype.registerDomEvents=function(e){this.pluginManager.updatePlugin(c.DOM_EVENT_PLUGIN_ID,e)},e.prototype.recordEvent=function(e,t){this.eventCache.recordEvent(e,t)},e.prototype.initEventCache=function(e,t){return new l.EventCache({id:e,version:t},this.config)},e.prototype.initDispatch=function(e){var t=new d.Dispatch(e,this.config.endpointUrl,this.eventCache,this.config);return this.config.identityPoolId&&this.config.guestRoleArn?t.setAwsCredentials(new o.Authentication(this.config).ChainAnonymousCredentialsProvider):this.config.identityPoolId&&t.setAwsCredentials(new a.EnhancedAuthentication(this.config).ChainAnonymousCredentialsProvider),t},e.prototype.initPluginManager=function(e,t){var n=this.constructBuiltinPlugins(),r=w(w([],n,!0),this.config.eventPluginsToLoad,!0),i={applicationId:e,applicationVersion:t,config:this.config,record:this.eventCache.recordEvent,recordPageView:this.eventCache.recordPageView,getSession:this.eventCache.getSession},o=new s.PluginManager(i);return this.config.disableAutoPageView||o.addPlugin(new v.PageViewPlugin),r.forEach((function(e){o.addPlugin(e)})),o},e.prototype.constructBuiltinPlugins=function(){var e=[],t=this.telemetryFunctor();return this.config.telemetries.forEach((function(n){"string"==typeof n&&t[n.toLowerCase()]?e=w(w([],e,!0),t[n.toLowerCase()]({}),!0):Array.isArray(n)&&t[n[0].toLowerCase()]&&(e=w(w([],e,!0),t[n[0].toLowerCase()](n[1]),!0))})),e},e.prototype.getDataPlaneEndpoint=function(e,t){return t.endpoint?t.endpoint:S.replace(E,e)},e.prototype.telemetryFunctor=function(){var e;return(e={})[r.Errors]=function(e){return[new u.JsErrorPlugin(e)]},e[r.Performance]=function(e){return[new h.NavigationPlugin,new f.ResourcePlugin(e),new p.WebVitalsPlugin]},e[r.Interaction]=function(e){return[new c.DomEventPlugin(e)]},e[r.Http]=function(e){return[new g.XhrPlugin(e),new m.FetchPlugin(e)]},e},e}()},62658:function(e,t,n){"use strict";n.d(t,{InternalPlugin:function(){return i}});var r=n(21869),i=function(){function e(t){this.enabled=!0,this.pluginId=e.generatePluginId(t)}return e.generatePluginId=function(t){return"".concat(e.idPrefix,".").concat(t)},e.prototype.load=function(e){var t;this.context=e,null===(t=this.onload)||void 0===t||t.call(this)},e.prototype.getPluginId=function(){return this.pluginId},e.idPrefix=r.RUM_AWS_PREFIX,e}()},21062:function(e,t,n){"use strict";n.d(t,{MonkeyPatched:function(){return s}});var r,i=n(76372),o=n(62658),a=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enable=t.patch.bind(t,!0),t.disable=t.patch.bind(t,!1),t.enabled=!1,t}return a(t,e),t.prototype.patchAll=function(){for(var e=i.wrap.bind(i),t=0,n=this.patches;t<n.length;t++){var r=n[t];e(r.nodule,r.name,r.wrapper())}},t.prototype.unpatchAll=function(){for(var e=i.unwrap.bind(i),t=0,n=this.patches;t<n.length;t++){var r=n[t];e(r.nodule,r.name)}},t.prototype.patch=function(e){void 0===e&&(e=!0),this.enabled!==e&&(this.enabled=e,e?this.patchAll():this.unpatchAll())},t}(o.InternalPlugin)},66303:function(e,t,n){"use strict";n.d(t,{PluginManager:function(){return i}});var r=n(62658),i=function(){function e(e){this.context=e,this.plugins=new Map}return e.prototype.addPlugin=function(e){var t=e.getPluginId();if(this.hasPlugin(t))throw new Error('Plugin "'.concat(t,'" already defined in the PluginManager'));this.plugins.set(t,e),e.load(this.context)},e.prototype.updatePlugin=function(e,t){var n,r=this.getPlugin(e);null===(n=null==r?void 0:r.update)||void 0===n||n.call(r,t)},e.prototype.enable=function(){this.plugins.forEach((function(e){return e.enable()}))},e.prototype.disable=function(){this.plugins.forEach((function(e){return e.disable()}))},e.prototype.hasPlugin=function(e){return Boolean(this.getPlugin(e))},e.prototype.record=function(e,t){var n=this.getPlugin(e);if(!((null==n?void 0:n.record)instanceof Function))throw new Error("AWS RUM Client record: Invalid plugin ID");n.record(t)},e.prototype.getPlugin=function(e){var t;return null!==(t=this.plugins.get(e))&&void 0!==t?t:this.plugins.get(r.InternalPlugin.generatePluginId(e))},e}()},8384:function(e,t,n){"use strict";n.d(t,{DOM_EVENT_PLUGIN_ID:function(){return c},DomEventPlugin:function(){return l}});var r,i=n(62658),o=n(21869),a=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},c="dom-event",u={interactionId:function(){return""},enableMutationObserver:!1,events:[]},l=function(e){function t(t){var n=e.call(this,c)||this;return n.enabled=!1,n.eventListenerMap=new Map,n.config=s(s({},u),t),n}return a(t,e),t.getElementInfo=function(e){var t={name:"UNKNOWN"};return e.target instanceof Node&&(t.name=e.target.nodeName),e.target instanceof Element&&e.target.id&&(t.id=e.target.id),t},t.prototype.enable=function(){var e=this;"complete"===document.readyState?this.enabled||(this.addListeners(),this.config.enableMutationObserver&&this.observeDOMMutation(),this.enabled=!0):window.addEventListener("load",(function(){return e.enable()}))},t.prototype.disable=function(){this.enabled&&(this.removeListeners(),this.observer&&this.observer.disconnect(),this.enabled=!1)},t.prototype.update=function(e){var t=this;e.forEach((function(e){t.addEventHandler(e),t.config.events.push(e)}))},t.prototype.onload=function(){this.enable()},t.prototype.removeListeners=function(){var e=this;this.config.events.forEach((function(t){return e.removeEventHandler(t)}))},t.prototype.addListeners=function(){var e=this;this.config.events.forEach((function(t){return e.addEventHandler(t)}))},t.prototype.getEventListener=function(e){var n=this;return function(r){var i,a=t.getElementInfo(r),c=n.config.interactionId(r),u=s(s(s({version:"1.1.0",event:r.type,element:a.name},a.id?{elementId:a.id}:{}),c?{interactionId:c}:{}),e?{cssLocator:e}:{});(null===(i=n.context)||void 0===i?void 0:i.record)&&n.context.record(o.DOM_EVENT_TYPE,u)}},t.prototype.addEventHandler=function(e){var t=e.event,n=this.getEventListener(e.cssLocator),r=[],i=this.eventListenerMap.has(e)?this.eventListenerMap.get(e):[];if(e.cssLocator)document.querySelectorAll(e.cssLocator).forEach((function(e){r.push(e)}));else if(e.elementId){var o=document.getElementById(e.elementId);o&&r.push(o)}else e.element&&r.push(e.element);r.forEach((function(e){e.addEventListener(t,n),i.push({element:e,eventListener:n})})),this.eventListenerMap.set(e,i)},t.prototype.removeEventHandler=function(e){var t=this.eventListenerMap.get(e);t&&(t.forEach((function(t){var n=t.element,r=t.eventListener;n.removeEventListener(e.event,r)})),this.eventListenerMap.delete(e))},t.prototype.observeDOMMutation=function(){var e=this;this.observer=new MutationObserver((function(){e.removeListeners(),e.addListeners()})),this.observer.observe(document,{childList:!0,subtree:!0})},t}(i.InternalPlugin)},78295:function(e,t,n){"use strict";n.d(t,{FetchPlugin:function(){return l}});var r,i=n(21062),o=n(3263),a=n(21869),s=n(8349),c=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},u.apply(this,arguments)},l=function(e){function t(t){var n=e.call(this,"fetch")||this;return n.isTracingEnabled=function(){return n.context.config.enableXRay},n.isSessionRecorded=function(){var e;return(null===(e=n.context.getSession())||void 0===e?void 0:e.record)||!1},n.beginTrace=function(e,t,r){var i=(0,o.epochTime)(),a=(0,o.createXRayTraceEventHttp)(e,t,!0),s=(0,o.createXRayTraceEvent)(n.config.logicalServiceName,i),c=(0,o.createXRaySubsegment)((0,o.requestInfoToHostname)(e),i,a);return s.subsegments.push(c),n.config.addXRayTraceIdHeader&&n.addXRayTraceIdHeader(e,t,r,s),s},n.addXRayTraceIdHeader=function(e,t,n,r){if(e.headers)return(0,o.addAmznTraceIdHeaderToHeaders)(e.headers,r.trace_id,r.subsegments[0].id);t||(t={},[].push.call(n,t)),(0,o.addAmznTraceIdHeaderToInit)(t,r.trace_id,r.subsegments[0].id)},n.endTrace=function(e,t,r){if(e){var i=(0,o.epochTime)();if(e.subsegments[0].end_time=i,e.end_time=i,t){e.subsegments[0].http.response={status:t.status},(0,o.is429)(t.status)?(e.subsegments[0].throttle=!0,e.throttle=!0):(0,o.is4xx)(t.status)?(e.subsegments[0].error=!0,e.error=!0):(0,o.is5xx)(t.status)&&(e.subsegments[0].fault=!0,e.fault=!0);var c=t.headers.get("Content-Length"),u=c?parseInt(c,10):NaN;isNaN(u)||(e.subsegments[0].http.response.content_length=u)}r&&(e.fault=!0,e.subsegments[0].fault=!0,r instanceof Object?n.appendErrorCauseFromObject(e.subsegments[0],r):(0,s.isErrorPrimitive)(r)&&n.appendErrorCauseFromPrimitive(e.subsegments[0],r.toString())),n.context.record(a.XRAY_TRACE_EVENT_TYPE,e)}},n.createHttpEvent=function(e,t){var n=e;return{version:"1.0.0",request:{url:(0,o.resourceToUrlString)(e),method:(null==t?void 0:t.method)?t.method:n.method?n.method:"GET"}}},n.recordHttpEventWithResponse=function(e,t){!n.config.recordAllRequests&&t.ok||(e.response={status:t.status,statusText:t.statusText},n.context.record(a.HTTP_EVENT_TYPE,e))},n.recordHttpEventWithError=function(e,t){e.error=(0,s.errorEventToJsErrorEvent)({type:"error",error:t},n.config.stackTraceLength),n.context.record(a.HTTP_EVENT_TYPE,e)},n.fetch=function(e,t,r,i,a){var s,c=n.createHttpEvent(i,a);return(0,o.isUrlAllowed)((0,o.resourceToUrlString)(i),n.config)?(n.isTracingEnabled()&&n.isSessionRecorded()&&(s=n.beginTrace(i,a,r)),e.apply(t,r).then((function(e){return n.endTrace(s,e,void 0),n.recordHttpEventWithResponse(c,e),e})).catch((function(e){throw n.endTrace(s,void 0,e),n.recordHttpEventWithError(c,e),e}))):e.apply(t,r)},n.fetchWrapper=function(){var e=n;return function(t){return function(n,r){return e.fetch(t,this,arguments,n,r)}}},n.config=u(u({},o.defaultConfig),t),n}return c(t,e),Object.defineProperty(t.prototype,"patches",{get:function(){return[{nodule:window,name:"fetch",wrapper:this.fetchWrapper}]},enumerable:!1,configurable:!0}),t.prototype.onload=function(){this.enable()},t.prototype.appendErrorCauseFromPrimitive=function(e,t){e.cause={exceptions:[{type:t}]}},t.prototype.appendErrorCauseFromObject=function(e,t){e.cause={exceptions:[{type:t.name,message:t.message}]}},t}(i.MonkeyPatched)},6903:function(e,t,n){"use strict";n.d(t,{JS_ERROR_EVENT_PLUGIN_ID:function(){return u},JsErrorPlugin:function(){return d}});var r,i=n(62658),o=n(21869),a=n(8349),s=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},c.apply(this,arguments)},u="js-error",l={stackTraceLength:1e3,ignore:function(){return!1}},d=function(e){function t(t){var n=e.call(this,u)||this;return n.eventHandler=function(e){n.config.ignore(e)||n.recordJsErrorEvent(e)},n.promiseRejectEventHandler=function(e){n.config.ignore(e)||n.recordJsErrorEvent({type:e.type,error:e.reason})},n.config=c(c({},l),t),n}return s(t,e),t.prototype.enable=function(){this.enabled||(this.addEventHandler(),this.enabled=!0)},t.prototype.disable=function(){this.enabled&&(this.removeEventHandler(),this.enabled=!1)},t.prototype.record=function(e){e instanceof ErrorEvent?this.recordJsErrorEvent(e):this.recordJsErrorEvent({type:"error",error:e})},t.prototype.onload=function(){this.addEventHandler()},t.prototype.recordJsErrorEvent=function(e){var t;null===(t=this.context)||void 0===t||t.record(o.JS_ERROR_EVENT_TYPE,(0,a.errorEventToJsErrorEvent)(e,this.config.stackTraceLength))},t.prototype.addEventHandler=function(){window.addEventListener("error",this.eventHandler),window.addEventListener("unhandledrejection",this.promiseRejectEventHandler)},t.prototype.removeEventHandler=function(){window.removeEventListener("error",this.eventHandler),window.removeEventListener("unhandledrejection",this.promiseRejectEventHandler)},t}(i.InternalPlugin)},95428:function(e,t,n){"use strict";n.d(t,{NavigationPlugin:function(){return u}});var r,i=n(62658),o=n(21869),a=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s="navigation",c="load",u=function(e){function t(){var t=e.call(this,"navigation")||this;return t.eventListener=function(){0===performance.getEntriesByType(s).length?t.performanceNavigationEventHandlerTimingLevel1():new PerformanceObserver((function(e){e.getEntries().forEach((function(e){e.entryType===s&&t.performanceNavigationEventHandlerTimingLevel2(e)}))})).observe({entryTypes:[s]})},t.performanceNavigationEventHandlerTimingLevel1=function(){setTimeout((function(){var e,n=performance.timing,r=n.navigationStart,i={version:"1.0.0",initiatorType:"navigation",startTime:0,unloadEventStart:n.unloadEventStart>0?n.unloadEventStart-r:0,promptForUnload:n.unloadEventEnd-n.unloadEventStart,redirectStart:n.redirectStart>0?n.redirectStart-r:0,redirectTime:n.redirectEnd-n.redirectStart,fetchStart:n.fetchStart>0?n.fetchStart-r:0,domainLookupStart:n.domainLookupStart>0?n.domainLookupStart-r:0,dns:n.domainLookupEnd-n.domainLookupStart,connectStart:n.connectStart>0?n.connectStart-r:0,connect:n.connectEnd-n.connectStart,secureConnectionStart:n.secureConnectionStart>0?n.secureConnectionStart-r:0,tlsTime:n.secureConnectionStart>0?n.connectEnd-n.secureConnectionStart:0,requestStart:n.requestStart>0?n.requestStart-r:0,timeToFirstByte:n.responseStart-n.requestStart,responseStart:n.responseStart>0?n.responseStart-r:0,responseTime:n.responseStart>0?n.responseEnd-n.responseStart:0,domInteractive:n.domInteractive>0?n.domInteractive-r:0,domContentLoadedEventStart:n.domContentLoadedEventStart>0?n.domContentLoadedEventStart-r:0,domContentLoaded:n.domContentLoadedEventEnd-n.domContentLoadedEventStart,domComplete:n.domComplete>0?n.domComplete-r:0,domProcessingTime:n.loadEventStart-n.responseEnd,loadEventStart:n.loadEventStart>0?n.loadEventStart-r:0,loadEventTime:n.loadEventEnd-n.loadEventStart,duration:n.loadEventEnd-n.navigationStart,navigationTimingLevel:1};(null===(e=t.context)||void 0===e?void 0:e.record)&&t.context.record(o.PERFORMANCE_NAVIGATION_EVENT_TYPE,i)}),0)},t.performanceNavigationEventHandlerTimingLevel2=function(e){var n,r={version:"1.0.0",initiatorType:e.initiatorType,navigationType:e.type,startTime:e.startTime,unloadEventStart:e.unloadEventStart,promptForUnload:e.unloadEventEnd-e.unloadEventStart,redirectCount:e.redirectCount,redirectStart:e.redirectStart,redirectTime:e.redirectEnd-e.redirectStart,workerStart:e.workerStart,workerTime:e.workerStart>0?e.fetchStart-e.workerStart:0,fetchStart:e.fetchStart,domainLookupStart:e.domainLookupStart,dns:e.domainLookupEnd-e.domainLookupStart,nextHopProtocol:e.nextHopProtocol,connectStart:e.connectStart,connect:e.connectEnd-e.connectStart,secureConnectionStart:e.secureConnectionStart,tlsTime:e.secureConnectionStart>0?e.connectEnd-e.secureConnectionStart:0,requestStart:e.requestStart,timeToFirstByte:e.responseStart-e.requestStart,responseStart:e.responseStart,responseTime:e.responseStart>0?e.responseEnd-e.responseStart:0,domInteractive:e.domInteractive,domContentLoadedEventStart:e.domContentLoadedEventStart,domContentLoaded:e.domContentLoadedEventEnd-e.domContentLoadedEventStart,domComplete:e.domComplete,domProcessingTime:e.loadEventStart-e.responseEnd,loadEventStart:e.loadEventStart,loadEventTime:e.loadEventEnd-e.loadEventStart,duration:e.duration,headerSize:e.transferSize-e.encodedBodySize,transferSize:e.transferSize,compressionRatio:e.encodedBodySize>0?e.decodedBodySize/e.encodedBodySize:0,navigationTimingLevel:2};(null===(n=t.context)||void 0===n?void 0:n.record)&&t.context.record(o.PERFORMANCE_NAVIGATION_EVENT_TYPE,r)},t}return a(t,e),t.prototype.enable=function(){this.enabled||(this.enabled=!0,window.addEventListener(c,this.eventListener))},t.prototype.disable=function(){this.enabled&&(this.enabled=!1,this.eventListener&&window.removeEventListener(c,this.eventListener))},t.prototype.hasTheWindowLoadEventFired=function(){if(window.performance&&window.performance.getEntriesByType(s).length){var e=window.performance.getEntriesByType(s)[0];return Boolean(e.loadEventEnd)}return!1},t.prototype.onload=function(){if(this.enabled)if(this.hasTheWindowLoadEventFired()){var e=window.performance.getEntriesByType(s)[0];this.performanceNavigationEventHandlerTimingLevel2(e)}else window.addEventListener(c,this.eventListener)},t}(i.InternalPlugin)},43428:function(e,t,n){"use strict";n.d(t,{PageViewPlugin:function(){return s}});var r,i=n(91215),o=n(21062),a=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e){function t(){var t=e.call(this,"page-view")||this;return t.pushState=function(){var e=t;return function(t){return function(n,r,i){var o=t.apply(this,arguments);return e.recordPageView(),o}}},t.replaceState=function(){var e=t;return function(t){return function(n,r,i){var o=t.apply(this,arguments);return e.recordPageView(),o}}},t.popstateListener=function(e){t.recordPageView()},t.recordPageView=function(){t.context.recordPageView(t.createIdForCurrentPage())},t.enable(),t}return a(t,e),t.prototype.onload=function(){this.addListener(),this.recordPageView()},Object.defineProperty(t.prototype,"patches",{get:function(){return[{nodule:History.prototype,name:"pushState",wrapper:this.pushState},{nodule:History.prototype,name:"replaceState",wrapper:this.replaceState}]},enumerable:!1,configurable:!0}),t.prototype.addListener=function(){window.addEventListener("popstate",this.popstateListener)},t.prototype.createIdForCurrentPage=function(){var e=window.location.pathname,t=window.location.hash;switch(this.context.config.pageIdFormat){case i.PageIdFormatEnum.PathAndHash:return e&&t?e+t:e||t||"";case i.PageIdFormatEnum.Hash:return t||"";case i.PageIdFormatEnum.Path:default:return e||""}},t}(o.MonkeyPatched)},20298:function(e,t,n){"use strict";n.d(t,{ResourcePlugin:function(){return h}});var r,i=n(62658),o=n(7333),a=n(21869),s=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},c.apply(this,arguments)},u="resource",l="load",d={eventLimit:10,recordAllTypes:[o.ResourceType.DOCUMENT,o.ResourceType.SCRIPT],sampleTypes:[o.ResourceType.STYLESHEET,o.ResourceType.IMAGE,o.ResourceType.FONT,o.ResourceType.OTHER]},h=function(e){function t(t){var n=e.call(this,"resource")||this;return n.resourceEventListener=function(e){var t=[],r=[],i=0,a=new PerformanceObserver((function(e){e.getEntries().filter((function(e){return e.entryType===u})).forEach((function(e){var i=(0,o.getResourceFileType)(e.name);n.config.recordAllTypes.includes(i)?t.push(e):n.config.sampleTypes.includes(i)&&r.push(e)}))}));a.observe({entryTypes:[u]});var s=performance.getEntriesByType(u);for(void 0!==s&&s.length>0&&s.forEach((function(e){var i=(0,o.getResourceFileType)(e.name);n.config.recordAllTypes.includes(i)?t.push(e):n.config.sampleTypes.includes(i)&&r.push(e)})),(0,o.shuffle)(t);t.length>0&&i<n.config.eventLimit;)n.recordResourceEvent(t.pop()),i++;for((0,o.shuffle)(r);r.length>0&&i<n.config.eventLimit;)n.recordResourceEvent(r.pop()),i++},n.recordResourceEvent=function(e){var t,r=new URL(e.name);if((r.host!==n.context.config.endpointUrl.host||!/.*\/application\/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}\/events/.test(r.pathname))&&(null===(t=n.context)||void 0===t?void 0:t.record)){var i={version:"1.0.0",initiatorType:e.initiatorType,duration:e.duration,fileType:(0,o.getResourceFileType)(e.name),transferSize:e.transferSize};n.context.config.recordResourceUrl&&(i.targetUrl=e.name),n.context.record(a.PERFORMANCE_RESOURCE_EVENT_TYPE,i)}},n.config=c(c({},d),t),n}return s(t,e),t.prototype.enable=function(){this.enabled||(this.enabled=!0,window.addEventListener(l,this.resourceEventListener))},t.prototype.disable=function(){this.enabled&&(this.enabled=!1,this.resourceEventListener&&window.removeEventListener(l,this.resourceEventListener))},t.prototype.onload=function(){window.addEventListener(l,this.resourceEventListener)},t}(i.InternalPlugin)},85463:function(e,t,n){"use strict";n.d(t,{WebVitalsPlugin:function(){return c}});var r,i=n(62658),o=n(38085),a=n(21869),s=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(){return e.call(this,"web-vitals")||this}return s(t,e),t.prototype.enable=function(){},t.prototype.disable=function(){},t.prototype.configure=function(e){},t.prototype.getWebVitalData=function(e,t){var n,r={version:"1.0.0",value:e.value};null===(n=this.context)||void 0===n||n.record(t,r)},t.prototype.onload=function(){var e=this;(0,o.onLCP)((function(t){return e.getWebVitalData(t,a.LCP_EVENT_TYPE)})),(0,o.onFID)((function(t){return e.getWebVitalData(t,a.FID_EVENT_TYPE)})),(0,o.onCLS)((function(t){return e.getWebVitalData(t,a.CLS_EVENT_TYPE)}))},t}(i.InternalPlugin)},75682:function(e,t,n){"use strict";n.d(t,{XhrPlugin:function(){return d}});var r,i=n(21062),o=n(3263),a=n(13946),s=n(21869),c=n(8349),u=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},l.apply(this,arguments)},d=function(e){function t(t){var n=e.call(this,"xhr")||this;return n.addXRayTraceIdHeader=function(){return n.config.addXRayTraceIdHeader},n.isTracingEnabled=function(){return n.context.config.enableXRay},n.isSessionRecorded=function(){var e;return(null===(e=n.context.getSession())||void 0===e?void 0:e.record)||!1},n.handleXhrLoadEvent=function(e){var t=e.target,r=n.xhrMap.get(t);if(r){var i=(0,o.epochTime)();r.trace.end_time=i,r.trace.subsegments[0].end_time=i,r.trace.subsegments[0].http.response={status:t.status},(0,o.is429)(t.status)?(r.trace.subsegments[0].throttle=!0,r.trace.throttle=!0):(0,o.is4xx)(t.status)?(r.trace.subsegments[0].error=!0,r.trace.error=!0):(0,o.is5xx)(t.status)&&(r.trace.subsegments[0].fault=!0,r.trace.fault=!0);var a=t.getResponseHeader("Content-Length"),s=a?parseInt(a,10):NaN;isNaN(s)||(r.trace.subsegments[0].http.response.content_length=s),n.recordTraceEvent(r.trace),n.recordHttpEventWithResponse(r,t)}},n.handleXhrErrorEvent=function(e){var t=e.target,r=n.xhrMap.get(t),i=t.statusText?t.status.toString()+": "+t.statusText:t.status.toString();if(r){var s=(0,o.epochTime)();r.trace.fault=!0,r.trace.end_time=s,r.trace.subsegments[0].end_time=s,r.trace.subsegments[0].fault=!0,r.trace.subsegments[0].cause={exceptions:[{type:"XMLHttpRequest error",message:i}]},n.recordTraceEvent(r.trace),n.recordHttpEventWithError(r,new a.XhrError(i))}},n.handleXhrAbortEvent=function(e){var t=e.target,r=n.xhrMap.get(t);n.handleXhrDetailsOnError(r,"XMLHttpRequest abort")},n.handleXhrTimeoutEvent=function(e){var t=e.target,r=n.xhrMap.get(t);n.handleXhrDetailsOnError(r,"XMLHttpRequest timeout")},n.initializeTrace=function(e){var t=(0,o.epochTime)();e.trace=(0,o.createXRayTraceEvent)(n.config.logicalServiceName,t),e.trace.subsegments.push((0,o.createXRaySubsegment)((0,o.requestInfoToHostname)(e.url),t,{request:{method:e.method,url:e.url,traced:!0}}))},n.sendWrapper=function(){var e=n;return function(t){return function(){var n=e.xhrMap.get(this);return n&&(this.addEventListener("load",e.handleXhrLoadEvent),this.addEventListener("error",e.handleXhrErrorEvent),this.addEventListener("abort",e.handleXhrAbortEvent),this.addEventListener("timeout",e.handleXhrTimeoutEvent),e.initializeTrace(n),e.isTracingEnabled()&&e.addXRayTraceIdHeader()&&e.isSessionRecorded()&&this.setRequestHeader(o.X_AMZN_TRACE_ID,(0,o.getAmznTraceIdHeaderValue)(n.trace.trace_id,n.trace.subsegments[0].id))),t.apply(this,arguments)}}},n.openWrapper=function(){var e=n;return function(t){return function(n,r,i){return(0,o.isUrlAllowed)(r,e.config)&&e.xhrMap.set(this,{url:r,method:n,async:i}),t.apply(this,arguments)}}},n.config=l(l({},o.defaultConfig),t),n.xhrMap=new Map,n}return u(t,e),t.prototype.onload=function(){this.enable()},Object.defineProperty(t.prototype,"patches",{get:function(){return[{nodule:XMLHttpRequest.prototype,name:"send",wrapper:this.sendWrapper},{nodule:XMLHttpRequest.prototype,name:"open",wrapper:this.openWrapper}]},enumerable:!1,configurable:!0}),t.prototype.handleXhrDetailsOnError=function(e,t){if(e){var n=(0,o.epochTime)();e.trace.end_time=n,e.trace.subsegments[0].end_time=n,e.trace.subsegments[0].error=!0,e.trace.subsegments[0].cause={exceptions:[{type:t}]},this.recordTraceEvent(e.trace),this.recordHttpEventWithError(e,t)}},t.prototype.statusOk=function(e){return e>=200&&e<300},t.prototype.recordHttpEventWithResponse=function(e,t){!this.config.recordAllRequests&&this.statusOk(t.status)||this.context.record(s.HTTP_EVENT_TYPE,{version:"1.0.0",request:{method:e.method,url:e.url},response:{status:t.status,statusText:t.statusText}})},t.prototype.recordHttpEventWithError=function(e,t){var n={version:"1.0.0",request:{method:e.method,url:e.url}};n.error=(0,c.errorEventToJsErrorEvent)({type:"error",error:t},this.config.stackTraceLength),this.context.record(s.HTTP_EVENT_TYPE,n)},t.prototype.recordTraceEvent=function(e){this.isTracingEnabled()&&this.isSessionRecorded()&&this.context.record(s.XRAY_TRACE_EVENT_TYPE,e)},t}(i.MonkeyPatched)},21869:function(e,t,n){"use strict";n.d(t,{CLS_EVENT_TYPE:function(){return u},DOM_EVENT_TYPE:function(){return h},FID_EVENT_TYPE:function(){return c},HTTP_EVENT_TYPE:function(){return o},JS_ERROR_EVENT_TYPE:function(){return f},LCP_EVENT_TYPE:function(){return s},PAGE_VIEW_EVENT_TYPE:function(){return p},PERFORMANCE_NAVIGATION_EVENT_TYPE:function(){return l},PERFORMANCE_RESOURCE_EVENT_TYPE:function(){return d},RUM_AWS_PREFIX:function(){return i},XRAY_TRACE_EVENT_TYPE:function(){return a}});var r="com.amazon.rum",i="com.amazonaws.rum",o="".concat(r,".http_event"),a="".concat(r,".xray_trace_event"),s="".concat(r,".largest_contentful_paint_event"),c="".concat(r,".first_input_delay_event"),u="".concat(r,".cumulative_layout_shift_event"),l="".concat(r,".performance_navigation_event"),d="".concat(r,".performance_resource_event"),h="".concat(r,".dom_event"),f="".concat(r,".js_error_event"),p="".concat(r,".page_view_event");"".concat(r,".session_start_event")},3263:function(e,t,n){"use strict";n.d(t,{X_AMZN_TRACE_ID:function(){return a},addAmznTraceIdHeaderToHeaders:function(){return y},addAmznTraceIdHeaderToInit:function(){return v},createXRaySubsegment:function(){return g},createXRayTraceEvent:function(){return p},createXRayTraceEventHttp:function(){return f},defaultConfig:function(){return s},epochTime:function(){return h},getAmznTraceIdHeaderValue:function(){return b},is429:function(){return l},is4xx:function(){return c},is5xx:function(){return u},isUrlAllowed:function(){return d},requestInfoToHostname:function(){return m},resourceToUrlString:function(){return w}});for(var r=n(85873),i=[],o=0;o<256;o++)i[o]=(o+256).toString(16).substr(1);var a="X-Amzn-Trace-Id",s={logicalServiceName:"rum.aws.amazon.com",urlsToInclude:[/.*/],urlsToExclude:[/cognito\-identity\.([^\.]*\.)?amazonaws\.com/,/sts\.([^\.]*\.)?amazonaws\.com/],stackTraceLength:200,recordAllRequests:!1,addXRayTraceIdHeader:!1},c=function(e){return 4===Math.floor(e/100)},u=function(e){return 5===Math.floor(e/100)},l=function(e){return 429===e},d=function(e,t){var n=t.urlsToInclude.some((function(t){return t.test(e)})),r=t.urlsToExclude.some((function(t){return t.test(e)}));return n&&!r},h=function(){return Date.now()/1e3},f=function(e,t,n){var r={request:{}};return r.request.method=(null==t?void 0:t.method)?t.method:"GET",r.request.traced=n,r.request.url=w(e),r},p=function(e,t,n){var r={version:"1.0.0",name:e,origin:"AWS::RUM::AppMonitor",id:S(),start_time:t,trace_id:E(),end_time:void 0,subsegments:[],in_progress:!1};return n&&(r.http=n),r},g=function(e,t,n){var r={id:S(),name:e,start_time:t,end_time:void 0,in_progress:!1,namespace:e.endsWith("amazonaws.com")?"aws":"remote"};return n&&(r.http=n),r},m=function(e){try{return e.hostname?e.hostname:e.url?new URL(e.url).hostname:new URL(e.toString()).hostname}catch(e){return window.location.hostname}},v=function(e,t,n){e.headers||(e.headers={}),e.headers[a]=b(t,n)},y=function(e,t,n){e.set(a,b(t,n))},b=function(e,t){return"Root="+e+";Parent="+t+";Sampled=1"},w=function(e){return e.url?e.url:e.toString()},E=function(){return"1-".concat(T(),"-").concat(_())},S=function(){var e=new Uint8Array(8);return(0,r.getRandomValues)(e),P(e)},T=function(){return Math.floor(Date.now()/1e3).toString(16)},_=function(){var e=new Uint8Array(12);return(0,r.getRandomValues)(e),P(e)},P=function(e){for(var t="",n=0;n<e.length;n++)t+=i[e[n]];return t}},8349:function(e,t,n){"use strict";n.d(t,{errorEventToJsErrorEvent:function(){return i},isErrorPrimitive:function(){return r}});var r=function(e){return e!==Object(e)&&null!=e},i=function(e,t){var n=function(e){var t={version:"1.0.0",type:"undefined",message:"undefined"};return void 0!==e.type&&(t.type=e.type),void 0!==e.message&&(t.message=e.message),void 0!==e.filename&&(t.filename=e.filename),void 0!==e.lineno&&(t.lineno=e.lineno),void 0!==e.colno&&(t.colno=e.colno),t}(e),i=e.error;return function(e){var t=typeof e;return("object"===t||"function"===t)&&!!e}(i)?function(e,t,n){t.name&&(e.type=t.name),t.message&&(e.message=t.message),t.fileName&&(e.filename=t.fileName),t.lineNumber&&(e.lineno=t.lineNumber),t.columnNumber&&(e.colno=t.columnNumber),n&&t.stack&&(e.stack=t.stack.length>n?t.stack.substring(0,n)+"...":t.stack)}(n,i,t):r(i)&&function(e,t){"unhandledrejection"!==e.type&&(e.type=t.toString()),e.message=t.toString()}(n,i),n}},4743:function(e,t,n){"use strict";n.d(t,{PageManager:function(){return a}});var r=n(46525),i=n(21869),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},a=function(){function e(e,t){this.TIMEOUT=1e3,this.config=e,this.record=t,this.page=void 0,this.resumed=!1,this.recordInteraction=!1,this.virtualPageLoadTimer=new r.VirtualPageLoadTimer(this,e,t)}return e.prototype.getPage=function(){return this.page},e.prototype.getAttributes=function(){return this.attributes},e.prototype.resumeSession=function(e){this.recordInteraction=!0,e&&(this.page=e,this.resumed=!0)},e.prototype.recordPageView=function(e){var t;if(t="string"==typeof e?e:e.pageId,this.useCookies()&&(this.recordInteraction=!0),this.page){if(this.page.pageId===t)return this.resumed?void this.collectAttributes(this.page,"object"==typeof e?e:void 0):void 0;this.createNextPage(this.page,t)}else this.createLandingPage(t);this.collectAttributes(this.page,"object"==typeof e?e:void 0),this.recordPageViewEvent(this.page)},e.prototype.createNextPage=function(e,t){var n=Date.now(),r=this.virtualPageLoadTimer.latestInteractionTime;!this.resumed&&n-r<=this.TIMEOUT&&(n=r,this.virtualPageLoadTimer.startTiming()),this.timeOnParentPage=n-e.start,this.resumed=!1,this.page={pageId:t,parentPageId:e.pageId,interaction:e.interaction+1,referrer:document.referrer,referrerDomain:this.getDomainFromReferrer(),start:n}},e.prototype.createLandingPage=function(e){this.page={pageId:e,interaction:0,referrer:document.referrer,referrerDomain:this.getDomainFromReferrer(),start:Date.now()}},e.prototype.collectAttributes=function(e,t){this.attributes={title:document.title,pageId:e.pageId},this.recordInteraction&&(this.attributes.interaction=e.interaction,void 0!==e.parentPageId&&(this.attributes.parentPageId=e.parentPageId)),(null==t?void 0:t.pageTags)&&(this.attributes.pageTags=t.pageTags),(null==t?void 0:t.pageAttributes)&&(this.attributes=o(o({},t.pageAttributes),this.attributes))},e.prototype.createPageViewEvent=function(e){var t={version:"1.0.0",pageId:e.pageId};return this.recordInteraction&&(t.interaction=e.interaction,t.pageInteractionId=e.pageId+"-"+e.interaction,void 0!==e.parentPageId&&(t.parentPageInteractionId=e.parentPageId+"-"+(e.interaction-1),t.timeOnParentPage=this.timeOnParentPage),t.referrer=document.referrer,t.referrerDomain=this.getDomainFromReferrer()),t},e.prototype.recordPageViewEvent=function(e){this.record(i.PAGE_VIEW_EVENT_TYPE,this.createPageViewEvent(e))},e.prototype.useCookies=function(){return navigator.cookieEnabled&&this.config.allowCookies},e.prototype.getDomainFromReferrer=function(){try{return new URL(document.referrer).hostname}catch(e){return"localhost"===document.referrer?document.referrer:""}},e}()},47367:function(e,t,n){"use strict";n.d(t,{SessionManager:function(){return l}});var r=n(37762),i=n(31404),o=n(42238),a=n(35622),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},c="00000000-0000-0000-0000-000000000000",u="unknown",l=function(){function e(e,t,n,r){this.appMonitorDetails=e,this.config=t,this.record=n,this.pageManager=r,this.session={sessionId:c,record:this.sample(),eventCount:0},this.initializeUser(),this.collectAttributes(),this.addSessionAttributes(this.config.sessionAttributes),this.getSessionFromCookie()}return e.prototype.getSession=function(){return(this.session.sessionId===c||this.session.sessionId!==c&&new Date>this.sessionExpiry)&&this.createSession(),this.session},e.prototype.getAttributes=function(){return this.attributes},e.prototype.addSessionAttributes=function(e){this.attributes=s(s({},e),this.attributes)},e.prototype.getUserId=function(){return this.useCookies()?this.userId:c},e.prototype.incrementSessionEventCount=function(){this.session.eventCount++,this.renewSession()},e.prototype.initializeUser=function(){var e="";this.userExpiry=new Date,this.userExpiry.setDate(this.userExpiry.getDate()+this.config.userIdRetentionDays),this.config.userIdRetentionDays<=0?this.userId="00000000-0000-0000-0000-000000000000":this.useCookies()?(e=this.getUserIdCookie(),this.userId=e||(0,i.v4)(),this.createOrRenewUserCookie(e,this.userExpiry)):this.userId=(0,i.v4)()},e.prototype.createOrRenewSessionCookie=function(e,t){btoa&&(0,r.storeCookie)(this.sessionCookieName(),btoa(JSON.stringify(e)),this.config.cookieAttributes,void 0,t)},e.prototype.createOrRenewUserCookie=function(e,t){(0,r.storeCookie)(a.USER_COOKIE_NAME,e,this.config.cookieAttributes,void 0,t)},e.prototype.getUserIdCookie=function(){return(0,r.getCookie)(a.USER_COOKIE_NAME)},e.prototype.getSessionFromCookie=function(){if(this.useCookies()){var e=(0,r.getCookie)(this.sessionCookieName());if(e&&atob)try{this.session=JSON.parse(atob(e)),this.pageManager.resumeSession(this.session.page)}catch(e){}}},e.prototype.storeSessionAsCookie=function(){this.useCookies()&&this.config.userIdRetentionDays>0&&this.createOrRenewUserCookie(this.userId,this.userExpiry),this.useCookies()&&this.createOrRenewSessionCookie(this.session,this.sessionExpiry)},e.prototype.createSession=function(){this.session={sessionId:(0,i.v4)(),record:this.sample(),eventCount:0},this.session.page=this.pageManager.getPage(),this.sessionExpiry=new Date((new Date).getTime()+1e3*this.config.sessionLengthSeconds),this.storeSessionAsCookie(),this.record(this.session,"com.amazon.rum.session_start_event",{version:"1.0.0"})},e.prototype.renewSession=function(){this.sessionExpiry=new Date((new Date).getTime()+1e3*this.config.sessionLengthSeconds),this.session.page=this.pageManager.getPage(),this.storeSessionAsCookie()},e.prototype.collectAttributes=function(){var e=new o.UAParser(navigator.userAgent).getResult();this.attributes={browserLanguage:navigator.language,browserName:e.browser.name?e.browser.name:u,browserVersion:e.browser.version?e.browser.version:u,osName:e.os.name?e.os.name:u,osVersion:e.os.version?e.os.version:u,deviceType:e.device.type?e.device.type:"desktop",platformType:"web",domain:window.location.hostname}},e.prototype.useCookies=function(){return navigator.cookieEnabled&&this.config.allowCookies},e.prototype.sample=function(){return Math.random()<this.config.sessionSampleRate},e.prototype.sessionCookieName=function(){return this.config.cookieAttributes.unique?"".concat(a.SESSION_COOKIE_NAME,"_").concat(this.appMonitorDetails.id):a.SESSION_COOKIE_NAME},e}()},46525:function(e,t,n){"use strict";n.d(t,{VirtualPageLoadTimer:function(){return s}});var r,i=n(21869),o=n(21062),a=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e){function t(t,n,r){var i=e.call(this,"virtual-page-load-timer")||this;return i.sendWrapper=function(){var e=i;return function(t){return function(){return e.recordXhr(this),this.addEventListener("loadend",e.endTracking),t.apply(this,arguments)}}},i.endTracking=function(e){var t=Date.now(),n=e.target;n.removeEventListener("loadend",i.endTracking),i.removeXhr(n,t)},i.fetch=function(e,t,n){return e.apply(t,n).catch((function(e){throw e})).finally(i.decrementFetchCounter)},i.fetchWrapper=function(){var e=i;return function(t){return function(n,r){return e.fetchCounter+=1,e.fetch(t,this,arguments)}}},i.decrementFetchCounter=function(){i.isPageLoaded||(i.latestEndTime=Date.now()),i.fetchCounter-=1},i.checkLoadStatus=function(){0===i.ongoingRequests.size&&0===i.fetchCounter&&(clearInterval(i.periodicCheckerId),clearTimeout(i.timeoutCheckerId),i.domMutationObserver.disconnect(),i.recordRouteChangeNavigationEvent(i.pageManager.getPage()),i.periodicCheckerId=void 0,i.timeoutCheckerId=void 0,i.isPageLoaded=!0)},i.declareTimeout=function(){clearInterval(i.periodicCheckerId),i.periodicCheckerId=void 0,i.timeoutCheckerId=void 0,i.domMutationObserver.disconnect(),i.isPageLoaded=!0},i.resetInterval=function(){i.latestEndTime=Date.now(),clearInterval(i.periodicCheckerId),i.periodicCheckerId=setInterval(i.checkLoadStatus,i.config.routeChangeComplete)},i.moveItemsFromBuffer=function(e){i.ongoingRequests.add(e)},i.updateLatestInteractionTime=function(e){i.latestInteractionTime=Date.now()},i.periodicCheckerId=void 0,i.timeoutCheckerId=void 0,i.domMutationObserver=new MutationObserver(i.resetInterval),i.ongoingRequests=new Set,i.requestBuffer=new Set,i.fetchCounter=0,i.isPageLoaded=!0,i.latestEndTime=0,i.latestInteractionTime=0,i.config=n,i.pageManager=t,i.record=r,i.enable(),document.addEventListener("mousedown",i.updateLatestInteractionTime),document.addEventListener("keydown",i.updateLatestInteractionTime),i}return a(t,e),Object.defineProperty(t.prototype,"patches",{get:function(){return[{nodule:XMLHttpRequest.prototype,name:"send",wrapper:this.sendWrapper},{nodule:window,name:"fetch",wrapper:this.fetchWrapper}]},enumerable:!1,configurable:!0}),t.prototype.startTiming=function(){this.latestEndTime=Date.now(),this.periodicCheckerId&&clearInterval(this.periodicCheckerId),this.timeoutCheckerId&&clearTimeout(this.timeoutCheckerId),this.domMutationObserver.disconnect(),this.periodicCheckerId=setInterval(this.checkLoadStatus,this.config.routeChangeComplete),this.timeoutCheckerId=setTimeout(this.declareTimeout,this.config.routeChangeTimeout),this.domMutationObserver.observe(document,{subtree:!0,childList:!0,attributes:!1,characterData:!1}),this.isPageLoaded=!1,this.requestBuffer.forEach(this.moveItemsFromBuffer),this.requestBuffer.clear()},t.prototype.recordXhr=function(e){this.pageManager.getPage()&&!1===this.isPageLoaded?this.ongoingRequests.add(e):this.requestBuffer.add(e)},t.prototype.removeXhr=function(e,t){this.pageManager.getPage()&&this.ongoingRequests.has(e)?(this.ongoingRequests.delete(e),this.latestEndTime=t):this.requestBuffer.has(e)&&this.requestBuffer.delete(e)},t.prototype.recordRouteChangeNavigationEvent=function(e){var t={version:"1.0.0",initiatorType:"route_change",navigationType:"navigate",startTime:e.start,duration:this.latestEndTime-e.start};this.record&&this.record(i.PERFORMANCE_NAVIGATION_EVENT_TYPE,t)},t}(o.MonkeyPatched)},7333:function(e,t,n){"use strict";var r;n.d(t,{ResourceType:function(){return r},getResourceFileType:function(){return a},shuffle:function(){return o}}),function(e){e.OTHER="other",e.STYLESHEET="stylesheet",e.DOCUMENT="document",e.SCRIPT="script",e.IMAGE="image",e.FONT="font"}(r||(r={}));var i=[{name:r.STYLESHEET,list:["css","less"]},{name:r.DOCUMENT,list:["htm","html","ts","doc","docx","pdf","xls","xlsx"]},{name:r.SCRIPT,list:["js"]},{name:r.IMAGE,list:["ai","bmp","gif","ico","jpeg","jpg","png","ps","psd","svg","tif","tiff"]},{name:r.FONT,list:["fnt","fon","otf","ttf","woff"]}],o=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}},a=function(e){var t=e.substring(e.lastIndexOf("/")+1),n=t.substring(t.lastIndexOf(".")+1).split(/[?#]/)[0],o=r.OTHER;return i.forEach((function(e){e.list.indexOf(n)>-1&&(o=e.name)})),o}},35622:function(e,t,n){"use strict";n.d(t,{CRED_KEY:function(){return r},CRED_RENEW_MS:function(){return a},INSTALL_MODULE:function(){return s},SESSION_COOKIE_NAME:function(){return i},USER_COOKIE_NAME:function(){return o}});var r="cwr_c",i="cwr_s",o="cwr_u",a=3e4,s="arw-module"},37762:function(e,t,n){"use strict";n.d(t,{getCookie:function(){return o},storeCookie:function(){return r}});var r=function(e,t,n,r,o){var a=e+"=";a+=t||"",void 0!==o?a+="; Expires=".concat(o.toUTCString()):void 0!==r&&(a+="; Expires=".concat(i(r).toUTCString())),a+="; Domain=".concat(n.domain),a+="; Path=".concat(n.path),a+="; SameSite=".concat(n.sameSite),a+=n.secure?"; Secure":"",document.cookie=a},i=function(e){return new Date((new Date).getTime()+1e3*e)},o=function(e){for(var t=0,n=document.cookie.split("; ");t<n.length;t++){var r=n[t].split("=");if(r[0]===e)return r[1]}return""}},85873:function(e,t,n){"use strict";n.d(t,{getRandomValues:function(){return r}});var r=function(e){if(crypto)return crypto.getRandomValues(e);if(msCrypto)return msCrypto.getRandomValues(e);throw new Error("No crypto library found.")}},31404:function(e,t,n){"use strict";n.d(t,{v4:function(){return r.default}});var r=n(68168)},63675:function(e,t){"use strict";const n="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);t.default={randomUUID:n}},21985:function(e,t,n){"use strict";let r;n.d(t,{default:function(){return o}});const i=new Uint8Array(16);function o(){if(!r&&(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}},34794:function(e,t,n){"use strict";n.d(t,{unsafeStringify:function(){return i}});const r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));function i(e,t=0){return(r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]).toLowerCase()}},68168:function(e,t,n){"use strict";var r=n(63675),i=n(21985),o=n(34794);t.default=function(e,t,n){if(r.default.randomUUID&&!t&&!e)return r.default.randomUUID();const a=(e=e||{}).random||(e.rng||i.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=a[e];return t}return(0,o.unsafeStringify)(a)}},9669:function(e,t,n){e.exports=n(51609)},55448:function(e,t,n){"use strict";var r=n(64867),i=n(36026),o=n(4372),a=n(15327),s=n(94097),c=n(84109),u=n(67985),l=n(85061);e.exports=function(e){return new Promise((function(t,n){var d=e.data,h=e.headers,f=e.responseType;r.isFormData(d)&&delete h["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var g=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(g+":"+m)}var v=s(e.baseURL,e.url);function y(){if(p){var r="getAllResponseHeaders"in p?c(p.getAllResponseHeaders()):null,o={data:f&&"text"!==f&&"json"!==f?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p};i(t,n,o),p=null}}if(p.open(e.method.toUpperCase(),a(v,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,"onloadend"in p?p.onloadend=y:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(y)},p.onabort=function(){p&&(n(l("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){n(l("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var b=(e.withCredentials||u(v))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;b&&(h[e.xsrfHeaderName]=b)}"setRequestHeader"in p&&r.forEach(h,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete h[t]:p.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),f&&"json"!==f&&(p.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),n(e),p=null)})),d||(d=null),p.send(d)}))}},51609:function(e,t,n){"use strict";var r=n(64867),i=n(91849),o=n(30321),a=n(47185);function s(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var c=s(n(45655));c.Axios=o,c.create=function(e){return s(a(c.defaults,e))},c.Cancel=n(65263),c.CancelToken=n(14972),c.isCancel=n(26502),c.all=function(e){return Promise.all(e)},c.spread=n(8713),c.isAxiosError=n(16268),e.exports=c,e.exports.default=c},65263:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},14972:function(e,t,n){"use strict";var r=n(65263);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},26502:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},30321:function(e,t,n){"use strict";var r=n(64867),i=n(15327),o=n(80782),a=n(13572),s=n(47185),c=n(54875),u=c.validators;function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&c.assertOptions(t,{silentJSONParsing:u.transitional(u.boolean,"1.0.0"),forcedJSONParsing:u.transitional(u.boolean,"1.0.0"),clarifyTimeoutError:u.transitional(u.boolean,"1.0.0")},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var i,o=[];if(this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)})),!r){var l=[a,void 0];for(Array.prototype.unshift.apply(l,n),l=l.concat(o),i=Promise.resolve(e);l.length;)i=i.then(l.shift(),l.shift());return i}for(var d=e;n.length;){var h=n.shift(),f=n.shift();try{d=h(d)}catch(e){f(e);break}}try{i=a(d)}catch(e){return Promise.reject(e)}for(;o.length;)i=i.then(o.shift(),o.shift());return i},l.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=l},80782:function(e,t,n){"use strict";var r=n(64867);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},94097:function(e,t,n){"use strict";var r=n(91793),i=n(7303);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},85061:function(e,t,n){"use strict";var r=n(80481);e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},13572:function(e,t,n){"use strict";var r=n(64867),i=n(18527),o=n(26502),a=n(45655);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(s(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},80481:function(e){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},47185:function(e,t,n){"use strict";var r=n(64867);e.exports=function(e,t){t=t||{};var n={},i=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function c(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function u(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=c(void 0,e[i])):n[i]=c(e[i],t[i])}r.forEach(i,(function(e){r.isUndefined(t[e])||(n[e]=c(void 0,t[e]))})),r.forEach(o,u),r.forEach(a,(function(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=c(void 0,e[i])):n[i]=c(void 0,t[i])})),r.forEach(s,(function(r){r in t?n[r]=c(e[r],t[r]):r in e&&(n[r]=c(void 0,e[r]))}));var l=i.concat(o).concat(a).concat(s),d=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===l.indexOf(e)}));return r.forEach(d,u),n}},36026:function(e,t,n){"use strict";var r=n(85061);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},18527:function(e,t,n){"use strict";var r=n(64867),i=n(45655);e.exports=function(e,t,n){var o=this||i;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},45655:function(e,t,n){"use strict";var r=n(64867),i=n(16016),o=n(80481),a={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c,u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(c=n(55448)),c),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(s(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(0,JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,a=!n&&"json"===this.responseType;if(a||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(a){if("SyntaxError"===e.name)throw o(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){u.headers[e]=r.merge(a)})),e.exports=u},91849:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},15327:function(e,t,n){"use strict";var r=n(64867);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},7303:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:function(e,t,n){"use strict";var r=n(64867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},91793:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},16268:function(e){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},67985:function(e,t,n){"use strict";var r=n(64867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},16016:function(e,t,n){"use strict";var r=n(64867);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},84109:function(e,t,n){"use strict";var r=n(64867),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},8713:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},54875:function(e,t,n){"use strict";var r=n(88593),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={},a=r.version.split(".");function s(e,t){for(var n=t?t.split("."):a,r=e.split("."),i=0;i<3;i++){if(n[i]>r[i])return!0;if(n[i]<r[i])return!1}return!1}i.transitional=function(e,t,n){var i=t&&s(t);function a(e,t){return"[Axios v"+r.version+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new Error(a(r," has been removed in "+t));return i&&!o[r]&&(o[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={isOlderVersion:s,assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],a=t[o];if(a){var s=e[o],c=void 0===s||a(s,o,e);if(!0!==c)throw new TypeError("option "+o+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:i}},64867:function(e,t,n){"use strict";var r=n(91849),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===i.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:c,isUndefined:a,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:u,isStream:function(e){return s(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function e(){var t={};function n(n,r){c(t[r])&&c(n)?t[r]=e(t[r],n):c(n)?t[r]=e({},n):o(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return t},extend:function(e,t,n){return l(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},58255:function(e,t,n){"use strict";n.d(t,{default:function(){return i}});var r=n(11132);function i(e,t){e.classList?e.classList.add(t):(0,r.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}},11132:function(e,t,n){"use strict";function r(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}n.d(t,{default:function(){return r}})},74277:function(e,t,n){"use strict";function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function i(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=r(e.className,t):e.setAttribute("class",r(e.className&&e.className.baseVal||"",t))}n.d(t,{default:function(){return i}})},79180:function(e,t,n){var r,i,o;!function(a,s){"use strict";i=[n(59829)],void 0===(o="function"==typeof(r=function(e){var t=/(^|@)\S+:\d+/,n=/^\s*at .*(\S+:\d+|\(native\))/m,r=/^(eval@)?(\[native code])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(n))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(t){return t.stack.split("\n").filter((function(e){return!!e.match(n)}),this).map((function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),r=n.match(/ (\(.+\)$)/);n=r?n.replace(r[0],""):n;var i=this.extractLocation(r?r[1]:n),o=r&&n||void 0,a=["eval","<anonymous>"].indexOf(i[0])>-1?void 0:i[0];return new e({functionName:o,fileName:a,lineNumber:i[1],columnNumber:i[2],source:t})}),this)},parseFFOrSafari:function(t){return t.stack.split("\n").filter((function(e){return!e.match(r)}),this).map((function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e({functionName:t});var n=/((.*".+"[^@]*)?[^@]*)(?:@)/,r=t.match(n),i=r&&r[1]?r[1]:void 0,o=this.extractLocation(t.replace(n,""));return new e({functionName:i,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:t})}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=t.message.split("\n"),i=[],o=2,a=r.length;o<a;o+=2){var s=n.exec(r[o]);s&&i.push(new e({fileName:s[2],lineNumber:s[1],source:r[o]}))}return i},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=t.stacktrace.split("\n"),i=[],o=0,a=r.length;o<a;o+=2){var s=n.exec(r[o]);s&&i.push(new e({functionName:s[3]||void 0,fileName:s[2],lineNumber:s[1],source:r[o]}))}return i},parseOpera11:function(n){return n.stack.split("\n").filter((function(e){return!!e.match(t)&&!e.match(/^Error created at/)}),this).map((function(t){var n,r=t.split("@"),i=this.extractLocation(r.pop()),o=r.shift()||"",a=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;o.match(/\(([^)]*)\)/)&&(n=o.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var s=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e({functionName:a,args:s,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:t})}),this)}}})?r.apply(t,i):r)||(e.exports=o)}()},8679:function(e,t,n){"use strict";var r=n(59864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function c(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var u=Object.defineProperty,l=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var a=l(n);d&&(a=a.concat(d(n)));for(var s=c(t),g=c(n),m=0;m<a.length;++m){var v=a[m];if(!(o[v]||r&&r[v]||g&&g[v]||s&&s[v])){var y=h(n,v);try{u(t,v,y)}catch(e){}}}}return t}},26071:function(e,t,n){"use strict";n.d(t,{default:function(){return T}});var r=n(94037),i=n(51297),o=[],a=o.forEach,s=o.slice;function c(e){return a.call(s.call(arguments,1),(function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])})),e}var u=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,l=function(e,t,n){var r=n||{};r.path=r.path||"/";var i=encodeURIComponent(t),o="".concat(e,"=").concat(i);if(r.maxAge>0){var a=r.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(a))}if(r.domain){if(!u.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain=".concat(r.domain)}if(r.path){if(!u.test(r.path))throw new TypeError("option path is invalid");o+="; Path=".concat(r.path)}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");o+="; Expires=".concat(r.expires.toUTCString())}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o},d={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&"undefined"!=typeof document){var n=function(e){for(var t="".concat(e,"="),n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null}(e.lookupCookie);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&"undefined"!=typeof document&&function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+60*n*1e3)),r&&(i.domain=r),document.cookie=l(e,encodeURIComponent(t),i)}(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},h={name:"querystring",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));for(var r=n.substring(1).split("&"),i=0;i<r.length;i++){var o=r[i].indexOf("=");o>0&&r[i].substring(0,o)===e.lookupQuerystring&&(t=r[i].substring(o+1))}}return t}},f=null,p=function(){if(null!==f)return f;try{f="undefined"!==window&&null!==window.localStorage;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(e){f=!1}return f},g={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&p()){var n=window.localStorage.getItem(e.lookupLocalStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&p()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},m=null,v=function(){if(null!==m)return m;try{m="undefined"!==window&&null!==window.sessionStorage;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(e){m=!1}return m},y={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&v()){var n=window.sessionStorage.getItem(e.lookupSessionStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&v()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},b={name:"navigator",lookup:function(e){var t=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)t.push(navigator.languages[n]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},w={name:"htmlTag",lookup:function(e){var t,n=e.htmlTag||("undefined"!=typeof document?document.documentElement:null);return n&&"function"==typeof n.getAttribute&&(t=n.getAttribute("lang")),t}},E={name:"path",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if("number"==typeof e.lookupFromPathIndex){if("string"!=typeof n[e.lookupFromPathIndex])return;t=n[e.lookupFromPathIndex].replace("/","")}else t=n[0].replace("/","")}return t}},S={name:"subdomain",lookup:function(e){var t="number"==typeof e.lookupFromSubdomainIndex?e.lookupFromSubdomainIndex+1:1,n="undefined"!=typeof window&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[t]}},T=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.default)(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}return(0,i.default)(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=c(t,this.options||{},{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(d),this.addDetector(h),this.addDetector(g),this.addDetector(y),this.addDetector(b),this.addDetector(w),this.addDetector(E),this.addDetector(S)}},{key:"addDetector",value:function(e){this.detectors[e.name]=e}},{key:"detect",value:function(e){var t=this;e||(e=this.options.order);var n=[];return e.forEach((function(e){if(t.detectors[e]){var r=t.detectors[e].lookup(t.options);r&&"string"==typeof r&&(r=[r]),r&&(n=n.concat(r))}})),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}},{key:"cacheUserLanguage",value:function(e,t){var n=this;t||(t=this.options.caches),t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach((function(t){n.detectors[t]&&n.detectors[t].cacheUserLanguage(e,n.options)})))}}]),e}();T.type="languageDetector"},89935:function(e,t,n){"use strict";var r=n(464),i=n(95260),o=n.n(i);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="i18nFormat",this.mem={},this.init(null,t)}var t,n;return t=e,(n=[{key:"init",value:function(e,t){var n=this,i=e&&e.options&&e.options.i18nFormat||{};if(this.options=r.defaults(i,t,this.options||{},{memoize:!0,memoizeFallback:!1,bindI18n:"",bindI18nStore:"",parseErrorHandler:function(e,t,n,r){return n}}),this.formats=this.options.formats,e){var a=this.options,s=a.bindI18n,c=a.bindI18nStore,u=a.memoize;e.IntlMessageFormat=o(),e.ICU=this,u&&(s&&e.on(s,(function(){return n.clearCache()})),c&&e.store.on(c,(function(){return n.clearCache()})))}}},{key:"addUserDefinedFormats",value:function(e){this.formats=this.formats?s(s({},this.formats),e):e}},{key:"parse",value:function(e,t,n,i,a,s){var c,u=s&&s.resolved&&s.resolved.res,l=this.options.memoize&&"".concat(n,".").concat(i,".").concat(a.replace(/\./g,"###"));this.options.memoize&&(c=r.getPath(this.mem,l));try{return c||(c=new(o())(e,n,this.formats,{ignoreTag:!0}),this.options.memoize&&(this.options.memoizeFallback||!s||u)&&r.setPath(this.mem,l,c)),c.format(t)}catch(n){return this.options.parseErrorHandler(n,a,e,t)}}},{key:"addLookupKeys",value:function(e,t,n,r,i){return e}},{key:"clearCache",value:function(){this.mem={}}}])&&u(t.prototype,n),e}();l.type="i18nFormat",t.default=l},464:function(e,t,n){"use strict";function r(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(i())return{};var a=r(o.shift());!e[a]&&n&&(e[a]=new n),e=e[a]}return i()?{}:{obj:e,k:r(o.shift())}}function i(e,t,n){var i=r(e,t,Object);i.obj[i.k]=n}function o(e,t){var n=r(e,t),i=n.obj,o=n.k;if(i)return i[o]}n.d(t,{defaults:function(){return u},getPath:function(){return o},setPath:function(){return i}});var a=[],s=a.forEach,c=a.slice;function u(e){return s.call(c.call(arguments,1),(function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])})),e}},66337:function(){!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var e=window.document,t=[],n=null,r=null;o.prototype.THROTTLE_TIMEOUT=100,o.prototype.POLL_INTERVAL=null,o.prototype.USE_MUTATION_OBSERVER=!0,o._setupCrossOriginUpdater=function(){return n||(n=function(e,n){r=e&&n?l(e,n):{top:0,bottom:0,left:0,right:0,width:0,height:0},t.forEach((function(e){e._checkForIntersections()}))}),n},o._resetCrossOriginUpdater=function(){n=null,r=null},o.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(e.ownerDocument),this._checkForIntersections()}},o.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._unmonitorIntersections(e.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},o.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},o.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},o.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]}))},o.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},o.prototype._monitorIntersections=function(t){var n=t.defaultView;if(n&&-1==this._monitoringDocuments.indexOf(t)){var r=this._checkForIntersections,i=null,o=null;if(this.POLL_INTERVAL?i=n.setInterval(r,this.POLL_INTERVAL):(a(n,"resize",r,!0),a(t,"scroll",r,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in n&&(o=new n.MutationObserver(r)).observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push((function(){var e=t.defaultView;e&&(i&&e.clearInterval(i),s(e,"resize",r,!0)),s(t,"scroll",r,!0),o&&o.disconnect()})),t!=(this.root&&this.root.ownerDocument||e)){var c=f(t);c&&this._monitorIntersections(c.ownerDocument)}}},o.prototype._unmonitorIntersections=function(t){var n=this._monitoringDocuments.indexOf(t);if(-1!=n){var r=this.root&&this.root.ownerDocument||e,i=this._observationTargets.some((function(e){var n=e.element.ownerDocument;if(n==t)return!0;for(;n&&n!=r;){var i=f(n);if((n=i&&i.ownerDocument)==t)return!0}return!1}));if(!i){var o=this._monitoringUnsubscribes[n];if(this._monitoringDocuments.splice(n,1),this._monitoringUnsubscribes.splice(n,1),o(),t!=r){var a=f(t);a&&this._unmonitorIntersections(a.ownerDocument)}}}},o.prototype._unmonitorAllIntersections=function(){var e=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var t=0;t<e.length;t++)e[t]()},o.prototype._checkForIntersections=function(){if(this.root||!n||r){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(r){var o=r.element,a=c(o),s=this._rootContainsTarget(o),u=r.entry,l=e&&s&&this._computeTargetAndRootIntersection(o,a,t),d=r.entry=new i({time:window.performance&&performance.now&&performance.now(),target:o,boundingClientRect:a,rootBounds:n&&!this.root?null:t,intersectionRect:l});u?e&&s?this._hasCrossedThreshold(u,d)&&this._queuedEntries.push(d):u&&u.isIntersecting&&this._queuedEntries.push(d):this._queuedEntries.push(d)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},o.prototype._computeTargetAndRootIntersection=function(t,i,o){if("none"!=window.getComputedStyle(t).display){for(var a,s,u,d,f,p,g,m,v=i,y=h(t),b=!1;!b&&y;){var w=null,E=1==y.nodeType?window.getComputedStyle(y):{};if("none"==E.display)return null;if(y==this.root||9==y.nodeType)if(b=!0,y==this.root||y==e)n&&!this.root?!r||0==r.width&&0==r.height?(y=null,w=null,v=null):w=r:w=o;else{var S=h(y),T=S&&c(S),_=S&&this._computeTargetAndRootIntersection(S,T,o);T&&_?(y=S,w=l(T,_)):(y=null,v=null)}else{var P=y.ownerDocument;y!=P.body&&y!=P.documentElement&&"visible"!=E.overflow&&(w=c(y))}if(w&&(a=w,s=v,void 0,void 0,void 0,void 0,void 0,void 0,u=Math.max(a.top,s.top),d=Math.min(a.bottom,s.bottom),f=Math.max(a.left,s.left),m=d-u,v=(g=(p=Math.min(a.right,s.right))-f)>=0&&m>=0&&{top:u,bottom:d,left:f,right:p,width:g,height:m}||null),!v)break;y=y&&h(y)}return v}},o.prototype._getRootRect=function(){var t;if(this.root)t=c(this.root);else{var n=e.documentElement,r=e.body;t={top:0,left:0,right:n.clientWidth||r.clientWidth,width:n.clientWidth||r.clientWidth,bottom:n.clientHeight||r.clientHeight,height:n.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(t)},o.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100})),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},o.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==r)for(var i=0;i<this.thresholds.length;i++){var o=this.thresholds[i];if(o==n||o==r||o<n!=o<r)return!0}},o.prototype._rootIsInDom=function(){return!this.root||d(e,this.root)},o.prototype._rootContainsTarget=function(t){return d(this.root||e,t)&&(!this.root||this.root.ownerDocument==t.ownerDocument)},o.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},o.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=o,window.IntersectionObserverEntry=i}function i(e){this.time=e.time,this.target=e.target,this.rootBounds=u(e.rootBounds),this.boundingClientRect=u(e.boundingClientRect),this.intersectionRect=u(e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,r=this.intersectionRect,i=r.width*r.height;this.intersectionRatio=n?Number((i/n).toFixed(4)):this.isIntersecting?1:0}function o(e,t){var n,r,i,o=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(o.root&&1!=o.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,i=null,function(){i||(i=setTimeout((function(){n(),i=null}),r))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(o.rootMargin),this.thresholds=this._initThresholds(o.threshold),this.root=o.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function a(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function s(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function c(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function u(e){return!e||"x"in e?e:{top:e.top,y:e.top,bottom:e.bottom,left:e.left,x:e.left,right:e.right,width:e.width,height:e.height}}function l(e,t){var n=t.top-e.top,r=t.left-e.left;return{top:n,left:r,height:t.height,width:t.width,bottom:n+t.height,right:r+t.width}}function d(e,t){for(var n=t;n;){if(n==e)return!0;n=h(n)}return!1}function h(t){var n=t.parentNode;return 9==t.nodeType&&t!=e?f(t):n&&11==n.nodeType&&n.host?n.host:n&&n.assignedSlot?n.assignedSlot.parentNode:n}function f(e){try{return e.defaultView&&e.defaultView.frameElement||null}catch(e){return null}}}()},26576:function(e,t,n){"use strict";(t=e.exports=n(10634).default).default=t},10634:function(e,t){"use strict";t.default=function(){function e(t,n,r,i){this.message=t,this.expected=n,this.found=r,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(e,Error),{SyntaxError:e,parse:function(t){var n,r=arguments.length>1?arguments[1]:{},i={},o={start:Ie},a=Ie,s=function(e){return{type:"messageFormatPattern",elements:e,location:Pe()}},c=function(e){var t,n,r,i,o,a="";for(t=0,r=e.length;t<r;t+=1)for(n=0,o=(i=e[t]).length;n<o;n+=1)a+=i[n];return a},u=function(e){return{type:"messageTextElement",value:e,location:Pe()}},l=/^[^ \t\n\r,.+={}#]/,d={type:"class",value:"[^ \\t\\n\\r,.+={}#]",description:"[^ \\t\\n\\r,.+={}#]"},h="{",f={type:"literal",value:"{",description:'"{"'},p=",",g={type:"literal",value:",",description:'","'},m="}",v={type:"literal",value:"}",description:'"}"'},y=function(e,t){return{type:"argumentElement",id:e,format:t&&t[2],location:Pe()}},b="number",w={type:"literal",value:"number",description:'"number"'},E="date",S={type:"literal",value:"date",description:'"date"'},T="time",_={type:"literal",value:"time",description:'"time"'},P=function(e,t){return{type:e+"Format",style:t&&t[2],location:Pe()}},C="plural",R={type:"literal",value:"plural",description:'"plural"'},O=function(e){return{type:e.type,ordinal:!1,offset:e.offset||0,options:e.options,location:Pe()}},k="selectordinal",I={type:"literal",value:"selectordinal",description:'"selectordinal"'},x=function(e){return{type:e.type,ordinal:!0,offset:e.offset||0,options:e.options,location:Pe()}},A="select",L={type:"literal",value:"select",description:'"select"'},M=function(e){return{type:"selectFormat",options:e,location:Pe()}},N="=",D={type:"literal",value:"=",description:'"="'},F=function(e,t){return{type:"optionalFormatPattern",selector:e,value:t,location:Pe()}},B="offset:",U={type:"literal",value:"offset:",description:'"offset:"'},j=function(e){return e},H=function(e,t){return{type:"pluralFormat",offset:e,options:t,location:Pe()}},z={type:"other",description:"whitespace"},V=/^[ \t\n\r]/,G={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},W={type:"other",description:"optionalWhitespace"},q=/^[0-9]/,K={type:"class",value:"[0-9]",description:"[0-9]"},Y=/^[0-9a-f]/i,X={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},Z="0",$={type:"literal",value:"0",description:'"0"'},J=/^[1-9]/,Q={type:"class",value:"[1-9]",description:"[1-9]"},ee=function(e){return parseInt(e,10)},te=/^[^{}\\\0-\x1F \t\n\r]/,ne={type:"class",value:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]",description:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]"},re="\\\\",ie={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},oe=function(){return"\\"},ae="\\#",se={type:"literal",value:"\\#",description:'"\\\\#"'},ce=function(){return"\\#"},ue="\\{",le={type:"literal",value:"\\{",description:'"\\\\{"'},de=function(){return"{"},he="\\}",fe={type:"literal",value:"\\}",description:'"\\\\}"'},pe=function(){return"}"},ge="\\u",me={type:"literal",value:"\\u",description:'"\\\\u"'},ve=function(e){return String.fromCharCode(parseInt(e,16))},ye=function(e){return e.join("")},be=0,we=0,Ee=[{line:1,column:1,seenCR:!1}],Se=0,Te=[],_e=0;if("startRule"in r){if(!(r.startRule in o))throw new Error("Can't start parsing from rule \""+r.startRule+'".');a=o[r.startRule]}function Pe(){return Re(we,be)}function Ce(e){var n,r,i=Ee[e];if(i)return i;for(n=e-1;!Ee[n];)n--;for(i={line:(i=Ee[n]).line,column:i.column,seenCR:i.seenCR};n<e;)"\n"===(r=t.charAt(n))?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):"\r"===r||"\u2028"===r||"\u2029"===r?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1),n++;return Ee[e]=i,i}function Re(e,t){var n=Ce(e),r=Ce(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function Oe(e){be<Se||(be>Se&&(Se=be,Te=[]),Te.push(e))}function ke(t,n,r,i){return null!==n&&function(e){var t=1;for(e.sort((function(e,t){return e.description<t.description?-1:e.description>t.description?1:0}));t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(n),new e(null!==t?t:function(e,t){var n,r=new Array(e.length);for(n=0;n<e.length;n++)r[n]=e[n].description;return"Expected "+(e.length>1?r.slice(0,-1).join(", ")+" or "+r[e.length-1]:r[0])+" but "+(t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(e){return"\\x0"+t(e)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(e){return"\\x"+t(e)})).replace(/[\u0100-\u0FFF]/g,(function(e){return"\\u0"+t(e)})).replace(/[\u1000-\uFFFF]/g,(function(e){return"\\u"+t(e)}))}(t)+'"':"end of input")+" found."}(n,r),n,r,i)}function Ie(){return xe()}function xe(){var e,t,n;for(e=be,t=[],n=Ae();n!==i;)t.push(n),n=Ae();return t!==i&&(we=e,t=s(t)),t}function Ae(){var e;return(e=Me())===i&&(e=De()),e}function Le(){var e,n,r,o,a,s;if(e=be,n=[],r=be,(o=Ke())!==i&&(a=Je())!==i&&(s=Ke())!==i?r=o=[o,a,s]:(be=r,r=i),r!==i)for(;r!==i;)n.push(r),r=be,(o=Ke())!==i&&(a=Je())!==i&&(s=Ke())!==i?r=o=[o,a,s]:(be=r,r=i);else n=i;return n!==i&&(we=e,n=c(n)),(e=n)===i&&(e=be,e=(n=qe())!==i?t.substring(e,be):n),e}function Me(){var e,t;return e=be,(t=Le())!==i&&(we=e,t=u(t)),t}function Ne(){var e,n,r;if((e=Ze())===i){if(e=be,n=[],l.test(t.charAt(be))?(r=t.charAt(be),be++):(r=i,0===_e&&Oe(d)),r!==i)for(;r!==i;)n.push(r),l.test(t.charAt(be))?(r=t.charAt(be),be++):(r=i,0===_e&&Oe(d));else n=i;e=n!==i?t.substring(e,be):n}return e}function De(){var e,n,r,o,a,s,c;return e=be,123===t.charCodeAt(be)?(n=h,be++):(n=i,0===_e&&Oe(f)),n!==i&&Ke()!==i&&(r=Ne())!==i&&Ke()!==i?(o=be,44===t.charCodeAt(be)?(a=p,be++):(a=i,0===_e&&Oe(g)),a!==i&&(s=Ke())!==i&&(c=Fe())!==i?o=a=[a,s,c]:(be=o,o=i),o===i&&(o=null),o!==i&&(a=Ke())!==i?(125===t.charCodeAt(be)?(s=m,be++):(s=i,0===_e&&Oe(v)),s!==i?(we=e,e=n=y(r,o)):(be=e,e=i)):(be=e,e=i)):(be=e,e=i),e}function Fe(){var e;return(e=Be())===i&&(e=Ue())===i&&(e=je())===i&&(e=He()),e}function Be(){var e,n,r,o,a,s;return e=be,t.substr(be,6)===b?(n=b,be+=6):(n=i,0===_e&&Oe(w)),n===i&&(t.substr(be,4)===E?(n=E,be+=4):(n=i,0===_e&&Oe(S)),n===i&&(t.substr(be,4)===T?(n=T,be+=4):(n=i,0===_e&&Oe(_)))),n!==i&&Ke()!==i?(r=be,44===t.charCodeAt(be)?(o=p,be++):(o=i,0===_e&&Oe(g)),o!==i&&(a=Ke())!==i&&(s=Je())!==i?r=o=[o,a,s]:(be=r,r=i),r===i&&(r=null),r!==i?(we=e,e=n=P(n,r)):(be=e,e=i)):(be=e,e=i),e}function Ue(){var e,n,r,o;return e=be,t.substr(be,6)===C?(n=C,be+=6):(n=i,0===_e&&Oe(R)),n!==i&&Ke()!==i?(44===t.charCodeAt(be)?(r=p,be++):(r=i,0===_e&&Oe(g)),r!==i&&Ke()!==i&&(o=We())!==i?(we=e,e=n=O(o)):(be=e,e=i)):(be=e,e=i),e}function je(){var e,n,r,o;return e=be,t.substr(be,13)===k?(n=k,be+=13):(n=i,0===_e&&Oe(I)),n!==i&&Ke()!==i?(44===t.charCodeAt(be)?(r=p,be++):(r=i,0===_e&&Oe(g)),r!==i&&Ke()!==i&&(o=We())!==i?(we=e,e=n=x(o)):(be=e,e=i)):(be=e,e=i),e}function He(){var e,n,r,o,a;if(e=be,t.substr(be,6)===A?(n=A,be+=6):(n=i,0===_e&&Oe(L)),n!==i)if(Ke()!==i)if(44===t.charCodeAt(be)?(r=p,be++):(r=i,0===_e&&Oe(g)),r!==i)if(Ke()!==i){if(o=[],(a=Ve())!==i)for(;a!==i;)o.push(a),a=Ve();else o=i;o!==i?(we=e,e=n=M(o)):(be=e,e=i)}else be=e,e=i;else be=e,e=i;else be=e,e=i;else be=e,e=i;return e}function ze(){var e,n,r,o;return e=be,n=be,61===t.charCodeAt(be)?(r=N,be++):(r=i,0===_e&&Oe(D)),r!==i&&(o=Ze())!==i?n=r=[r,o]:(be=n,n=i),(e=n!==i?t.substring(e,be):n)===i&&(e=Je()),e}function Ve(){var e,n,r,o,a;return e=be,Ke()!==i&&(n=ze())!==i&&Ke()!==i?(123===t.charCodeAt(be)?(r=h,be++):(r=i,0===_e&&Oe(f)),r!==i&&Ke()!==i&&(o=xe())!==i&&Ke()!==i?(125===t.charCodeAt(be)?(a=m,be++):(a=i,0===_e&&Oe(v)),a!==i?(we=e,e=F(n,o)):(be=e,e=i)):(be=e,e=i)):(be=e,e=i),e}function Ge(){var e,n,r;return e=be,t.substr(be,7)===B?(n=B,be+=7):(n=i,0===_e&&Oe(U)),n!==i&&Ke()!==i&&(r=Ze())!==i?(we=e,e=n=j(r)):(be=e,e=i),e}function We(){var e,t,n,r;if(e=be,(t=Ge())===i&&(t=null),t!==i)if(Ke()!==i){if(n=[],(r=Ve())!==i)for(;r!==i;)n.push(r),r=Ve();else n=i;n!==i?(we=e,e=t=H(t,n)):(be=e,e=i)}else be=e,e=i;else be=e,e=i;return e}function qe(){var e,n;if(_e++,e=[],V.test(t.charAt(be))?(n=t.charAt(be),be++):(n=i,0===_e&&Oe(G)),n!==i)for(;n!==i;)e.push(n),V.test(t.charAt(be))?(n=t.charAt(be),be++):(n=i,0===_e&&Oe(G));else e=i;return _e--,e===i&&(n=i,0===_e&&Oe(z)),e}function Ke(){var e,n,r;for(_e++,e=be,n=[],r=qe();r!==i;)n.push(r),r=qe();return e=n!==i?t.substring(e,be):n,_e--,e===i&&(n=i,0===_e&&Oe(W)),e}function Ye(){var e;return q.test(t.charAt(be))?(e=t.charAt(be),be++):(e=i,0===_e&&Oe(K)),e}function Xe(){var e;return Y.test(t.charAt(be))?(e=t.charAt(be),be++):(e=i,0===_e&&Oe(X)),e}function Ze(){var e,n,r,o,a,s;if(e=be,48===t.charCodeAt(be)?(n=Z,be++):(n=i,0===_e&&Oe($)),n===i){if(n=be,r=be,J.test(t.charAt(be))?(o=t.charAt(be),be++):(o=i,0===_e&&Oe(Q)),o!==i){for(a=[],s=Ye();s!==i;)a.push(s),s=Ye();a!==i?r=o=[o,a]:(be=r,r=i)}else be=r,r=i;n=r!==i?t.substring(n,be):r}return n!==i&&(we=e,n=ee(n)),n}function $e(){var e,n,r,o,a,s,c,u;return te.test(t.charAt(be))?(e=t.charAt(be),be++):(e=i,0===_e&&Oe(ne)),e===i&&(e=be,t.substr(be,2)===re?(n=re,be+=2):(n=i,0===_e&&Oe(ie)),n!==i&&(we=e,n=oe()),(e=n)===i&&(e=be,t.substr(be,2)===ae?(n=ae,be+=2):(n=i,0===_e&&Oe(se)),n!==i&&(we=e,n=ce()),(e=n)===i&&(e=be,t.substr(be,2)===ue?(n=ue,be+=2):(n=i,0===_e&&Oe(le)),n!==i&&(we=e,n=de()),(e=n)===i&&(e=be,t.substr(be,2)===he?(n=he,be+=2):(n=i,0===_e&&Oe(fe)),n!==i&&(we=e,n=pe()),(e=n)===i&&(e=be,t.substr(be,2)===ge?(n=ge,be+=2):(n=i,0===_e&&Oe(me)),n!==i?(r=be,o=be,(a=Xe())!==i&&(s=Xe())!==i&&(c=Xe())!==i&&(u=Xe())!==i?o=a=[a,s,c,u]:(be=o,o=i),(r=o!==i?t.substring(r,be):o)!==i?(we=e,e=n=ve(r)):(be=e,e=i)):(be=e,e=i)))))),e}function Je(){var e,t,n;if(e=be,t=[],(n=$e())!==i)for(;n!==i;)t.push(n),n=$e();else t=i;return t!==i&&(we=e,t=ye(t)),t}if((n=a())!==i&&be===t.length)return n;throw n!==i&&be<t.length&&Oe({type:"end",description:"end of input"}),ke(null,Te,Se<t.length?t.charAt(Se):null,Se<t.length?Re(Se,Se+1):Re(Se,Se))}}}()},95260:function(e,t,n){"use strict";var r=n(4574).default;n(98374),(t=e.exports=r).default=t},72494:function(e,t){"use strict";function n(e,t,n){this.locales=e,this.formats=t,this.pluralFn=n}function r(e){this.id=e}function i(e,t,n,r,i){this.id=e,this.useOrdinal=t,this.offset=n,this.options=r,this.pluralFn=i}function o(e,t,n,r){this.id=e,this.offset=t,this.numberFormat=n,this.string=r}function a(e,t){this.id=e,this.options=t}t.default=n,n.prototype.compile=function(e){return this.pluralStack=[],this.currentPlural=null,this.pluralNumberFormat=null,this.compileMessage(e)},n.prototype.compileMessage=function(e){if(!e||"messageFormatPattern"!==e.type)throw new Error('Message AST is not of type: "messageFormatPattern"');var t,n,r,i=e.elements,o=[];for(t=0,n=i.length;t<n;t+=1)switch((r=i[t]).type){case"messageTextElement":o.push(this.compileMessageText(r));break;case"argumentElement":o.push(this.compileArgument(r));break;default:throw new Error("Message element does not have a valid type")}return o},n.prototype.compileMessageText=function(e){return this.currentPlural&&/(^|[^\\])#/g.test(e.value)?(this.pluralNumberFormat||(this.pluralNumberFormat=new Intl.NumberFormat(this.locales)),new o(this.currentPlural.id,this.currentPlural.format.offset,this.pluralNumberFormat,e.value)):e.value.replace(/\\#/g,"#")},n.prototype.compileArgument=function(e){var t=e.format;if(!t)return new r(e.id);var n,o=this.formats,s=this.locales,c=this.pluralFn;switch(t.type){case"numberFormat":return n=o.number[t.style],{id:e.id,format:new Intl.NumberFormat(s,n).format};case"dateFormat":return n=o.date[t.style],{id:e.id,format:new Intl.DateTimeFormat(s,n).format};case"timeFormat":return n=o.time[t.style],{id:e.id,format:new Intl.DateTimeFormat(s,n).format};case"pluralFormat":return n=this.compileOptions(e),new i(e.id,t.ordinal,t.offset,n,c);case"selectFormat":return n=this.compileOptions(e),new a(e.id,n);default:throw new Error("Message element does not have a valid format type")}},n.prototype.compileOptions=function(e){var t,n,r,i=e.format,o=i.options,a={};for(this.pluralStack.push(this.currentPlural),this.currentPlural="pluralFormat"===i.type?e:null,t=0,n=o.length;t<n;t+=1)a[(r=o[t]).selector]=this.compileMessage(r.value);return this.currentPlural=this.pluralStack.pop(),a},r.prototype.format=function(e){return e||"number"==typeof e?"string"==typeof e?e:String(e):""},i.prototype.getOption=function(e){var t=this.options;return t["="+e]||t[this.pluralFn(e-this.offset,this.useOrdinal)]||t.other},o.prototype.format=function(e){var t=this.numberFormat.format(e-this.offset);return this.string.replace(/(^|[^\\])#/g,"$1"+t).replace(/\\#/g,"#")},a.prototype.getOption=function(e){var t=this.options;return t[e]||t.other}},84680:function(e,t,n){"use strict";var r=n(31309),i=n(91523),o=n(72494),a=n(26576);function s(e,t,n){var r="string"==typeof e?s.__parse(e):e;if(!r||"messageFormatPattern"!==r.type)throw new TypeError("A message must be provided as a String or AST.");n=this._mergeFormats(s.formats,n),i.defineProperty(this,"_locale",{value:this._resolveLocale(t)});var o=this._findPluralRuleFunction(this._locale),a=this._compilePattern(r,t,n,o),c=this;this.format=function(t){try{return c._format(a,t)}catch(t){throw t.variableId?new Error("The intl string context variable '"+t.variableId+"' was not provided to the string '"+e+"'"):t}}}t.default=s,i.defineProperty(s,"formats",{enumerable:!0,value:{number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}}}),i.defineProperty(s,"__localeData__",{value:i.objCreate(null)}),i.defineProperty(s,"__addLocaleData",{value:function(e){if(!e||!e.locale)throw new Error("Locale data provided to IntlMessageFormat is missing a `locale` property");s.__localeData__[e.locale.toLowerCase()]=e}}),i.defineProperty(s,"__parse",{value:a.default.parse}),i.defineProperty(s,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),s.prototype.resolvedOptions=function(){return{locale:this._locale}},s.prototype._compilePattern=function(e,t,n,r){return new o.default(t,n,r).compile(e)},s.prototype._findPluralRuleFunction=function(e){for(var t=s.__localeData__,n=t[e.toLowerCase()];n;){if(n.pluralRuleFunction)return n.pluralRuleFunction;n=n.parentLocale&&t[n.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlMessageFormat is missing a `pluralRuleFunction` for :"+e)},s.prototype._format=function(e,t){var n,i,o,a,s,c,u="";for(n=0,i=e.length;n<i;n+=1)if("string"!=typeof(o=e[n])){if(a=o.id,!t||!r.hop.call(t,a))throw(c=new Error("A value must be provided for: "+a)).variableId=a,c;s=t[a],o.options?u+=this._format(o.getOption(s),t):u+=o.format(s)}else u+=o;return u},s.prototype._mergeFormats=function(e,t){var n,o,a={};for(n in e)r.hop.call(e,n)&&(a[n]=o=i.objCreate(e[n]),t&&r.hop.call(t,n)&&r.extend(o,t[n]));return a},s.prototype._resolveLocale=function(e){"string"==typeof e&&(e=[e]),e=(e||[]).concat(s.defaultLocale);var t,n,r,i,o=s.__localeData__;for(t=0,n=e.length;t<n;t+=1)for(r=e[t].toLowerCase().split("-");r.length;){if(i=o[r.join("-")])return i.locale;r.pop()}var a=e.pop();throw new Error("No locale data has been added to IntlMessageFormat for: "+e.join(", ")+", or the default locale: "+a)}},3459:function(e,t){"use strict";t.default={locale:"en",pluralRuleFunction:function(e,t){var n=String(e).split("."),r=!n[1],i=Number(n[0])==e,o=i&&n[0].slice(-1),a=i&&n[0].slice(-2);return t?1==o&&11!=a?"one":2==o&&12!=a?"two":3==o&&13!=a?"few":"other":1==e&&r?"one":"other"}}},91523:function(e,t,n){"use strict";var r=n(31309),i=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),o=(!i&&Object.prototype.__defineGetter__,i?Object.defineProperty:function(e,t,n){"get"in n&&e.__defineGetter__?e.__defineGetter__(t,n.get):r.hop.call(e,t)&&!("value"in n)||(e[t]=n.value)}),a=Object.create||function(e,t){var n,i;function a(){}for(i in a.prototype=e,n=new a,t)r.hop.call(t,i)&&o(n,i,t[i]);return n};t.defineProperty=o,t.objCreate=a},4574:function(e,t,n){"use strict";var r=n(84680),i=n(3459);r.default.__addLocaleData(i.default),r.default.defaultLocale="en",t.default=r.default},31309:function(e,t){"use strict";t.extend=function(e){var t,r,i,o,a=Array.prototype.slice.call(arguments,1);for(t=0,r=a.length;t<r;t+=1)if(i=a[t])for(o in i)n.call(i,o)&&(e[o]=i[o]);return e};var n=Object.prototype.hasOwnProperty;t.hop=n},36808:function(e,t,n){var r,i,o;o=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in o)o[c]&&(s+="; "+c,!0!==o[c]&&(s+="="+o[c].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],a=0;a<o.length;a++){var s=o[a].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(s[0]);if(c=(r.read||r)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(i[u]=c,e===u)break}catch(e){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return a(e,!1)},i.getJSON=function(e){return a(e,!0)},i.remove=function(t,n){o(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))},void 0===(i="function"==typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i),e.exports=o()},35550:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9669),i=n(67378),o=function(){function e(e,t,n){void 0===e&&(e="http://localhost:8080/api/emit"),void 0===t&&(t=500),void 0===n&&(n=5),this.metricsEndpoint=e,this.delay=t,this.maxTries=n}return e.prototype.publishRecords=function(e){var t=i.buildSushiPayloadFromRecords(e);return this.publishPayload(t)},e.prototype.publishPayload=function(e,t){var n=this;return void 0===t&&(t=1),this.publishPayloadNoRetry(e).then((function(e){return e})).catch((function(r){return n.isRetryableStatusCode(r.response.status)&&t<n.maxTries?n.pause(n.getDelayForTryNumber(t)).then((function(){return n.publishPayload(e,t+1)})):Promise.reject(r.response)}))},e.prototype.publishPayloadNoRetry=function(e){return r.default.post(this.metricsEndpoint,e,{headers:{"content-type":"application/json"}})},e.prototype.pause=function(e){return new Promise((function(t){return setTimeout(t,e)}))},e.prototype.isRetryableStatusCode=function(e){return e>=500&&e<=599||429===e},e.prototype.getDelayForTryNumber=function(e){return Math.pow(2,e)*this.delay},e}();t.AxiosSushiPublisher=o},38108:function(e,t){"use strict";var n,r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.PublisherFailure=0]="PublisherFailure",e[e.AlreadyInFlight=1]="AlreadyInFlight"}(n=t.BatcherFailureReason||(t.BatcherFailureReason={}));var o=function(){function e(e,t,n,r){this.publisher=e,this.maxRecordsPerBatch=t,this.delay=n,this.queueFailedFlushDumpingThreshold=r,this.queue=[],this.isInFlight=!1,this.numRecordsPublished=0}return e.prototype.enqueue=function(e){this.queue.push(e)},e.prototype.flush=function(){return r(this,void 0,void 0,(function(){var e,t,r,o=this;return i(this,(function(i){switch(i.label){case 0:if(this.isInFlight)throw{reason:n.AlreadyInFlight};if(0===this.queue.length)return[2];this.isInFlight=!0,e=this.queue.splice(0,this.maxRecordsPerBatch),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.publisher.publishRecords(e)];case 2:return i.sent(),[3,4];case 3:throw t=i.sent(),this.isInFlight=!1,this.queue.length<this.queueFailedFlushDumpingThreshold?((r=this.queue).push.apply(r,e),{reason:n.PublisherFailure,messagesLost:0,responseCode:t}):{reason:n.PublisherFailure,messagesLost:e.length,responseCode:t};case 4:return this.isInFlight=!1,this.numRecordsPublished+=e.length,this.queue.length>0?[4,new Promise((function(e){return setTimeout(e,o.delay)}))]:[3,6];case 5:return i.sent(),[2,this.flush()];case 6:case 7:return[2]}}))}))},e}();t.Batcher=o},81071:function(e,t){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){Object.keys(e).forEach((function(t){void 0===e[t]&&(e[t]=null)}))},i=function(){function e(e,t){this.appSessionParams=e,this.batcher=t,r(e),this.count=0,this.readingSession=null,this.startAppSession()}return e.prototype.startReadingSession=function(e){var t=this;if(r(e),this.appSession||this.startAppSession(),this.readingSession){if(Object.keys(e).every((function(n){return t.readingSession.payload[n]===e[n]})))return;this.endReadingSession()}var i=(new Date).getTime();this.readingSession={schema_name:"reading_session",schema_version:0,sequence_number:++this.count,created_timestamp:i,payload:n({start_timestamp:i,end_timestamp:null,is_complete:!1},e)}},e.prototype.endReadingSession=function(){this.readingSession&&(this.readingSession.payload.end_timestamp=(new Date).getTime(),this.readingSession.payload.is_complete=!0,this.emitEmptyRecord(),this.readingSession=null)},e.prototype.startAppSession=function(){if(!this.appSession||this.appSession.payload.is_complete){var e=(new Date).getTime();this.appSession={schema_name:"app_session",schema_version:0,sequence_number:++this.count,created_timestamp:e,payload:n({start_timestamp:e,end_timestamp:null,is_complete:!1},this.appSessionParams)}}},e.prototype.endAppSession=function(){this.readingSession&&this.endReadingSession(),this.appSession.payload.is_complete||(this.appSession.payload.end_timestamp=(new Date).getTime(),this.appSession.payload.is_complete=!0,this.emitEmptyRecord())},e.prototype.emitRecord=function(e,t,n,i,o){void 0===n&&(n={}),r(n);var a=this.createRecord(e,t,n,i,o);this.batcher.enqueue(a)},e.prototype.emitEmptyRecord=function(){var e={app_session:this.appSession,reading_session:this.readingSession};this.batcher.enqueue(e)},e.prototype.createRecord=function(e,t,n,r,i){return{app_session:r?null:this.appSession,reading_session:r?null:this.readingSession,namespace:i,record:{schema_name:e,schema_version:t,sequence_number:++this.count,created_timestamp:(new Date).getTime(),payload:n}}},e}();t.MetricsClient=i},51840:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(67378),i=function(){function e(e,t,n){void 0===e&&(e="http://localhost:8080/api/emit"),void 0===t&&(t=500),void 0===n&&(n=5),this.metricsEndpoint=e,this.delay=t,this.maxTries=n}return e.prototype.publishRecords=function(e){var t=r.buildSushiPayloadFromRecords(e);return this.publishPayload(t)},e.prototype.publishPayload=function(e,t){var n=this;return void 0===t&&(t=1),this.publishPayloadNoRetry(e).then((function(e){return e.response})).catch((function(r){return n.isRetryableStatusCode(r.status)&&t<n.maxTries?n.pause(n.getDelayForTryNumber(t)).then((function(){return n.publishPayload(e,t+1)})):Promise.reject(r.response)}))},e.prototype.publishPayloadNoRetry=function(e){var t=this;return new Promise((function(n,r){var i=new XMLHttpRequest;i.open("POST",t.metricsEndpoint),i.setRequestHeader("Content-Type","application/json"),i.onload=function(){i.status>=200&&i.status<300?n(i):r(i)},i.onerror=function(){return r(i)},i.send(JSON.stringify(e))}))},e.prototype.pause=function(e){return new Promise((function(t){return setTimeout(t,e)}))},e.prototype.isRetryableStatusCode=function(e){return e>=500&&e<=599||429===e},e.prototype.getDelayForTryNumber=function(e){return Math.pow(2,e)*this.delay},e}();t.SushiPublisher=i},67378:function(e,t){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){return!e&&!t||e&&t&&Object.keys(t).every((function(n){return e[n]===t[n]}))};t.buildSushiPayloadFromRecords=function(e){var t={events:[]},i=(new Date).getTime();return e.forEach((function(e){var o=t.events[t.events.length-1];if(o&&r(o.data.app_session,e.app_session)&&r(o.data.reading_session,e.reading_session))e.record&&o.data.records.push(n({sent_timestamp:i},e.record));else{var a={data:{app_session:e.app_session?n({sent_timestamp:i},e.app_session):null,reading_session:e.reading_session?n({sent_timestamp:i},e.reading_session):null,namespace:e.namespace,records:e.record?[n({sent_timestamp:i},e.record)]:[]}};t.events.push(a)}})),t}},82403:function(e,t,n){"use strict";var r=n(81071);t.MetricsClient=r.MetricsClient,n(35550).AxiosSushiPublisher;var i=n(51840);t.SushiPublisher=i.SushiPublisher;var o=n(38108);t.Batcher=o.Batcher,o.BatcherFailureReason},18552:function(e,t,n){var r=n(10852)(n(55639),"DataView");e.exports=r},1989:function(e,t,n){var r=n(51789),i=n(80401),o=n(57667),a=n(21327),s=n(81866);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},38407:function(e,t,n){var r=n(27040),i=n(14125),o=n(82117),a=n(67518),s=n(54705);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},57071:function(e,t,n){var r=n(10852)(n(55639),"Map");e.exports=r},83369:function(e,t,n){var r=n(24785),i=n(11285),o=n(96e3),a=n(49916),s=n(95265);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},53818:function(e,t,n){var r=n(10852)(n(55639),"Promise");e.exports=r},58525:function(e,t,n){var r=n(10852)(n(55639),"Set");e.exports=r},88668:function(e,t,n){var r=n(83369),i=n(90619),o=n(72385);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},46384:function(e,t,n){var r=n(38407),i=n(37465),o=n(63779),a=n(67599),s=n(44758),c=n(34309);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=i,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=s,u.prototype.set=c,e.exports=u},62705:function(e,t,n){var r=n(55639).Symbol;e.exports=r},11149:function(e,t,n){var r=n(55639).Uint8Array;e.exports=r},70577:function(e,t,n){var r=n(10852)(n(55639),"WeakMap");e.exports=r},34963:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},14636:function(e,t,n){var r=n(22545),i=n(35694),o=n(1469),a=n(44144),s=n(65776),c=n(36719),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),l=!n&&i(e),d=!n&&!l&&a(e),h=!n&&!l&&!d&&c(e),f=n||l||d||h,p=f?r(e.length,String):[],g=p.length;for(var m in e)!t&&!u.call(e,m)||f&&("length"==m||d&&("offset"==m||"parent"==m)||h&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,g))||p.push(m);return p}},29932:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},62488:function(e){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},82908:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},18470:function(e,t,n){var r=n(77813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},89881:function(e,t,n){var r=n(47816),i=n(99291)(r);e.exports=i},21078:function(e,t,n){var r=n(62488),i=n(37285);e.exports=function e(t,n,o,a,s){var c=-1,u=t.length;for(o||(o=i),s||(s=[]);++c<u;){var l=t[c];n>0&&o(l)?n>1?e(l,n-1,o,a,s):r(s,l):a||(s[s.length]=l)}return s}},28483:function(e,t,n){var r=n(25063)();e.exports=r},47816:function(e,t,n){var r=n(28483),i=n(3674);e.exports=function(e,t){return e&&r(e,t,i)}},97786:function(e,t,n){var r=n(71811),i=n(40327);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},68866:function(e,t,n){var r=n(62488),i=n(1469);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},44239:function(e,t,n){var r=n(62705),i=n(89607),o=n(2333),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},13:function(e){e.exports=function(e,t){return null!=e&&t in Object(e)}},9454:function(e,t,n){var r=n(44239),i=n(37005);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},90939:function(e,t,n){var r=n(2492),i=n(37005);e.exports=function e(t,n,o,a,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:r(t,n,o,a,e,s))}},2492:function(e,t,n){var r=n(46384),i=n(67114),o=n(18351),a=n(16096),s=n(64160),c=n(1469),u=n(44144),l=n(36719),d="[object Arguments]",h="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,g,m,v){var y=c(e),b=c(t),w=y?h:s(e),E=b?h:s(t),S=(w=w==d?f:w)==f,T=(E=E==d?f:E)==f,_=w==E;if(_&&u(e)){if(!u(t))return!1;y=!0,S=!1}if(_&&!S)return v||(v=new r),y||l(e)?i(e,t,n,g,m,v):o(e,t,w,n,g,m,v);if(!(1&n)){var P=S&&p.call(e,"__wrapped__"),C=T&&p.call(t,"__wrapped__");if(P||C){var R=P?e.value():e,O=C?t.value():t;return v||(v=new r),m(R,O,n,g,v)}}return!!_&&(v||(v=new r),a(e,t,n,g,m,v))}},2958:function(e,t,n){var r=n(46384),i=n(90939);e.exports=function(e,t,n,o){var a=n.length,s=a,c=!o;if(null==e)return!s;for(e=Object(e);a--;){var u=n[a];if(c&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<s;){var l=(u=n[a])[0],d=e[l],h=u[1];if(c&&u[2]){if(void 0===d&&!(l in e))return!1}else{var f=new r;if(o)var p=o(d,h,l,e,t,f);if(!(void 0===p?i(h,d,3,o,f):p))return!1}}return!0}},28458:function(e,t,n){var r=n(23560),i=n(15346),o=n(13218),a=n(80346),s=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,d=u.hasOwnProperty,h=RegExp("^"+l.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?h:s).test(a(e))}},38749:function(e,t,n){var r=n(44239),i=n(41780),o=n(37005),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},67206:function(e,t,n){var r=n(91573),i=n(16432),o=n(6557),a=n(1469),s=n(39601);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},280:function(e,t,n){var r=n(25726),i=n(86916),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},69199:function(e,t,n){var r=n(89881),i=n(98612);e.exports=function(e,t){var n=-1,o=i(e)?Array(e.length):[];return r(e,(function(e,r,i){o[++n]=t(e,r,i)})),o}},91573:function(e,t,n){var r=n(2958),i=n(1499),o=n(42634);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},16432:function(e,t,n){var r=n(90939),i=n(27361),o=n(79095),a=n(15403),s=n(89162),c=n(42634),u=n(40327);e.exports=function(e,t){return a(e)&&s(t)?c(u(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?o(n,e):r(t,a,3)}}},40371:function(e){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},79152:function(e,t,n){var r=n(97786);e.exports=function(e){return function(t){return r(t,e)}}},40098:function(e){var t=Math.ceil,n=Math.max;e.exports=function(e,r,i,o){for(var a=-1,s=n(t((r-e)/(i||1)),0),c=Array(s);s--;)c[o?s:++a]=e,e+=i;return c}},22545:function(e){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},80531:function(e,t,n){var r=n(62705),i=n(29932),o=n(1469),a=n(33448),s=r?r.prototype:void 0,c=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},7518:function(e){e.exports=function(e){return function(t){return e(t)}}},74757:function(e){e.exports=function(e,t){return e.has(t)}},71811:function(e,t,n){var r=n(1469),i=n(15403),o=n(55514),a=n(79833);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},14429:function(e,t,n){var r=n(55639)["__core-js_shared__"];e.exports=r},99291:function(e,t,n){var r=n(98612);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var o=n.length,a=t?o:-1,s=Object(n);(t?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},25063:function(e){e.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var c=a[e?s:++i];if(!1===n(o[c],c,o))break}return t}}},47445:function(e,t,n){var r=n(40098),i=n(16612),o=n(18601);e.exports=function(e){return function(t,n,a){return a&&"number"!=typeof a&&i(t,n,a)&&(n=a=void 0),t=o(t),void 0===n?(n=t,t=0):n=o(n),a=void 0===a?t<n?1:-1:o(a),r(t,n,a,e)}}},67114:function(e,t,n){var r=n(88668),i=n(82908),o=n(74757);e.exports=function(e,t,n,a,s,c){var u=1&n,l=e.length,d=t.length;if(l!=d&&!(u&&d>l))return!1;var h=c.get(e),f=c.get(t);if(h&&f)return h==t&&f==e;var p=-1,g=!0,m=2&n?new r:void 0;for(c.set(e,t),c.set(t,e);++p<l;){var v=e[p],y=t[p];if(a)var b=u?a(y,v,p,t,e,c):a(v,y,p,e,t,c);if(void 0!==b){if(b)continue;g=!1;break}if(m){if(!i(t,(function(e,t){if(!o(m,t)&&(v===e||s(v,e,n,a,c)))return m.push(t)}))){g=!1;break}}else if(v!==y&&!s(v,y,n,a,c)){g=!1;break}}return c.delete(e),c.delete(t),g}},18351:function(e,t,n){var r=n(62705),i=n(11149),o=n(77813),a=n(67114),s=n(68776),c=n(21814),u=r?r.prototype:void 0,l=u?u.valueOf:void 0;e.exports=function(e,t,n,r,u,d,h){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=s;case"[object Set]":var p=1&r;if(f||(f=c),e.size!=t.size&&!p)return!1;var g=h.get(e);if(g)return g==t;r|=2,h.set(e,t);var m=a(f(e),f(t),r,u,d,h);return h.delete(e),m;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},16096:function(e,t,n){var r=n(58234),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,a,s){var c=1&n,u=r(e),l=u.length;if(l!=r(t).length&&!c)return!1;for(var d=l;d--;){var h=u[d];if(!(c?h in t:i.call(t,h)))return!1}var f=s.get(e),p=s.get(t);if(f&&p)return f==t&&p==e;var g=!0;s.set(e,t),s.set(t,e);for(var m=c;++d<l;){var v=e[h=u[d]],y=t[h];if(o)var b=c?o(y,v,h,t,e,s):o(v,y,h,e,t,s);if(!(void 0===b?v===y||a(v,y,n,o,s):b)){g=!1;break}m||(m="constructor"==h)}if(g&&!m){var w=e.constructor,E=t.constructor;w==E||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof E&&E instanceof E||(g=!1)}return s.delete(e),s.delete(t),g}},31957:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},58234:function(e,t,n){var r=n(68866),i=n(99551),o=n(3674);e.exports=function(e){return r(e,o,i)}},45050:function(e,t,n){var r=n(37019);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},1499:function(e,t,n){var r=n(89162),i=n(3674);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,r(a)]}return t}},10852:function(e,t,n){var r=n(28458),i=n(47801);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},89607:function(e,t,n){var r=n(62705),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},99551:function(e,t,n){var r=n(34963),i=n(70479),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=s},64160:function(e,t,n){var r=n(18552),i=n(57071),o=n(53818),a=n(58525),s=n(70577),c=n(44239),u=n(80346),l="[object Map]",d="[object Promise]",h="[object Set]",f="[object WeakMap]",p="[object DataView]",g=u(r),m=u(i),v=u(o),y=u(a),b=u(s),w=c;(r&&w(new r(new ArrayBuffer(1)))!=p||i&&w(new i)!=l||o&&w(o.resolve())!=d||a&&w(new a)!=h||s&&w(new s)!=f)&&(w=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case g:return p;case m:return l;case v:return d;case y:return h;case b:return f}return t}),e.exports=w},47801:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},222:function(e,t,n){var r=n(71811),i=n(35694),o=n(1469),a=n(65776),s=n(41780),c=n(40327);e.exports=function(e,t,n){for(var u=-1,l=(t=r(t,e)).length,d=!1;++u<l;){var h=c(t[u]);if(!(d=null!=e&&n(e,h)))break;e=e[h]}return d||++u!=l?d:!!(l=null==e?0:e.length)&&s(l)&&a(h,l)&&(o(e)||i(e))}},51789:function(e,t,n){var r=n(94536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},80401:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},57667:function(e,t,n){var r=n(94536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},21327:function(e,t,n){var r=n(94536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},81866:function(e,t,n){var r=n(94536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},37285:function(e,t,n){var r=n(62705),i=n(35694),o=n(1469),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},65776:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},16612:function(e,t,n){var r=n(77813),i=n(98612),o=n(65776),a=n(13218);e.exports=function(e,t,n){if(!a(n))return!1;var s=typeof t;return!!("number"==s?i(n)&&o(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},15403:function(e,t,n){var r=n(1469),i=n(33448),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||a.test(e)||!o.test(e)||null!=t&&e in Object(t)}},37019:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},15346:function(e,t,n){var r,i=n(14429),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},25726:function(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},89162:function(e,t,n){var r=n(13218);e.exports=function(e){return e==e&&!r(e)}},27040:function(e){e.exports=function(){this.__data__=[],this.size=0}},14125:function(e,t,n){var r=n(18470),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},82117:function(e,t,n){var r=n(18470);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},67518:function(e,t,n){var r=n(18470);e.exports=function(e){return r(this.__data__,e)>-1}},54705:function(e,t,n){var r=n(18470);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},24785:function(e,t,n){var r=n(1989),i=n(38407),o=n(57071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},11285:function(e,t,n){var r=n(45050);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},96e3:function(e,t,n){var r=n(45050);e.exports=function(e){return r(this,e).get(e)}},49916:function(e,t,n){var r=n(45050);e.exports=function(e){return r(this,e).has(e)}},95265:function(e,t,n){var r=n(45050);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},68776:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},42634:function(e){e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},24523:function(e,t,n){var r=n(88306);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},94536:function(e,t,n){var r=n(10852)(Object,"create");e.exports=r},86916:function(e,t,n){var r=n(5569)(Object.keys,Object);e.exports=r},31167:function(e,t,n){e=n.nmd(e);var r=n(31957),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s},2333:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},55639:function(e,t,n){var r=n(31957),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},90619:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},72385:function(e){e.exports=function(e){return this.__data__.has(e)}},21814:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},37465:function(e,t,n){var r=n(38407);e.exports=function(){this.__data__=new r,this.size=0}},63779:function(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},67599:function(e){e.exports=function(e){return this.__data__.get(e)}},44758:function(e){e.exports=function(e){return this.__data__.has(e)}},34309:function(e,t,n){var r=n(38407),i=n(57071),o=n(83369);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(e,t),this.size=n.size,this}},55514:function(e,t,n){var r=n(24523),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=a},40327:function(e,t,n){var r=n(33448);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},80346:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},77813:function(e){e.exports=function(e,t){return e===t||e!=e&&t!=t}},94654:function(e,t,n){var r=n(21078),i=n(35161);e.exports=function(e,t){return r(i(e,t),1)}},27361:function(e,t,n){var r=n(97786);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},79095:function(e,t,n){var r=n(13),i=n(222);e.exports=function(e,t){return null!=e&&i(e,t,r)}},6557:function(e){e.exports=function(e){return e}},35694:function(e,t,n){var r=n(9454),i=n(37005),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},1469:function(e){var t=Array.isArray;e.exports=t},98612:function(e,t,n){var r=n(23560),i=n(41780);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},44144:function(e,t,n){e=n.nmd(e);var r=n(55639),i=n(95062),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||i;e.exports=c},23560:function(e,t,n){var r=n(44239),i=n(13218);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},93754:function(e,t,n){var r=n(40554);e.exports=function(e){return"number"==typeof e&&e==r(e)}},41780:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},13218:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},33448:function(e,t,n){var r=n(44239),i=n(37005);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},36719:function(e,t,n){var r=n(38749),i=n(7518),o=n(31167),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},3674:function(e,t,n){var r=n(14636),i=n(280),o=n(98612);e.exports=function(e){return o(e)?r(e):i(e)}},35161:function(e,t,n){var r=n(29932),i=n(67206),o=n(69199),a=n(1469);e.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}},88306:function(e,t,n){var r=n(83369);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},50308:function(e){e.exports=function(){}},39601:function(e,t,n){var r=n(40371),i=n(79152),o=n(15403),a=n(40327);e.exports=function(e){return o(e)?r(a(e)):i(e)}},96026:function(e,t,n){var r=n(47445)();e.exports=r},70479:function(e){e.exports=function(){return[]}},95062:function(e){e.exports=function(){return!1}},18601:function(e,t,n){var r=n(14841);e.exports=function(e){return e?Infinity===(e=r(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},40554:function(e,t,n){var r=n(18601);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},14841:function(e,t,n){var r=n(13218),i=n(33448),o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=s.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):a.test(e)?NaN:+e}},79833:function(e,t,n){var r=n(80531);e.exports=function(e){return null==e?"":r(e)}},27418:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,s,c=i(e),u=1;u<arguments.length;u++){for(var l in a=Object(arguments[u]))n.call(a,l)&&(c[l]=a[l]);if(t){s=t(a);for(var d=0;d<s.length;d++)r.call(a,s[d])&&(c[s[d]]=a[s[d]])}}return c}},41474:function(e,t){"use strict";t.default=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))}},73705:function(e,t,n){"use strict";n.r(t);var r=n(41474),i=setTimeout;function o(e){return Boolean(e&&void 0!==e.length)}function a(){}function s(e){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(e,this)}function c(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,s._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void l(t.promise,e)}u(t.promise,r)}else(1===e._state?u:l)(t.promise,e._value)}))):e._deferreds.push(t)}function u(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof s)return e._state=3,e._value=t,void d(e);if("function"==typeof n)return void f((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,d(e)}catch(t){l(e,t)}var r,i}function l(e,t){e._state=2,e._value=t,d(e)}function d(e){2===e._state&&0===e._deferreds.length&&s._immediateFn((function(){e._handled||s._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)c(e,e._deferreds[t]);e._deferreds=null}function h(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function f(e,t){var n=!1;try{e((function(e){n||(n=!0,u(t,e))}),(function(e){n||(n=!0,l(t,e))}))}catch(e){if(n)return;n=!0,l(t,e)}}s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){var n=new this.constructor(a);return c(this,new h(e,t,n)),n},s.prototype.finally=r.default,s.all=function(e){return new s((function(t,n){if(!o(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function a(e,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var s=o.then;if("function"==typeof s)return void s.call(o,(function(t){a(e,t)}),n)}r[e]=o,0==--i&&t(r)}catch(e){n(e)}}for(var s=0;s<r.length;s++)a(s,r[s])}))},s.resolve=function(e){return e&&"object"==typeof e&&e.constructor===s?e:new s((function(t){t(e)}))},s.reject=function(e){return new s((function(t,n){n(e)}))},s.race=function(e){return new s((function(t,n){if(!o(e))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=e.length;r<i;r++)s.resolve(e[r]).then(t,n)}))},s._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){i(e,0)},s._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t.default=s},92703:function(e,t,n){"use strict";var r=n(50414);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},45697:function(e,t,n){e.exports=n(92703)()},50414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},64448:function(e,t,n){"use strict";var r=n(67294),i=n(27418),o=n(63840);function a(e){for(var t=e.message,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return e.message="Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",e}if(!r)throw a(Error(227));var s=null,c={};function u(){if(s)for(var e in c){var t=c[e],n=s.indexOf(e);if(!(-1<n))throw a(Error(96),e);if(!d[n]){if(!t.extractEvents)throw a(Error(97),e);for(var r in d[n]=t,n=t.eventTypes){var i=void 0,o=n[r],u=t,f=r;if(h.hasOwnProperty(f))throw a(Error(99),f);h[f]=o;var p=o.phasedRegistrationNames;if(p){for(i in p)p.hasOwnProperty(i)&&l(p[i],u,f);i=!0}else o.registrationName?(l(o.registrationName,u,f),i=!0):i=!1;if(!i)throw a(Error(98),r,e)}}}}function l(e,t,n){if(f[e])throw a(Error(100),e);f[e]=t,p[e]=t.eventTypes[n].dependencies}var d=[],h={},f={},p={};function g(e,t,n,r,i,o,a,s,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var m=!1,v=null,y=!1,b=null,w={onError:function(e){m=!0,v=e}};function E(e,t,n,r,i,o,a,s,c){m=!1,v=null,g.apply(w,arguments)}var S=null,T=null,_=null;function P(e,t,n){var r=e.type||"unknown-event";e.currentTarget=_(n),function(e,t,n,r,i,o,s,c,u){if(E.apply(this,arguments),m){if(!m)throw a(Error(198));var l=v;m=!1,v=null,y||(y=!0,b=l)}}(r,t,void 0,e),e.currentTarget=null}function C(e,t){if(null==t)throw a(Error(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function R(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var O=null;function k(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)P(e,t[r],n[r]);else t&&P(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function I(e){if(null!==e&&(O=C(O,e)),e=O,O=null,e){if(R(e,k),O)throw a(Error(95));if(y)throw e=b,y=!1,b=null,e}}var x={injectEventPluginOrder:function(e){if(s)throw a(Error(101));s=Array.prototype.slice.call(e),u()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!c.hasOwnProperty(t)||c[t]!==r){if(c[t])throw a(Error(102),t);c[t]=r,n=!0}}n&&u()}};function A(e,t){var n=e.stateNode;if(!n)return null;var r=S(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw a(Error(231),t,typeof n);return n}var L=Math.random().toString(36).slice(2),M="__reactInternalInstance$"+L,N="__reactEventHandlers$"+L;function D(e){if(e[M])return e[M];for(;!e[M];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[M]).tag||6===e.tag?e:null}function F(e){return!(e=e[M])||5!==e.tag&&6!==e.tag?null:e}function B(e){if(5===e.tag||6===e.tag)return e.stateNode;throw a(Error(33))}function U(e){return e[N]||null}function j(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function H(e,t,n){(t=A(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=C(n._dispatchListeners,t),n._dispatchInstances=C(n._dispatchInstances,e))}function z(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=j(t);for(t=n.length;0<t--;)H(n[t],"captured",e);for(t=0;t<n.length;t++)H(n[t],"bubbled",e)}}function V(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=A(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=C(n._dispatchListeners,t),n._dispatchInstances=C(n._dispatchInstances,e))}function G(e){e&&e.dispatchConfig.registrationName&&V(e._targetInst,null,e)}function W(e){R(e,z)}var q=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement);function K(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Y={animationend:K("Animation","AnimationEnd"),animationiteration:K("Animation","AnimationIteration"),animationstart:K("Animation","AnimationStart"),transitionend:K("Transition","TransitionEnd")},X={},Z={};function $(e){if(X[e])return X[e];if(!Y[e])return e;var t,n=Y[e];for(t in n)if(n.hasOwnProperty(t)&&t in Z)return X[e]=n[t];return e}q&&(Z=document.createElement("div").style,"AnimationEvent"in window||(delete Y.animationend.animation,delete Y.animationiteration.animation,delete Y.animationstart.animation),"TransitionEvent"in window||delete Y.transitionend.transition);var J=$("animationend"),Q=$("animationiteration"),ee=$("animationstart"),te=$("transitionend"),ne="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),re=null,ie=null,oe=null;function ae(){if(oe)return oe;var e,t,n=ie,r=n.length,i="value"in re?re.value:re.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return oe=i.slice(e,1<t?1-t:void 0)}function se(){return!0}function ce(){return!1}function ue(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?se:ce,this.isPropagationStopped=ce,this}function le(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function de(e){if(!(e instanceof this))throw a(Error(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function he(e){e.eventPool=[],e.getPooled=le,e.release=de}i(ue.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=se)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=se)},persist:function(){this.isPersistent=se},isPersistent:ce,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ce,this._dispatchInstances=this._dispatchListeners=null}}),ue.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},ue.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,he(n),n},he(ue);var fe=ue.extend({data:null}),pe=ue.extend({data:null}),ge=[9,13,27,32],me=q&&"CompositionEvent"in window,ve=null;q&&"documentMode"in document&&(ve=document.documentMode);var ye=q&&"TextEvent"in window&&!ve,be=q&&(!me||ve&&8<ve&&11>=ve),we=String.fromCharCode(32),Ee={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Se=!1;function Te(e,t){switch(e){case"keyup":return-1!==ge.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function _e(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Pe=!1,Ce={eventTypes:Ee,extractEvents:function(e,t,n,r){var i=void 0,o=void 0;if(me)e:{switch(e){case"compositionstart":i=Ee.compositionStart;break e;case"compositionend":i=Ee.compositionEnd;break e;case"compositionupdate":i=Ee.compositionUpdate;break e}i=void 0}else Pe?Te(e,n)&&(i=Ee.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=Ee.compositionStart);return i?(be&&"ko"!==n.locale&&(Pe||i!==Ee.compositionStart?i===Ee.compositionEnd&&Pe&&(o=ae()):(ie="value"in(re=r)?re.value:re.textContent,Pe=!0)),i=fe.getPooled(i,t,n,r),(o||null!==(o=_e(n)))&&(i.data=o),W(i),o=i):o=null,(e=ye?function(e,t){switch(e){case"compositionend":return _e(t);case"keypress":return 32!==t.which?null:(Se=!0,we);case"textInput":return(e=t.data)===we&&Se?null:e;default:return null}}(e,n):function(e,t){if(Pe)return"compositionend"===e||!me&&Te(e,t)?(e=ae(),oe=ie=re=null,Pe=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return be&&"ko"!==t.locale?null:t.data}}(e,n))?((t=pe.getPooled(Ee.beforeInput,t,n,r)).data=e,W(t)):t=null,null===o?t:null===t?o:[o,t]}},Re=null,Oe=null,ke=null;function Ie(e){if(e=T(e)){if("function"!=typeof Re)throw a(Error(280));var t=S(e.stateNode);Re(e.stateNode,e.type,t)}}function xe(e){Oe?ke?ke.push(e):ke=[e]:Oe=e}function Ae(){if(Oe){var e=Oe,t=ke;if(ke=Oe=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Le(e,t){return e(t)}function Me(e,t,n,r){return e(t,n,r)}function Ne(){}var De=Le,Fe=!1;function Be(){null===Oe&&null===ke||(Ne(),Ae())}var Ue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function je(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ue[e.type]:"textarea"===t}function He(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ze(e){if(!q)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}function Ve(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ge(e){e._valueTracker||(e._valueTracker=function(e){var t=Ve(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function We(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ve(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var qe=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;qe.hasOwnProperty("ReactCurrentDispatcher")||(qe.ReactCurrentDispatcher={current:null}),qe.hasOwnProperty("ReactCurrentBatchConfig")||(qe.ReactCurrentBatchConfig={suspense:null});var Ke=/^(.*)[\\\/]/,Ye="function"==typeof Symbol&&Symbol.for,Xe=Ye?Symbol.for("react.element"):60103,Ze=Ye?Symbol.for("react.portal"):60106,$e=Ye?Symbol.for("react.fragment"):60107,Je=Ye?Symbol.for("react.strict_mode"):60108,Qe=Ye?Symbol.for("react.profiler"):60114,et=Ye?Symbol.for("react.provider"):60109,tt=Ye?Symbol.for("react.context"):60110,nt=Ye?Symbol.for("react.concurrent_mode"):60111,rt=Ye?Symbol.for("react.forward_ref"):60112,it=Ye?Symbol.for("react.suspense"):60113,ot=Ye?Symbol.for("react.suspense_list"):60120,at=Ye?Symbol.for("react.memo"):60115,st=Ye?Symbol.for("react.lazy"):60116;Ye&&Symbol.for("react.fundamental"),Ye&&Symbol.for("react.responder");var ct="function"==typeof Symbol&&Symbol.iterator;function ut(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=ct&&e[ct]||e["@@iterator"])?e:null}function lt(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case $e:return"Fragment";case Ze:return"Portal";case Qe:return"Profiler";case Je:return"StrictMode";case it:return"Suspense";case ot:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case tt:return"Context.Consumer";case et:return"Context.Provider";case rt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case at:return lt(e.type);case st:if(e=1===e._status?e._result:null)return lt(e)}return null}function dt(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=lt(e.type);n=null,r&&(n=lt(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(Ke,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}var ht=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ft=Object.prototype.hasOwnProperty,pt={},gt={};function mt(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){vt[e]=new mt(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];vt[t]=new mt(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){vt[e]=new mt(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){vt[e]=new mt(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){vt[e]=new mt(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){vt[e]=new mt(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){vt[e]=new mt(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){vt[e]=new mt(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){vt[e]=new mt(e,5,!1,e.toLowerCase(),null,!1)}));var yt=/[\-:]([a-z])/g;function bt(e){return e[1].toUpperCase()}function wt(e,t,n,r){var i=vt.hasOwnProperty(t)?vt[t]:null;(null!==i?0===i.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!ft.call(gt,e)||!ft.call(pt,e)&&(ht.test(e)?gt[e]=!0:(pt[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function Et(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function St(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Tt(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Et(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function _t(e,t){null!=(t=t.checked)&&wt(e,"checked",t,!1)}function Pt(e,t){_t(e,t);var n=Et(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Rt(e,t.type,n):t.hasOwnProperty("defaultValue")&&Rt(e,t.type,Et(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ct(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Rt(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(yt,bt);vt[t]=new mt(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(yt,bt);vt[t]=new mt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(yt,bt);vt[t]=new mt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){vt[e]=new mt(e,1,!1,e.toLowerCase(),null,!1)})),vt.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){vt[e]=new mt(e,1,!1,e.toLowerCase(),null,!0)}));var Ot={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function kt(e,t,n){return(e=ue.getPooled(Ot.change,e,t,n)).type="change",xe(n),W(e),e}var It=null,xt=null;function At(e){I(e)}function Lt(e){if(We(B(e)))return e}function Mt(e,t){if("change"===e)return t}var Nt=!1;function Dt(){It&&(It.detachEvent("onpropertychange",Ft),xt=It=null)}function Ft(e){if("value"===e.propertyName&&Lt(xt))if(e=kt(xt,e,He(e)),Fe)I(e);else{Fe=!0;try{Le(At,e)}finally{Fe=!1,Be()}}}function Bt(e,t,n){"focus"===e?(Dt(),xt=n,(It=t).attachEvent("onpropertychange",Ft)):"blur"===e&&Dt()}function Ut(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Lt(xt)}function jt(e,t){if("click"===e)return Lt(t)}function Ht(e,t){if("input"===e||"change"===e)return Lt(t)}q&&(Nt=ze("input")&&(!document.documentMode||9<document.documentMode));var zt={eventTypes:Ot,_isInputEventSupported:Nt,extractEvents:function(e,t,n,r){var i=t?B(t):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=Mt:je(i)?Nt?o=Ht:(o=Ut,a=Bt):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=jt),o&&(o=o(e,t)))return kt(o,n,r);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Rt(i,"number",i.value)}},Vt=ue.extend({view:null,detail:null}),Gt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Gt[e])&&!!t[e]}function qt(){return Wt}var Kt=0,Yt=0,Xt=!1,Zt=!1,$t=Vt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:qt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Kt;return Kt=e.screenX,Xt?"mousemove"===e.type?e.screenX-t:0:(Xt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Yt;return Yt=e.screenY,Zt?"mousemove"===e.type?e.screenY-t:0:(Zt=!0,0)}}),Jt=$t.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Qt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},en={eventTypes:Qt,extractEvents:function(e,t,n,r){var i="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=t,t=(t=n.relatedTarget||n.toElement)?D(t):null):o=null,o===t)return null;var a=void 0,s=void 0,c=void 0,u=void 0;"mouseout"===e||"mouseover"===e?(a=$t,s=Qt.mouseLeave,c=Qt.mouseEnter,u="mouse"):"pointerout"!==e&&"pointerover"!==e||(a=Jt,s=Qt.pointerLeave,c=Qt.pointerEnter,u="pointer");var l=null==o?i:B(o);if(i=null==t?i:B(t),(e=a.getPooled(s,o,n,r)).type=u+"leave",e.target=l,e.relatedTarget=i,(n=a.getPooled(c,t,n,r)).type=u+"enter",n.target=i,n.relatedTarget=l,r=t,o&&r)e:{for(i=r,u=0,a=t=o;a;a=j(a))u++;for(a=0,c=i;c;c=j(c))a++;for(;0<u-a;)t=j(t),u--;for(;0<a-u;)i=j(i),a--;for(;u--;){if(t===i||t===i.alternate)break e;t=j(t),i=j(i)}t=null}else t=null;for(i=t,t=[];o&&o!==i&&(null===(u=o.alternate)||u!==i);)t.push(o),o=j(o);for(o=[];r&&r!==i&&(null===(u=r.alternate)||u!==i);)o.push(r),r=j(r);for(r=0;r<t.length;r++)V(t[r],"bubbled",e);for(r=o.length;0<r--;)V(o[r],"captured",n);return[e,n]}};function tn(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var nn=Object.prototype.hasOwnProperty;function rn(e,t){if(tn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!nn.call(t,n[r])||!tn(e[n[r]],t[n[r]]))return!1;return!0}function on(e,t){return{responder:e,props:t}}function an(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function sn(e){if(2!==an(e))throw a(Error(188))}function cn(e){if(e=function(e){var t=e.alternate;if(!t){if(3===(t=an(e)))throw a(Error(188));return 1===t?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return sn(i),e;if(o===r)return sn(i),t;o=o.sibling}throw a(Error(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,c=i.child;c;){if(c===n){s=!0,n=i,r=o;break}if(c===r){s=!0,r=i,n=o;break}c=c.sibling}if(!s){for(c=o.child;c;){if(c===n){s=!0,n=o,r=i;break}if(c===r){s=!0,r=o,n=i;break}c=c.sibling}if(!s)throw a(Error(189))}}if(n.alternate!==r)throw a(Error(190))}if(3!==n.tag)throw a(Error(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}new Map,new Map,new Set,new Map;var un=ue.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ln=ue.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),dn=Vt.extend({relatedTarget:null});function hn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}for(var fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gn=Vt.extend({key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=hn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pn[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:qt,charCode:function(e){return"keypress"===e.type?hn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?hn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),mn=$t.extend({dataTransfer:null}),vn=Vt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:qt}),yn=ue.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),bn=$t.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),wn=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[J,"animationEnd",2],[Q,"animationIteration",2],[ee,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[te,"transitionEnd",2],["waiting","waiting",2]],En={},Sn={},Tn=0;Tn<wn.length;Tn++){var _n=wn[Tn],Pn=_n[0],Cn=_n[1],Rn=_n[2],On="on"+(Cn[0].toUpperCase()+Cn.slice(1)),kn={phasedRegistrationNames:{bubbled:On,captured:On+"Capture"},dependencies:[Pn],eventPriority:Rn};En[Cn]=kn,Sn[Pn]=kn}var In={eventTypes:En,getEventPriority:function(e){return void 0!==(e=Sn[e])?e.eventPriority:2},extractEvents:function(e,t,n,r){var i=Sn[e];if(!i)return null;switch(e){case"keypress":if(0===hn(n))return null;case"keydown":case"keyup":e=gn;break;case"blur":case"focus":e=dn;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=$t;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=vn;break;case J:case Q:case ee:e=un;break;case te:e=yn;break;case"scroll":e=Vt;break;case"wheel":e=bn;break;case"copy":case"cut":case"paste":e=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Jt;break;default:e=ue}return W(t=e.getPooled(i,t,n,r)),t}},xn=In.getEventPriority,An=[];function Ln(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=D(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=He(e.nativeEvent);r=e.topLevelType;for(var o=e.nativeEvent,a=null,s=0;s<d.length;s++){var c=d[s];c&&(c=c.extractEvents(r,t,o,i))&&(a=C(a,c))}I(a)}}var Mn=!0;function Nn(e,t){Dn(t,e,!1)}function Dn(e,t,n){switch(xn(t)){case 0:var r=Fn.bind(null,t,1);break;case 1:r=Bn.bind(null,t,1);break;default:r=Un.bind(null,t,1)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Fn(e,t,n){Fe||Ne();var r=Un,i=Fe;Fe=!0;try{Me(r,e,t,n)}finally{(Fe=i)||Be()}}function Bn(e,t,n){Un(e,t,n)}function Un(e,t,n){if(Mn){if(null===(t=D(t=He(n)))||"number"!=typeof t.tag||2===an(t)||(t=null),An.length){var r=An.pop();r.topLevelType=e,r.nativeEvent=n,r.targetInst=t,e=r}else e={topLevelType:e,nativeEvent:n,targetInst:t,ancestors:[]};try{if(n=e,Fe)Ln(n);else{Fe=!0;try{De(Ln,n,void 0)}finally{Fe=!1,Be()}}}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>An.length&&An.push(e)}}}var jn=new("function"==typeof WeakMap?WeakMap:Map);function Hn(e){var t=jn.get(e);return void 0===t&&(t=new Set,jn.set(e,t)),t}function zn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Vn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gn(e,t){var n,r=Vn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vn(r)}}function Wn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Wn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function qn(){for(var e=window,t=zn();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=zn((e=t.contentWindow).document)}return t}function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Yn=q&&"documentMode"in document&&11>=document.documentMode,Xn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Zn=null,$n=null,Jn=null,Qn=!1;function er(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Qn||null==Zn||Zn!==zn(n)?null:(n="selectionStart"in(n=Zn)&&Kn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Jn&&rn(Jn,n)?null:(Jn=n,(e=ue.getPooled(Xn.select,$n,e,t)).type="select",e.target=Zn,W(e),e))}var tr={eventTypes:Xn,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=Hn(o),i=p.onSelect;for(var a=0;a<i.length;a++)if(!o.has(i[a])){o=!1;break e}o=!0}i=!o}if(i)return null;switch(o=t?B(t):window,e){case"focus":(je(o)||"true"===o.contentEditable)&&(Zn=o,$n=t,Jn=null);break;case"blur":Jn=$n=Zn=null;break;case"mousedown":Qn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Qn=!1,er(n,r);case"selectionchange":if(Yn)break;case"keydown":case"keyup":return er(n,r)}return null}};function nr(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function rr(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Et(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ir(e,t){if(null!=t.dangerouslySetInnerHTML)throw a(Error(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function or(e,t){var n=t.value;if(null==n){if(n=t.defaultValue,null!=(t=t.children)){if(null!=n)throw a(Error(92));if(Array.isArray(t)){if(!(1>=t.length))throw a(Error(93));t=t[0]}n=t}null==n&&(n="")}e._wrapperState={initialValue:Et(n)}}function ar(e,t){var n=Et(t.value),r=Et(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function sr(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}x.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),S=U,T=F,_=B,x.injectEventPluginsByName({SimpleEventPlugin:In,EnterLeaveEventPlugin:en,ChangeEventPlugin:zt,SelectEventPlugin:tr,BeforeInputEventPlugin:Ce});var cr="http://www.w3.org/1999/xhtml";function ur(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lr(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ur(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var dr,hr=void 0,fr=(dr=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((hr=hr||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=hr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return dr(e,t)}))}:dr);function pr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var gr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mr=["Webkit","ms","Moz","O"];function vr(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||gr.hasOwnProperty(e)&&gr[e]?(""+t).trim():t+"px"}function yr(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=vr(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(gr).forEach((function(e){mr.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gr[t]=gr[e]}))}));var br=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wr(e,t){if(t){if(br[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw a(Error(137),e,"");if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw a(Error(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw a(Error(61))}if(null!=t.style&&"object"!=typeof t.style)throw a(Error(62),"")}}function Er(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Sr(e,t){var n=Hn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=p[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.has(i)){switch(i){case"scroll":Dn(e,"scroll",!0);break;case"focus":case"blur":Dn(e,"focus",!0),Dn(e,"blur",!0),n.add("blur"),n.add("focus");break;case"cancel":case"close":ze(i)&&Dn(e,i,!0);break;case"invalid":case"submit":case"reset":break;default:-1===ne.indexOf(i)&&Nn(i,e)}n.add(i)}}}function Tr(){}var _r=null,Pr=null;function Cr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Rr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Or="function"==typeof setTimeout?setTimeout:void 0,kr="function"==typeof clearTimeout?clearTimeout:void 0;function Ir(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}new Set;var xr=[],Ar=-1;function Lr(e){0>Ar||(e.current=xr[Ar],xr[Ar]=null,Ar--)}function Mr(e,t){Ar++,xr[Ar]=e.current,e.current=t}var Nr={},Dr={current:Nr},Fr={current:!1},Br=Nr;function Ur(e,t){var n=e.type.contextTypes;if(!n)return Nr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function jr(e){return null!=e.childContextTypes}function Hr(e){Lr(Fr),Lr(Dr)}function zr(e){Lr(Fr),Lr(Dr)}function Vr(e,t,n){if(Dr.current!==Nr)throw a(Error(168));Mr(Dr,t),Mr(Fr,n)}function Gr(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw a(Error(108),lt(t)||"Unknown",o);return i({},n,r)}function Wr(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Nr,Br=Dr.current,Mr(Dr,t),Mr(Fr,Fr.current),!0}function qr(e,t,n){var r=e.stateNode;if(!r)throw a(Error(169));n?(t=Gr(e,t,Br),r.__reactInternalMemoizedMergedChildContext=t,Lr(Fr),Lr(Dr),Mr(Dr,t)):Lr(Fr),Mr(Fr,n)}var Kr=o.unstable_runWithPriority,Yr=o.unstable_scheduleCallback,Xr=o.unstable_cancelCallback,Zr=o.unstable_shouldYield,$r=o.unstable_requestPaint,Jr=o.unstable_now,Qr=o.unstable_getCurrentPriorityLevel,ei=o.unstable_ImmediatePriority,ti=o.unstable_UserBlockingPriority,ni=o.unstable_NormalPriority,ri=o.unstable_LowPriority,ii=o.unstable_IdlePriority,oi={},ai=void 0!==$r?$r:function(){},si=null,ci=null,ui=!1,li=Jr(),di=1e4>li?Jr:function(){return Jr()-li};function hi(){switch(Qr()){case ei:return 99;case ti:return 98;case ni:return 97;case ri:return 96;case ii:return 95;default:throw a(Error(332))}}function fi(e){switch(e){case 99:return ei;case 98:return ti;case 97:return ni;case 96:return ri;case 95:return ii;default:throw a(Error(332))}}function pi(e,t){return e=fi(e),Kr(e,t)}function gi(e,t,n){return e=fi(e),Yr(e,t,n)}function mi(e){return null===si?(si=[e],ci=Yr(ei,yi)):si.push(e),oi}function vi(){null!==ci&&Xr(ci),yi()}function yi(){if(!ui&&null!==si){ui=!0;var e=0;try{var t=si;pi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),si=null}catch(t){throw null!==si&&(si=si.slice(e+1)),Yr(ei,vi),t}finally{ui=!1}}}function bi(e,t){return 1073741823===t?99:1===t?95:0>=(e=10*(1073741821-t)-10*(1073741821-e))?99:250>=e?98:5250>=e?97:95}function wi(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Ei={current:null},Si=null,Ti=null,_i=null;function Pi(){_i=Ti=Si=null}function Ci(e,t){var n=e.type._context;Mr(Ei,n._currentValue),n._currentValue=t}function Ri(e){var t=Ei.current;Lr(Ei),e.type._context._currentValue=t}function Oi(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function ki(e,t){Si=e,_i=Ti=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(na=!0),e.firstContext=null)}function Ii(e,t){if(_i!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(_i=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ti){if(null===Si)throw a(Error(308));Ti=t,Si.dependencies={expirationTime:0,firstContext:t,responders:null}}else Ti=Ti.next=t;return e._currentValue}var xi=!1;function Ai(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Li(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Mi(e,t){return{expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Ni(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function Di(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=Ai(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=Ai(e.memoizedState),i=n.updateQueue=Ai(n.memoizedState)):r=e.updateQueue=Li(i):null===i&&(i=n.updateQueue=Li(r));null===i||r===i?Ni(r,t):null===r.lastUpdate||null===i.lastUpdate?(Ni(r,t),Ni(i,t)):(Ni(r,t),i.lastUpdate=t)}function Fi(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=Ai(e.memoizedState):Bi(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function Bi(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=Li(t)),t}function Ui(e,t,n,r,o,a){switch(n.tag){case 1:return"function"==typeof(e=n.payload)?e.call(a,r,o):e;case 3:e.effectTag=-2049&e.effectTag|64;case 0:if(null==(o="function"==typeof(e=n.payload)?e.call(a,r,o):e))break;return i({},r,o);case 2:xi=!0}return r}function ji(e,t,n,r,i){xi=!1;for(var o=(t=Bi(e,t)).baseState,a=null,s=0,c=t.firstUpdate,u=o;null!==c;){var l=c.expirationTime;l<i?(null===a&&(a=c,o=u),s<l&&(s=l)):(Ss(l,c.suspenseConfig),u=Ui(e,0,c,u,n,r),null!==c.callback&&(e.effectTag|=32,c.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=c:(t.lastEffect.nextEffect=c,t.lastEffect=c))),c=c.next}for(l=null,c=t.firstCapturedUpdate;null!==c;){var d=c.expirationTime;d<i?(null===l&&(l=c,null===a&&(o=u)),s<d&&(s=d)):(u=Ui(e,0,c,u,n,r),null!==c.callback&&(e.effectTag|=32,c.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=c:(t.lastCapturedEffect.nextEffect=c,t.lastCapturedEffect=c))),c=c.next}null===a&&(t.lastUpdate=null),null===l?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===l&&(o=u),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=l,e.expirationTime=s,e.memoizedState=u}function Hi(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),zi(t.firstEffect,n),t.firstEffect=t.lastEffect=null,zi(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function zi(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;if("function"!=typeof n)throw a(Error(191),n);n.call(r)}e=e.nextEffect}}var Vi=qe.ReactCurrentBatchConfig,Gi=(new r.Component).refs;function Wi(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var qi={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===an(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=us(),i=Vi.suspense;(i=Mi(r=ls(r,e,i),i)).payload=t,null!=n&&(i.callback=n),Di(e,i),hs(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=us(),i=Vi.suspense;(i=Mi(r=ls(r,e,i),i)).tag=1,i.payload=t,null!=n&&(i.callback=n),Di(e,i),hs(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=us(),r=Vi.suspense;(r=Mi(n=ls(n,e,r),r)).tag=2,null!=t&&(r.callback=t),Di(e,r),hs(e,n)}};function Ki(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!(t.prototype&&t.prototype.isPureReactComponent&&rn(n,r)&&rn(i,o))}function Yi(e,t,n){var r=!1,i=Nr,o=t.contextType;return"object"==typeof o&&null!==o?o=Ii(o):(i=jr(t)?Br:Dr.current,o=(r=null!=(r=t.contextTypes))?Ur(e,i):Nr),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=qi,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Xi(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qi.enqueueReplaceState(t,t.state,null)}function Zi(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Gi;var o=t.contextType;"object"==typeof o&&null!==o?i.context=Ii(o):(o=jr(t)?Br:Dr.current,i.context=Ur(e,o)),null!==(o=e.updateQueue)&&(ji(e,o,n,i,r),i.state=e.memoizedState),"function"==typeof(o=t.getDerivedStateFromProps)&&(Wi(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&qi.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(ji(e,o,n,i,r),i.state=e.memoizedState)),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var $i=Array.isArray;function Ji(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){n=n._owner;var r=void 0;if(n){if(1!==n.tag)throw a(Error(309));r=n.stateNode}if(!r)throw a(Error(147),e);var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===Gi&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!=typeof e)throw a(Error(284));if(!n._owner)throw a(Error(290),e)}return e}function Qi(e,t){if("textarea"!==e.type)throw a(Error(31),"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function eo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=Us(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=zs(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Ji(e,t,n),r.return=e,r):((r=js(n.type,n.key,n.props,null,e.mode,r)).ref=Ji(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vs(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Hs(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=zs(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Xe:return(n=js(t.type,t.key,t.props,null,e.mode,n)).ref=Ji(e,null,t),n.return=e,n;case Ze:return(t=Vs(t,e.mode,n)).return=e,t}if($i(t)||ut(t))return(t=Hs(t,e.mode,n,null)).return=e,t;Qi(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:c(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Xe:return n.key===i?n.type===$e?d(e,t,n.props.children,r,i):u(e,t,n,r):null;case Ze:return n.key===i?l(e,t,n,r):null}if($i(n)||ut(n))return null!==i?null:d(e,t,n,r,null);Qi(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Xe:return e=e.get(null===r.key?n:r.key)||null,r.type===$e?d(t,e,r.props.children,i,r.key):u(t,e,r,i);case Ze:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if($i(r)||ut(r))return d(t,e=e.get(n)||null,r,i,null);Qi(t,r)}return null}function g(i,a,s,c){for(var u=null,l=null,d=a,g=a=0,m=null;null!==d&&g<s.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var v=f(i,d,s[g],c);if(null===v){null===d&&(d=m);break}e&&d&&null===v.alternate&&t(i,d),a=o(v,a,g),null===l?u=v:l.sibling=v,l=v,d=m}if(g===s.length)return n(i,d),u;if(null===d){for(;g<s.length;g++)null!==(d=h(i,s[g],c))&&(a=o(d,a,g),null===l?u=d:l.sibling=d,l=d);return u}for(d=r(i,d);g<s.length;g++)null!==(m=p(d,i,g,s[g],c))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),a=o(m,a,g),null===l?u=m:l.sibling=m,l=m);return e&&d.forEach((function(e){return t(i,e)})),u}function m(i,s,c,u){var l=ut(c);if("function"!=typeof l)throw a(Error(150));if(null==(c=l.call(c)))throw a(Error(151));for(var d=l=null,g=s,m=s=0,v=null,y=c.next();null!==g&&!y.done;m++,y=c.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=f(i,g,y.value,u);if(null===b){null===g&&(g=v);break}e&&g&&null===b.alternate&&t(i,g),s=o(b,s,m),null===d?l=b:d.sibling=b,d=b,g=v}if(y.done)return n(i,g),l;if(null===g){for(;!y.done;m++,y=c.next())null!==(y=h(i,y.value,u))&&(s=o(y,s,m),null===d?l=y:d.sibling=y,d=y);return l}for(g=r(i,g);!y.done;m++,y=c.next())null!==(y=p(g,i,m,y.value,u))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),s=o(y,s,m),null===d?l=y:d.sibling=y,d=y);return e&&g.forEach((function(e){return t(i,e)})),l}return function(e,r,o,c){var u="object"==typeof o&&null!==o&&o.type===$e&&null===o.key;u&&(o=o.props.children);var l="object"==typeof o&&null!==o;if(l)switch(o.$$typeof){case Xe:e:{for(l=o.key,u=r;null!==u;){if(u.key===l){if(7===u.tag?o.type===$e:u.elementType===o.type){n(e,u.sibling),(r=i(u,o.type===$e?o.props.children:o.props)).ref=Ji(e,u,o),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}o.type===$e?((r=Hs(o.props.children,e.mode,c,o.key)).return=e,e=r):((c=js(o.type,o.key,o.props,null,e.mode,c)).ref=Ji(e,r,o),c.return=e,e=c)}return s(e);case Ze:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Vs(o,e.mode,c)).return=e,e=r}return s(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=zs(o,e.mode,c)).return=e,e=r),s(e);if($i(o))return g(e,r,o,c);if(ut(o))return m(e,r,o,c);if(l&&Qi(e,o),void 0===o&&!u)switch(e.tag){case 1:case 0:throw e=e.type,a(Error(152),e.displayName||e.name||"Component")}return n(e,r)}}var to=eo(!0),no=eo(!1),ro={},io={current:ro},oo={current:ro},ao={current:ro};function so(e){if(e===ro)throw a(Error(174));return e}function co(e,t){Mr(ao,t),Mr(oo,e),Mr(io,ro);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lr(null,"");break;default:t=lr(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}Lr(io),Mr(io,t)}function uo(e){Lr(io),Lr(oo),Lr(ao)}function lo(e){so(ao.current);var t=so(io.current),n=lr(t,e.type);t!==n&&(Mr(oo,e),Mr(io,n))}function ho(e){oo.current===e&&(Lr(io),Lr(oo))}var fo={current:0};function po(e){for(var t=e;null!==t;){if(13===t.tag){if(null!==t.memoizedState)return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var go=qe.ReactCurrentDispatcher,mo=0,vo=null,yo=null,bo=null,wo=null,Eo=null,So=null,To=0,_o=null,Po=0,Co=!1,Ro=null,Oo=0;function ko(){throw a(Error(321))}function Io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!tn(e[n],t[n]))return!1;return!0}function xo(e,t,n,r,i,o){if(mo=o,vo=t,bo=null!==e?e.memoizedState:null,go.current=null===bo?Go:Wo,t=n(r,i),Co){do{Co=!1,Oo+=1,bo=null!==e?e.memoizedState:null,So=wo,_o=Eo=yo=null,go.current=Wo,t=n(r,i)}while(Co);Ro=null,Oo=0}if(go.current=Vo,(e=vo).memoizedState=wo,e.expirationTime=To,e.updateQueue=_o,e.effectTag|=Po,e=null!==yo&&null!==yo.next,mo=0,So=Eo=wo=bo=yo=vo=null,To=0,_o=null,Po=0,e)throw a(Error(300));return t}function Ao(){go.current=Vo,mo=0,So=Eo=wo=bo=yo=vo=null,To=0,_o=null,Po=0,Co=!1,Ro=null,Oo=0}function Lo(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Eo?wo=Eo=e:Eo=Eo.next=e,Eo}function Mo(){if(null!==So)So=(Eo=So).next,bo=null!==(yo=bo)?yo.next:null;else{if(null===bo)throw a(Error(310));var e={memoizedState:(yo=bo).memoizedState,baseState:yo.baseState,queue:yo.queue,baseUpdate:yo.baseUpdate,next:null};Eo=null===Eo?wo=e:Eo.next=e,bo=yo.next}return Eo}function No(e,t){return"function"==typeof t?t(e):t}function Do(e){var t=Mo(),n=t.queue;if(null===n)throw a(Error(311));if(n.lastRenderedReducer=e,0<Oo){var r=n.dispatch;if(null!==Ro){var i=Ro.get(n);if(void 0!==i){Ro.delete(n);var o=t.memoizedState;do{o=e(o,i.action),i=i.next}while(null!==i);return tn(o,t.memoizedState)||(na=!0),t.memoizedState=o,t.baseUpdate===n.last&&(t.baseState=o),n.lastRenderedState=o,[o,r]}}return[t.memoizedState,r]}r=n.last;var s=t.baseUpdate;if(o=t.baseState,null!==s?(null!==r&&(r.next=null),r=s.next):r=null!==r?r.next:null,null!==r){var c=i=null,u=r,l=!1;do{var d=u.expirationTime;d<mo?(l||(l=!0,c=s,i=o),d>To&&(To=d)):(Ss(d,u.suspenseConfig),o=u.eagerReducer===e?u.eagerState:e(o,u.action)),s=u,u=u.next}while(null!==u&&u!==r);l||(c=s,i=o),tn(o,t.memoizedState)||(na=!0),t.memoizedState=o,t.baseUpdate=c,t.baseState=i,n.lastRenderedState=o}return[t.memoizedState,n.dispatch]}function Fo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===_o?(_o={lastEffect:null}).lastEffect=e.next=e:null===(t=_o.lastEffect)?_o.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,_o.lastEffect=e),e}function Bo(e,t,n,r){var i=Lo();Po|=e,i.memoizedState=Fo(t,n,void 0,void 0===r?null:r)}function Uo(e,t,n,r){var i=Mo();r=void 0===r?null:r;var o=void 0;if(null!==yo){var a=yo.memoizedState;if(o=a.destroy,null!==r&&Io(r,a.deps))return void Fo(0,n,o,r)}Po|=e,i.memoizedState=Fo(t,n,o,r)}function jo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ho(){}function zo(e,t,n){if(!(25>Oo))throw a(Error(301));var r=e.alternate;if(e===vo||null!==r&&r===vo)if(Co=!0,e={expirationTime:mo,suspenseConfig:null,action:n,eagerReducer:null,eagerState:null,next:null},null===Ro&&(Ro=new Map),void 0===(n=Ro.get(t)))Ro.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{var i=us(),o=Vi.suspense;o={expirationTime:i=ls(i,e,o),suspenseConfig:o,action:n,eagerReducer:null,eagerState:null,next:null};var s=t.last;if(null===s)o.next=o;else{var c=s.next;null!==c&&(o.next=c),s.next=o}if(t.last=o,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var u=t.lastRenderedState,l=r(u,n);if(o.eagerReducer=r,o.eagerState=l,tn(l,u))return}catch(e){}hs(e,i)}}var Vo={readContext:Ii,useCallback:ko,useContext:ko,useEffect:ko,useImperativeHandle:ko,useLayoutEffect:ko,useMemo:ko,useReducer:ko,useRef:ko,useState:ko,useDebugValue:ko,useResponder:ko},Go={readContext:Ii,useCallback:function(e,t){return Lo().memoizedState=[e,void 0===t?null:t],e},useContext:Ii,useEffect:function(e,t){return Bo(516,192,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Bo(4,36,jo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4,36,e,t)},useMemo:function(e,t){var n=Lo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Lo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=zo.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Lo().memoizedState=e},useState:function(e){var t=Lo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:No,lastRenderedState:e}).dispatch=zo.bind(null,vo,e),[t.memoizedState,e]},useDebugValue:Ho,useResponder:on},Wo={readContext:Ii,useCallback:function(e,t){var n=Mo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)},useContext:Ii,useEffect:function(e,t){return Uo(516,192,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Uo(4,36,jo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Uo(4,36,e,t)},useMemo:function(e,t){var n=Mo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:Do,useRef:function(){return Mo().memoizedState},useState:function(e){return Do(No)},useDebugValue:Ho,useResponder:on},qo=null,Ko=null,Yo=!1;function Xo(e,t){var n=Fs(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Zo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function $o(e){if(Yo){var t=Ko;if(t){var n=t;if(!Zo(e,t)){if(!(t=Ir(n.nextSibling))||!Zo(e,t))return e.effectTag|=2,Yo=!1,void(qo=e);Xo(qo,n)}qo=e,Ko=Ir(t.firstChild)}else e.effectTag|=2,Yo=!1,qo=e}}function Jo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e.return;qo=e}function Qo(e){if(e!==qo)return!1;if(!Yo)return Jo(e),Yo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Rr(t,e.memoizedProps))for(t=Ko;t;)Xo(e,t),t=Ir(t.nextSibling);return Jo(e),Ko=qo?Ir(e.stateNode.nextSibling):null,!0}function ea(){Ko=qo=null,Yo=!1}var ta=qe.ReactCurrentOwner,na=!1;function ra(e,t,n,r){t.child=null===e?no(t,null,n,r):to(t,e.child,n,r)}function ia(e,t,n,r,i){n=n.render;var o=t.ref;return ki(t,i),r=xo(e,t,n,r,o,i),null===e||na?(t.effectTag|=1,ra(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ba(e,t,i))}function oa(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||Bs(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=js(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,aa(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:rn)(i,r)&&e.ref===t.ref)?ba(e,t,o):(t.effectTag|=1,(e=Us(a,r)).ref=t.ref,e.return=t,t.child=e)}function aa(e,t,n,r,i,o){return null!==e&&rn(e.memoizedProps,r)&&e.ref===t.ref&&(na=!1,i<o)?ba(e,t,o):ca(e,t,n,r,o)}function sa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function ca(e,t,n,r,i){var o=jr(n)?Br:Dr.current;return o=Ur(t,o),ki(t,i),n=xo(e,t,n,r,o,i),null===e||na?(t.effectTag|=1,ra(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ba(e,t,i))}function ua(e,t,n,r,i){if(jr(n)){var o=!0;Wr(t)}else o=!1;if(ki(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Yi(t,n,r),Zi(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var c=a.context,u=n.contextType;u="object"==typeof u&&null!==u?Ii(u):Ur(t,u=jr(n)?Br:Dr.current);var l=n.getDerivedStateFromProps,d="function"==typeof l||"function"==typeof a.getSnapshotBeforeUpdate;d||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||c!==u)&&Xi(t,a,r,u),xi=!1;var h=t.memoizedState;c=a.state=h;var f=t.updateQueue;null!==f&&(ji(t,f,r,a,i),c=t.memoizedState),s!==r||h!==c||Fr.current||xi?("function"==typeof l&&(Wi(t,n,l,r),c=t.memoizedState),(s=xi||Ki(t,n,s,r,h,c,u))?(d||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=s):("function"==typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,s=t.memoizedProps,a.props=t.type===t.elementType?s:wi(t.type,s),c=a.context,u="object"==typeof(u=n.contextType)&&null!==u?Ii(u):Ur(t,u=jr(n)?Br:Dr.current),(d="function"==typeof(l=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||c!==u)&&Xi(t,a,r,u),xi=!1,c=t.memoizedState,h=a.state=c,null!==(f=t.updateQueue)&&(ji(t,f,r,a,i),h=t.memoizedState),s!==r||c!==h||Fr.current||xi?("function"==typeof l&&(Wi(t,n,l,r),h=t.memoizedState),(l=xi||Ki(t,n,s,r,c,h,u))?(d||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,u)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=u,r=l):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),r=!1);return la(e,t,n,r,o,i)}function la(e,t,n,r,i,o){sa(e,t);var a=0!=(64&t.effectTag);if(!r&&!a)return i&&qr(t,n,!1),ba(e,t,o);r=t.stateNode,ta.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=to(t,e.child,null,o),t.child=to(t,null,s,o)):ra(e,t,s,o),t.memoizedState=r.state,i&&qr(t,n,!0),t.child}function da(e){var t=e.stateNode;t.pendingContext?Vr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Vr(0,t.context,!1),co(e,t.containerInfo)}var ha,fa,pa,ga={};function ma(e,t,n){var r,i=t.mode,o=t.pendingProps,a=fo.current,s=null,c=!1;if((r=0!=(64&t.effectTag))||(r=0!=(2&a)&&(null===e||null!==e.memoizedState)),r?(s=ga,c=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),Mr(fo,a&=1),null===e)if(c){if(o=o.fallback,(e=Hs(null,i,0,null)).return=t,0==(2&t.mode))for(c=null!==t.memoizedState?t.child.child:t.child,e.child=c;null!==c;)c.return=e,c=c.sibling;(n=Hs(o,i,n,null)).return=t,e.sibling=n,i=e}else i=n=no(t,null,o.children,n);else{if(null!==e.memoizedState)if(i=(a=e.child).sibling,c){if(o=o.fallback,(n=Us(a,a.pendingProps)).return=t,0==(2&t.mode)&&(c=null!==t.memoizedState?t.child.child:t.child)!==a.child)for(n.child=c;null!==c;)c.return=n,c=c.sibling;(o=Us(i,o,i.expirationTime)).return=t,n.sibling=o,i=n,n.childExpirationTime=0,n=o}else i=n=to(t,a.child,o.children,n);else if(a=e.child,c){if(c=o.fallback,(o=Hs(null,i,0,null)).return=t,o.child=a,null!==a&&(a.return=o),0==(2&t.mode))for(a=null!==t.memoizedState?t.child.child:t.child,o.child=a;null!==a;)a.return=o,a=a.sibling;(n=Hs(c,i,n,null)).return=t,o.sibling=n,n.effectTag|=2,i=o,o.childExpirationTime=0}else n=i=to(t,a,o.children,n);t.stateNode=e.stateNode}return t.memoizedState=s,t.child=i,n}function va(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,last:r,tail:n,tailExpiration:0,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.last=r,o.tail=n,o.tailExpiration=0,o.tailMode=i)}function ya(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(ra(e,t,r.children,n),0!=(2&(r=fo.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag){if(null!==e.memoizedState){e.expirationTime<n&&(e.expirationTime=n);var a=e.alternate;null!==a&&a.expirationTime<n&&(a.expirationTime=n),Oi(e.return,n)}}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Mr(fo,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(r=n.alternate)&&null===po(r)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),va(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(r=i.alternate)&&null===po(r)){t.child=i;break}r=i.sibling,i.sibling=n,n=i,i=r}va(t,!0,n,null,o);break;case"together":va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ba(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw a(Error(153));if(null!==t.child){for(n=Us(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Us(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function wa(e){e.effectTag|=4}function Ea(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Sa(e){switch(e.tag){case 1:jr(e.type)&&Hr();var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:if(uo(),zr(),0!=(64&(t=e.effectTag)))throw a(Error(285));return e.effectTag=-2049&t|64,e;case 5:return ho(e),null;case 13:return Lr(fo),2048&(t=e.effectTag)?(e.effectTag=-2049&t|64,e):null;case 18:default:return null;case 19:return Lr(fo),null;case 4:return uo(),null;case 10:return Ri(e),null}}function Ta(e,t){return{value:e,source:t,stack:dt(t)}}ha=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(20===n.tag)e.appendChild(n.stateNode.instance);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},fa=function(e,t,n,r,o){var a=e.memoizedProps;if(a!==r){var s=t.stateNode;switch(so(io.current),e=null,n){case"input":a=St(s,a),r=St(s,r),e=[];break;case"option":a=nr(s,a),r=nr(s,r),e=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":a=ir(s,a),r=ir(s,r),e=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(s.onclick=Tr)}wr(n,r),s=n=void 0;var c=null;for(n in a)if(!r.hasOwnProperty(n)&&a.hasOwnProperty(n)&&null!=a[n])if("style"===n){var u=a[n];for(s in u)u.hasOwnProperty(s)&&(c||(c={}),c[s]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(f.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var l=r[n];if(u=null!=a?a[n]:void 0,r.hasOwnProperty(n)&&l!==u&&(null!=l||null!=u))if("style"===n)if(u){for(s in u)!u.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(c||(c={}),c[s]="");for(s in l)l.hasOwnProperty(s)&&u[s]!==l[s]&&(c||(c={}),c[s]=l[s])}else c||(e||(e=[]),e.push(n,c)),c=l;else"dangerouslySetInnerHTML"===n?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(e=e||[]).push(n,""+l)):"children"===n?u===l||"string"!=typeof l&&"number"!=typeof l||(e=e||[]).push(n,""+l):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(f.hasOwnProperty(n)?(null!=l&&Sr(o,n),e||u===l||(e=[])):(e=e||[]).push(n,l))}c&&(e=e||[]).push("style",c),o=e,(t.updateQueue=o)&&wa(t)}},pa=function(e,t,n,r){n!==r&&wa(t)};var _a="function"==typeof WeakSet?WeakSet:Set;function Pa(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=dt(n)),null!==n&&lt(n.type),t=t.value,null!==e&&1===e.tag&&lt(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function Ca(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Is(e,t)}else t.current=null}function Ra(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if(0!=(r.tag&e)){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}0!=(r.tag&t)&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function Oa(e,t){switch("function"==typeof Ns&&Ns(e),e.tag){case 0:case 11:case 14:case 15:var n=e.updateQueue;if(null!==n&&null!==(n=n.lastEffect)){var r=n.next;pi(97<t?97:t,(function(){var t=r;do{var n=t.destroy;if(void 0!==n){var i=e;try{n()}catch(e){Is(i,e)}}t=t.next}while(t!==r)}))}break;case 1:Ca(e),"function"==typeof(t=e.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Is(e,t)}}(e,t);break;case 5:Ca(e);break;case 4:Aa(e,t)}}function ka(e,t){for(var n=e;;)if(Oa(n,t),null!==n.child&&4!==n.tag)n.child.return=n,n=n.child;else{if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function Ia(e){return 5===e.tag||3===e.tag||4===e.tag}function xa(e){e:{for(var t=e.return;null!==t;){if(Ia(t)){var n=t;break e}t=t.return}throw a(Error(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw a(Error(161))}16&n.effectTag&&(pr(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Ia(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){var o=5===i.tag||6===i.tag;if(o||20===i.tag){var s=o?i.stateNode:i.stateNode.instance;if(n)if(r){var c=s;s=n,8===(o=t).nodeType?o.parentNode.insertBefore(c,s):o.insertBefore(c,s)}else t.insertBefore(s,n);else r?(8===(c=t).nodeType?(o=c.parentNode).insertBefore(s,c):(o=c).appendChild(s),null!=(c=c._reactRootContainer)||null!==o.onclick||(o.onclick=Tr)):t.appendChild(s)}else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function Aa(e,t){for(var n=e,r=!1,i=void 0,o=void 0;;){if(!r){r=n.return;e:for(;;){if(null===r)throw a(Error(160));switch(i=r.stateNode,r.tag){case 5:o=!1;break e;case 3:case 4:i=i.containerInfo,o=!0;break e}r=r.return}r=!0}if(5===n.tag||6===n.tag)if(ka(n,t),o){var s=i,c=n.stateNode;8===s.nodeType?s.parentNode.removeChild(c):s.removeChild(c)}else i.removeChild(n.stateNode);else if(20===n.tag)c=n.stateNode.instance,ka(n,t),o?8===(s=i).nodeType?s.parentNode.removeChild(c):s.removeChild(c):i.removeChild(c);else if(4===n.tag){if(null!==n.child){i=n.stateNode.containerInfo,o=!0,n.child.return=n,n=n.child;continue}}else if(Oa(n,t),null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;4===(n=n.return).tag&&(r=!1)}n.sibling.return=n.return,n=n.sibling}}function La(e,t){switch(t.tag){case 0:case 11:case 14:case 15:Ra(4,8,t);break;case 1:case 3:case 12:case 17:case 20:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[N]=r,"input"===e&&"radio"===r.type&&null!=r.name&&_t(n,r),Er(e,i),t=Er(e,r),i=0;i<o.length;i+=2){var s=o[i],c=o[i+1];"style"===s?yr(n,c):"dangerouslySetInnerHTML"===s?fr(n,c):"children"===s?pr(n,c):wt(n,s,c,t)}switch(e){case"input":Pt(n,r);break;case"textarea":ar(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?rr(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?rr(n,!!r.multiple,r.defaultValue,!0):rr(n,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 6:if(null===t.stateNode)throw a(Error(162));t.stateNode.nodeValue=t.memoizedProps;break;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Za=di()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=null!=(i=e.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,o.style.display=vr("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}Ma(t);break;case 19:Ma(t);break;default:throw a(Error(163))}}function Ma(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new _a),t.forEach((function(t){var r=As.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var Na="function"==typeof WeakMap?WeakMap:Map;function Da(e,t,n){(n=Mi(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ja||(Ja=!0,Qa=r),Pa(e,t)},n}function Fa(e,t,n){(n=Mi(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return Pa(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===es?es=new Set([this]):es.add(this),Pa(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Ba=Math.ceil,Ua=qe.ReactCurrentDispatcher,ja=qe.ReactCurrentOwner,Ha=0,za=null,Va=null,Ga=0,Wa=0,qa=1073741823,Ka=1073741823,Ya=null,Xa=!1,Za=0,$a=null,Ja=!1,Qa=null,es=null,ts=!1,ns=null,rs=90,is=0,os=null,as=0,ss=null,cs=0;function us(){return 0!=(48&Ha)?1073741821-(di()/10|0):0!==cs?cs:cs=1073741821-(di()/10|0)}function ls(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var r=hi();if(0==(4&t))return 99===r?1073741823:1073741822;if(0!=(16&Ha))return Ga;if(null!==n)e=1073741821-25*(1+((1073741821-e+(0|n.timeoutMs||5e3)/10)/25|0));else switch(r){case 99:e=1073741823;break;case 98:e=1073741821-10*(1+((1073741821-e+15)/10|0));break;case 97:case 96:e=1073741821-25*(1+((1073741821-e+500)/25|0));break;case 95:e=1;break;default:throw a(Error(326))}return null!==za&&e===Ga&&--e,e}var ds=0;function hs(e,t){if(50<as)throw as=0,ss=null,a(Error(185));if(null!==(e=fs(e,t))){e.pingTime=0;var n=hi();if(1073741823===t)if(0!=(8&Ha)&&0==(48&Ha))for(var r=Es(e,1073741823,!0);null!==r;)r=r(!0);else ps(e,99,1073741823),0===Ha&&vi();else ps(e,n,t);0==(4&Ha)||98!==n&&99!==n||(null===os?os=new Map([[e,t]]):(void 0===(n=os.get(e))||n>t)&&os.set(e,t))}}function fs(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(t>i.firstPendingTime&&(i.firstPendingTime=t),0===(e=i.lastPendingTime)||t<e)&&(i.lastPendingTime=t),i}function ps(e,t,n){if(e.callbackExpirationTime<n){var r=e.callbackNode;null!==r&&r!==oi&&Xr(r),e.callbackExpirationTime=n,1073741823===n?e.callbackNode=mi(gs.bind(null,e,Es.bind(null,e,n))):(r=null,1!==n&&(r={timeout:10*(1073741821-n)-di()}),e.callbackNode=gi(t,gs.bind(null,e,Es.bind(null,e,n)),r))}}function gs(e,t,n){var r=e.callbackNode,i=null;try{return null!==(i=t(n))?gs.bind(null,e,i):null}finally{null===i&&r===e.callbackNode&&(e.callbackNode=null,e.callbackExpirationTime=0)}}function ms(){0==(49&Ha)&&(function(){if(null!==os){var e=os;os=null,e.forEach((function(e,t){mi(Es.bind(null,t,e))})),vi()}}(),Rs())}function vs(e,t){var n=Ha;Ha|=1;try{return e(t)}finally{0===(Ha=n)&&vi()}}function ys(e,t,n,r){var i=Ha;Ha|=4;try{return pi(98,e.bind(null,t,n,r))}finally{0===(Ha=i)&&vi()}}function bs(e,t){var n=Ha;Ha&=-2,Ha|=8;try{return e(t)}finally{0===(Ha=n)&&vi()}}function ws(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,kr(n)),null!==Va)for(n=Va.return;null!==n;){var r=n;switch(r.tag){case 1:null!=r.type.childContextTypes&&Hr();break;case 3:uo(),zr();break;case 5:ho(r);break;case 4:uo();break;case 13:case 19:Lr(fo);break;case 10:Ri(r)}n=n.return}za=e,Va=Us(e.current,null),Ga=t,Wa=0,Ka=qa=1073741823,Ya=null,Xa=!1}function Es(e,t,n){if(0!=(48&Ha))throw a(Error(327));if(e.firstPendingTime<t)return null;if(n&&e.finishedExpirationTime===t)return Ps.bind(null,e);if(Rs(),e!==za||t!==Ga)ws(e,t);else if(3===Wa)if(Xa)ws(e,t);else{var r=e.lastPendingTime;if(r<t)return Es.bind(null,e,r)}if(null!==Va){r=Ha,Ha|=16;var i=Ua.current;if(null===i&&(i=Vo),Ua.current=Vo,n){if(1073741823!==t){var o=us();if(o<t)return Ha=r,Pi(),Ua.current=i,Es.bind(null,e,o)}}else cs=0;for(;;)try{if(n)for(;null!==Va;)Va=Ts(Va);else for(;null!==Va&&!Zr();)Va=Ts(Va);break}catch(n){if(Pi(),Ao(),null===(o=Va)||null===o.return)throw ws(e,t),Ha=r,n;e:{var s=e,c=o.return,u=o,l=n,d=Ga;if(u.effectTag|=1024,u.firstEffect=u.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var h=l,f=0!=(1&fo.current);l=c;do{var p;if((p=13===l.tag)&&(p=null===l.memoizedState&&(void 0!==(p=l.memoizedProps).fallback&&(!0!==p.unstable_avoidThisFallback||!f))),p){if(null===(c=l.updateQueue)?((c=new Set).add(h),l.updateQueue=c):c.add(h),0==(2&l.mode)){l.effectTag|=64,u.effectTag&=-1957,1===u.tag&&(null===u.alternate?u.tag=17:((d=Mi(1073741823,null)).tag=2,Di(u,d))),u.expirationTime=1073741823;break e}u=s,s=d,null===(f=u.pingCache)?(f=u.pingCache=new Na,c=new Set,f.set(h,c)):void 0===(c=f.get(h))&&(c=new Set,f.set(h,c)),c.has(s)||(c.add(s),u=xs.bind(null,u,h,s),h.then(u,u)),l.effectTag|=2048,l.expirationTime=d;break e}l=l.return}while(null!==l);l=Error((lt(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+dt(u))}4!==Wa&&(Wa=1),l=Ta(l,u),u=c;do{switch(u.tag){case 3:u.effectTag|=2048,u.expirationTime=d,Fi(u,d=Da(u,l,d));break e;case 1:if(h=l,s=u.type,c=u.stateNode,0==(64&u.effectTag)&&("function"==typeof s.getDerivedStateFromError||null!==c&&"function"==typeof c.componentDidCatch&&(null===es||!es.has(c)))){u.effectTag|=2048,u.expirationTime=d,Fi(u,d=Fa(u,h,d));break e}}u=u.return}while(null!==u)}Va=_s(o)}if(Ha=r,Pi(),Ua.current=i,null!==Va)return Es.bind(null,e,t)}if(e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,function(e,t){var n=e.firstBatch;return!!(null!==n&&n._defer&&n._expirationTime>=t)&&(gi(97,(function(){return n._onComplete(),null})),!0)}(e,t))return null;switch(za=null,Wa){case 0:throw a(Error(328));case 1:return(r=e.lastPendingTime)<t?Es.bind(null,e,r):n?Ps.bind(null,e):(ws(e,t),mi(Es.bind(null,e,t)),null);case 2:return 1073741823===qa&&!n&&10<(n=Za+500-di())?Xa?(ws(e,t),Es.bind(null,e,t)):(r=e.lastPendingTime)<t?Es.bind(null,e,r):(e.timeoutHandle=Or(Ps.bind(null,e),n),null):Ps.bind(null,e);case 3:if(!n){if(Xa)return ws(e,t),Es.bind(null,e,t);if((n=e.lastPendingTime)<t)return Es.bind(null,e,n);if(1073741823!==Ka?n=10*(1073741821-Ka)-di():1073741823===qa?n=0:(n=10*(1073741821-qa)-5e3,0>(n=(r=di())-n)&&(n=0),(t=10*(1073741821-t)-r)<(n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ba(n/1960))-n)&&(n=t)),10<n)return e.timeoutHandle=Or(Ps.bind(null,e),n),null}return Ps.bind(null,e);case 4:return!n&&1073741823!==qa&&null!==Ya&&(r=qa,0>=(t=0|(i=Ya).busyMinDurationMs)?t=0:(n=0|i.busyDelayMs,t=(r=di()-(10*(1073741821-r)-(0|i.timeoutMs||5e3)))<=n?0:n+t-r),10<t)?(e.timeoutHandle=Or(Ps.bind(null,e),t),null):Ps.bind(null,e);default:throw a(Error(329))}}function Ss(e,t){e<qa&&1<e&&(qa=e),null!==t&&e<Ka&&1<e&&(Ka=e,Ya=t)}function Ts(e){var t=Ls(e.alternate,e,Ga);return e.memoizedProps=e.pendingProps,null===t&&(t=_s(e)),ja.current=null,t}function _s(e){Va=e;do{var t=Va.alternate;if(e=Va.return,0==(1024&Va.effectTag)){e:{var n=t,r=Ga,o=(t=Va).pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 18:case 20:break;case 1:case 17:jr(t.type)&&Hr();break;case 3:uo(),zr(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==n&&null!==n.child||(Qo(t),t.effectTag&=-3);break;case 5:ho(t),r=so(ao.current);var s=t.type;if(null!==n&&null!=t.stateNode)fa(n,t,s,o,r),n.ref!==t.ref&&(t.effectTag|=128);else if(o){var c=so(io.current);if(Qo(t)){o=void 0,s=(n=t).stateNode;var u=n.type,l=n.memoizedProps;switch(s[M]=n,s[N]=l,u){case"iframe":case"object":case"embed":Nn("load",s);break;case"video":case"audio":for(var d=0;d<ne.length;d++)Nn(ne[d],s);break;case"source":Nn("error",s);break;case"img":case"image":case"link":Nn("error",s),Nn("load",s);break;case"form":Nn("reset",s),Nn("submit",s);break;case"details":Nn("toggle",s);break;case"input":Tt(s,l),Nn("invalid",s),Sr(r,"onChange");break;case"select":s._wrapperState={wasMultiple:!!l.multiple},Nn("invalid",s),Sr(r,"onChange");break;case"textarea":or(s,l),Nn("invalid",s),Sr(r,"onChange")}for(o in wr(u,l),d=null,l)l.hasOwnProperty(o)&&(c=l[o],"children"===o?"string"==typeof c?s.textContent!==c&&(d=["children",c]):"number"==typeof c&&s.textContent!==""+c&&(d=["children",""+c]):f.hasOwnProperty(o)&&null!=c&&Sr(r,o));switch(u){case"input":Ge(s),Ct(s,l,!0);break;case"textarea":Ge(s),sr(s);break;case"select":case"option":break;default:"function"==typeof l.onClick&&(s.onclick=Tr)}r=d,n.updateQueue=r,null!==r&&wa(t)}else{l=s,n=o,u=t,d=9===r.nodeType?r:r.ownerDocument,c===cr&&(c=ur(l)),c===cr?"script"===l?((l=d.createElement("div")).innerHTML="<script><\/script>",d=l.removeChild(l.firstChild)):"string"==typeof n.is?d=d.createElement(l,{is:n.is}):(d=d.createElement(l),"select"===l&&(l=d,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):d=d.createElementNS(c,l),(l=d)[M]=u,l[N]=n,ha(n=l,t),u=n;var h=r,p=Er(s,o);switch(s){case"iframe":case"object":case"embed":Nn("load",u),r=o;break;case"video":case"audio":for(r=0;r<ne.length;r++)Nn(ne[r],u);r=o;break;case"source":Nn("error",u),r=o;break;case"img":case"image":case"link":Nn("error",u),Nn("load",u),r=o;break;case"form":Nn("reset",u),Nn("submit",u),r=o;break;case"details":Nn("toggle",u),r=o;break;case"input":Tt(u,o),r=St(u,o),Nn("invalid",u),Sr(h,"onChange");break;case"option":r=nr(u,o);break;case"select":u._wrapperState={wasMultiple:!!o.multiple},r=i({},o,{value:void 0}),Nn("invalid",u),Sr(h,"onChange");break;case"textarea":or(u,o),r=ir(u,o),Nn("invalid",u),Sr(h,"onChange");break;default:r=o}wr(s,r),l=void 0,d=s,c=u;var g=r;for(l in g)if(g.hasOwnProperty(l)){var m=g[l];"style"===l?yr(c,m):"dangerouslySetInnerHTML"===l?null!=(m=m?m.__html:void 0)&&fr(c,m):"children"===l?"string"==typeof m?("textarea"!==d||""!==m)&&pr(c,m):"number"==typeof m&&pr(c,""+m):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(f.hasOwnProperty(l)?null!=m&&Sr(h,l):null!=m&&wt(c,l,m,p))}switch(s){case"input":Ge(u),Ct(u,o,!1);break;case"textarea":Ge(u),sr(u);break;case"option":null!=o.value&&u.setAttribute("value",""+Et(o.value));break;case"select":r=u,u=o,r.multiple=!!u.multiple,null!=(l=u.value)?rr(r,!!u.multiple,l,!1):null!=u.defaultValue&&rr(r,!!u.multiple,u.defaultValue,!0);break;default:"function"==typeof r.onClick&&(u.onclick=Tr)}Cr(s,o)&&wa(t),t.stateNode=n}null!==t.ref&&(t.effectTag|=128)}else if(null===t.stateNode)throw a(Error(166));break;case 6:if(n&&null!=t.stateNode)pa(0,t,n.memoizedProps,o);else{if("string"!=typeof o&&null===t.stateNode)throw a(Error(166));n=so(ao.current),so(io.current),Qo(t)?(r=t.stateNode,n=t.memoizedProps,r[M]=t,r.nodeValue!==n&&wa(t)):(r=t,(n=(9===n.nodeType?n:n.ownerDocument).createTextNode(o))[M]=t,r.stateNode=n)}break;case 13:if(Lr(fo),o=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=r;break e}r=null!==o,o=!1,null===n?Qo(t):(o=null!==(s=n.memoizedState),r||null===s||null!==(s=n.child.sibling)&&(null!==(u=t.firstEffect)?(t.firstEffect=s,s.nextEffect=u):(t.firstEffect=t.lastEffect=s,s.nextEffect=null),s.effectTag=8)),r&&!o&&0!=(2&t.mode)&&(null===n&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&fo.current)?0===Wa&&(Wa=2):0!==Wa&&2!==Wa||(Wa=3)),(r||o)&&(t.effectTag|=4);break;case 4:uo();break;case 10:Ri(t);break;case 19:if(Lr(fo),null===(o=t.memoizedState))break;if(s=0!=(64&t.effectTag),null===(u=o.rendering)){if(s)Ea(o,!1);else if(0!==Wa||null!==n&&0!=(64&n.effectTag))for(n=t.child;null!==n;){if(null!==(u=po(n))){for(t.effectTag|=64,Ea(o,!1),null!==(n=u.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),t.firstEffect=t.lastEffect=null,n=t.child;null!==n;)s=r,(o=n).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(u=o.alternate)?(o.childExpirationTime=0,o.expirationTime=s,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=u.childExpirationTime,o.expirationTime=u.expirationTime,o.child=u.child,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,s=u.dependencies,o.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),n=n.sibling;Mr(fo,1&fo.current|2),t=t.child;break e}n=n.sibling}}else{if(!s)if(null!==(n=po(u))){if(t.effectTag|=64,s=!0,Ea(o,!0),null===o.tail&&"hidden"===o.tailMode){null!==(r=n.updateQueue)&&(t.updateQueue=r,t.effectTag|=4),null!==(t=t.lastEffect=o.lastEffect)&&(t.nextEffect=null);break}}else di()>o.tailExpiration&&1<r&&(t.effectTag|=64,s=!0,Ea(o,!1),t.expirationTime=t.childExpirationTime=r-1);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(r=o.last)?r.sibling=u:t.child=u,o.last=u)}if(null!==o.tail){0===o.tailExpiration&&(o.tailExpiration=di()+500),r=o.tail,o.rendering=r,o.tail=r.sibling,o.lastEffect=t.lastEffect,r.sibling=null,n=fo.current,Mr(fo,n=s?1&n|2:1&n),t=r;break e}break;default:throw a(Error(156))}t=null}if(r=Va,1===Ga||1!==r.childExpirationTime){for(n=0,o=r.child;null!==o;)(s=o.expirationTime)>n&&(n=s),(u=o.childExpirationTime)>n&&(n=u),o=o.sibling;r.childExpirationTime=n}if(null!==t)return t;null!==e&&0==(1024&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Va.firstEffect),null!==Va.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Va.firstEffect),e.lastEffect=Va.lastEffect),1<Va.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Va:e.firstEffect=Va,e.lastEffect=Va))}else{if(null!==(t=Sa(Va)))return t.effectTag&=1023,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=1024)}if(null!==(t=Va.sibling))return t;Va=e}while(null!==Va);return 0===Wa&&(Wa=4),null}function Ps(e){var t=hi();return pi(99,Cs.bind(null,e,t)),null!==ns&&gi(97,(function(){return Rs(),null})),null}function Cs(e,t){if(Rs(),0!=(48&Ha))throw a(Error(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw a(Error(177));e.callbackNode=null,e.callbackExpirationTime=0;var i=n.expirationTime,o=n.childExpirationTime;if(i=o>i?o:i,e.firstPendingTime=i,i<e.lastPendingTime&&(e.lastPendingTime=i),e===za&&(Va=za=null,Ga=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){o=Ha,Ha|=32,ja.current=null,_r=Mn;var s=qn();if(Kn(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{var u=(c=(c=s.ownerDocument)&&c.defaultView||window).getSelection&&c.getSelection();if(u&&0!==u.rangeCount){c=u.anchorNode;var l=u.anchorOffset,d=u.focusNode;u=u.focusOffset;try{c.nodeType,d.nodeType}catch(e){c=null;break e}var h=0,f=-1,p=-1,g=0,m=0,v=s,y=null;t:for(;;){for(var b;v!==c||0!==l&&3!==v.nodeType||(f=h+l),v!==d||0!==u&&3!==v.nodeType||(p=h+u),3===v.nodeType&&(h+=v.nodeValue.length),null!==(b=v.firstChild);)y=v,v=b;for(;;){if(v===s)break t;if(y===c&&++g===l&&(f=h),y===d&&++m===u&&(p=h),null!==(b=v.nextSibling))break;y=(v=y).parentNode}v=b}c=-1===f||-1===p?null:{start:f,end:p}}else c=null}c=c||{start:0,end:0}}else c=null;Pr={focusedElem:s,selectionRange:c},Mn=!1,$a=i;do{try{for(;null!==$a;){if(0!=(256&$a.effectTag)){var w=$a.alternate;switch((s=$a).tag){case 0:case 11:case 15:Ra(2,0,s);break;case 1:if(256&s.effectTag&&null!==w){var E=w.memoizedProps,S=w.memoizedState,T=s.stateNode,_=T.getSnapshotBeforeUpdate(s.elementType===s.type?E:wi(s.type,E),S);T.__reactInternalSnapshotBeforeUpdate=_}break;case 3:case 5:case 6:case 4:case 17:break;default:throw a(Error(163))}}$a=$a.nextEffect}}catch(e){if(null===$a)throw a(Error(330));Is($a,e),$a=$a.nextEffect}}while(null!==$a);$a=i;do{try{for(w=t;null!==$a;){var P=$a.effectTag;if(16&P&&pr($a.stateNode,""),128&P){var C=$a.alternate;if(null!==C){var R=C.ref;null!==R&&("function"==typeof R?R(null):R.current=null)}}switch(14&P){case 2:xa($a),$a.effectTag&=-3;break;case 6:xa($a),$a.effectTag&=-3,La($a.alternate,$a);break;case 4:La($a.alternate,$a);break;case 8:Aa(E=$a,w),E.return=null,E.child=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null;var O=E.alternate;null!==O&&(O.return=null,O.child=null,O.memoizedState=null,O.updateQueue=null,O.dependencies=null)}$a=$a.nextEffect}}catch(e){if(null===$a)throw a(Error(330));Is($a,e),$a=$a.nextEffect}}while(null!==$a);if(R=Pr,C=qn(),P=R.focusedElem,w=R.selectionRange,C!==P&&P&&P.ownerDocument&&Wn(P.ownerDocument.documentElement,P)){null!==w&&Kn(P)&&(C=w.start,void 0===(R=w.end)&&(R=C),"selectionStart"in P?(P.selectionStart=C,P.selectionEnd=Math.min(R,P.value.length)):(R=(C=P.ownerDocument||document)&&C.defaultView||window).getSelection&&(R=R.getSelection(),E=P.textContent.length,O=Math.min(w.start,E),w=void 0===w.end?O:Math.min(w.end,E),!R.extend&&O>w&&(E=w,w=O,O=E),E=Gn(P,O),S=Gn(P,w),E&&S&&(1!==R.rangeCount||R.anchorNode!==E.node||R.anchorOffset!==E.offset||R.focusNode!==S.node||R.focusOffset!==S.offset)&&((C=C.createRange()).setStart(E.node,E.offset),R.removeAllRanges(),O>w?(R.addRange(C),R.extend(S.node,S.offset)):(C.setEnd(S.node,S.offset),R.addRange(C))))),C=[];for(R=P;R=R.parentNode;)1===R.nodeType&&C.push({element:R,left:R.scrollLeft,top:R.scrollTop});for("function"==typeof P.focus&&P.focus(),P=0;P<C.length;P++)(R=C[P]).element.scrollLeft=R.left,R.element.scrollTop=R.top}Pr=null,Mn=!!_r,_r=null,e.current=n,$a=i;do{try{for(P=r;null!==$a;){var k=$a.effectTag;if(36&k){var I=$a.alternate;switch(R=P,(C=$a).tag){case 0:case 11:case 15:Ra(16,32,C);break;case 1:var x=C.stateNode;if(4&C.effectTag)if(null===I)x.componentDidMount();else{var A=C.elementType===C.type?I.memoizedProps:wi(C.type,I.memoizedProps);x.componentDidUpdate(A,I.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var L=C.updateQueue;null!==L&&Hi(0,L,x);break;case 3:var M=C.updateQueue;if(null!==M){if(O=null,null!==C.child)switch(C.child.tag){case 5:case 1:O=C.child.stateNode}Hi(0,M,O)}break;case 5:var N=C.stateNode;null===I&&4&C.effectTag&&(R=N,Cr(C.type,C.memoizedProps)&&R.focus());break;case 6:case 4:case 12:case 13:case 19:case 17:case 20:break;default:throw a(Error(163))}}if(128&k){var D=$a.ref;if(null!==D){var F=$a.stateNode;if(5===$a.tag)var B=F;else B=F;"function"==typeof D?D(B):D.current=B}}512&k&&(ts=!0),$a=$a.nextEffect}}catch(e){if(null===$a)throw a(Error(330));Is($a,e),$a=$a.nextEffect}}while(null!==$a);$a=null,ai(),Ha=o}else e.current=n;if(ts)ts=!1,ns=e,is=r,rs=t;else for($a=i;null!==$a;)t=$a.nextEffect,$a.nextEffect=null,$a=t;if(0!==(t=e.firstPendingTime)?ps(e,k=bi(k=us(),t),t):es=null,"function"==typeof Ms&&Ms(n.stateNode,r),1073741823===t?e===ss?as++:(as=0,ss=e):as=0,Ja)throw Ja=!1,e=Qa,Qa=null,e;return 0!=(8&Ha)||vi(),null}function Rs(){if(null===ns)return!1;var e=ns,t=is,n=rs;return ns=null,is=0,rs=90,pi(97<n?97:n,Os.bind(null,e,t))}function Os(e){if(0!=(48&Ha))throw a(Error(331));var t=Ha;for(Ha|=32,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:Ra(128,0,n),Ra(0,64,n)}}catch(t){if(null===e)throw a(Error(330));Is(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return Ha=t,vi(),!0}function ks(e,t,n){Di(e,t=Da(e,t=Ta(n,t),1073741823)),null!==(e=fs(e,1073741823))&&ps(e,99,1073741823)}function Is(e,t){if(3===e.tag)ks(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){ks(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===es||!es.has(r))){Di(n,e=Fa(n,e=Ta(t,e),1073741823)),null!==(n=fs(n,1073741823))&&ps(n,99,1073741823);break}}n=n.return}}function xs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),za===e&&Ga===n?3===Wa||2===Wa&&1073741823===qa&&di()-Za<500?ws(e,Ga):Xa=!0:e.lastPendingTime<n||0!==(t=e.pingTime)&&t<n||(e.pingTime=n,e.finishedExpirationTime===n&&(e.finishedExpirationTime=0,e.finishedWork=null),ps(e,t=bi(t=us(),n),n))}function As(e,t){var n=e.stateNode;null!==n&&n.delete(t),n=bi(n=us(),t=ls(n,e,null)),null!==(e=fs(e,t))&&ps(e,n,t)}var Ls=void 0;Ls=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||Fr.current)na=!0;else if(r<n){switch(na=!1,t.tag){case 3:da(t),ea();break;case 5:if(lo(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:jr(t.type)&&Wr(t);break;case 4:co(t,t.stateNode.containerInfo);break;case 10:Ci(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?ma(e,t,n):(Mr(fo,1&fo.current),null!==(t=ba(e,t,n))?t.sibling:null);Mr(fo,1&fo.current);break;case 19:if(r=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(r)return ya(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),Mr(fo,fo.current),!r)return null}return ba(e,t,n)}}else na=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=Ur(t,Dr.current),ki(t,n),i=xo(null,t,r,e,i,n),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,Ao(),jr(r)){var o=!0;Wr(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var s=r.getDerivedStateFromProps;"function"==typeof s&&Wi(t,r,s,e),i.updater=qi,t.stateNode=i,i._reactInternalFiber=t,Zi(t,r,e,n),t=la(null,t,r,!0,o,n)}else t.tag=0,ra(null,t,i,n),t=t.child;return t;case 16:switch(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:switch(e._status=0,(t=(t=e._ctor)()).then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)})),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}(i),t.type=i,o=t.tag=function(e){if("function"==typeof e)return Bs(e)?1:0;if(null!=e){if((e=e.$$typeof)===rt)return 11;if(e===at)return 14}return 2}(i),e=wi(i,e),o){case 0:t=ca(null,t,i,e,n);break;case 1:t=ua(null,t,i,e,n);break;case 11:t=ia(null,t,i,e,n);break;case 14:t=oa(null,t,i,wi(i.type,e),r,n);break;default:throw a(Error(306),i,"")}return t;case 0:return r=t.type,i=t.pendingProps,ca(e,t,r,i=t.elementType===r?i:wi(r,i),n);case 1:return r=t.type,i=t.pendingProps,ua(e,t,r,i=t.elementType===r?i:wi(r,i),n);case 3:if(da(t),null===(r=t.updateQueue))throw a(Error(282));return i=null!==(i=t.memoizedState)?i.element:null,ji(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i?(ea(),t=ba(e,t,n)):(i=t.stateNode,(i=(null===e||null===e.child)&&i.hydrate)&&(Ko=Ir(t.stateNode.containerInfo.firstChild),qo=t,i=Yo=!0),i?(t.effectTag|=2,t.child=no(t,null,r,n)):(ra(e,t,r,n),ea()),t=t.child),t;case 5:return lo(t),null===e&&$o(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Rr(r,i)?s=null:null!==o&&Rr(r,o)&&(t.effectTag|=16),sa(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(ra(e,t,s,n),t=t.child),t;case 6:return null===e&&$o(t),null;case 13:return ma(e,t,n);case 4:return co(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=to(t,null,r,n):ra(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ia(e,t,r,i=t.elementType===r?i:wi(r,i),n);case 7:return ra(e,t,t.pendingProps,n),t.child;case 8:case 12:return ra(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,Ci(t,o=i.value),null!==s){var c=s.value;if(0==(o=tn(c,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(c,o):1073741823))){if(s.children===i.children&&!Fr.current){t=ba(e,t,n);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var u=c.dependencies;if(null!==u){s=c.child;for(var l=u.firstContext;null!==l;){if(l.context===r&&0!=(l.observedBits&o)){1===c.tag&&((l=Mi(n,null)).tag=2,Di(c,l)),c.expirationTime<n&&(c.expirationTime=n),null!==(l=c.alternate)&&l.expirationTime<n&&(l.expirationTime=n),Oi(c.return,n),u.expirationTime<n&&(u.expirationTime=n);break}l=l.next}}else s=10===c.tag&&c.type===t.type?null:c.child;if(null!==s)s.return=c;else for(s=c;null!==s;){if(s===t){s=null;break}if(null!==(c=s.sibling)){c.return=s.return,s=c;break}s=s.return}c=s}}ra(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,ki(t,n),r=r(i=Ii(i,o.unstable_observedBits)),t.effectTag|=1,ra(e,t,r,n),t.child;case 14:return o=wi(i=t.type,t.pendingProps),oa(e,t,i,o=wi(i.type,o),r,n);case 15:return aa(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:wi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,jr(r)?(e=!0,Wr(t)):e=!1,ki(t,n),Yi(t,r,i),Zi(t,r,i,n),la(null,t,r,!0,e,n);case 19:return ya(e,t,n)}throw a(Error(156))};var Ms=null,Ns=null;function Ds(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Fs(e,t,n,r){return new Ds(e,t,n,r)}function Bs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Us(e,t){var n=e.alternate;return null===n?((n=Fs(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function js(e,t,n,r,i,o){var s=2;if(r=e,"function"==typeof e)Bs(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case $e:return Hs(n.children,i,o,t);case nt:s=8,i|=7;break;case Je:s=8,i|=1;break;case Qe:return(e=Fs(12,n,t,8|i)).elementType=Qe,e.type=Qe,e.expirationTime=o,e;case it:return(e=Fs(13,n,t,i)).type=it,e.elementType=it,e.expirationTime=o,e;case ot:return(e=Fs(19,n,t,i)).elementType=ot,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case et:s=10;break e;case tt:s=9;break e;case rt:s=11;break e;case at:s=14;break e;case st:s=16,r=null;break e}throw a(Error(130),null==e?e:typeof e,"")}return(t=Fs(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Hs(e,t,n,r){return(e=Fs(7,e,r,t)).expirationTime=n,e}function zs(e,t,n){return(e=Fs(6,e,null,t)).expirationTime=n,e}function Vs(e,t,n){return(t=Fs(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gs(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=this.firstBatch=null,this.pingTime=this.lastPendingTime=this.firstPendingTime=this.callbackExpirationTime=0}function Ws(e,t,n){return e=new Gs(e,t,n),t=Fs(3,null,null,2===t?7:1===t?3:0),e.current=t,t.stateNode=e}function qs(e,t,n,r,i,o){var s=t.current;e:if(n){t:{if(2!==an(n=n._reactInternalFiber)||1!==n.tag)throw a(Error(170));var c=n;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(jr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw a(Error(171))}if(1===n.tag){var u=n.type;if(jr(u)){n=Gr(n,u,c);break e}}n=c}else n=Nr;return null===t.context?t.context=n:t.pendingContext=n,t=o,(i=Mi(r,i)).payload={element:e},null!==(t=void 0===t?null:t)&&(i.callback=t),Di(s,i),hs(s,r),r}function Ks(e,t,n,r){var i=t.current,o=us(),a=Vi.suspense;return qs(e,t,n,i=ls(o,i,a),a,r)}function Ys(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Xs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Ze,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Zs(e){var t=1073741821-25*(1+((1073741821-us()+500)/25|0));t<=ds&&--t,this._expirationTime=ds=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function $s(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Js(e,t,n){this._internalRoot=Ws(e,t,n)}function Qs(e,t){this._internalRoot=Ws(e,2,t)}function ec(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function tc(e,t,n,r,i){var o=n._reactRootContainer,a=void 0;if(o){if(a=o._internalRoot,"function"==typeof i){var s=i;i=function(){var e=Ys(a);s.call(e)}}Ks(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Js(e,0,t)}(n,r),a=o._internalRoot,"function"==typeof i){var c=i;i=function(){var e=Ys(a);c.call(e)}}bs((function(){Ks(t,a,e,i)}))}return Ys(a)}function nc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ec(t))throw a(Error(200));return Xs(e,t,null,n)}Re=function(e,t,n){switch(t){case"input":if(Pt(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=U(r);if(!i)throw a(Error(90));We(r),Pt(r,i)}}}break;case"textarea":ar(e,n);break;case"select":null!=(t=n.value)&&rr(e,!!n.multiple,t,!1)}},Zs.prototype.render=function(e){if(!this._defer)throw a(Error(250));this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new $s;return qs(e,t,null,n,null,r._onCommit),r},Zs.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Zs.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(!this._defer||null===t)throw a(Error(251));if(this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,i=t;i!==this;)r=i,i=i._next;if(null===r)throw a(Error(251));r._next=i._next,this._next=t,e.firstBatch=this}if(this._defer=!1,t=n,0!=(48&Ha))throw a(Error(253));mi(Es.bind(null,e,t)),vi(),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},Zs.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},$s.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},$s.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)throw a(Error(191),n);n()}}},Qs.prototype.render=Js.prototype.render=function(e,t){var n=this._internalRoot,r=new $s;return null!==(t=void 0===t?null:t)&&r.then(t),Ks(e,n,null,r._onCommit),r},Qs.prototype.unmount=Js.prototype.unmount=function(e){var t=this._internalRoot,n=new $s;return null!==(e=void 0===e?null:e)&&n.then(e),Ks(null,t,null,n._onCommit),n},Qs.prototype.createBatch=function(){var e=new Zs(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},Le=vs,Me=ys,Ne=ms,De=function(e,t){var n=Ha;Ha|=2;try{return e(t)}finally{0===(Ha=n)&&vi()}};var rc={createPortal:nc,findDOMNode:function(e){if(null==e)e=null;else if(1!==e.nodeType){var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw a(Error(188));throw a(Error(268),Object.keys(e))}e=null===(e=cn(t))?null:e.stateNode}return e},hydrate:function(e,t,n){if(!ec(t))throw a(Error(200));return tc(null,e,t,!0,n)},render:function(e,t,n){if(!ec(t))throw a(Error(200));return tc(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){if(!ec(n))throw a(Error(200));if(null==e||void 0===e._reactInternalFiber)throw a(Error(38));return tc(e,t,n,!1,r)},unmountComponentAtNode:function(e){if(!ec(e))throw a(Error(40));return!!e._reactRootContainer&&(bs((function(){tc(null,null,e,!1,(function(){e._reactRootContainer=null}))})),!0)},unstable_createPortal:function(){return nc.apply(void 0,arguments)},unstable_batchedUpdates:vs,unstable_interactiveUpdates:function(e,t,n,r){return ms(),ys(e,t,n,r)},unstable_discreteUpdates:ys,unstable_flushDiscreteUpdates:ms,flushSync:function(e,t){if(0!=(48&Ha))throw a(Error(187));var n=Ha;Ha|=1;try{return pi(99,e.bind(null,t))}finally{Ha=n,vi()}},unstable_createRoot:function(e,t){if(!ec(e))throw a(Error(299),"unstable_createRoot");return new Qs(e,null!=t&&!0===t.hydrate)},unstable_createSyncRoot:function(e,t){if(!ec(e))throw a(Error(299),"unstable_createRoot");return new Js(e,1,null!=t&&!0===t.hydrate)},unstable_flushControlled:function(e){var t=Ha;Ha|=1;try{pi(99,e)}finally{0===(Ha=t)&&vi()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[F,B,U,x.injectEventPluginsByName,h,W,function(e){R(e,G)},xe,Ae,Un,I,Rs,{current:!1}]}};!function(e){var t=e.findFiberByHostInstance;!function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Ms=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},Ns=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}}(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qe.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=cn(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:D,bundleType:0,version:"16.9.0",rendererPackageName:"react-dom"});var ic={default:rc},oc=ic&&rc||ic;e.exports=oc.default||oc},73935:function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(64448)},69921:function(e,t){"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function E(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case d:case o:case s:case a:case f:return e;default:switch(e=e&&e.$$typeof){case u:case h:case m:case g:case c:return e;default:return t}}case i:return t}}}function S(e){return E(e)===d}t.AsyncMode=l,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=c,t.Element=r,t.ForwardRef=h,t.Fragment=o,t.Lazy=m,t.Memo=g,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=f,t.isAsyncMode=function(e){return S(e)||E(e)===l},t.isConcurrentMode=S,t.isContextConsumer=function(e){return E(e)===u},t.isContextProvider=function(e){return E(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return E(e)===h},t.isFragment=function(e){return E(e)===o},t.isLazy=function(e){return E(e)===m},t.isMemo=function(e){return E(e)===g},t.isPortal=function(e){return E(e)===i},t.isProfiler=function(e){return E(e)===s},t.isStrictMode=function(e){return E(e)===a},t.isSuspense=function(e){return E(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===d||e===s||e===a||e===f||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===c||e.$$typeof===u||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===w||e.$$typeof===v)},t.typeOf=E},59864:function(e,t,n){"use strict";e.exports=n(69921)},6526:function(e,t,n){"use strict";n.d(t,{ReactReduxContext:function(){return i}});var r=n(67294),i=n.n(r)().createContext(null)},60682:function(e,t,n){"use strict";var r=n(67294),i=n.n(r),o=(n(45697),n(6526)),a=n(86496);t.default=function(e){var t=e.store,n=e.context,s=e.children,c=(0,r.useMemo)((function(){var e=new a.default(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),u=(0,r.useMemo)((function(){return t.getState()}),[t]);(0,r.useEffect)((function(){var e=c.subscription;return e.trySubscribe(),u!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[c,u]);var l=n||o.ReactReduxContext;return i().createElement(l.Provider,{value:c},s)}},26685:function(e,t,n){"use strict";n.d(t,{default:function(){return w}});var r=n(87462),i=n(63366),o=n(8679),a=n.n(o),s=n(67294),c=n.n(s),u=n(59864),l=n(86496),d=n(1881),h=n(6526),f=[],p=[null,null];function g(e,t){var n=e[1];return[t.payload,n+1]}function m(e,t,n){(0,d.useIsomorphicLayoutEffect)((function(){return e.apply(void 0,t)}),n)}function v(e,t,n,r,i,o,a){e.current=r,t.current=i,n.current=!1,o.current&&(o.current=null,a())}function y(e,t,n,r,i,o,a,s,c,u){if(e){var l=!1,d=null,h=function(){if(!l){var e,n,h=t.getState();try{e=r(h,i.current)}catch(e){n=e,d=e}n||(d=null),e===o.current?a.current||c():(o.current=e,s.current=e,a.current=!0,u({type:"STORE_UPDATED",payload:{error:n}}))}};return n.onStateChange=h,n.trySubscribe(),h(),function(){if(l=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}}var b=function(){return[null,0]};function w(e,t){void 0===t&&(t={});var n=t,o=n.getDisplayName,d=void 0===o?function(e){return"ConnectAdvanced("+e+")"}:o,w=n.methodName,E=void 0===w?"connectAdvanced":w,S=n.renderCountProp,T=void 0===S?void 0:S,_=n.shouldHandleStateChanges,P=void 0===_||_,C=n.storeKey,R=void 0===C?"store":C,O=(n.withRef,n.forwardRef),k=void 0!==O&&O,I=n.context,x=void 0===I?h.ReactReduxContext:I,A=(0,i.default)(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]),L=x;return function(t){var n=t.displayName||t.name||"Component",o=d(n),h=(0,r.default)({},A,{getDisplayName:d,methodName:E,renderCountProp:T,shouldHandleStateChanges:P,storeKey:R,displayName:o,wrappedComponentName:n,WrappedComponent:t}),w=A.pure,S=w?s.useMemo:function(e){return e()};function _(n){var o=(0,s.useMemo)((function(){var e=n.reactReduxForwardedRef,t=(0,i.default)(n,["reactReduxForwardedRef"]);return[n.context,e,t]}),[n]),a=o[0],d=o[1],w=o[2],E=(0,s.useMemo)((function(){return a&&a.Consumer&&(0,u.isContextConsumer)(c().createElement(a.Consumer,null))?a:L}),[a,L]),T=(0,s.useContext)(E),_=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(T)&&Boolean(T.store);var C=_?n.store:T.store,R=(0,s.useMemo)((function(){return function(t){return e(t.dispatch,h)}(C)}),[C]),O=(0,s.useMemo)((function(){if(!P)return p;var e=new l.default(C,_?null:T.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[C,_,T]),k=O[0],I=O[1],x=(0,s.useMemo)((function(){return _?T:(0,r.default)({},T,{subscription:k})}),[_,T,k]),A=(0,s.useReducer)(g,f,b),M=A[0][0],N=A[1];if(M&&M.error)throw M.error;var D=(0,s.useRef)(),F=(0,s.useRef)(w),B=(0,s.useRef)(),U=(0,s.useRef)(!1),j=S((function(){return B.current&&w===F.current?B.current:R(C.getState(),w)}),[C,M,w]);m(v,[F,D,U,w,j,B,I]),m(y,[P,C,k,R,F,D,U,B,I,N],[C,k,R]);var H=(0,s.useMemo)((function(){return c().createElement(t,(0,r.default)({},j,{ref:d}))}),[d,t,j]);return(0,s.useMemo)((function(){return P?c().createElement(E.Provider,{value:x},H):H}),[E,H,x])}var C=w?c().memo(_):_;if(C.WrappedComponent=t,C.displayName=o,k){var O=c().forwardRef((function(e,t){return c().createElement(C,(0,r.default)({},e,{reactReduxForwardedRef:t}))}));return O.displayName=o,O.WrappedComponent=t,a()(O,t)}return a()(C,t)}}},57034:function(e,t,n){"use strict";var r=n(87462),i=n(63366),o=n(26685),a=n(35067),s=n(55112),c=n(11743),u=n(5532),l=n(38548);function d(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function h(e,t){return e===t}function f(e){var t=void 0===e?{}:e,n=t.connectHOC,f=void 0===n?o.default:n,p=t.mapStateToPropsFactories,g=void 0===p?c.default:p,m=t.mapDispatchToPropsFactories,v=void 0===m?s.default:m,y=t.mergePropsFactories,b=void 0===y?u.default:y,w=t.selectorFactory,E=void 0===w?l.default:w;return function(e,t,n,o){void 0===o&&(o={});var s=o,c=s.pure,u=void 0===c||c,l=s.areStatesEqual,p=void 0===l?h:l,m=s.areOwnPropsEqual,y=void 0===m?a.default:m,w=s.areStatePropsEqual,S=void 0===w?a.default:w,T=s.areMergedPropsEqual,_=void 0===T?a.default:T,P=(0,i.default)(s,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),C=d(e,g,"mapStateToProps"),R=d(t,v,"mapDispatchToProps"),O=d(n,b,"mergeProps");return f(E,(0,r.default)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:C,initMapDispatchToProps:R,initMergeProps:O,pure:u,areStatesEqual:p,areOwnPropsEqual:y,areStatePropsEqual:S,areMergedPropsEqual:_},P))}}t.default=f()},55112:function(e,t,n){"use strict";var r=n(14890),i=n(26343);t.default=[function(e){return"function"==typeof e?(0,i.wrapMapToPropsFunc)(e,"mapDispatchToProps"):void 0},function(e){return e?void 0:(0,i.wrapMapToPropsConstant)((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?(0,i.wrapMapToPropsConstant)((function(t){return(0,r.bindActionCreators)(e,t)})):void 0}]},11743:function(e,t,n){"use strict";var r=n(26343);t.default=[function(e){return"function"==typeof e?(0,r.wrapMapToPropsFunc)(e,"mapStateToProps"):void 0},function(e){return e?void 0:(0,r.wrapMapToPropsConstant)((function(){return{}}))}]},5532:function(e,t,n){"use strict";var r=n(87462);function i(e,t,n){return(0,r.default)({},n,e,t)}t.default=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,o=n.areMergedPropsEqual,a=!1;return function(t,n,s){var c=e(t,n,s);return a?i&&o(c,r)||(r=c):(a=!0,r=c),r}}}(e):void 0},function(e){return e?void 0:function(){return i}}]},38548:function(e,t,n){"use strict";n.d(t,{default:function(){return a}});var r=n(63366);function i(e,t,n,r){return function(i,o){return n(e(i,o),t(r,o),o)}}function o(e,t,n,r,i){var o,a,s,c,u,l=i.areStatesEqual,d=i.areOwnPropsEqual,h=i.areStatePropsEqual,f=!1;return function(i,p){return f?function(i,f){var p,g,m=!d(f,a),v=!l(i,o);return o=i,a=f,m&&v?(s=e(o,a),t.dependsOnOwnProps&&(c=t(r,a)),u=n(s,c,a)):m?(e.dependsOnOwnProps&&(s=e(o,a)),t.dependsOnOwnProps&&(c=t(r,a)),u=n(s,c,a)):v?(p=e(o,a),g=!h(p,s),s=p,g&&(u=n(s,c,a)),u):u}(i,p):(s=e(o=i,a=p),c=t(r,a),u=n(s,c,a),f=!0,u)}}function a(e,t){var n=t.initMapStateToProps,a=t.initMapDispatchToProps,s=t.initMergeProps,c=(0,r.default)(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),u=n(e,c),l=a(e,c),d=s(e,c);return(c.pure?o:i)(u,l,d,e,c)}},26343:function(e,t,n){"use strict";function r(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function i(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function o(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=i(e);var o=r(t,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=i(o),o=r(t,n)),o},r}}n.d(t,{wrapMapToPropsConstant:function(){return r},wrapMapToPropsFunc:function(){return o}})},72307:function(e,t,n){"use strict";n.d(t,{useDispatch:function(){return a}});var r=n(6526),i=n(420);function o(e){void 0===e&&(e=r.ReactReduxContext);var t=e===r.ReactReduxContext?i.useStore:(0,i.createStoreHook)(e);return function(){return t().dispatch}}var a=o()},2975:function(e,t,n){"use strict";n.d(t,{useReduxContext:function(){return o}});var r=n(67294),i=n(6526);function o(){return(0,r.useContext)(i.ReactReduxContext)}},59854:function(e,t,n){"use strict";n.d(t,{useSelector:function(){return l}});var r=n(67294),i=n(2975),o=n(86496),a=n(1881),s=n(6526),c=function(e,t){return e===t};function u(e){void 0===e&&(e=s.ReactReduxContext);var t=e===s.ReactReduxContext?i.useReduxContext:function(){return(0,r.useContext)(e)};return function(e,n){void 0===n&&(n=c);var i=t(),s=function(e,t,n,i){var s,c=(0,r.useReducer)((function(e){return e+1}),0)[1],u=(0,r.useMemo)((function(){return new o.default(n,i)}),[n,i]),l=(0,r.useRef)(),d=(0,r.useRef)(),h=(0,r.useRef)(),f=(0,r.useRef)(),p=n.getState();try{s=e!==d.current||p!==h.current||l.current?e(p):f.current}catch(e){throw l.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+l.current.stack+"\n\n"),e}return(0,a.useIsomorphicLayoutEffect)((function(){d.current=e,h.current=p,f.current=s,l.current=void 0})),(0,a.useIsomorphicLayoutEffect)((function(){function e(){try{var e=d.current(n.getState());if(t(e,f.current))return;f.current=e}catch(e){l.current=e}c()}return u.onStateChange=e,u.trySubscribe(),e(),function(){return u.tryUnsubscribe()}}),[n,u]),s}(e,n,i.store,i.subscription);return(0,r.useDebugValue)(s),s}}var l=u()},420:function(e,t,n){"use strict";n.d(t,{createStoreHook:function(){return a},useStore:function(){return s}});var r=n(67294),i=n(6526),o=n(2975);function a(e){void 0===e&&(e=i.ReactReduxContext);var t=e===i.ReactReduxContext?o.useReduxContext:function(){return(0,r.useContext)(e)};return function(){return t().store}}var s=a()},50533:function(e,t,n){"use strict";n.d(t,{Provider:function(){return r.default},connect:function(){return i.default},useDispatch:function(){return o.useDispatch},useSelector:function(){return a.useSelector}});var r=n(60682),i=(n(26685),n(6526),n(57034)),o=n(72307),a=n(59854),s=(n(420),n(9256)),c=n(71679);(0,s.setBatch)(c.unstable_batchedUpdates)},86496:function(e,t,n){"use strict";n.d(t,{default:function(){return o}});var r=n(9256),i={notify:function(){}},o=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=i,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){var e,t,n;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=(e=(0,r.getBatch)(),t=null,n=null,{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}))},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=i)},e}()},9256:function(e,t,n){"use strict";n.d(t,{getBatch:function(){return o},setBatch:function(){return i}});var r=function(e){e()},i=function(e){return r=e},o=function(){return r}},71679:function(e,t,n){"use strict";n.d(t,{unstable_batchedUpdates:function(){return r.unstable_batchedUpdates}});var r=n(73935)},35067:function(e,t,n){"use strict";function r(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function i(e,t){if(r(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!r(e[n[o]],t[n[o]]))return!1;return!0}n.d(t,{default:function(){return i}})},1881:function(e,t,n){"use strict";n.d(t,{useIsomorphicLayoutEffect:function(){return i}});var r=n(67294),i="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect},29697:function(e,t,n){"use strict";var r=n(87462),i=n(63366),o=n(94578),a=(n(45697),n(58255)),s=n(74277),c=n(67294),u=n.n(c),l=n(96630),d=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,s.default)(e,t)}))},h=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1];t.removeClasses(i,"exit"),t.addClass(i,o?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1]?"appear":"enter";t.addClass(i,o,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1]?"appear":"enter";t.removeClasses(i,o),t.addClass(i,o,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,i=r?(r&&n?n+"-":"")+e:n[e];return{baseClassName:i,activeClassName:r?i+"-active":n[e+"Active"],doneClassName:r?i+"-done":n[e+"Done"]}},t}(0,o.default)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&i&&(r+=" "+i),"active"===n&&e&&e.scrollTop,r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return(0,a.default)(e,t)}))}(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,i=n.active,o=n.done;this.appliedClasses[t]={},r&&d(e,r),i&&d(e,i),o&&d(e,o)},n.render=function(){var e=this.props,t=(e.classNames,(0,i.default)(e,["classNames"]));return u().createElement(l.default,(0,r.default)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(u().Component);h.defaultProps={classNames:""},h.propTypes={},t.default=h},96630:function(e,t,n){"use strict";var r=n(63366),i=n(94578),o=(n(45697),n(67294)),a=n.n(o),s=n(73935),c=n.n(s),u=n(6035),l=n(220),d="unmounted",h="exited",f="entering",p="entered",g="exiting",m=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=h,r.appearStatus=f):i=p:i=t.unmountOnExit||t.mountOnEnter?d:h,r.state={status:i},r.nextCallback=null,r}(0,i.default)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===d?{status:h}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==f&&n!==p&&(t=f):n!==f&&n!==p||(t=g)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===f?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===h&&this.setState({status:d})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[c().findDOMNode(this),r],o=i[0],a=i[1],s=this.getTimeouts(),l=r?s.appear:s.enter;!e&&!n||u.default.disabled?this.safeSetState({status:p},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:f},(function(){t.props.onEntering(o,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:p},(function(){t.props.onEntered(o,a)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:c().findDOMNode(this);t&&!u.default.disabled?(this.props.onExit(r),this.safeSetState({status:g},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:h},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:h},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:c().findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===d)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,r.default)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return a().createElement(l.default.Provider,{value:null},"function"==typeof n?n(e,i):a().cloneElement(a().Children.only(n),i))},t}(a().Component);function v(){}m.contextType=l.default,m.propTypes={},m.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:v,onEntering:v,onEntered:v,onExit:v,onExiting:v,onExited:v},m.UNMOUNTED=d,m.EXITED=h,m.ENTERING=f,m.ENTERED=p,m.EXITING=g,t.default=m},220:function(e,t,n){"use strict";var r=n(67294),i=n.n(r);t.default=i().createContext(null)},6035:function(e,t){"use strict";t.default={disabled:!1}},99240:function(e,t,n){"use strict";n.d(t,{CSSTransition:function(){return r.default}});var r=n(29697)},72408:function(e,t,n){"use strict";var r=n(27418),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,c=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.forward_ref"):60112,f=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.suspense_list"):60120,g=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116;i&&Symbol.for("react.fundamental"),i&&Symbol.for("react.responder");var v="function"==typeof Symbol&&Symbol.iterator;function y(e){for(var t=e.message,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return e.message="Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",e}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w={};function E(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||b}function S(){}function T(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||b}E.prototype.isReactComponent={},E.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw y(Error(85));this.updater.enqueueSetState(this,e,t,"setState")},E.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},S.prototype=E.prototype;var _=T.prototype=new S;_.constructor=T,r(_,E.prototype),_.isPureReactComponent=!0;var P={current:null},C={suspense:null},R={current:null},O=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,n){var r=void 0,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)O.call(t,r)&&!k.hasOwnProperty(r)&&(i[r]=t[r]);var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===i[r]&&(i[r]=c[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:R.current}}function x(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var A=/\/+/g,L=[];function M(e,t,n,r){if(L.length){var i=L.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function N(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>L.length&&L.push(e)}function D(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var s=!1;if(null===e)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case o:case a:s=!0}}if(s)return n(r,e,""===t?"."+B(e,0):t),1;if(s=0,t=""===t?".":t+":",Array.isArray(e))for(var c=0;c<e.length;c++){var u=t+B(i=e[c],c);s+=D(i,u,n,r)}else if("function"==typeof(u=null===e||"object"!=typeof e?null:"function"==typeof(u=v&&e[v]||e["@@iterator"])?u:null))for(e=u.call(e),c=0;!(i=e.next()).done;)s+=D(i=i.value,u=t+B(i,c++),n,r);else if("object"===i)throw n=""+e,y(Error(31),"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,"");return s}function F(e,t,n){return null==e?0:D(e,"",t,n)}function B(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function U(e,t){e.func.call(e.context,t,e.count++)}function j(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?H(e,r,n,(function(e){return e})):null!=e&&(x(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(A,"$&/")+"/")+n)),r.push(e))}function H(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(A,"$&/")+"/"),F(e,j,t=M(t,o,r,i)),N(t)}function z(){var e=P.current;if(null===e)throw y(Error(321));return e}var V={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return H(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;F(e,U,t=M(null,null,t,n)),N(t)},count:function(e){return F(e,(function(){return null}),null)},toArray:function(e){var t=[];return H(e,t,null,(function(e){return e})),t},only:function(e){if(!x(e))throw y(Error(143));return e}},createRef:function(){return{current:null}},Component:E,PureComponent:T,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:h,render:e}},lazy:function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:g,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return z().useCallback(e,t)},useContext:function(e,t){return z().useContext(e,t)},useEffect:function(e,t){return z().useEffect(e,t)},useImperativeHandle:function(e,t,n){return z().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return z().useLayoutEffect(e,t)},useMemo:function(e,t){return z().useMemo(e,t)},useReducer:function(e,t,n){return z().useReducer(e,t,n)},useRef:function(e){return z().useRef(e)},useState:function(e){return z().useState(e)},Fragment:s,Profiler:u,StrictMode:c,Suspense:f,unstable_SuspenseList:p,createElement:I,cloneElement:function(e,t,n){if(null==e)throw y(Error(267),e);var i=void 0,a=r({},e.props),s=e.key,c=e.ref,u=e._owner;if(null!=t){void 0!==t.ref&&(c=t.ref,u=R.current),void 0!==t.key&&(s=""+t.key);var l=void 0;for(i in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)O.call(t,i)&&!k.hasOwnProperty(i)&&(a[i]=void 0===t[i]&&void 0!==l?l[i]:t[i])}if(1==(i=arguments.length-2))a.children=n;else if(1<i){l=Array(i);for(var d=0;d<i;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:o,type:e.type,key:s,ref:c,props:a,_owner:u}},createFactory:function(e){var t=I.bind(null,e);return t.type=e,t},isValidElement:x,version:"16.9.0",unstable_withSuspenseConfig:function(e,t){var n=C.suspense;C.suspense=void 0===t?null:t;try{e()}finally{C.suspense=n}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:P,ReactCurrentBatchConfig:C,ReactCurrentOwner:R,IsSomeRendererActing:{current:!1},assign:r}},G={default:V},W=G&&V||G;e.exports=W.default||W},67294:function(e,t,n){"use strict";e.exports=n(72408)},14890:function(e,t,n){"use strict";n.d(t,{bindActionCreators:function(){return d},combineReducers:function(){return u},createStore:function(){return s}});var r=n(27164),i=function(){return Math.random().toString(36).substring(7).split("").join(".")},o={INIT:"@@redux/INIT"+i(),REPLACE:"@@redux/REPLACE"+i(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+i()}};function a(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function s(e,t,n){var i;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(s)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var c=e,u=t,l=[],d=l,h=!1;function f(){d===l&&(d=l.slice())}function p(){if(h)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return u}function g(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(h)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return f(),d.push(e),function(){if(t){if(h)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,f();var n=d.indexOf(e);d.splice(n,1),l=null}}}function m(e){if(!a(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(h)throw new Error("Reducers may not dispatch actions.");try{h=!0,u=c(u,e)}finally{h=!1}for(var t=l=d,n=0;n<t.length;n++)(0,t[n])();return e}function v(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");c=e,m({type:o.REPLACE})}function y(){var e,t=g;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(p())}return n(),{unsubscribe:t(n)}}})[r.default]=function(){return this},e}return m({type:o.INIT}),(i={dispatch:m,subscribe:g,getState:p,replaceReducer:v})[r.default]=y,i}function c(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function u(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var a,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:o.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:o.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+o.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},o=0;o<s.length;o++){var u=s[o],l=n[u],d=e[u],h=l(d,t);if(void 0===h){var f=c(u,t);throw new Error(f)}i[u]=h,r=r||h!==d}return(r=r||s.length!==Object.keys(e).length)?i:e}}function l(e,t){return function(){return t(e.apply(this,arguments))}}function d(e,t){if("function"==typeof e)return l(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var r in e){var i=e[r];"function"==typeof i&&(n[r]=l(i,t))}return n}},60053:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=void 0,r=void 0,i=void 0,o=void 0,a=void 0;if(t.unstable_now=void 0,t.unstable_forceFrameRate=void 0,"undefined"==typeof window||"function"!=typeof MessageChannel){var s=null,c=null,u=function(){if(null!==s)try{var e=t.unstable_now();s(!0,e),s=null}catch(e){throw setTimeout(u,0),e}};t.unstable_now=function(){return Date.now()},n=function(e){null!==s?setTimeout(n,0,e):(s=e,setTimeout(u,0))},r=function(e,t){c=setTimeout(e,t)},i=function(){clearTimeout(c)},o=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var l=window.performance,d=window.Date,h=window.setTimeout,f=window.clearTimeout,p=window.requestAnimationFrame,g=window.cancelAnimationFrame;"undefined"!=typeof console&&("function"!=typeof p&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")),t.unstable_now="object"==typeof l&&"function"==typeof l.now?function(){return l.now()}:function(){return d.now()};var m=!1,v=null,y=-1,b=-1,w=33.33,E=-1,S=-1,T=0,_=!1;o=function(){return t.unstable_now()>=T},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):0<e?(w=Math.floor(1e3/e),_=!0):(w=33.33,_=!1)};var P=function(){if(null!==v){var e=t.unstable_now(),n=0<T-e;try{v(n,e)||(v=null)}catch(e){throw R.postMessage(null),e}}},C=new MessageChannel,R=C.port2;C.port1.onmessage=P;var O=function(e){if(null===v)S=E=-1,m=!1;else{m=!0,p((function(e){f(y),O(e)}));var n=function(){T=t.unstable_now()+w/2,P(),y=h(n,3*w)};if(y=h(n,3*w),-1!==E&&.1<e-E){var r=e-E;!_&&-1!==S&&r<w&&S<w&&8.33>(w=r<S?S:r)&&(w=8.33),S=r}E=e,T=e+w,R.postMessage(null)}};n=function(e){v=e,m||(m=!0,p((function(e){O(e)})))},r=function(e,n){b=h((function(){e(t.unstable_now())}),n)},i=function(){f(b),b=-1}}var k=null,I=null,x=null,A=3,L=!1,M=!1,N=!1;function D(e,t){var n=e.next;if(n===e)k=null;else{e===k&&(k=n);var r=e.previous;r.next=n,n.previous=r}e.next=e.previous=null,n=e.callback,r=A;var i=x;A=e.priorityLevel,x=e;try{var o=e.expirationTime<=t;switch(A){case 1:var a=n(o);break;case 2:case 3:case 4:case 5:a=n(o)}}catch(e){throw e}finally{A=r,x=i}if("function"==typeof a)if(t=e.expirationTime,e.callback=a,null===k)k=e.next=e.previous=e;else{a=null,o=k;do{if(t<=o.expirationTime){a=o;break}o=o.next}while(o!==k);null===a?a=k:a===k&&(k=e),(t=a.previous).next=a.previous=e,e.next=a,e.previous=t}}function F(e){if(null!==I&&I.startTime<=e)do{var t=I,n=t.next;if(t===n)I=null;else{I=n;var r=t.previous;r.next=n,n.previous=r}t.next=t.previous=null,H(t,t.expirationTime)}while(null!==I&&I.startTime<=e)}function B(e){N=!1,F(e),M||(null!==k?(M=!0,n(U)):null!==I&&r(B,I.startTime-e))}function U(e,n){M=!1,N&&(N=!1,i()),F(n),L=!0;try{if(e){if(null!==k)do{D(k,n),F(n=t.unstable_now())}while(null!==k&&!o())}else for(;null!==k&&k.expirationTime<=n;)D(k,n),F(n=t.unstable_now());return null!==k||(null!==I&&r(B,I.startTime-n),!1)}finally{L=!1}}function j(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}function H(e,t){if(null===k)k=e.next=e.previous=e;else{var n=null,r=k;do{if(t<r.expirationTime){n=r;break}r=r.next}while(r!==k);null===n?n=k:n===k&&(k=e),(t=n.previous).next=n.previous=e,e.next=n,e.previous=t}}var z=a;t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_scheduleCallback=function(e,o,a){var s=t.unstable_now();if("object"==typeof a&&null!==a){var c=a.delay;c="number"==typeof c&&0<c?s+c:s,a="number"==typeof a.timeout?a.timeout:j(e)}else a=j(e),c=s;if(e={callback:o,priorityLevel:e,startTime:c,expirationTime:a=c+a,next:null,previous:null},c>s){if(a=c,null===I)I=e.next=e.previous=e;else{o=null;var u=I;do{if(a<u.startTime){o=u;break}u=u.next}while(u!==I);null===o?o=I:o===I&&(I=e),(a=o.previous).next=o.previous=e,e.next=o,e.previous=a}null===k&&I===e&&(N?i():N=!0,r(B,c-s))}else H(e,a),M||L||(M=!0,n(U));return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(e===t)e===k?k=null:e===I&&(I=null);else{e===k?k=t:e===I&&(I=t);var n=e.previous;n.next=t,t.previous=n}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_shouldYield=function(){var e=t.unstable_now();return F(e),null!==x&&null!==k&&k.startTime<=e&&k.expirationTime<x.expirationTime||o()},t.unstable_requestPaint=z,t.unstable_continueExecution=function(){M||L||(M=!0,n(U))},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return k}},63840:function(e,t,n){"use strict";e.exports=n(60053)},76372:function(e){"use strict";function t(e){return"function"==typeof e}var n=console.error.bind(console);function r(e,t,n){var r=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:r,writable:!0,value:n})}function i(e){e&&e.logger&&(t(e.logger)?n=e.logger:n("new logger isn't a function, not replacing"))}function o(e,i,o){if(e&&e[i]){if(!o)return n("no wrapper function"),void n((new Error).stack);if(t(e[i])&&t(o)){var a=e[i],s=o(a,i);return r(s,"__original",a),r(s,"__unwrap",(function(){e[i]===s&&r(e,i,a)})),r(s,"__wrapped",!0),r(e,i,s),s}n("original object and wrapper must be functions")}else n("no original function "+i+" to wrap")}function a(e,t){return e&&e[t]?e[t].__unwrap?e[t].__unwrap():void n("no original to unwrap to -- has "+t+" already been unwrapped?"):(n("no function to unwrap."),void n((new Error).stack))}i.wrap=o,i.massWrap=function(e,t,r){if(!e)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){o(e,t,r)}))})):n("must provide one or more functions to wrap on modules")},i.unwrap=a,i.massUnwrap=function(e,t){if(!e)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){a(e,t)}))})):n("must provide one or more functions to unwrap on modules")},e.exports=i},78213:function(e,t,n){var r=n(32728),i=Object.prototype.hasOwnProperty;function o(){this._array=[],this._set=Object.create(null)}o.fromArray=function(e,t){for(var n=new o,r=0,i=e.length;r<i;r++)n.add(e[r],t);return n},o.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},o.prototype.add=function(e,t){var n=r.toSetString(e),o=i.call(this._set,n),a=this._array.length;o&&!t||this._array.push(e),o||(this._set[n]=a)},o.prototype.has=function(e){var t=r.toSetString(e);return i.call(this._set,t)},o.prototype.indexOf=function(e){var t=r.toSetString(e);if(i.call(this._set,t))return this._set[t];throw new Error('"'+e+'" is not in the set.')},o.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},o.prototype.toArray=function(){return this._array.slice()},t.ArraySet=o},16400:function(e,t,n){var r=n(67923);t.encode=function(e){var t,n="",i=function(e){return e<0?1+(-e<<1):0+(e<<1)}(e);do{t=31&i,(i>>>=5)>0&&(t|=32),n+=r.encode(t)}while(i>0);return n},t.decode=function(e,t,n){var i,o,a,s,c=e.length,u=0,l=0;do{if(t>=c)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(o=r.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1));i=!!(32&o),u+=(o&=31)<<l,l+=5}while(i);n.value=(s=(a=u)>>1,1==(1&a)?-s:s),n.rest=t}},67923:function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");t.encode=function(e){if(0<=e&&e<n.length)return n[e];throw new TypeError("Must be between 0 and 63: "+e)},t.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}},9216:function(e,t){function n(e,r,i,o,a,s){var c=Math.floor((r-e)/2)+e,u=a(i,o[c],!0);return 0===u?c:u>0?r-c>1?n(c,r,i,o,a,s):s==t.LEAST_UPPER_BOUND?r<o.length?r:-1:c:c-e>1?n(e,c,i,o,a,s):s==t.LEAST_UPPER_BOUND?c:e<0?-1:e}t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2,t.search=function(e,r,i,o){if(0===r.length)return-1;var a=n(-1,r.length,e,r,i,o||t.GREATEST_LOWER_BOUND);if(a<0)return-1;for(;a-1>=0&&0===i(r[a],r[a-1],!0);)--a;return a}},21188:function(e,t,n){var r=n(32728);function i(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}i.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},i.prototype.add=function(e){var t,n,i,o,a,s;n=e,i=(t=this._last).generatedLine,o=n.generatedLine,a=t.generatedColumn,s=n.generatedColumn,o>i||o==i&&s>=a||r.compareByGeneratedPositionsInflated(t,n)<=0?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},i.prototype.toArray=function(){return this._sorted||(this._array.sort(r.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},t.MappingList=i},22826:function(e,t){function n(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function r(e,t,i,o){if(i<o){var a=i-1;n(e,(l=i,d=o,Math.round(l+Math.random()*(d-l))),o);for(var s=e[o],c=i;c<o;c++)t(e[c],s)<=0&&n(e,a+=1,c);n(e,a+1,c);var u=a+1;r(e,t,i,u-1),r(e,t,u+1,o)}var l,d}t.quickSort=function(e,t){r(e,t,0,e.length-1)}},76771:function(e,t,n){var r=n(32728),i=n(9216),o=n(78213).ArraySet,a=n(16400),s=n(22826).quickSort;function c(e){var t=e;return"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,""))),null!=t.sections?new d(t):new u(t)}function u(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=r.getArg(t,"version"),i=r.getArg(t,"sources"),a=r.getArg(t,"names",[]),s=r.getArg(t,"sourceRoot",null),c=r.getArg(t,"sourcesContent",null),u=r.getArg(t,"mappings"),l=r.getArg(t,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);i=i.map(String).map(r.normalize).map((function(e){return s&&r.isAbsolute(s)&&r.isAbsolute(e)?r.relative(s,e):e})),this._names=o.fromArray(a.map(String),!0),this._sources=o.fromArray(i,!0),this.sourceRoot=s,this.sourcesContent=c,this._mappings=u,this.file=l}function l(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function d(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=r.getArg(t,"version"),i=r.getArg(t,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new o,this._names=new o;var a={line:-1,column:0};this._sections=i.map((function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var t=r.getArg(e,"offset"),n=r.getArg(t,"line"),i=r.getArg(t,"column");if(n<a.line||n===a.line&&i<a.column)throw new Error("Section offsets must be ordered and non-overlapping.");return a=t,{generatedOffset:{generatedLine:n+1,generatedColumn:i+1},consumer:new c(r.getArg(e,"map"))}}))}c.fromSourceMap=function(e){return u.fromSourceMap(e)},c.prototype._version=3,c.prototype.__generatedMappings=null,Object.defineProperty(c.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),c.prototype.__originalMappings=null,Object.defineProperty(c.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),c.prototype._charIsMappingSeparator=function(e,t){var n=e.charAt(t);return";"===n||","===n},c.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},c.GENERATED_ORDER=1,c.ORIGINAL_ORDER=2,c.GREATEST_LOWER_BOUND=1,c.LEAST_UPPER_BOUND=2,c.prototype.eachMapping=function(e,t,n){var i,o=t||null;switch(n||c.GENERATED_ORDER){case c.GENERATED_ORDER:i=this._generatedMappings;break;case c.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;i.map((function(e){var t=null===e.source?null:this._sources.at(e.source);return null!=t&&null!=a&&(t=r.join(a,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}}),this).forEach(e,o)},c.prototype.allGeneratedPositionsFor=function(e){var t=r.getArg(e,"line"),n={source:r.getArg(e,"source"),originalLine:t,originalColumn:r.getArg(e,"column",0)};if(null!=this.sourceRoot&&(n.source=r.relative(this.sourceRoot,n.source)),!this._sources.has(n.source))return[];n.source=this._sources.indexOf(n.source);var o=[],a=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions,i.LEAST_UPPER_BOUND);if(a>=0){var s=this._originalMappings[a];if(void 0===e.column)for(var c=s.originalLine;s&&s.originalLine===c;)o.push({line:r.getArg(s,"generatedLine",null),column:r.getArg(s,"generatedColumn",null),lastColumn:r.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++a];else for(var u=s.originalColumn;s&&s.originalLine===t&&s.originalColumn==u;)o.push({line:r.getArg(s,"generatedLine",null),column:r.getArg(s,"generatedColumn",null),lastColumn:r.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++a]}return o},t.SourceMapConsumer=c,u.prototype=Object.create(c.prototype),u.prototype.consumer=c,u.fromSourceMap=function(e){var t=Object.create(u.prototype),n=t._names=o.fromArray(e._names.toArray(),!0),i=t._sources=o.fromArray(e._sources.toArray(),!0);t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file;for(var a=e._mappings.toArray().slice(),c=t.__generatedMappings=[],d=t.__originalMappings=[],h=0,f=a.length;h<f;h++){var p=a[h],g=new l;g.generatedLine=p.generatedLine,g.generatedColumn=p.generatedColumn,p.source&&(g.source=i.indexOf(p.source),g.originalLine=p.originalLine,g.originalColumn=p.originalColumn,p.name&&(g.name=n.indexOf(p.name)),d.push(g)),c.push(g)}return s(t.__originalMappings,r.compareByOriginalPositions),t},u.prototype._version=3,Object.defineProperty(u.prototype,"sources",{get:function(){return this._sources.toArray().map((function(e){return null!=this.sourceRoot?r.join(this.sourceRoot,e):e}),this)}}),u.prototype._parseMappings=function(e,t){for(var n,i,o,c,u,d=1,h=0,f=0,p=0,g=0,m=0,v=e.length,y=0,b={},w={},E=[],S=[];y<v;)if(";"===e.charAt(y))d++,y++,h=0;else if(","===e.charAt(y))y++;else{for((n=new l).generatedLine=d,c=y;c<v&&!this._charIsMappingSeparator(e,c);c++);if(o=b[i=e.slice(y,c)])y+=i.length;else{for(o=[];y<c;)a.decode(e,y,w),u=w.value,y=w.rest,o.push(u);if(2===o.length)throw new Error("Found a source, but no line and column");if(3===o.length)throw new Error("Found a source and line, but no column");b[i]=o}n.generatedColumn=h+o[0],h=n.generatedColumn,o.length>1&&(n.source=g+o[1],g+=o[1],n.originalLine=f+o[2],f=n.originalLine,n.originalLine+=1,n.originalColumn=p+o[3],p=n.originalColumn,o.length>4&&(n.name=m+o[4],m+=o[4])),S.push(n),"number"==typeof n.originalLine&&E.push(n)}s(S,r.compareByGeneratedPositionsDeflated),this.__generatedMappings=S,s(E,r.compareByOriginalPositions),this.__originalMappings=E},u.prototype._findMapping=function(e,t,n,r,o,a){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return i.search(e,t,o,a)},u.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},u.prototype.originalPositionFor=function(e){var t={generatedLine:r.getArg(e,"line"),generatedColumn:r.getArg(e,"column")},n=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",r.compareByGeneratedPositionsDeflated,r.getArg(e,"bias",c.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===t.generatedLine){var o=r.getArg(i,"source",null);null!==o&&(o=this._sources.at(o),null!=this.sourceRoot&&(o=r.join(this.sourceRoot,o)));var a=r.getArg(i,"name",null);return null!==a&&(a=this._names.at(a)),{source:o,line:r.getArg(i,"originalLine",null),column:r.getArg(i,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},u.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some((function(e){return null==e}))},u.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=r.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var n;if(null!=this.sourceRoot&&(n=r.urlParse(this.sourceRoot))){var i=e.replace(/^file:\/\//,"");if("file"==n.scheme&&this._sources.has(i))return this.sourcesContent[this._sources.indexOf(i)];if((!n.path||"/"==n.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},u.prototype.generatedPositionFor=function(e){var t=r.getArg(e,"source");if(null!=this.sourceRoot&&(t=r.relative(this.sourceRoot,t)),!this._sources.has(t))return{line:null,column:null,lastColumn:null};var n={source:t=this._sources.indexOf(t),originalLine:r.getArg(e,"line"),originalColumn:r.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions,r.getArg(e,"bias",c.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:r.getArg(o,"generatedLine",null),column:r.getArg(o,"generatedColumn",null),lastColumn:r.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},d.prototype=Object.create(c.prototype),d.prototype.constructor=c,d.prototype._version=3,Object.defineProperty(d.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}}),d.prototype.originalPositionFor=function(e){var t={generatedLine:r.getArg(e,"line"),generatedColumn:r.getArg(e,"column")},n=i.search(t,this._sections,(function(e,t){return e.generatedLine-t.generatedOffset.generatedLine||e.generatedColumn-t.generatedOffset.generatedColumn})),o=this._sections[n];return o?o.consumer.originalPositionFor({line:t.generatedLine-(o.generatedOffset.generatedLine-1),column:t.generatedColumn-(o.generatedOffset.generatedLine===t.generatedLine?o.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},d.prototype.hasContentsOfAllSources=function(){return this._sections.every((function(e){return e.consumer.hasContentsOfAllSources()}))},d.prototype.sourceContentFor=function(e,t){for(var n=0;n<this._sections.length;n++){var r=this._sections[n].consumer.sourceContentFor(e,!0);if(r)return r}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},d.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var n=this._sections[t];if(-1!==n.consumer.sources.indexOf(r.getArg(e,"source"))){var i=n.consumer.generatedPositionFor(e);if(i)return{line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},d.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,a=0;a<o.length;a++){var c=o[a],u=i.consumer._sources.at(c.source);null!==i.consumer.sourceRoot&&(u=r.join(i.consumer.sourceRoot,u)),this._sources.add(u),u=this._sources.indexOf(u);var l=i.consumer._names.at(c.name);this._names.add(l),l=this._names.indexOf(l);var d={source:u,generatedLine:c.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:c.generatedColumn+(i.generatedOffset.generatedLine===c.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:c.originalLine,originalColumn:c.originalColumn,name:l};this.__generatedMappings.push(d),"number"==typeof d.originalLine&&this.__originalMappings.push(d)}s(this.__generatedMappings,r.compareByGeneratedPositionsDeflated),s(this.__originalMappings,r.compareByOriginalPositions)}},34433:function(e,t,n){var r=n(16400),i=n(32728),o=n(78213).ArraySet,a=n(21188).MappingList;function s(e){e||(e={}),this._file=i.getArg(e,"file",null),this._sourceRoot=i.getArg(e,"sourceRoot",null),this._skipValidation=i.getArg(e,"skipValidation",!1),this._sources=new o,this._names=new o,this._mappings=new a,this._sourcesContents=null}s.prototype._version=3,s.fromSourceMap=function(e){var t=e.sourceRoot,n=new s({file:e.file,sourceRoot:t});return e.eachMapping((function(e){var r={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(r.source=e.source,null!=t&&(r.source=i.relative(t,r.source)),r.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(r.name=e.name)),n.addMapping(r)})),e.sources.forEach((function(t){var r=e.sourceContentFor(t);null!=r&&n.setSourceContent(t,r)})),n},s.prototype.addMapping=function(e){var t=i.getArg(e,"generated"),n=i.getArg(e,"original",null),r=i.getArg(e,"source",null),o=i.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,n,r,o),null!=r&&(r=String(r),this._sources.has(r)||this._sources.add(r)),null!=o&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:r,name:o})},s.prototype.setSourceContent=function(e,t){var n=e;null!=this._sourceRoot&&(n=i.relative(this._sourceRoot,n)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[i.toSetString(n)]=t):this._sourcesContents&&(delete this._sourcesContents[i.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},s.prototype.applySourceMap=function(e,t,n){var r=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');r=e.file}var a=this._sourceRoot;null!=a&&(r=i.relative(a,r));var s=new o,c=new o;this._mappings.unsortedForEach((function(t){if(t.source===r&&null!=t.originalLine){var o=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=o.source&&(t.source=o.source,null!=n&&(t.source=i.join(n,t.source)),null!=a&&(t.source=i.relative(a,t.source)),t.originalLine=o.line,t.originalColumn=o.column,null!=o.name&&(t.name=o.name))}var u=t.source;null==u||s.has(u)||s.add(u);var l=t.name;null==l||c.has(l)||c.add(l)}),this),this._sources=s,this._names=c,e.sources.forEach((function(t){var r=e.sourceContentFor(t);null!=r&&(null!=n&&(t=i.join(n,t)),null!=a&&(t=i.relative(a,t)),this.setSourceContent(t,r))}),this)},s.prototype._validateMapping=function(e,t,n,r){if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||n||r)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:r}))},s.prototype._serializeMappings=function(){for(var e,t,n,o,a=0,s=1,c=0,u=0,l=0,d=0,h="",f=this._mappings.toArray(),p=0,g=f.length;p<g;p++){if(e="",(t=f[p]).generatedLine!==s)for(a=0;t.generatedLine!==s;)e+=";",s++;else if(p>0){if(!i.compareByGeneratedPositionsInflated(t,f[p-1]))continue;e+=","}e+=r.encode(t.generatedColumn-a),a=t.generatedColumn,null!=t.source&&(o=this._sources.indexOf(t.source),e+=r.encode(o-d),d=o,e+=r.encode(t.originalLine-1-u),u=t.originalLine-1,e+=r.encode(t.originalColumn-c),c=t.originalColumn,null!=t.name&&(n=this._names.indexOf(t.name),e+=r.encode(n-l),l=n)),h+=e}return h},s.prototype._generateSourcesContent=function(e,t){return e.map((function(e){if(!this._sourcesContents)return null;null!=t&&(e=i.relative(t,e));var n=i.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null}),this)},s.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},s.prototype.toString=function(){return JSON.stringify(this.toJSON())},t.SourceMapGenerator=s},17085:function(e,t,n){var r=n(34433).SourceMapGenerator,i=n(32728),o=/(\r?\n)/,a="$$$isSourceNode$$$";function s(e,t,n,r,i){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==i?null:i,this[a]=!0,null!=r&&this.add(r)}s.fromStringWithSourceMap=function(e,t,n){var r=new s,a=e.split(o),c=function(){return a.shift()+(a.shift()||"")},u=1,l=0,d=null;return t.eachMapping((function(e){if(null!==d){if(!(u<e.generatedLine)){var t=(n=a[0]).substr(0,e.generatedColumn-l);return a[0]=n.substr(e.generatedColumn-l),l=e.generatedColumn,h(d,t),void(d=e)}h(d,c()),u++,l=0}for(;u<e.generatedLine;)r.add(c()),u++;if(l<e.generatedColumn){var n=a[0];r.add(n.substr(0,e.generatedColumn)),a[0]=n.substr(e.generatedColumn),l=e.generatedColumn}d=e}),this),a.length>0&&(d&&h(d,c()),r.add(a.join(""))),t.sources.forEach((function(e){var o=t.sourceContentFor(e);null!=o&&(null!=n&&(e=i.join(n,e)),r.setSourceContent(e,o))})),r;function h(e,t){if(null===e||void 0===e.source)r.add(t);else{var o=n?i.join(n,e.source):e.source;r.add(new s(e.originalLine,e.originalColumn,o,t,e.name))}}},s.prototype.add=function(e){if(Array.isArray(e))e.forEach((function(e){this.add(e)}),this);else{if(!e[a]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},s.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[a]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},s.prototype.walk=function(e){for(var t,n=0,r=this.children.length;n<r;n++)(t=this.children[n])[a]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},s.prototype.join=function(e){var t,n,r=this.children.length;if(r>0){for(t=[],n=0;n<r-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},s.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n[a]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},s.prototype.setSourceContent=function(e,t){this.sourceContents[i.toSetString(e)]=t},s.prototype.walkSourceContents=function(e){for(var t=0,n=this.children.length;t<n;t++)this.children[t][a]&&this.children[t].walkSourceContents(e);var r=Object.keys(this.sourceContents);for(t=0,n=r.length;t<n;t++)e(i.fromSetString(r[t]),this.sourceContents[r[t]])},s.prototype.toString=function(){var e="";return this.walk((function(t){e+=t})),e},s.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},n=new r(e),i=!1,o=null,a=null,s=null,c=null;return this.walk((function(e,r){t.code+=e,null!==r.source&&null!==r.line&&null!==r.column?(o===r.source&&a===r.line&&s===r.column&&c===r.name||n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:t.line,column:t.column},name:r.name}),o=r.source,a=r.line,s=r.column,c=r.name,i=!0):i&&(n.addMapping({generated:{line:t.line,column:t.column}}),o=null,i=!1);for(var u=0,l=e.length;u<l;u++)10===e.charCodeAt(u)?(t.line++,t.column=0,u+1===l?(o=null,i=!1):i&&n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:t.line,column:t.column},name:r.name})):t.column++})),this.walkSourceContents((function(e,t){n.setSourceContent(e,t)})),{code:t.code,map:n}},t.SourceNode=s},32728:function(e,t){t.getArg=function(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')};var n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,r=/^data:.+\,.+$/;function i(e){var t=e.match(n);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function o(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function a(e){var n=e,r=i(e);if(r){if(!r.path)return e;n=r.path}for(var a,s=t.isAbsolute(n),c=n.split(/\/+/),u=0,l=c.length-1;l>=0;l--)"."===(a=c[l])?c.splice(l,1):".."===a?u++:u>0&&(""===a?(c.splice(l+1,u),u=0):(c.splice(l,2),u--));return""===(n=c.join("/"))&&(n=s?"/":"."),r?(r.path=n,o(r)):n}t.urlParse=i,t.urlGenerate=o,t.normalize=a,t.join=function(e,t){""===e&&(e="."),""===t&&(t=".");var n=i(t),s=i(e);if(s&&(e=s.path||"/"),n&&!n.scheme)return s&&(n.scheme=s.scheme),o(n);if(n||t.match(r))return t;if(s&&!s.host&&!s.path)return s.host=t,o(s);var c="/"===t.charAt(0)?t:a(e.replace(/\/+$/,"")+"/"+t);return s?(s.path=c,o(s)):c},t.isAbsolute=function(e){return"/"===e.charAt(0)||!!e.match(n)},t.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var n=0;0!==t.indexOf(e+"/");){var r=e.lastIndexOf("/");if(r<0)return t;if((e=e.slice(0,r)).match(/^([^\/]+:\/)?\/*$/))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)};var s=!("__proto__"in Object.create(null));function c(e){return e}function u(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var n=t-10;n>=0;n--)if(36!==e.charCodeAt(n))return!1;return!0}function l(e,t){return e===t?0:e>t?1:-1}t.toSetString=s?c:function(e){return u(e)?"$"+e:e},t.fromSetString=s?c:function(e){return u(e)?e.slice(1):e},t.compareByOriginalPositions=function(e,t,n){var r=e.source-t.source;return 0!==r||0!=(r=e.originalLine-t.originalLine)||0!=(r=e.originalColumn-t.originalColumn)||n||0!=(r=e.generatedColumn-t.generatedColumn)||0!=(r=e.generatedLine-t.generatedLine)?r:e.name-t.name},t.compareByGeneratedPositionsDeflated=function(e,t,n){var r=e.generatedLine-t.generatedLine;return 0!==r||0!=(r=e.generatedColumn-t.generatedColumn)||n||0!=(r=e.source-t.source)||0!=(r=e.originalLine-t.originalLine)||0!=(r=e.originalColumn-t.originalColumn)?r:e.name-t.name},t.compareByGeneratedPositionsInflated=function(e,t){var n=e.generatedLine-t.generatedLine;return 0!==n||0!=(n=e.generatedColumn-t.generatedColumn)||0!==(n=l(e.source,t.source))||0!=(n=e.originalLine-t.originalLine)||0!=(n=e.originalColumn-t.originalColumn)?n:l(e.name,t.name)}},49125:function(e,t,n){t.SourceMapGenerator=n(34433).SourceMapGenerator,t.SourceMapConsumer=n(76771).SourceMapConsumer,t.SourceNode=n(17085).SourceNode},34595:function(e,t,n){var r,i,o;!function(a,s){"use strict";i=[n(59829)],r=function(e){return{backtrace:function(t){var n=[],r=10;"object"==typeof t&&"number"==typeof t.maxStackSize&&(r=t.maxStackSize);for(var i=arguments.callee;i&&n.length<r&&i.arguments;){for(var o=new Array(i.arguments.length),a=0;a<o.length;++a)o[a]=i.arguments[a];/function(?:\s+([\w$]+))+\s*\(/.test(i.toString())?n.push(new e({functionName:RegExp.$1||void 0,args:o})):n.push(new e({args:o}));try{i=i.caller}catch(e){break}}return n}}},void 0===(o=r.apply(t,i))||(e.exports=o)}()},59829:function(e,t){var n,r,i;!function(o,a){"use strict";r=[],void 0===(i="function"==typeof(n=function(){function e(e){return e.charAt(0).toUpperCase()+e.substring(1)}function t(e){return function(){return this[e]}}var n=["isConstructor","isEval","isNative","isToplevel"],r=["columnNumber","lineNumber"],i=["fileName","functionName","source"],o=n.concat(r,i,["args"],["evalOrigin"]);function a(t){if(t)for(var n=0;n<o.length;n++)void 0!==t[o[n]]&&this["set"+e(o[n])](t[o[n]])}a.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof a)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new a(e)}},toString:function(){var e=this.getFileName()||"",t=this.getLineNumber()||"",n=this.getColumnNumber()||"",r=this.getFunctionName()||"";return this.getIsEval()?e?"[eval] ("+e+":"+t+":"+n+")":"[eval]:"+t+":"+n:r?r+" ("+e+":"+t+":"+n+")":e+":"+t+":"+n}},a.fromString=function(e){var t=e.indexOf("("),n=e.lastIndexOf(")"),r=e.substring(0,t),i=e.substring(t+1,n).split(","),o=e.substring(n+1);if(0===o.indexOf("@"))var s=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(o,""),c=s[1],u=s[2],l=s[3];return new a({functionName:r,args:i||void 0,fileName:c,lineNumber:u||void 0,columnNumber:l||void 0})};for(var s=0;s<n.length;s++)a.prototype["get"+e(n[s])]=t(n[s]),a.prototype["set"+e(n[s])]=function(e){return function(t){this[e]=Boolean(t)}}(n[s]);for(var c=0;c<r.length;c++)a.prototype["get"+e(r[c])]=t(r[c]),a.prototype["set"+e(r[c])]=function(e){return function(t){if(n=t,isNaN(parseFloat(n))||!isFinite(n))throw new TypeError(e+" must be a Number");var n;this[e]=Number(t)}}(r[c]);for(var u=0;u<i.length;u++)a.prototype["get"+e(i[u])]=t(i[u]),a.prototype["set"+e(i[u])]=function(e){return function(t){this[e]=String(t)}}(i[u]);return a})?n.apply(t,r):n)||(e.exports=i)}()},64358:function(e,t,n){var r,i,o;!function(a,s){"use strict";i=[n(49125),n(59829)],void 0===(o="function"==typeof(r=function(e,t){function n(e){return new Promise((function(t,n){var r=new XMLHttpRequest;r.open("get",e),r.onerror=n,r.onreadystatechange=function(){4===r.readyState&&(r.status>=200&&r.status<300||"file://"===e.substr(0,7)&&r.responseText?t(r.responseText):n(new Error("HTTP status: "+r.status+" retrieving "+e)))},r.send()}))}function r(e){if("undefined"!=typeof window&&window.atob)return window.atob(e);throw new Error("You must supply a polyfill for window.atob in this environment")}function i(e){if("object"!=typeof e)throw new TypeError("Given StackFrame is not an object");if("string"!=typeof e.fileName)throw new TypeError("Given file name is not a String");if("number"!=typeof e.lineNumber||e.lineNumber%1!=0||e.lineNumber<1)throw new TypeError("Given line number must be a positive integer");if("number"!=typeof e.columnNumber||e.columnNumber%1!=0||e.columnNumber<0)throw new TypeError("Given column number must be a non-negative integer");return!0}return function o(a){if(!(this instanceof o))return new o(a);a=a||{},this.sourceCache=a.sourceCache||{},this.sourceMapConsumerCache=a.sourceMapConsumerCache||{},this.ajax=a.ajax||n,this._atob=a.atob||r,this._get=function(e){return new Promise(function(t,n){var r="data:"===e.substr(0,5);if(this.sourceCache[e])t(this.sourceCache[e]);else if(a.offline&&!r)n(new Error("Cannot make network requests in offline mode"));else if(r){var i=e.match(/^data:application\/json;([\w=:"-]+;)*base64,/);if(i){var o=i[0].length,s=e.substr(o),c=this._atob(s);this.sourceCache[e]=c,t(c)}else n(new Error("The encoding of the inline sourcemap is not supported"))}else{var u=this.ajax(e,{method:"get"});this.sourceCache[e]=u,u.then(t,n)}}.bind(this))},this._getSourceMapConsumer=function(t,n){return new Promise(function(r){if(this.sourceMapConsumerCache[t])r(this.sourceMapConsumerCache[t]);else{var i=new Promise(function(r,i){return this._get(t).then((function(t){"string"==typeof t&&(t=function(e){if("undefined"!=typeof JSON&&JSON.parse)return JSON.parse(e);throw new Error("You must supply a polyfill for JSON.parse in this environment")}(t.replace(/^\)\]\}'/,""))),void 0===t.sourceRoot&&(t.sourceRoot=n),r(new e.SourceMapConsumer(t))})).catch(i)}.bind(this));this.sourceMapConsumerCache[t]=i,r(i)}}.bind(this))},this.pinpoint=function(e){return new Promise(function(t,n){this.getMappedLocation(e).then(function(e){function n(){t(e)}this.findFunctionName(e).then(t,n).catch(n)}.bind(this),n)}.bind(this))},this.findFunctionName=function(e){return new Promise(function(n,r){i(e),this._get(e.fileName).then((function(r){var i=e.lineNumber,o=e.columnNumber,a=function(e,t){for(var n=[/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,/function\s+([^('"`]*?)\s*\(([^)]*)\)/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,/\b(?!(?:if|for|switch|while|with|catch)\b)(?:(?:static)\s+)?(\S+)\s*\(.*?\)\s*\{/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*\(.*?\)\s*=>/],r=e.split("\n"),i="",o=Math.min(t,20),a=0;a<o;++a){var s=r[t-a-1],c=s.indexOf("//");if(c>=0&&(s=s.substr(0,c)),s){i=s+i;for(var u=n.length,l=0;l<u;l++){var d=n[l].exec(i);if(d&&d[1])return d[1]}}}}(r,i);n(a?new t({functionName:a,args:e.args,fileName:e.fileName,lineNumber:i,columnNumber:o}):e)}),r).catch(r)}.bind(this))},this.getMappedLocation=function(e){return new Promise(function(n,r){(function(){if("function"!=typeof Object.defineProperty||"function"!=typeof Object.create)throw new Error("Unable to consume source maps in older browsers")})(),i(e);var o=this.sourceCache,a=e.fileName;this._get(a).then(function(r){var i=function(e){for(var t,n,r=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)\s*$/gm;n=r.exec(e);)t=n[1];if(t)return t;throw new Error("sourceMappingURL not found")}(r),s="data:"===i.substr(0,5),c=a.substring(0,a.lastIndexOf("/")+1);return"/"===i[0]||s||/^https?:\/\/|^\/\//i.test(i)||(i=c+i),this._getSourceMapConsumer(i,c).then((function(r){return function(e,n,r){return new Promise((function(i,o){var a=n.originalPositionFor({line:e.lineNumber,column:e.columnNumber});if(a.source){var s=n.sourceContentFor(a.source);s&&(r[a.source]=s),i(new t({functionName:a.name||e.functionName,args:e.args,fileName:a.source,lineNumber:a.line,columnNumber:a.column}))}else o(new Error("Could not get original source for given stackframe and source map"))}))}(e,r,o).then(n).catch((function(){n(e)}))}))}.bind(this),r).catch(r)}.bind(this))}}})?r.apply(t,i):r)||(e.exports=o)}()},70401:function(e,t,n){var r,i,o;!function(a,s){"use strict";i=[n(79180),n(34595),n(64358)],r=function(e,t,n){var r={filter:function(e){return-1===(e.functionName||"").indexOf("StackTrace$$")&&-1===(e.functionName||"").indexOf("ErrorStackParser$$")&&-1===(e.functionName||"").indexOf("StackTraceGPS$$")&&-1===(e.functionName||"").indexOf("StackGenerator$$")},sourceCache:{}},i=function(){try{throw new Error}catch(e){return e}};function o(e,t){var n={};return[e,t].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n})),n}function a(e){return e.stack||e["opera#sourceloc"]}function s(e,t){return"function"==typeof t?e.filter(t):e}return{get:function(e){var t=i();return a(t)?this.fromError(t,e):this.generateArtificially(e)},getSync:function(n){n=o(r,n);var c=i();return s(a(c)?e.parse(c):t.backtrace(n),n.filter)},fromError:function(t,i){i=o(r,i);var a=new n(i);return new Promise(function(n){var r=s(e.parse(t),i.filter);n(Promise.all(r.map((function(e){return new Promise((function(t){function n(){t(e)}a.pinpoint(e).then(t,n).catch(n)}))}))))}.bind(this))},generateArtificially:function(e){e=o(r,e);var n=t.backtrace(e);return"function"==typeof e.filter&&(n=n.filter(e.filter)),Promise.resolve(n)},instrument:function(e,t,n,r){if("function"!=typeof e)throw new Error("Cannot instrument non-function object");if("function"==typeof e.__stacktraceOriginalFn)return e;var i=function(){try{return this.get().then(t,n).catch(n),e.apply(r||this,arguments)}catch(e){throw a(e)&&this.fromError(e).then(t,n).catch(n),e}}.bind(this);return i.__stacktraceOriginalFn=e,i},deinstrument:function(e){if("function"!=typeof e)throw new Error("Cannot de-instrument non-function object");return"function"==typeof e.__stacktraceOriginalFn?e.__stacktraceOriginalFn:e},report:function(e,t,n,r){return new Promise((function(i,o){var a=new XMLHttpRequest;if(a.onerror=o,a.onreadystatechange=function(){4===a.readyState&&(a.status>=200&&a.status<400?i(a.responseText):o(new Error("POST to "+t+" failed with status: "+a.status)))},a.open("post",t),a.setRequestHeader("Content-Type","application/json"),r&&"object"==typeof r.headers){var s=r.headers;for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&a.setRequestHeader(c,s[c])}var u={stack:e};null!=n&&(u.message=n),a.send(JSON.stringify(u))}))}}},void 0===(o=r.apply(t,i))||(e.exports=o)}()},27164:function(e,t,n){"use strict";var r,i=n(10396);e=n.hmd(e),r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:e;var o=(0,i.default)(r);t.default=o},10396:function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,{default:function(){return r}})},42238:function(e,t,n){var r;!function(i,o){"use strict";var a="function",s="object",c="model",u="name",l="type",d="vendor",h="version",f="architecture",p="console",g="mobile",m="tablet",v="smarttv",y="wearable",b={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:o},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},w={rgx:function(e,t){for(var n,r,i,c,u,l,d=0;d<t.length&&!u;){var h=t[d],f=t[d+1];for(n=r=0;n<h.length&&!u;)if(u=h[n++].exec(e))for(i=0;i<f.length;i++)l=u[++r],typeof(c=f[i])===s&&c.length>0?2==c.length?typeof c[1]==a?this[c[0]]=c[1].call(this,l):this[c[0]]=c[1]:3==c.length?typeof c[1]!==a||c[1].exec&&c[1].test?this[c[0]]=l?l.replace(c[1],c[2]):o:this[c[0]]=l?c[1].call(this,l,c[2]):o:4==c.length&&(this[c[0]]=l?c[3].call(this,l.replace(c[1],c[2])):o):this[c]=l||o;d+=2}},str:function(e,t){for(var n in t)if(typeof t[n]===s&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(b.has(t[n][r],e))return"?"===n?o:n}else if(b.has(t[n],e))return"?"===n?o:n;return e}},E={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},S={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6}).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[u,h],[/(opios)[\/\s]+([\w\.]+)/i],[[u,"Opera Mini"],h],[/\s(opr)\/([\w\.]+)/i],[[u,"Opera"],h],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[u,h],[/(konqueror)\/([\w\.]+)/i],[[u,"Konqueror"],h],[/(trident).+rv[:\s]([\w\.]{1,9}).+like\sgecko/i],[[u,"IE"],h],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[u,"Edge"],h],[/(yabrowser)\/([\w\.]+)/i],[[u,"Yandex"],h],[/(Avast)\/([\w\.]+)/i],[[u,"Avast Secure Browser"],h],[/(AVG)\/([\w\.]+)/i],[[u,"AVG Secure Browser"],h],[/(puffin)\/([\w\.]+)/i],[[u,"Puffin"],h],[/(focus)\/([\w\.]+)/i],[[u,"Firefox Focus"],h],[/(opt)\/([\w\.]+)/i],[[u,"Opera Touch"],h],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[u,"UCBrowser"],h],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],h],[/(windowswechat qbcore)\/([\w\.]+)/i],[[u,"WeChat(Win) Desktop"],h],[/(micromessenger)\/([\w\.]+)/i],[[u,"WeChat"],h],[/(brave)\/([\w\.]+)/i],[[u,"Brave"],h],[/(whale)\/([\w\.]+)/i],[[u,"Whale"],h],[/(qqbrowserlite)\/([\w\.]+)/i],[u,h],[/(QQ)\/([\d\.]+)/i],[u,h],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[u,h],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[u,h],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[u,h],[/(MetaSr)[\/\s]?([\w\.]+)/i],[u],[/(LBBROWSER)/i],[u],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[h,[u,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[h,[u,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[u,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[u,h],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[h,[u,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[u,/(.+)/,"$1 WebView"],h],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[u,/(.+(?:g|us))(.+)/,"$1 $2"],h],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[h,[u,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[u,"Sailfish Browser"],h],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[u,h],[/(dolfin)\/([\w\.]+)/i],[[u,"Dolphin"],h],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[u,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[u,"Chrome"],h],[/(coast)\/([\w\.]+)/i],[[u,"Opera Coast"],h],[/fxios\/([\w\.-]+)/i],[h,[u,"Firefox"]],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[h,[u,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[h,u],[/webkit.+?(gsa)\/([\w\.]+)\s.*(mobile\s?safari|safari)(\/[\w\.]+)/i],[[u,"GSA"],h],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[u,[h,w.str,E.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[u,h],[/(navigator|netscape)\/([\w\.-]+)/i],[[u,"Netscape"],h],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[u,h]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,b.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[f,/ower/,"",b.lowerize]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[f,b.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[c,d,[l,m]],[/applecoremedia\/[\w\.]+ \((ipad)/],[c,[d,"Apple"],[l,m]],[/(apple\s{0,1}tv)/i],[[c,"Apple TV"],[d,"Apple"],[l,v]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[d,c,[l,m]],[/(kf[A-z]+)(\sbuild\/|\)).+silk\//i],[c,[d,"Amazon"],[l,m]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[c,w.str,E.device.amazon.model],[d,"Amazon"],[l,g]],[/android.+aft([bms])\sbuild/i],[c,[d,"Amazon"],[l,v]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[c,d,[l,g]],[/\((ip[honed|\s\w*]+);/i],[c,[d,"Apple"],[l,g]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[d,c,[l,g]],[/\(bb10;\s(\w+)/i],[c,[d,"BlackBerry"],[l,g]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[c,[d,"Asus"],[l,m]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[d,"Sony"],[c,"Xperia Tablet"],[l,m]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[d,"Sony"],[l,g]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[d,c,[l,p]],[/android.+;\s(shield)\sbuild/i],[c,[d,"Nvidia"],[l,p]],[/(playstation\s[34portablevi]+)/i],[c,[d,"Sony"],[l,p]],[/(sprint\s(\w+))/i],[[d,w.str,E.device.sprint.vendor],[c,w.str,E.device.sprint.model],[l,g]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[d,[c,/_/g," "],[l,g]],[/(nexus\s9)/i],[c,[d,"HTC"],[l,m]],[/d\/huawei([\w\s-]+)[;\)]/i,/android.+\s(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?)/i],[c,[d,"Huawei"],[l,g]],[/android.+(bah2?-a?[lw]\d{2})/i],[c,[d,"Huawei"],[l,m]],[/(microsoft);\s(lumia[\s\w]+)/i],[d,c,[l,g]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[c,[d,"Microsoft"],[l,p]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[d,"Microsoft"],[l,g]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[c,[d,"Motorola"],[l,g]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[c,[d,"Motorola"],[l,m]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[d,b.trim],[c,b.trim],[l,v]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[d,"Samsung"],[l,v]],[/\(dtv[\);].+(aquos)/i],[c,[d,"Sharp"],[l,v]],[/android.+((sch-i[89]0\d|shw-m380s|SM-P605|SM-P610|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[d,"Samsung"],c,[l,m]],[/smart-tv.+(samsung)/i],[d,[l,v],c],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[d,"Samsung"],c,[l,g]],[/sie-(\w*)/i],[c,[d,"Siemens"],[l,g]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[d,"Nokia"],c,[l,g]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[c,[d,"Acer"],[l,m]],[/android.+([vl]k\-?\d{3})\s+build/i],[c,[d,"LG"],[l,m]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[d,"LG"],c,[l,m]],[/linux;\snetcast.+smarttv/i,/lg\snetcast\.tv-201\d/i],[[d,"LG"],c,[l,v]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[c,[d,"LG"],[l,g]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[d,c,[l,m]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[c,[d,"Lenovo"],[l,m]],[/(lenovo)[_\s-]?([\w-]+)/i],[d,c,[l,g]],[/linux;.+((jolla));/i],[d,c,[l,g]],[/((pebble))app\/[\d\.]+\s/i],[d,c,[l,y]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[d,c,[l,g]],[/crkey/i],[[c,"Chromecast"],[d,"Google"],[l,v]],[/android.+;\s(glass)\s\d/i],[c,[d,"Google"],[l,y]],[/android.+;\s(pixel c)[\s)]/i],[c,[d,"Google"],[l,m]],[/android.+;\s(pixel( [2-9]a?)?( xl)?)[\s)]/i],[c,[d,"Google"],[l,g]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/android.+(redmi[\s\-_]?(?:note|k)?(?:[\s_]?[\w\s]+))(?:\sbuild|\))/i,/android.+(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[c,/_/g," "],[d,"Xiaomi"],[l,g]],[/android.+(mi[\s\-_]?(?:pad)(?:[\s_]?[\w\s]+))(?:\sbuild|\))/i],[[c,/_/g," "],[d,"Xiaomi"],[l,m]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[c,[d,"Meizu"],[l,g]],[/(mz)-([\w-]{2,})/i],[[d,"Meizu"],c,[l,g]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[c,[d,"OnePlus"],[l,g]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[c,[d,"RCA"],[l,m]],[/android.+[;\/\s](Venue[\d\s]{2,7})\s+build/i],[c,[d,"Dell"],[l,m]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[c,[d,"Verizon"],[l,m]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[d,"Barnes & Noble"],c,[l,m]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[c,[d,"NuVision"],[l,m]],[/android.+;\s(k88)\sbuild/i],[c,[d,"ZTE"],[l,m]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[c,[d,"Swiss"],[l,g]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[c,[d,"Swiss"],[l,m]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[c,[d,"Zeki"],[l,m]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[d,"Dragon Touch"],c,[l,m]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[c,[d,"Insignia"],[l,m]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[c,[d,"NextBook"],[l,m]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[d,"Voice"],c,[l,g]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[d,"LvTel"],c,[l,g]],[/android.+;\s(PH-1)\s/i],[c,[d,"Essential"],[l,g]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[c,[d,"Envizen"],[l,m]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[d,c,[l,m]],[/android.+[;\/]\s*(Trio[\s\w\-\.]+)\s+build/i],[c,[d,"MachSpeed"],[l,m]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[d,c,[l,m]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[c,[d,"Rotor"],[l,m]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[d,c,[l,m]],[/android .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[c,[l,g]],[/android .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[c,[l,m]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[l,b.lowerize],d,c],[/[\s\/\(](smart-?tv)[;\)]/i],[[l,v]],[/(android[\w\.\s\-]{0,9});.+build/i],[c,[d,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[h,[u,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[h,[u,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[u,h],[/rv\:([\w\.]{1,9}).+(gecko)/i],[h,u]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[u,h],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[u,[h,w.str,E.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[u,"Windows"],[h,w.str,E.os.windows.version]],[/\((bb)(10);/i],[[u,"BlackBerry"],h],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[u,h],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[u,"Symbian"],h],[/\((series40);/i],[u],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[u,"Firefox OS"],h],[/crkey\/([\d\.]+)/i],[h,[u,"Chromecast"]],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[u,h],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[u,"Chromium OS"],h],[/(sunos)\s?([\w\.\d]*)/i],[[u,"Solaris"],h],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[u,h],[/(haiku)\s(\w+)/i],[u,h],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[h,/_/g,"."],[u,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[u,"Mac OS"],[h,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[u,h]]},T=function(e,t){if("object"==typeof e&&(t=e,e=o),!(this instanceof T))return new T(e,t).getResult();var n=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),r=t?b.extend(S,t):S;return this.getBrowser=function(){var e={name:o,version:o};return w.rgx.call(e,n,r.browser),e.major=b.major(e.version),e},this.getCPU=function(){var e={architecture:o};return w.rgx.call(e,n,r.cpu),e},this.getDevice=function(){var e={vendor:o,model:o,type:o};return w.rgx.call(e,n,r.device),e},this.getEngine=function(){var e={name:o,version:o};return w.rgx.call(e,n,r.engine),e},this.getOS=function(){var e={name:o,version:o};return w.rgx.call(e,n,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};T.VERSION="0.7.23",T.BROWSER={NAME:u,MAJOR:"major",VERSION:h},T.CPU={ARCHITECTURE:f},T.DEVICE={MODEL:c,VENDOR:d,TYPE:l,CONSOLE:p,MOBILE:g,SMARTTV:v,TABLET:m,WEARABLE:y,EMBEDDED:"embedded"},T.ENGINE={NAME:u,VERSION:h},T.OS={NAME:u,VERSION:h},void 0!==t?(e.exports&&(t=e.exports=T),t.UAParser=T):(r=function(){return T}.call(t,n,t,e))===o||(e.exports=r);var _=i&&(i.jQuery||i.Zepto);if(_&&!_.ua){var P=new T;_.ua=P.getResult(),_.ua.get=function(){return P.getUA()},_.ua.set=function(e){P.setUA(e);var t=P.getResult();for(var n in t)_.ua[n]=t[n]}}}("object"==typeof window?window:this)},38264:function(e,t,n){var r,i,o,a,s;r=void 0!==n.g?n.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,i=function(){try{return!!Symbol.iterator}catch(e){return!1}}(),o=function(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t},a=function(e){return encodeURIComponent(e).replace(/%20/g,"+")},s=function(e){return decodeURIComponent(e).replace(/\+/g," ")},"URLSearchParams"in r&&"a=1"===new URLSearchParams("?a=1").toString()||function(){var e=function(t){if(Object.defineProperty(this,"_entries",{value:{}}),"string"==typeof t){if(""!==t)for(var n,r=(t=t.replace(/^\?/,"")).split("&"),i=0;i<r.length;i++)n=r[i].split("="),this.append(s(n[0]),n.length>1?s(n[1]):"")}else if(t instanceof e){var o=this;t.forEach((function(e,t){o.append(e,t)}))}},t=e.prototype;t.append=function(e,t){e in this._entries?this._entries[e].push(t.toString()):this._entries[e]=[t.toString()]},t.delete=function(e){delete this._entries[e]},t.get=function(e){return e in this._entries?this._entries[e][0]:null},t.getAll=function(e){return e in this._entries?this._entries[e].slice(0):[]},t.has=function(e){return e in this._entries},t.set=function(e,t){this._entries[e]=[t.toString()]},t.forEach=function(e,t){var n;for(var r in this._entries)if(this._entries.hasOwnProperty(r)){n=this._entries[r];for(var i=0;i<n.length;i++)e.call(t,n[i],r,this)}},t.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),o(e)},t.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),o(e)},t.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),o(e)},i&&(t[Symbol.iterator]=t.entries),t.toString=function(){var e=[];return this.forEach((function(t,n){e.push(a(n)+"="+a(t))})),e.join("&")},r.URLSearchParams=e}(),function(e){if(function(){try{var e=new URL("b","http://a");return e.pathname="c%20d","http://a/c%20d"===e.href&&e.searchParams}catch(e){return!1}}()||function(){var t=e.URL,n=function(t,n){"string"!=typeof t&&(t=String(t));var r,i=document;if(n&&(void 0===e.location||n!==e.location.href)){(r=(i=document.implementation.createHTMLDocument("")).createElement("base")).href=n,i.head.appendChild(r);try{if(0!==r.href.indexOf(n))throw new Error(r.href)}catch(e){throw new Error("URL unable to set base "+n+" due to "+e)}}var o=i.createElement("a");if(o.href=t,r&&(i.body.appendChild(o),o.href=o.href),":"===o.protocol||!/:/.test(o.href))throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:o})},r=n.prototype;["hash","host","hostname","port","protocol","search"].forEach((function(e){!function(e){Object.defineProperty(r,e,{get:function(){return this._anchorElement[e]},set:function(t){this._anchorElement[e]=t},enumerable:!0})}(e)})),Object.defineProperties(r,{toString:{get:function(){var e=this;return function(){return e.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(e){this._anchorElement.href=e},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(e){this._anchorElement.pathname=e},enumerable:!0},origin:{get:function(){var e={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],t=this._anchorElement.port!=e&&""!==this._anchorElement.port;return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(t?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(e){},enumerable:!0},username:{get:function(){return""},set:function(e){},enumerable:!0},searchParams:{get:function(){var e=new URLSearchParams(this.search),t=this;return["append","delete","set"].forEach((function(n){var r=e[n];e[n]=function(){r.apply(e,arguments),t.search=e.toString()}})),e},enumerable:!0}}),n.createObjectURL=function(e){return t.createObjectURL.apply(t,arguments)},n.revokeObjectURL=function(e){return t.revokeObjectURL.apply(t,arguments)},e.URL=n}(),void 0!==e.location&&!("origin"in e.location)){var t=function(){return e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")};try{Object.defineProperty(e.location,"origin",{get:t,enumerable:!0})}catch(n){setInterval((function(){e.location.origin=t()}),100)}}}(void 0!==n.g?n.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this)},45327:function(e){for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,i=t;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},85217:function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},71171:function(e,t,n){var r=n(85217),i=n(45327);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},66470:function(){},98374:function(){},87462:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{default:function(){return r}})},94578:function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,{default:function(){return r}})},63366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{default:function(){return r}})},94037:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{default:function(){return r}})},51297:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{default:function(){return i}})},84093:function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function h(e,t,n){return h=d()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&l(i,n.prototype),i},h.apply(null,arguments)}function f(e){var t="function"==typeof Map?new Map:void 0;return f=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return h(e,arguments,u(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,e)},f(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}n.d(t,{default:function(){return y}});var m={loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",multiSeparator:"+",allowMultiLoading:!1,parse:JSON.parse,stringify:JSON.stringify,requestOptions:{}},v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(i,e);var t,n,r=(t=i,n=d(),function(){var e,r=u(t);if(n){var i=u(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return g(this,e)});function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o(this,i),c(p(t=r.call(this,e)),"retry",null),t.retry=n,t}return s(i)}(f(Error)),y=function(){function e(t,n){o(this,e),c(this,"type","backend"),this.init(t,n)}return s(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.services=e,this.options=i(i(i({fetch:"undefined"!=typeof fetch?fetch:void 0},m),this.options),t)}},{key:"getLoadPath",value:function(e,t){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"function"==typeof e?e.apply(void 0,n):e}(this.options.loadPath,e,t)}},{key:"read",value:function(e,t,n){var r=this.getLoadPath(e,t),i=this.services.interpolator.interpolate(r,{lng:e,ns:t});this.loadUrl(i,n)}},{key:"readMulti",value:function(e,t,n){var r=this.getLoadPath(e,t),i=this.options.multiSeparator,o=this.services.interpolator.interpolate(r,{lng:e.join(i),ns:t.join(i)});this.loadUrl(o,n)}},{key:"loadUrl",value:function(e,t){var n=this.options,r=n.fetch,i=n.requestOptions,o=n.parse;r(e,i).then((function(t){var n=t.ok,r=t.status;if(!n){var i=r>=500&&r<600;throw new v("failed loading ".concat(e),i)}return t.text()}),(function(){throw new v("failed loading ".concat(e))})).then((function(n){try{return t(null,o(n,e))}catch(t){throw new v("failed parsing ".concat(e," to json"),!1)}})).catch((function(e){e instanceof v&&t(e.message,e.retry)}))}},{key:"create",value:function(e,t,n,r){var o,a=this,s=c({},n,r||"");(o=e,Array.isArray(o)?o:[o]).forEach((function(e){var n=a.options,r=n.addPath,o=n.requestOptions,c=n.fetch,u=n.stringify,l=a.services.interpolator.interpolate(r,{lng:e,ns:t});try{c(l,i({method:"POST",body:u(s)},o))}catch(e){console.error(e)}}))}}]),e}();c(y,"type","backend")},36609:function(e,t,n){"use strict";var r=n(47680),i=n(72893),o=n(5744),a=n(57705),s=n(61836),c=n(46047),u=n(71366),l=n(96739),d=n(4865);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},g=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(this,e),this.init(t,n)}return(0,o.default)(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||p,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,f(f({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}}]),e}(),m=new g,v=function(){function e(){(0,i.default)(this,e),this.observers={}}return(0,o.default)(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){var i=[].concat(this.observers[e]);i.forEach((function(e){e.apply(void 0,n)}))}if(this.observers["*"]){var o=[].concat(this.observers["*"]);o.forEach((function(t){t.apply(t,[e].concat(n))}))}}}]),e}();function y(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function b(e){return null==e?"":""+e}function w(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}function E(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(i())return{};var a=r(o.shift());!e[a]&&n&&(e[a]=new n),e=Object.prototype.hasOwnProperty.call(e,a)?e[a]:{}}return i()?{}:{obj:e,k:r(o.shift())}}function S(e,t,n){var r=E(e,t,Object);r.obj[r.k]=n}function T(e,t){var n=E(e,t),r=n.obj,i=n.k;if(r)return r[i]}function _(e,t,n){var r=T(e,n);return void 0!==r?r:T(t,n)}function P(e,t,n){for(var r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):P(e[r],t[r],n):e[r]=t[r]);return e}function C(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function O(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return R[e]})):e}var k="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,I=[" ",",","?","!",";"];function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[t])return e[t];for(var r=t.split(n),i=e,o=0;o<r.length;++o){if(!i)return;if("string"==typeof i[r[o]]&&o+1<r.length)return;if(void 0===i[r[o]]){for(var a=2,s=r.slice(o,o+a).join(n),c=i[s];void 0===c&&r.length>o+a;)a++,c=i[s=r.slice(o,o+a).join(n)];if(void 0===c)return;if(t.endsWith(s)){if("string"==typeof c)return c;if(s&&"string"==typeof c[s])return c[s]}var u=r.slice(o+a).join(n);return u?L(c,u,n):void 0}i=i[r[o]]}return i}}var M=function(e){(0,s.default)(l,e);var t,n,r=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);if(n){var i=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,c.default)(this,e)});function l(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return(0,i.default)(this,l),t=r.call(this),k&&v.call((0,a.default)(t)),t.data=e||{},t.options=n,void 0===t.options.keySeparator&&(t.options.keySeparator="."),void 0===t.options.ignoreJSONStructure&&(t.options.ignoreJSONStructure=!0),t}return(0,o.default)(l,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,o=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure,a=[e,t];n&&"string"!=typeof n&&(a=a.concat(n)),n&&"string"==typeof n&&(a=a.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(a=e.split("."));var s=T(this.data,a);return s||!o||"string"!=typeof n?s:L(this.data&&this.data[e]&&this.data[e][t],n,i)}},{key:"addResource",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var a=[e,t];n&&(a=a.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(r=t,t=(a=e.split("."))[1]),this.addNamespaces(t),S(this.data,a,r),i.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)"string"!=typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(a=e.split("."))[1]),this.addNamespaces(t);var s=T(this.data,a)||{};r?P(s,n,i):s=A(A({},s),n),S(this.data,a,s),o.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?A(A({},{}),this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"hasLanguageSomeTranslations",value:function(e){var t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((function(e){return t[e]&&Object.keys(t[e]).length>0}))}},{key:"toJSON",value:function(){return this.data}}]),l}(v),N={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,i){var o=this;return e.forEach((function(e){o.processors[e]&&(t=o.processors[e].process(t,n,r,i))})),t}};function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B={},U=function(e){(0,s.default)(d,e);var t,n,l=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);if(n){var i=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,c.default)(this,e)});function d(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.default)(this,d),t=l.call(this),k&&v.call((0,a.default)(t)),w(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,(0,a.default)(t)),t.options=n,void 0===t.options.keySeparator&&(t.options.keySeparator="."),t.logger=m.create("translator"),t}return(0,o.default)(d,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;var n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,i=t.ns||this.options.defaultNS||[],o=n&&e.indexOf(n)>-1,a=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||function(e,t,n){t=t||"",n=n||"";var r=I.filter((function(e){return t.indexOf(e)<0&&n.indexOf(e)<0}));if(0===r.length)return!0;var i=new RegExp("(".concat(r.map((function(e){return"?"===e?"\\?":e})).join("|"),")")),o=!i.test(e);if(!o){var a=e.indexOf(n);a>0&&!i.test(e.substring(0,a))&&(o=!0)}return o}(e,n,r));if(o&&!a){var s=e.match(this.interpolator.nestingRegexp);if(s&&s.length>0)return{key:e,namespaces:i};var c=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(c[0])>-1)&&(i=c.shift()),e=c.join(r)}return"string"==typeof i&&(i=[i]),{key:e,namespaces:i}}},{key:"translate",value:function(e,t,n){var i=this;if("object"!==(0,r.default)(t)&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var o=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,a=this.extractFromKey(e[e.length-1],t),s=a.key,c=a.namespaces,u=c[c.length-1],l=t.lng||this.language,h=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(h){var f=t.nsSeparator||this.options.nsSeparator;return u+f+s}return s}var p=this.resolve(e,t),g=p&&p.res,m=p&&p.usedKey||s,v=p&&p.exactUsedKey||s,y=Object.prototype.toString.apply(g),b=["[object Number]","[object Function]","[object RegExp]"],w=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,E=!this.i18nFormat||this.i18nFormat.handleAsObject,S="string"!=typeof g&&"boolean"!=typeof g&&"number"!=typeof g;if(E&&g&&S&&b.indexOf(y)<0&&("string"!=typeof w||"[object Array]"!==y)){if(!t.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,g,F(F({},t),{},{ns:c})):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");if(o){var T="[object Array]"===y,_=T?[]:{},P=T?v:m;for(var C in g)if(Object.prototype.hasOwnProperty.call(g,C)){var R="".concat(P).concat(o).concat(C);_[C]=this.translate(R,F(F({},t),{joinArrays:!1,ns:c})),_[C]===R&&(_[C]=g[C])}g=_}}else if(E&&"string"==typeof w&&"[object Array]"===y)(g=g.join(w))&&(g=this.extendTranslation(g,e,t,n));else{var O=!1,k=!1,I=void 0!==t.count&&"string"!=typeof t.count,x=d.hasDefaultValue(t),A=I?this.pluralResolver.getSuffix(l,t.count,t):"",L=t["defaultValue".concat(A)]||t.defaultValue;!this.isValidLookup(g)&&x&&(O=!0,g=L),this.isValidLookup(g)||(k=!0,g=s);var M=t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,N=M&&k?void 0:g,D=x&&L!==g&&this.options.updateMissing;if(k||O||D){if(this.logger.log(D?"updateKey":"missingKey",l,u,s,D?L:g),o){var B=this.resolve(s,F(F({},t),{},{keySeparator:!1}));B&&B.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var U=[],j=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&j&&j[0])for(var H=0;H<j.length;H++)U.push(j[H]);else"all"===this.options.saveMissingTo?U=this.languageUtils.toResolveHierarchy(t.lng||this.language):U.push(t.lng||this.language);var z=function(e,n,r){var o=x&&r!==g?r:N;i.options.missingKeyHandler?i.options.missingKeyHandler(e,u,n,o,D,t):i.backendConnector&&i.backendConnector.saveMissing&&i.backendConnector.saveMissing(e,u,n,o,D,t),i.emit("missingKey",e,u,n,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&I?U.forEach((function(e){i.pluralResolver.getSuffixes(e,t).forEach((function(n){z([e],s+n,t["defaultValue".concat(n)]||L)}))})):z(U,s,L))}g=this.extendTranslation(g,e,t,p,n),k&&g===s&&this.options.appendNamespaceToMissingKey&&(g="".concat(u,":").concat(s)),(k||O)&&this.options.parseMissingKeyHandler&&(g="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(s,O?g:void 0):this.options.parseMissingKeyHandler(g))}return g}},{key:"extendTranslation",value:function(e,t,n,r,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,F(F({},this.options.interpolation.defaultVariables),n),r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(F(F({},n),{interpolation:F(F({},this.options.interpolation),n.interpolation)}));var a,s="string"==typeof e&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(s){var c=e.match(this.interpolator.nestingRegexp);a=c&&c.length}var u=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(u=F(F({},this.options.interpolation.defaultVariables),u)),e=this.interpolator.interpolate(e,u,n.lng||this.language,n),s){var l=e.match(this.interpolator.nestingRegexp);a<(l&&l.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i&&i[0]===r[0]&&!n.context?(o.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):o.translate.apply(o,r.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var d=n.postProcess||this.options.postProcess,h="string"==typeof d?[d]:d;return null!=e&&h&&h.length&&!1!==n.applyPostProcessor&&(e=N.handle(h,e,t,this.options&&this.options.postProcessPassResolved?F({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,i,o,a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!a.isValidLookup(t)){var c=a.extractFromKey(e,s),u=c.key;n=u;var l=c.namespaces;a.options.fallbackNS&&(l=l.concat(a.options.fallbackNS));var d=void 0!==s.count&&"string"!=typeof s.count,h=d&&!s.ordinal&&0===s.count&&a.pluralResolver.shouldUseIntlApi(),f=void 0!==s.context&&("string"==typeof s.context||"number"==typeof s.context)&&""!==s.context,p=s.lngs?s.lngs:a.languageUtils.toResolveHierarchy(s.lng||a.language,s.fallbackLng);l.forEach((function(e){a.isValidLookup(t)||(o=e,!B["".concat(p[0],"-").concat(e)]&&a.utils&&a.utils.hasLoadedNamespace&&!a.utils.hasLoadedNamespace(o)&&(B["".concat(p[0],"-").concat(e)]=!0,a.logger.warn('key "'.concat(n,'" for languages "').concat(p.join(", "),'" won\'t get resolved as namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach((function(n){if(!a.isValidLookup(t)){i=n;var o,c=[u];if(a.i18nFormat&&a.i18nFormat.addLookupKeys)a.i18nFormat.addLookupKeys(c,u,n,e,s);else{var l;d&&(l=a.pluralResolver.getSuffix(n,s.count,s));var p="_zero";if(d&&(c.push(u+l),h&&c.push(u+p)),f){var g="".concat(u).concat(a.options.contextSeparator).concat(s.context);c.push(g),d&&(c.push(g+l),h&&c.push(g+p))}}for(;o=c.pop();)a.isValidLookup(t)||(r=o,t=a.getResource(n,e,o,s))}})))}))}})),{res:t,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:o}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&void 0!==e[n])return!0;return!1}}]),d}(v);function j(e){return e.charAt(0).toUpperCase()+e.slice(1)}var H=function(){function e(t){(0,i.default)(this,e),this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=m.create("languageUtils")}return(0,o.default)(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=j(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=j(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=j(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(r))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],o=function(e){e&&(n.isSupportedCode(e)?i.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):"string"==typeof e&&o(this.formatLanguageCode(e)),r.forEach((function(e){i.indexOf(e)<0&&o(n.formatLanguageCode(e))})),i}}]),e}(),z=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],V={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}},G=["v1","v2","v3"],W={zero:0,one:1,two:2,few:3,many:4,other:5};function q(){var e={};return z.forEach((function(t){t.lngs.forEach((function(n){e[n]={numbers:t.nr,plurals:V[t.fc]}}))})),e}var K=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(this,e),this.languageUtils=t,this.options=n,this.logger=m.create("pluralResolver"),this.options.compatibilityJSON&&"v4"!==this.options.compatibilityJSON||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=q()}return(0,o.default)(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(e,{type:t.ordinal?"ordinal":"cardinal"})}catch(e){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((function(e){return"".concat(t).concat(e)}))}},{key:"getSuffixes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((function(e,t){return W[e]-W[t]})).map((function(e){return"".concat(t.options.prepend).concat(e)})):r.numbers.map((function(r){return t.getSuffix(e,r,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRule(e,n);return r?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(r.select(t)):this.getSuffixRetroCompatible(r,t):(this.logger.warn("no plural rule found for: ".concat(e)),"")}},{key:"getSuffixRetroCompatible",value:function(e,t){var n=this,r=e.noAbs?e.plurals(t):e.plurals(Math.abs(t)),i=e.numbers[r];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===i?i="plural":1===i&&(i=""));var o=function(){return n.options.prepend&&i.toString()?n.options.prepend+i.toString():i.toString()};return"v1"===this.options.compatibilityJSON?1===i?"":"number"==typeof i?"_plural_".concat(i.toString()):o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?o():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}},{key:"shouldUseIntlApi",value:function(){return!G.includes(this.options.compatibilityJSON)}}]),e}();function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,e),this.logger=m.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return(0,o.default)(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:O,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?C(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?C(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?C(t.nestingPrefix):t.nestingPrefixEscaped||C("$t("),this.nestingSuffix=t.nestingSuffix?C(t.nestingSuffix):t.nestingSuffixEscaped||C(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var i,o,a,s=this,c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(e){return e.replace(/\$/g,"$$$$")}var l=function(e){if(e.indexOf(s.formatSeparator)<0){var i=_(t,c,e);return s.alwaysFormat?s.format(i,void 0,n,X(X(X({},r),t),{},{interpolationkey:e})):i}var o=e.split(s.formatSeparator),a=o.shift().trim(),u=o.join(s.formatSeparator).trim();return s.format(_(t,c,a),u,n,X(X(X({},r),t),{},{interpolationkey:a}))};this.resetRegExp();var d=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,h=r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return u(e)}},{regex:this.regexp,safeValue:function(e){return s.escapeValue?u(s.escape(e)):u(e)}}].forEach((function(t){for(a=0;i=t.regex.exec(e);){var n=i[1].trim();if(void 0===(o=l(n)))if("function"==typeof d){var c=d(e,i,r);o="string"==typeof c?c:""}else if(r&&r.hasOwnProperty(n))o="";else{if(h){o=i[0];continue}s.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(e)),o=""}else"string"==typeof o||s.useRawValueToEscape||(o=b(o));var u=t.safeValue(o);if(e=e.replace(i[0],u),h?(t.regex.lastIndex+=u.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,++a>=s.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,r,i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=X({},o);function s(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),i="{".concat(r[1]);e=r[0],i=(i=this.interpolate(i,a)).replace(/'/g,'"');try{a=JSON.parse(i),t&&(a=X(X({},t),a))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(n).concat(i)}return delete a.defaultValue,e}for(a.applyPostProcessor=!1,delete a.defaultValue;n=this.nestingRegexp.exec(e);){var c=[],u=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var l=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=l.shift(),c=l,u=!0}if((r=t(s.call(this,n[1].trim(),a),a))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=b(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),u&&(r=c.reduce((function(e,t){return i.format(e,t,o.lng,X(X({},o),{},{interpolationkey:n[1].trim()}))}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,e),this.logger=m.create("formatter"),this.options=t,this.formats={number:function(e,t,n){return new Intl.NumberFormat(t,n).format(e)},currency:function(e,t,n){return new Intl.NumberFormat(t,J(J({},n),{},{style:"currency"})).format(e)},datetime:function(e,t,n){return new Intl.DateTimeFormat(t,J({},n)).format(e)},relativetime:function(e,t,n){return new Intl.RelativeTimeFormat(t,J({},n)).format(e,n.range||"day")},list:function(e,t,n){return new Intl.ListFormat(t,J({},n)).format(e)}},this.init(t)}return(0,o.default)(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=t.interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}},{key:"add",value:function(e,t){this.formats[e.toLowerCase().trim()]=t}},{key:"format",value:function(e,t,n,r){var i=this;return t.split(this.formatSeparator).reduce((function(e,t){var o=function(e){var t=e.toLowerCase().trim(),n={};if(e.indexOf("(")>-1){var r=e.split("(");t=r[0].toLowerCase().trim();var i=r[1].substring(0,r[1].length-1);"currency"===t&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):"relativetime"===t&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach((function(e){if(e){var t=e.split(":"),r=(0,d.default)(t),i=r[0],o=r.slice(1).join(":");n[i.trim()]||(n[i.trim()]=o.trim()),"false"===o.trim()&&(n[i.trim()]=!1),"true"===o.trim()&&(n[i.trim()]=!0),isNaN(o.trim())||(n[i.trim()]=parseInt(o.trim(),10))}}))}return{formatName:t,formatOptions:n}}(t),a=o.formatName,s=o.formatOptions;if(i.formats[a]){var c=e;try{var u=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},l=u.locale||u.lng||r.locale||r.lng||n;c=i.formats[a](e,l,J(J(J({},s),r),u))}catch(e){i.logger.warn(e)}return c}return i.logger.warn("there was no format function for ".concat(a)),e}),e)}}]),e}();function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne=function(e){(0,s.default)(l,e);var t,n,r=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);if(n){var i=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,c.default)(this,e)});function l(e,t,n){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,i.default)(this,l),o=r.call(this),k&&v.call((0,a.default)(o)),o.backend=e,o.store=t,o.services=n,o.languageUtils=n.languageUtils,o.options=s,o.logger=m.create("backendConnector"),o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(n,s.backend,s),o}return(0,o.default)(l,[{key:"queueLoad",value:function(e,t,n,r){var i=this,o=[],a=[],s=[],c=[];return e.forEach((function(e){var r=!0;t.forEach((function(t){var s="".concat(e,"|").concat(t);!n.reload&&i.store.hasResourceBundle(e,t)?i.state[s]=2:i.state[s]<0||(1===i.state[s]?a.indexOf(s)<0&&a.push(s):(i.state[s]=1,r=!1,a.indexOf(s)<0&&a.push(s),o.indexOf(s)<0&&o.push(s),c.indexOf(t)<0&&c.push(t)))})),r||s.push(e)})),(o.length||a.length)&&this.queue.push({pending:a,loaded:{},errors:[],callback:r}),{toLoad:o,pending:a,toLoadLanguages:s,toLoadNamespaces:c}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),i=r[0],o=r[1];t&&this.emit("failedLoading",i,o,t),n&&this.store.addResourceBundle(i,o,n),this.state[e]=t?-1:2;var a={};this.queue.forEach((function(n){var r,s,c,u,l;r=n.loaded,s=o,(u=(c=E(r,[i],Object)).obj)[l=c.k]=u[l]||[],u[l].push(s),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){a[e]||(a[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){a[e].indexOf(t)<0&&a[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",a),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,a=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(s,c){s&&c&&i<5?setTimeout((function(){r.read.call(r,e,t,n,i+1,2*o,a)}),o):a(s,c)})):a(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var o=this.queueLoad(e,t,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(function(r,a){r&&t.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(i," failed"),r),!r&&a&&t.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(i),a),t.loaded(e,r,a)}))}},{key:"saveMissing",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,te(te({},o),{},{isUpdate:i})),e&&e[0]&&this.store.addResource(e[0],t,n,r))}}]),l}(v);function re(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===(0,r.default)(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===(0,r.default)(e[2])||"object"===(0,r.default)(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function ie(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(){}function ce(e){Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(t){"function"==typeof e[t]&&(e[t]=e[t].bind(e))}))}var ue=function(e){(0,s.default)(d,e);var t,n,l=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);if(n){var i=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,c.default)(this,e)});function d(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if((0,i.default)(this,d),e=l.call(this),k&&v.call((0,a.default)(e)),e.options=ie(t),e.services={},e.logger=m,e.modules={external:[]},ce((0,a.default)(e)),n&&!e.isInitialized&&!t.isClone){if(!e.options.initImmediate)return e.init(t,n),(0,c.default)(e,(0,a.default)(e));setTimeout((function(){e.init(t,n)}),0)}return e}return(0,o.default)(d,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;"function"==typeof t&&(n=t,t={}),!t.defaultNS&&t.ns&&("string"==typeof t.ns?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));var r=re();function i(e){return e?"function"==typeof e?new e:e:null}if(this.options=ae(ae(ae({},r),this.options),ie(t)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=ae(ae({},r.interpolation),this.options.interpolation)),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator),!this.options.isClone){var o;this.modules.logger?m.init(i(this.modules.logger),this.options):m.init(null,this.options),this.modules.formatter?o=this.modules.formatter:"undefined"!=typeof Intl&&(o=Q);var a=new H(this.options);this.store=new M(this.options.resources,this.options);var s=this.services;s.logger=m,s.resourceStore=this.store,s.languageUtils=a,s.pluralResolver=new K(a,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!o||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(s.formatter=i(o),s.formatter.init(s,this.options),this.options.interpolation.format=s.formatter.format.bind(s.formatter)),s.interpolator=new Z(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new ne(i(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.languageDetector&&(s.languageDetector=i(this.modules.languageDetector),s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=i(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new U(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.format=this.options.interpolation.format,n||(n=se),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&"dev"!==c[0]&&(this.options.lng=c[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var u=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];u.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));var l=["addResource","addResources","addResourceBundle","removeResourceBundle"];l.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var d=y(),h=function(){var t=function(t,r){e.isInitialized&&!e.initializedStoreOnce&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),d.resolve(r),n(t,r)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?h():setTimeout(h,0),d}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:se,r=n,i="string"==typeof e?e:this.language;if("function"==typeof e&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase())return r();var o=[],a=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){o.indexOf(e)<0&&o.push(e)}))};if(i)a(i);else{var s=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);s.forEach((function(e){return a(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return a(e)})),this.services.backendConnector.load(o,this.options.ns,(function(e){e||t.resolvedLanguage||!t.language||t.setResolvedLanguage(t.language),r(e)}))}else r(null)}},{key:"reloadResources",value:function(e,t,n){var r=y();return e||(e=this.languages),t||(t=this.options.ns),n||(n=se),this.services.backendConnector.reload(e,t,(function(e){r.resolve(),n(e)})),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&N.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"setResolvedLanguage",value:function(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(var t=0;t<this.languages.length;t++){var n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=y();this.emit("languageChanging",e);var i=function(e){n.language=e,n.languages=n.services.languageUtils.toResolveHierarchy(e),n.resolvedLanguage=void 0,n.setResolvedLanguage(e)},o=function(o){e||o||!n.services.languageDetector||(o=[]);var a="string"==typeof o?o:n.services.languageUtils.getBestMatchFromCodes(o);a&&(n.language||i(a),n.translator.language||n.translator.changeLanguage(a),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(a)),n.loadResources(a,(function(e){!function(e,o){o?(i(o),n.translator.changeLanguage(o),n.isLanguageChangingTo=void 0,n.emit("languageChanged",o),n.logger.log("languageChanged",o)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,a)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(o):o(e):o(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t,n){var i=this,o=function e(t,o){var a;if("object"!==(0,r.default)(o)){for(var s=arguments.length,c=new Array(s>2?s-2:0),u=2;u<s;u++)c[u-2]=arguments[u];a=i.options.overloadTranslationOptionHandler([t,o].concat(c))}else a=ae({},o);a.lng=a.lng||e.lng,a.lngs=a.lngs||e.lngs,a.ns=a.ns||e.ns;var l=i.options.keySeparator||".",d=n?"".concat(n).concat(l).concat(t):t;return i.t(d,a)};return"string"==typeof e?o.lng=e:o.lngs=e,o.ns=t,o.keyPrefix=n,o}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.resolvedLanguage||this.languages[0],i=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var a=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var s=n.precheck(this,a);if(void 0!==s)return s}return!(!this.hasResourceBundle(r,e)&&this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages)&&(!a(r,e)||i&&!a(o,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=y();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=y();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],i=e.filter((function(e){return r.indexOf(e)<0}));return i.length?(this.options.preload=r.concat(i),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){return e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),e?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr":"rtl"}},{key:"cloneInstance",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:se,r=ae(ae(ae({},this.options),t),{isClone:!0}),i=new d(r),o=["store","services","language"];return o.forEach((function(t){i[t]=e[t]})),i.services=ae({},this.services),i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i.translator=new U(i.services,i.options),i.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit.apply(i,[e].concat(n))})),i.init(r,n),i.translator.options=i.options,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),d}(v);(0,l.default)(ue,"createInstance",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new ue(e,t)}));var le=ue.createInstance();le.createInstance=ue.createInstance,le.createInstance,le.init,le.loadResources,le.reloadResources,le.use,le.changeLanguage,le.getFixedT,le.t,le.exists,le.setDefaultNamespace,le.hasLoadedNamespace,le.loadNamespaces,le.loadLanguages,t.default=le},8673:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{default:function(){return r}})},28086:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{default:function(){return r}})},57705:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{default:function(){return r}})},72893:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{default:function(){return r}})},5744:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{default:function(){return i}})},96739:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{default:function(){return r}})},71366:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{default:function(){return r}})},61836:function(e,t,n){"use strict";n.d(t,{default:function(){return i}});var r=n(27826);function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.default)(e,t)}},35933:function(e,t,n){"use strict";function r(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{default:function(){return r}})},10310:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{default:function(){return r}})},46047:function(e,t,n){"use strict";n.d(t,{default:function(){return o}});var r=n(47680),i=n(57705);function o(e,t){if(t&&("object"===(0,r.default)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.default)(e)}},27826:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{default:function(){return r}})},4865:function(e,t,n){"use strict";n.d(t,{default:function(){return s}});var r=n(28086),i=n(35933),o=n(63257),a=n(10310);function s(e){return(0,r.default)(e)||(0,i.default)(e)||(0,o.default)(e)||(0,a.default)()}},47680:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{default:function(){return r}})},63257:function(e,t,n){"use strict";n.d(t,{default:function(){return i}});var r=n(8673);function i(e,t){if(e){if("string"==typeof e)return(0,r.default)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.default)(e,t):void 0}}},38085:function(e,t,n){"use strict";n.d(t,{onCLS:function(){return C},onFID:function(){return M},onLCP:function(){return F}});var r,i,o,a,s=-1,c=function(e){addEventListener("pageshow",(function(t){t.persisted&&(s=t.timeStamp,e(t))}),!0)},u=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},l=function(){var e=u();return e&&e.activationStart||0},d=function(e,t){var n=u(),r="navigate";return s>=0?r="back-forward-cache":n&&(r=document.prerendering||l()>0?"prerender":document.wasDiscarded?"restore":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},h=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},f=function(e,t,n,r){var i,o;return function(a){t.value>=0&&(a||r)&&((o=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=o,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},p=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},g=function(e){var t=function(t){"pagehide"!==t.type&&"hidden"!==document.visibilityState||e(t)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},m=function(e){var t=!1;return function(n){t||(e(n),t=!0)}},v=-1,y=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},b=function(e){"hidden"===document.visibilityState&&v>-1&&(v="visibilitychange"===e.type?e.timeStamp:0,E())},w=function(){addEventListener("visibilitychange",b,!0),addEventListener("prerenderingchange",b,!0)},E=function(){removeEventListener("visibilitychange",b,!0),removeEventListener("prerenderingchange",b,!0)},S=function(){return v<0&&(v=y(),w(),c((function(){setTimeout((function(){v=y(),w()}),0)}))),{get firstHiddenTime(){return v}}},T=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},_=[1800,3e3],P=[.1,.25],C=function(e,t){t=t||{},function(e,t){t=t||{},T((function(){var n,r=S(),i=d("FCP"),o=h("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(o.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-l(),0),i.entries.push(e),n(!0)))}))}));o&&(n=f(e,i,_,t.reportAllChanges),c((function(r){i=d("FCP"),n=f(e,i,_,t.reportAllChanges),p((function(){i.value=performance.now()-r.timeStamp,n(!0)}))})))}))}(m((function(){var n,r=d("CLS",0),i=0,o=[],a=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=o[0],n=o[o.length-1];i&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(i+=e.value,o.push(e)):(i=e.value,o=[e])}})),i>r.value&&(r.value=i,r.entries=o,n())},s=h("layout-shift",a);s&&(n=f(e,r,P,t.reportAllChanges),g((function(){a(s.takeRecords()),n(!0)})),c((function(){i=0,r=d("CLS",0),n=f(e,r,P,t.reportAllChanges),p((function(){return n()}))})),setTimeout(n,0))})))},R={passive:!0,capture:!0},O=new Date,k=function(e,t){r||(r=t,i=e,o=new Date,A(removeEventListener),I())},I=function(){if(i>=0&&i<o-O){var e={entryType:"first-input",name:r.type,target:r.target,cancelable:r.cancelable,startTime:r.timeStamp,processingStart:r.timeStamp+i};a.forEach((function(t){t(e)})),a=[]}},x=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){k(e,t),i()},r=function(){i()},i=function(){removeEventListener("pointerup",n,R),removeEventListener("pointercancel",r,R)};addEventListener("pointerup",n,R),addEventListener("pointercancel",r,R)}(t,e):k(t,e)}},A=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,x,R)}))},L=[100,300],M=function(e,t){t=t||{},T((function(){var n,o=S(),s=d("FID"),u=function(e){e.startTime<o.firstHiddenTime&&(s.value=e.processingStart-e.startTime,s.entries.push(e),n(!0))},l=function(e){e.forEach(u)},p=h("first-input",l);n=f(e,s,L,t.reportAllChanges),p&&g(m((function(){l(p.takeRecords()),p.disconnect()}))),p&&c((function(){var o;s=d("FID"),n=f(e,s,L,t.reportAllChanges),a=[],i=-1,r=null,A(addEventListener),o=u,a.push(o),I()}))}))},N=[2500,4e3],D={},F=function(e,t){t=t||{},T((function(){var n,r=S(),i=d("LCP"),o=function(e){var t=e[e.length-1];t&&t.startTime<r.firstHiddenTime&&(i.value=Math.max(t.startTime-l(),0),i.entries=[t],n())},a=h("largest-contentful-paint",o);if(a){n=f(e,i,N,t.reportAllChanges);var s=m((function(){D[i.id]||(o(a.takeRecords()),a.disconnect(),D[i.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,s,!0)})),g(s),c((function(r){i=d("LCP"),n=f(e,i,N,t.reportAllChanges),p((function(){i.value=performance.now()-r.timeStamp,D[i.id]=!0,n(!0)}))}))}}))}},88593:function(e){"use strict";e.exports=JSON.parse('{"_from":"axios@^0.21.1","_id":"axios@0.21.4","_inBundle":false,"_integrity":"sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==","_location":"/axios","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"axios@^0.21.1","name":"axios","escapedName":"axios","rawSpec":"^0.21.1","saveSpec":null,"fetchSpec":"^0.21.1"},"_requiredBy":["/kindle-fast-metrics-javascript-sdk"],"_resolved":"http://localhost:33673/tarballs/npm/axios/0.21.4/c67b90dc0568e5c1cf2b0b858c43ba28e2eda575%231","_shasum":"c67b90dc0568e5c1cf2b0b858c43ba28e2eda575","_spec":"axios@^0.21.1","_where":"/local/p4clients/pkgbuild-imiJO/workspace/src/KindleWebReaderLitbWebsite/node_modules/kindle-fast-metrics-javascript-sdk","author":{"name":"Matt Zabriskie"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"bugs":{"url":"https://github.com/axios/axios/issues"},"bundleDependencies":false,"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}],"dependencies":{"follow-redirects":"^1.14.0"},"deprecated":false,"description":"Promise based HTTP client for the browser and node.js","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"homepage":"https://axios-http.com","jsdelivr":"dist/axios.min.js","keywords":["xhr","http","ajax","promise","node"],"license":"MIT","main":"index.js","name":"axios","repository":{"type":"git","url":"git+https://github.com/axios/axios.git"},"scripts":{"build":"NODE_ENV=production grunt build","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","examples":"node ./examples/server.js","fix":"eslint --fix lib/**/*.js","postversion":"git push && git push --tags","preversion":"npm test","start":"node ./sandbox/server.js","test":"grunt test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},"typings":"./index.d.ts","unpkg":"dist/axios.min.js","version":"0.21.4"}')}},__webpack_module_cache__={},leafPrototypes,getProto,inProgress,dataWebpackPrefix;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);__webpack_require__.r(n);var r={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var i=2&t&&e;"object"==typeof i&&!~leafPrototypes.indexOf(i);i=getProto(i))Object.getOwnPropertyNames(i).forEach((function(t){r[t]=function(){return e[t]}}));return r.default=function(){return e},__webpack_require__.d(n,r),n},__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=function(e){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(t,n){return __webpack_require__.f[n](e,t),t}),[]))},__webpack_require__.u=function(e){return"assets/"+({2214:"polyfills-core-js",6748:"polyfills-dom"}[e]||e)+"."+__webpack_require__.h()+".chunk.min.js"},__webpack_require__.miniCssF=function(e){},__webpack_require__.h=function(){return"3a91cc67f62c439daa94"},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},inProgress={},dataWebpackPrefix="@amzn/KindleWebReaderLitb:",__webpack_require__.l=function(e,t,n,r){if(inProgress[e])inProgress[e].push(t);else{var i,o;if(void 0!==n)for(var a=document.getElementsByTagName("script"),s=0;s<a.length;s++){var c=a[s];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")==dataWebpackPrefix+n){i=c;break}}i||(o=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.setAttribute("data-webpack",dataWebpackPrefix+n),i.src=e),inProgress[e]=[t];var u=function(t,n){i.onerror=i.onload=null,clearTimeout(l);var r=inProgress[e];if(delete inProgress[e],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((function(e){return e(n)})),t)return t(n)},l=setTimeout(u.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=u.bind(null,i.onerror),i.onload=u.bind(null,i.onload),o&&document.head.appendChild(i)}},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},__webpack_require__.p="/",function(){var e={1991:0};__webpack_require__.f.j=function(t,n){var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((function(n,i){r=e[t]=[n,i]}));n.push(r[2]=i);var o=__webpack_require__.p+__webpack_require__.u(t),a=new Error;__webpack_require__.l(o,(function(n){if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,r[1](a)}}),"chunk-"+t,t)}};var t=function(t,n){var r,i,o=n[0],a=n[1],s=n[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(r in a)__webpack_require__.o(a,r)&&(__webpack_require__.m[r]=a[r]);s&&s(__webpack_require__)}for(t&&t(n);c<o.length;c++)i=o[c],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunk_amzn_KindleWebReaderLitb=self.webpackChunk_amzn_KindleWebReaderLitb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var __webpack_exports__={};!function(){"use strict";__webpack_require__(66337),__webpack_require__(38264);var e="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==e&&e,t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,r="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in e,o="ArrayBuffer"in e;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function l(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function p(e){var t=new FileReader,n=f(t);return t.readAsArrayBuffer(e),n}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){var n;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:r&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:t&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&r&&(n=e)&&DataView.prototype.isPrototypeOf(n)?(this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||s(e))?this._bodyArrayBuffer=g(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(p)}),this.text=function(){var e,t,n,r=h(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=f(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=c(e),t=u(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},d.prototype.delete=function(e){delete this.map[c(e)]},d.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},d.prototype.set=function(e,t){this.map[c(e)]=u(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),l(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),l(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),l(e)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function y(e,t){if(!(this instanceof y))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,i=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),v.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function b(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function w(e,t){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},m.call(y.prototype),m.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];w.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})};var S=e.DOMException;try{new S}catch(e){(S=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),S.prototype.constructor=S}function T(t,n){return new Promise((function(i,a){var s=new y(t,n);if(s.signal&&s.signal.aborted)return a(new S("Aborted","AbortError"));var c=new XMLHttpRequest;function l(){c.abort()}c.onload=function(){var e,t,n={status:c.status,statusText:c.statusText,headers:(e=c.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};n.url="responseURL"in c?c.responseURL:n.headers.get("X-Request-URL");var r="response"in c?c.response:c.responseText;setTimeout((function(){i(new w(r,n))}),0)},c.onerror=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},c.ontimeout=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},c.onabort=function(){setTimeout((function(){a(new S("Aborted","AbortError"))}),0)},c.open(s.method,function(t){try{return""===t&&e.location.href?e.location.href:t}catch(e){return t}}(s.url),!0),"include"===s.credentials?c.withCredentials=!0:"omit"===s.credentials&&(c.withCredentials=!1),"responseType"in c&&(r?c.responseType="blob":o&&s.headers.get("Content-Type")&&-1!==s.headers.get("Content-Type").indexOf("application/octet-stream")&&(c.responseType="arraybuffer")),!n||"object"!=typeof n.headers||n.headers instanceof d?s.headers.forEach((function(e,t){c.setRequestHeader(t,e)})):Object.getOwnPropertyNames(n.headers).forEach((function(e){c.setRequestHeader(e,u(n.headers[e]))})),s.signal&&(s.signal.addEventListener("abort",l),c.onreadystatechange=function(){4===c.readyState&&s.signal.removeEventListener("abort",l)}),c.send(void 0===s._bodyInit?null:s._bodyInit)}))}T.polyfill=!0,e.fetch||(e.fetch=T,e.Headers=d,e.Request=y,e.Response=w);var _=__webpack_require__(67294),C=__webpack_require__(73935),R=__webpack_require__(50533),O=__webpack_require__(96915),k=__webpack_require__(45170),I=__webpack_require__(98087),x=__webpack_require__(78751),A=__webpack_require__(80505),L=__webpack_require__(84276),M=__webpack_require__(99377),N=__webpack_require__(96306),D=__webpack_require__(53889),F=__webpack_require__(50308),B=__webpack_require__.n(F),U=__webpack_require__(99240),j=function(e){return function(t){27===t.keyCode&&e()}},H=function(e){return _.createElement(U.CSSTransition,{in:e.isVisible,mountOnEnter:!0,unmountOnExit:!0,timeout:500,classNames:"kw-modal-fade"},_.createElement("div",{className:"kw-modal-backdrop",onClick:(t=e.onHide,function(e){e.target===e.currentTarget&&t()}),onKeyUp:j(e.onHide),role:"region"},_.createElement("div",{className:(e.className||"")+" kw-modal-content",role:"dialog","aria-modal":"true"},_.createElement("header",{className:"kw-modal-header",id:"kw-modal-header"},_.createElement("h4",null,e.headerTitle)),_.createElement("section",{className:"kw-modal-body"},e.children))));var t},z=__webpack_require__(65907),V=__webpack_require__(47903),G=__webpack_require__(15258),W=__webpack_require__(69339),q=__webpack_require__(90268),K=__webpack_require__(37593),Y=__webpack_require__(11096),X=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Z=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function $(e){return X(this,void 0,void 0,(function(){return Z(this,(function(t){return[2,new Promise((function(t,n){var r=document.createElement("script");r.src=e,r.async=!0,r.onload=function(){return t()},r.onerror=function(){return n()},document.body.appendChild(r)}))]}))}))}window.srsUrl="https://read.amazon.com/service";var J,Q,ee,te=void 0,ne=function(){return te},re=function(e){return $("https://d277vvipc9k5jy.cloudfront.net/assets/global.dcbbc8f21775dd0c513e.min.js").then((function(){te=e}))},ie=function(e){return X(void 0,void 0,void 0,(function(){var t,n,r;return Z(this,(function(i){return window.KindleRenderer?(te="Success",[2,Promise.resolve()]):e?(te="Skipped",[2,Promise.resolve()]):(t=window.document.querySelector('script[src*="cloudfront.net/assets/global"]'),n=null==t?void 0:t.getAttribute("src"),null===(r=null==t?void 0:t.parentElement)||void 0===r||r.removeChild(t),n?[2,$(n).then((function(){if(te="Retried",!window.KindleRenderer)throw Error("Retry failed")})).catch((function(){return re("RetryFailed")})).catch((function(){te="Failed"}))]:(re("NoScript"),[2]))}))}))},oe=__webpack_require__(95840),ae=__webpack_require__(27401),se=function(e){return null!==e&&e.showErrorDialog},ce=(0,R.connect)((function(e){return{appType:e.appState.appType,asin:e.appState.asin,revisionId:e.appState.revisionId,renderType:e.appState.renderType,interactionManager:e.appState.interactionManager}}),(function(e){return{setShowErrorModal:function(t){return e((0,D.setShowErrorModal)(t))}}}))((function(e){var t,n=(0,V.useLitbTranslation)().getLitbTranslation,r=(0,G.useKatalLogger)(),i=(0,_.useRef)(null);if((0,_.useEffect)((function(){var t=se(e.error);Promise.resolve().then(__webpack_require__.bind(__webpack_require__,37593)).then((function(n){var i,o,a=t?z.ERROR_POPUP:z.DEGRADED_EXPERIENCE;if(n.recordCountMetric(a),e.error){var s=t?"LITB Error Modal":"Degraded Experience";r.error("\n             "+s+" Shown for\n              ASIN: ["+e.asin+"],\n              RevisionId: ["+e.revisionId+"],\n              RenderType: ["+e.renderType+"],\n              URL: ["+window.location.href+"]\n          ",null===(i=e.error)||void 0===i?void 0:i.error,(0,q.buildContextForCloudWatchLog)(e.error,e.asin?e.asin:"",t?{lastRequests:(0,q.getRecentNetworkRequests)(),stuccoInitialization:null!==(o=ne())&&void 0!==o?o:"Unknown",timeSinceLoadMs:Date.now()-(0,q.getPageLoadTimestamp)(),timeSinceOpenMs:Date.now()-(0,q.getLitbOpenTimestamp)(),bookInformation:oe.store.getState().litbBook.bookInformation}:{}))}})),t&&(e.setShowErrorModal(!0),i.current&&i.current.focus())}),[e.error]),!se(e.error))return null;var o=e.error.errorDialogDetails,a=n("kw-litb-error-modal-message")||"Sorry, there was a problem loading this page.",s=n("kw-litb-error-modal-retry")||"Try again",c=n("kw-litb-error-modal-store")||"Go back to Store";return _.createElement(H,{className:"kw-litb-error-modal",headerTitle:"",isVisible:!0,onHide:B()},_.createElement("div",{className:"kw-litb-error-image"},_.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",viewBox:"0 0 50 50"},_.createElement("g",{transform:"translate(1 1)"},_.createElement("path",{stroke:"#000",d:"M24,0.4 C10.9867187,0.4 0.4,10.9867187 0.4,24 C0.4,37.0132813 10.9867187,47.6 24,47.6 C37.0132813,47.6 47.6,37.0132813 47.6,24 C47.6,10.9867187 37.0132813,0.4 24,0.4 Z M24,46.8 C11.428125,46.8 1.2,36.571875 1.2,24 C1.2,11.428125 11.428125,1.2 24,1.2 C36.571875,1.2 46.8,11.428125 46.8,24 C46.8,36.571875 36.571875,46.8 24,46.8 Z"}),_.createElement("path",{d:"M22.8640626 34.839463C22.5757813 35.14689 22.4 35.5662519 22.4 35.985614 22.4 36.422318 22.5757813 36.8259145 22.8640626 37.131765 23.1679688 37.439192 23.5835938 37.6 24 37.6 24.415625 37.6 24.8320312 37.439192 25.1359374 37.131765 25.4234374 36.8259145 25.6 36.422318 25.6 35.985614 25.6 35.5662521 25.4234374 35.1468902 25.1359374 34.856805 24.5437501 34.241951 23.4554688 34.259293 22.8640626 34.839463zM24 30.34375C24.4421875 30.34375 24.8 30.1648438 24.8 29.94375L24.8 12.4C24.8 12.1789062 24.4421875 12 24 12 23.5578125 12 23.2 12.1789062 23.2 12.4L23.2 29.94375C23.2 30.1648438 23.5578125 30.34375 24 30.34375z"})))),_.createElement("div",{ref:i,className:"kw-litb-error-message",tabIndex:0},a),_.createElement("div",{className:"kw-litb-error-footer"},o.retriable&&_.createElement("span",{id:"errorDialogRetry",className:"kw-button kw-button-primary kw-row",onClick:function(){"mobile"!==e.appType&&(0,ae.isInIframe)()?(0,W.reload)():window.location.reload()},role:"button"},_.createElement("span",{className:"kw-button-inner"},_.createElement("input",{className:"kw-button-input",type:"submit","aria-labelledby":"errorDialogRetry-announce"}),_.createElement("span",{id:"errorDialogRetry-announce",className:"kw-button-text kw-litb-error-modal-button-text kw-text-center","aria-hidden":"true"},s))),_.createElement("span",{id:"errorDialogSeeInKinStore",className:"kw-button kw-row"},_.createElement("span",{className:"kw-button-inner"},_.createElement("a",{href:e.kindleStoreLink,target:"_parent",rel:"noreferrer noopener",className:"kw-button-text kw-text-center kw-litb-error-modal-button-text",id:"error-modal-kindle-store-link",role:"button",onClick:null===(t=e.interactionManager)||void 0===t?void 0:t.goBack},c)))))})),ue=__webpack_require__(86379),le=__webpack_require__(79634),de=__webpack_require__(1085),he=__webpack_require__(80142),fe=__webpack_require__(35807),pe=__webpack_require__(84550),ge=__webpack_require__(14705),me=__webpack_require__(49034),ve=__webpack_require__(82272),ye=__webpack_require__(85856),be=__webpack_require__(95880),we=!0,Ee=__webpack_require__(9731),Se=__webpack_require__(63721),Te=__webpack_require__(20247),_e=__webpack_require__(91428),Pe=__webpack_require__(5130),Ce=__webpack_require__(82182),Re=__webpack_require__(13135),Oe=__webpack_require__(62963),ke=_.lazy((function(){return(0,ge.retry)((function(){return Promise.all([__webpack_require__.e(101),__webpack_require__.e(9424),__webpack_require__.e(7251),__webpack_require__.e(5838)]).then(__webpack_require__.bind(__webpack_require__,65838)).then((function(e){return{default:e.ConnectedReaderUiDesktop}}))}))})),Ie=_.lazy((function(){return(0,ge.retry)((function(){return Promise.all([__webpack_require__.e(101),__webpack_require__.e(2541),__webpack_require__.e(7251),__webpack_require__.e(4247),__webpack_require__.e(5739)]).then(__webpack_require__.bind(__webpack_require__,95739)).then((function(e){return{default:e.ConnectedReaderUiMobile}}))}))})),xe=function(e){O.isIOS()?e&&e.scale&&e.scale>1&&e.preventDefault():(e&&e.touches&&e.touches.length>1||e.ctrlKey||e.type.indexOf("gesture")>=0)&&e.preventDefault()},Ae=__webpack_require__(48361),Le=(0,R.connect)((function(e,t){return{asin:e.appState.asin,bookCardInitialized:e.bookCard.initialized,bookOpen:e.litbBook.bookOpen,coverImageLoaded:e.litbBook.coverImageLoaded,initTime:e.appState.initTime||t.initTime,isBookOfferLoaded:!!e.buyBox.bookOffer,litbBook:e.litbBook.litbBook,productAsin:e.appState.productAsin,renderType:e.appState.renderType,revisionId:e.appState.revisionId}}),(function(e){return{setAppType:function(t){return e((0,Ae.setAppType)(t))},setAsin:function(t){return e((0,Ae.setAsin)(t))},setBookContent:function(t){return e((0,he.setBookContent)(t))},setCoverImageLoaded:function(t){return e((0,he.setCoverImageLoaded)(t))},setInteractionManager:function(t){return e((0,Ae.setInteractionManager)(t))},setNumberOfPages:function(t){return e((0,he.setNumberOfPages)(t))},setPageLabelSet:function(t){return e((0,he.setPageLabelSet)(t))},setProductAsin:function(t){return e((0,Ae.setProductAsin)(t))},setRenderType:function(t){return e((0,Ae.setRenderType)(t))},setRevisionId:function(t){return e((0,Ae.setRevisionId)(t))},setBookInformation:function(t){return e((0,he.setBookInformation)(t))}}}))((function(e){var t=(0,_.useState)(!1),n=t[0],r=t[1],i=(0,_.useState)(!1),o=i[0],a=i[1],s=(0,V.useLitbTranslation)().setTextDirection,c=(0,_.useRef)(new Map).current,u=(0,_.useState)(!1),l=u[0],d=u[1],h=(0,_.useState)(1),f=h[0],p=h[1],g=function(e,t){var n=(0,_.useState)(null),r=n[0],i=n[1],o=(0,R.useDispatch)(),a=(0,R.useSelector)((function(e){return e.buyBox.bookOffer}));(0,_.useEffect)((function(){e&&void 0!==window.P&&P.when("mash").execute((function(e){i(e);var t=document.querySelector("body");null!==t&&t.classList.add("mshop-litb"),document.addEventListener("visibilitychange",(function(){"visible"!==document.visibilityState||we||(we=!0,e.requestFullscreen({failCallback:function(){return we=!1}}))}))}))}),[e]);var s=(0,_.useCallback)((function(){return new Promise((function(n,i){if(e&&a&&a.secondaryCsrfToken&&a.secondaryActionId&&r){var o=ye.getRefTag(t,ye.getRefTagMethodForCTAButton(a.secondaryActionType));r.cancelFullscreen({successCallback:function(){ve.postAcquisitionAction(a.glideClientId,a.acquisitionUrl,a.secondaryCsrfToken||"",a.secondaryActionId||"",o,ve.OfferActionType.SAMPLE),setTimeout((function(){return we=!1}),500),n()},failCallback:i})}else i()}))}),[e,a,r]),c=(0,_.useCallback)((function(){return e&&(null==a?void 0:a.offerListingId)?ve.addToCart(e,a.offerListingId,!0).then((function(e){e.isSuccessful&&(o((0,be.setProceedToCheckoutMetadata)(e)),r&&r.cart.didUpdate({newCartQuantity:e.numberOfItemsInCart}))})):Promise.reject()}),[e,null==a?void 0:a.offerListingId,r]),u=(0,_.useCallback)((function(){return new Promise((function(n,i){if(e&&a&&r){var o=ye.getRefTag(t,ye.getRefTagMethodForCTAButton(a.actionType,a.actionProgramCode));r.cancelFullscreen({successCallback:function(){ve.postAcquisitionAction(a.glideClientId,a.acquisitionUrl,a.csrfToken,a.actionId,o),setTimeout((function(){return we=!1}),500),n()},failCallback:i})}else i()}))}),[e,a,r]),l=(0,_.useCallback)((function(e,t){r&&(null==t||t.preventDefault(),r.cancelFullscreen({successCallback:function(){r.navigate({url:e,successCallback:function(){setTimeout((function(){return we=!1}),1e3)}})}}))}),[r]),d=(0,_.useCallback)((function(){var n=function(e,t){r?r.canLaunchIntentURL({url:e,successCallback:function(n){return n?r.launchIntentURL({url:e,failCallback:t}):t()}}):t()},i=ye.getRefTag(t,"kb");return new Promise((function(t,o){e&&r?r.cancelFullscreen({successCallback:function(){n(me.getKindleAppURL(e),(function(){return n(me.getKindleLiteAppURL(e),(function(){r.openInExternalBrowser({url:me.getAppDownloadURL(i),failCallback:o})}))})),we=!1,t()},failCallback:o}):o()}))}),[e,r]),h=(0,_.useCallback)((function(){return new Promise((function(e,t){r?r.showLoginDialog({successCallback:function(){e()},failCallback:t}):t()}))}),[r]);if(r)return{addSample:s,addToCart:c,anchorOnClick:function(e){return function(t){return l(e,t)}},buyNow:u,goBack:function(e){return function(e,t){e&&(null==t||t.preventDefault(),e.cancelFullscreen({successCallback:function(){return e.goBack()}}))}(r,e)},openExternalLink:function(e){return t=e,void((n=r)&&n.openInExternalBrowser({url:t}));var t,n},openKindleApp:d,showLoginDialog:h}}(e.asin,"kwrp_li"),m=(0,Oe.useFastMetricsManager)();!function(e,t){var n=(0,R.useSelector)((function(e){return e.appState.asin})),r=(0,R.useSelector)((function(e){return e.appState.productAsin})),i=(0,R.useSelector)((function(e){return e.appState.renderType})),o=(0,R.useSelector)((function(e){return e.appState.appType}))||"desktop",a=(0,R.useDispatch)();(0,_.useEffect)((function(){if(n&&i){var s=(0,Y.getCurrentMetrics)(t,n,i);s.startOperation(Y.RendererOperation.API_METADATA);var c=r||n;(0,ue.fetchLitbBookData)(c,n,e,o).then((function(e){null!=n&&(e.asin=n),a((0,he.setLitbBook)(e)),a((0,fe.setShowUpsellWidget)((0,ue.shouldShowUpsellWidget)(e))),s.recordSuccess(Y.RendererOperation.API_METADATA,!0)})).catch((function(){s.recordSuccess(Y.RendererOperation.API_METADATA,!1),s.recordError(Y.RendererOperation.API_METADATA)})).finally((function(){s.stopOperation(Y.RendererOperation.API_METADATA)}))}}),[n,i])}(e.locale,c),function(e,t){var n=(0,R.useSelector)((function(e){return e.appState.productAsin||e.appState.asin})),r=(0,R.useSelector)((function(e){return e.appState.purchaseCompleted})),i=(0,R.useSelector)((function(e){return e.appState.renderType})),o=(0,R.useDispatch)();(0,_.useEffect)((function(){var r=!1;if(n&&i){var a=(0,Y.getCurrentMetrics)(t,n,i);a.startOperation(Y.RendererOperation.LOADED_BUY_BOX),(0,Re.fetchBuyBoxData)(n,e).then((function(e){r||(o((0,be.setBookOffer)(e)),a.recordSuccess(Y.RendererOperation.LOADED_BUY_BOX,!0))})).catch((function(e){r||((0,Se.handleError)("BuyBoxLoadingError",new Error("Failed to load the buy box. Error name: "+e.name+". Error message: "+e.message)),a.recordSuccess(Y.RendererOperation.LOADED_BUY_BOX,!1),a.recordError(Y.RendererOperation.LOADED_BUY_BOX))})).finally((function(){return r||a.stopOperation(Y.RendererOperation.LOADED_BUY_BOX)}))}return function(){r=!0}}),[n,i,r])}(e.locale,c),function(e,t){var n=(0,R.useSelector)((function(e){return e.appState.asin})),r=(0,R.useSelector)((function(e){return e.appState.renderType})),i=(0,R.useSelector)((function(e){return e.litbBook.bookOpen})),o=(0,R.useDispatch)();(0,_.useEffect)((function(){if(n&&i&&r){var a=(0,Y.getCurrentMetrics)(t,n,r);a.startOperation(Y.RendererOperation.RECOMMENDATION_SHOVELER_ITEM_LOADED),function(e,t,n,r,i){var o=new URL(""+window.location.origin+_e.recommendationURL+"/"+e);return n&&o.searchParams.append("max",n.toString()),r&&o.searchParams.append("locale",r),i&&o.searchParams.append("clientId",i),(0,Te.getRequest)(o.href).then((function(e){return e.json()})).then((function(e){return Promise.resolve(e)}))}(n,0,pe.DEFAULT_RECS_SHOVELER_LIMIT,e,(0,ge.getClientIdFromUrl)()).then((function(e){a.recordSuccess(Y.RendererOperation.RECOMMENDATION_SHOVELER_ITEM_LOADED,!0),o((0,he.setRecommendationsData)(e))})).catch((function(){(0,Se.handleError)("SampleRecommendationsLoadingError",new Error("Failed to load the recommendations")),a.recordSuccess(Y.RendererOperation.RECOMMENDATION_SHOVELER_ITEM_LOADED,!1),a.recordError(Y.RendererOperation.RECOMMENDATION_SHOVELER_ITEM_LOADED)})).finally((function(){a.stopOperation(Y.RendererOperation.RECOMMENDATION_SHOVELER_ITEM_LOADED)}))}}),[n,i,r,e])}(e.locale,c),function(e,t){var n=(0,R.useSelector)((function(e){return e.appState.asin})),r=(0,R.useSelector)((function(e){return e.appState.revisionId})),i=(0,R.useSelector)((function(e){return e.appState.renderType})),o=(0,R.useSelector)((function(e){return e.litbBook.bookOpen})),a=(0,R.useSelector)((function(e){return e.litbBook.bookInformation})),s=(0,R.useDispatch)();(0,_.useEffect)((function(){var e=function(e,t){var n=void 0;return e&&e===ue.LITB_RENDER_TYPE.YJHTML?n="YJBinary":e&&e===ue.LITB_RENDER_TYPE.Stucco&&(n=null==t?void 0:t.format),n}(i,a);if(null!==r&&0!==(null==r?void 0:r.length)||(r=null==a?void 0:a.revision),n&&r&&e&&o&&i){var c=(0,Y.getCurrentMetrics)(t,n,i);c.startOperation(Y.RendererOperation.KCMS_METADATA_LOAD),function(e,t,n){var r=_e.kcmsMetadataURL+"/"+e+"?revision="+t+"&format="+n;return(0,Te.getRequest)(r,{},!1).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return(0,Se.handleError)(e),Promise.reject(e)}))}(n,r,e).then((function(e){JSON.stringify(e),s((0,he.setContentKCMSMetadata)(e)),c.recordSuccess(Y.RendererOperation.KCMS_METADATA_LOAD,!0)})).catch((function(e){(0,Se.handleError)("KCMSMetadataLoadingError",new Error("Failed to load the kcms metadata. Error name: "+e.name+". Error message: "+e.message)),c.recordSuccess(Y.RendererOperation.KCMS_METADATA_LOAD,!1),c.recordError(Y.RendererOperation.KCMS_METADATA_LOAD)})).finally((function(){c.stopOperation(Y.RendererOperation.KCMS_METADATA_LOAD)}))}}),[a,o])}(e.locale,c),(0,_.useEffect)((function(){e.interactionManager?e.setInteractionManager(e.interactionManager):g&&e.setInteractionManager(g)}),[e.interactionManager,g]),(0,_.useEffect)((function(){e.setAppType(e.appType)}),[e.appType]),(0,_.useEffect)((function(){var t=(0,ge.getInitialLitbData)(e.asin,e.revisionId,e.renderType),n=t.asin,r=t.revisionId,i=t.format;return e.setAsin(n),e.setRenderType(i),e.setRevisionId(r),p(e.reopenCounter),document.addEventListener("touchstart",xe,{passive:!1}),document.addEventListener("gesturestart",xe,{passive:!1}),document.addEventListener("gesturechange",xe,{passive:!1}),document.addEventListener("wheel",xe,{passive:!1}),function(){document.removeEventListener("touchstart",xe),document.removeEventListener("gesturestart",xe),document.removeEventListener("gesturechange",xe),document.removeEventListener("wheel",xe)}}),[e.reopenCounter]),(0,_.useEffect)((function(){e.reopenCounter>f&&(b(e.renderType),p(e.reopenCounter))}),[e.reopenCounter,e.renderType]),(0,_.useEffect)((function(){if(e.asin&&e.renderType){var t=e.asin,n=e.renderType,r=(0,Y.getCurrentMetrics)(c,t,n);r.startOperation(Y.RendererOperation.INITIAL_RENDER),r.startOperation(Y.RendererOperation.FIRST_FULL_RENDER),r.startOperation(Y.RendererOperation.PRELOAD_METADATA),e.setAppType(e.appType),e.setProductAsin((0,ge.getProductAsinFromUrl)()),b(e.renderType),w(e.renderType),s(x.getTextDirectionFromLocale(e.locale)),r.stopOperation(Y.RendererOperation.INITIAL_RENDER)}}),[e.asin]);var v,y,b=function(e){a(!0),null!==e&&(0,K.recordCountMetric)((0,K.getSuccessMetricName)((0,Y.getMetricName)(Y.RendererOperation.COVER_SHOWN,e)),1)},w=function(e){var t=(0,ge.getClientIdFromUrl)().toUpperCase()||Ee.DEFAULT_CLIENT_ID;if(null!==e){var n=(0,K.getClientIdMetricName)((0,Y.getMetricName)(Y.RendererOperation.BOOK_OPEN,e),t);(0,K.recordCountMetric)(n,1)}},E=function(){return document.getElementsByClassName("kw-litb-error-modal").length>0};return(0,_.useEffect)((function(){d(!1)}),[e.asin,e.productAsin]),(0,_.useEffect)((function(){if(!E()&&(e.litbBook&&e.isBookOfferLoaded&&("desktop"===e.appType||e.bookCardInitialized)||e.bookOpen)&&e.renderType&&o){if(e.renderType===ue.LITB_RENDER_TYPE.Stucco&&(0,de.disableContentForAccessibleUsers)(),e.bookOpen){-1===(n=(0,K.computeTimeMetricFromCustomStartTime)(e.initTime||0))||pe.MIN_COVER_APPEAR-n<=0?a(!1):setTimeout((function(){a(!1)}),pe.MIN_COVER_APPEAR-n),r(!0);var t=(0,K.computeTimeMetricFromCustomStartTime)(e.initTime||0);l||(0,K.recordTimeMetric)((0,K.getLatencyMetricName)((0,Y.getMetricName)(Y.RendererOperation.BOOK_OPEN,e.renderType)),t)}"mobile"===e.appType&&(0,K.recordTimeMetricFromNavigationStart)((0,K.getLatencyMetricName)((0,Y.getMetricName)(Y.RendererOperation.BOOK_CARD_OPEN,e.renderType)))}var n}),[e.litbBook,e.initTime,e.isBookOfferLoaded,e.bookCardInitialized,e.bookOpen,e.asin,e.productAsin,o]),(0,_.useEffect)((function(){var e=function(){E()?(0,K.recordTimeMetricFromNavigationStart)(le.default.LITB_UNLOAD_READER_ERROR_SHOWN):n?(0,K.recordTimeMetricFromNavigationStart)(le.default.LITB_UNLOAD_READER_BOOK_LOADED):(0,K.recordTimeMetricFromNavigationStart)(le.default.LITB_UNLOAD_READER_BOOK_NOT_LOADED)};return window.addEventListener("unload",e),function(){window.removeEventListener("unload",e)}}),[n]),(0,_.useEffect)((function(){var e=function(){m.closeBook()};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[]),v=_.createElement(_.Fragment,null,function(){var t,n=e.asin||e.initAsin;if(n){var r=O.getWindowHeight(),i=(t=n,"https://m.media-amazon.com/images/P/%s.01._SCLZZZZZZZ_SX500_.jpg".replace("%s",t)).replace(/_SY(\d+)_/,"_SY"+r+"_");return _.createElement(U.CSSTransition,{in:o,timeout:300,classNames:"cover-image-container"},_.createElement("div",{id:"coverImageContainer","aria-hidden":"true",className:"cover-image-container"},_.createElement("div",{id:"coverImageContent"},_.createElement("img",{id:"coverImage",src:i,alt:"",key:i}))))}return null}(),e.asin&&e.renderType&&((y=e.renderType)===ue.LITB_RENDER_TYPE.Stucco||y===ue.LITB_RENDER_TYPE.YJHTML||y===ue.LITB_RENDER_TYPE.FixedFormatImage||y===ue.LITB_RENDER_TYPE.YJ)?"desktop"===e.appType?_.createElement(_.Suspense,{fallback:_.createElement("div",null)},_.createElement(ke,{showingCoverImage:o})):_.createElement(_.Suspense,{fallback:_.createElement("div",null)},_.createElement(Ie,{showingCoverImage:o})):null),(0,Ce.SearchProvider)((0,Pe.AnnotationsProvider)(v))})),Me=__webpack_require__(72215),Ne=function(e,t){!e&&t?(0,W.setSampleDepth)(t+1):e&&!t?(0,W.setSampleDepth)(1):e&&t&&(e<t?(0,W.setSampleDepth)(t-1):e>t&&(0,W.setSampleDepth)(t+1))},De=__webpack_require__(36114),Fe=(0,R.connect)((function(e){return{asin:e.appState.asin,renderType:e.appState.renderType,revisionId:e.appState.revisionId}}),(function(e){return{setAsin:function(t){return e((0,Ae.setAsin)(t))},setRenderType:function(t){return e((0,Ae.setRenderType)(t))},setRevisionId:function(t){return e((0,Ae.setRevisionId)(t))},reinitializeLitb:function(t){return e((0,De.reinitialize)(t))},setBookInformation:function(t){return e((0,he.setBookInformation)(t))}}}))((function(e){(0,_.useEffect)((function(){return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}}),[e.asin,e.revisionId,e.renderType]);var t=(0,_.useCallback)((function(t,n,r){e.setRevisionId(r),e.setRenderType(n),e.setAsin(t),(0,Me.bookInformationFactory)(t,n,r).then((function(t){e.setBookInformation(t)})).catch(Se.handleErrors)}),[]);(0,_.useEffect)((function(){e.initAsin&&e.initRenderType&&(e.initAsin===e.asin&&e.initRenderType===e.renderType&&e.initRevisionId===e.revisionId||e.reinitializeLitb(),t(e.initAsin,e.initRenderType,e.initRevisionId||""))}),[e.initAsin,e.initRenderType,e.initRevisionId,e.reopenCounter]);var n=function(n){if("string"==typeof n.data&&(0,W.isValidJson)(n.data)){var r=JSON.parse(n.data);if(r.command===W.MessageCommands.UPDATE_LITB){var i=r.search?r.search:"",o=new URLSearchParams(i),a=o.get("asin");if(a){var s=parseInt(o.get("format")||"2",10),c=o.get("revisionId")||"",u=parseInt(o.get("depth")||"0");e.asin!==a||e.revisionId!==c||e.renderType!==s?(e.reinitializeLitb(Date.now()),t(a,s,c),Ne(u,(0,W.getSampleDepth)())):(0,W.getSampleDepth)()||Ne(u,(0,W.getSampleDepth)())}else(0,W.clearSampleDepth)(),window.parent.postMessage((0,W.createMessage)(W.MessageCommands.CLOSE_LITB),(0,W.getTargetOrigin)())}}};return _.createElement(_.Fragment,null,e.children)})),Be=__webpack_require__(49868),Ue=function(e){var t,n,r,i,o=(i=k.getAsinFromUrl(),new URL("https://"+(0,I.getMarketplace)().storeLink+i)),a=(0,_.useState)(null),s=a[0],c=a[1];t=L.default.ErrorEvent.Error,n=function(e){c(e.detail)},void 0===r&&(r=[]),(0,_.useEffect)((function(){return A.EventManager.registerEventListener(t,n),function(){A.EventManager.deregisterEventListener(t,n)}}),r),(0,_.useEffect)((function(){var t=document.querySelector("body");null!==t&&"desktop"===e.appType&&t.classList.add("desktop-litb")}),[]);var u=x.getLocaleFromUrlOrCookie();return"he_IL"===u&&"desktop"===e.appType&&(u="en_US"),(0,_.useEffect)((function(){document.documentElement.lang=x.getLangFromLocale()}),[]),_.createElement(Fe,{reopenCounter:e.reopenCounter,initAsin:e.asin,initRenderType:e.renderType,initRevisionId:e.revisionId},_.createElement(M.LitbTranslationProvider,{locale:u},_.createElement(N.LitbWeblabProvider,null,_.createElement(Be.LastPositionReadProvider,null,_.createElement(Le,{appType:e.appType,interactionManager:e.interactionManager,reopenCounter:e.reopenCounter,initAsin:e.asin,initTime:e.clickTime,locale:u})),_.createElement(ce,{error:s,kindleStoreLink:o.toString()}))))},je=__webpack_require__(37602),He=function(){return He=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},He.apply(this,arguments)};ee=document.getElementById("assetsCfUrl"),__webpack_require__.p=ee?ee.getAttribute("data-assets-cf-url")+"/":"/";var ze=Promise.resolve().then(__webpack_require__.bind(__webpack_require__,72215)),Ve=Promise.resolve().then(__webpack_require__.bind(__webpack_require__,80142)),Ge=function(e,t,n){return ze.then((function(r){return(0,r.bookInformationFactory)(e,t,n)})).catch(Se.handleErrors)},We=0,qe=!1;window.addEventListener("DOMContentLoaded",(function(){var e=(0,ge.getInitialLitbData)(),t=e.asin,n=e.revisionId,r=e.format;(0,W.getSampleDepth)()||Ge(t,r,n)})),window.addEventListener("message",(function(e){var t=e.data,n=window.location!==window.parent.location?document.referrer:document.location.href;if("string"==typeof t&&(0,W.isValidJson)(t)&&0===n.indexOf(e.origin)){var r=JSON.parse(t);if(r.command===W.MessageCommands.INITIALIZE_LITB){r.newSession&&(0,W.clearSampleDepth)(),window.sessionStorage&&window.sessionStorage.setItem("targetOrigin",document.referrer),We++;var i=He(He({},(0,ge.getInitialLitbData)()),{clickTime:r.time||0});window.LitbInitializer.initReader(i),new URLSearchParams(r.search).get("asin")||((0,W.updateHash)(i.asin,i.revisionId,i.format),(0,W.setSampleDepth)(1))}else r.command===W.MessageCommands.READY_LITB&&(qe=!0)}}),!1),(0,ae.isInIframe)()||window.addEventListener("popstate",W.handlePopState,!1);var Ke=0,Ye=function(){var e,t;if(Ke++,qe)return window.parent.postMessage((0,W.createMessage)(W.MessageCommands.READY_LITB),(0,W.getTargetOrigin)()),void(0,K.recordTimeMetric)(le.default.LITB_DPX_HANDSHAKE_TIME,null===(t=null===(e=window.performance)||void 0===e?void 0:e.now)||void 0===t?void 0:t.call(e));Ke>20?(0,K.recordCountMetric)(le.default.IFRAME_HANDSHAKE_FAILED,1):setTimeout(Ye,100)};Ye(),window.LitbInitializer={initReader:function(e){var t,n;(e||(0,ge.isDebug)()||(0,ge.openApp)())&&((0,je.triggerWeblab)(je.Weblabs.BOOKS_LITB_ASSETS_LATENCY_745921),(0,q.setLitbOpenTimestamp)(),(0,q.buildRumConfiguration)(),(0,K.recordCountMetric)(le.default.LITB_DESKTOP_INTIALIZED,1),(n=(null!==(t=null==e?void 0:e.renderType)&&void 0!==t?t:ue.LITB_RENDER_TYPE.Stucco)!==ue.LITB_RENDER_TYPE.Stucco,void 0===n&&(n=!1),X(void 0,void 0,void 0,(function(){return Z(this,(function(e){return[2,ie(n).then((function(){return(0,K.recordCountMetric)(Y.RendererOperation.STUCCO_SCRIPT_INITIALIZATION+ne(),1)}))]}))}))).finally((function(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,95840)).then((function(t){var n,r=t.store;(0,Se.registerGlobalErrorHandlers)(),(n=document.getElementById("kwrpInitialLoadingSpinner"))&&(n.style.display="none"),O.adjustHeight();var i,o=(0,ge.getInitialLitbData)(null==e?void 0:e.asin,null==e?void 0:e.revisionId,null==e?void 0:e.renderType),a=o.asin,s=o.revisionId,c=o.format;i={asin:a,revisionId:s,format:c,depth:1},(0,ae.isInIframe)()||((0,W.getSampleDepth)()?(0,W.handlePopState)():((0,W.replaceHistoryHash)(i),(0,W.setSampleDepth)(1))),Ge(a,c,s).then((function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(t){return(0,je.triggerKv3WeblabIfApplicable)(),Ve.then((function(t){var n=t.setBookInformation;Promise.resolve().then(__webpack_require__.bind(__webpack_require__,95840)).then((function(t){t.store.dispatch(n(e))}))})),[2]}))}))}));var u=He(He({},e),{asin:a,revisionId:s,renderType:c});(0,C.render)(_.createElement(R.Provider,{store:r},_.createElement(Ue,He({appType:"desktop",reopenCounter:We||1},u))),document.getElementById("reader"))}))})))}},(0,K.recordTimeMetric)(le.default.LITB_ASSETS_LOAD_TIME,null===(Q=null===(J=window.performance)||void 0===J?void 0:J.now)||void 0===Q?void 0:Q.call(J))}()})();